(function(b,a){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=b.document?a(b,true):function(c){if(!c.document){throw new Error("jQuery requires a window with a document")}return a(c)}}else{a(b)}}(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var document=window.document,version="",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return num!=null?(num<0?this[num+this.length]:this[num]):slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else{if(copy!==undefined){target[name]=copy}}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window},isNumeric:function(obj){return !jQuery.isArray(obj)&&(obj-parseFloat(obj)+1)>=0},isPlainObject:function(obj){if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}if(obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}return true},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},type:function(obj){if(obj==null){return obj+""}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray){for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false){break}}}else{for(i in obj){value=callback.apply(obj[i],args);if(value===false){break}}}}else{if(isArray){for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}else{for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}}return obj},trim:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArraylike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArraylike(obj){var length="length" in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}if(obj.nodeType===1&&length){return true}return type==="array"||length===0||typeof length==="number"&&length>0&&(length-1) in obj}var Sizzle=
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
(function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date(),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true}return 0},MAX_NEGATIVE=1<<31,hasOwn=({}).hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i}}return -1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)},unloadHandler=function(){setDocument()};try{push.apply((arr=slice.call(preferredDoc.childNodes)),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while((target[j++]=els[i++])){}target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)}context=context||document;results=results||[];nodeType=context.nodeType;if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results}if(!seed&&documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else{if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else{if((m=match[3])&&support.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}}}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;newContext=context;newSelector=nodeType!==1&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if((old=context.getAttribute("id"))){nid=old.replace(rescape,"\\$&")}else{context.setAttribute("id",nid)}nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+toSelector(groups[i])}newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;newSelector=groups.join(",")}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(!old){context.removeAttribute("id")}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]}return(cache[key+" "]=value)}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return !!fn(div)}catch(e){return false}finally{if(div.parentNode){div.parentNode.removeChild(div)}div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=attrs.length;while(i--){Expr.attrHandle[arr[i]]=handler}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff}if(cur){while((cur=cur.nextSibling)){if(cur===b){return -1}}}return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j])}}})})}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;docElem=doc.documentElement;parent=doc.defaultView;if(parent&&parent!==parent.top){if(parent.addEventListener){parent.addEventListener("unload",unloadHandler,false)}else{if(parent.attachEvent){parent.attachEvent("onunload",unloadHandler)}}}documentIsHTML=!isXML(doc);support.attributes=assert(function(div){div.className="i";return !div.getAttribute("className")});support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));return !div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(doc.getElementsByClassName);support.getById=assert(function(div){docElem.appendChild(div).id=expando;return !doc.getElementsByName||!doc.getElementsByName(expando).length});if(support.getById){Expr.find.ID=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{delete Expr.find.ID;Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag)}else{if(support.qsa){return context.querySelectorAll(tag)}}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while((elem=results[i++])){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results};Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(documentIsHTML){return context.getElementsByClassName(className)}};rbuggyMatches=[];rbuggyQSA=[];if((support.qsa=rnative.test(doc.querySelectorAll))){assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\f]' msallowcapture=''><option selected=''></option></select>";if(div.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")}if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!div.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}if(!div.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]")}});assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=")}if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if((support.matchesSelector=rnative.test((matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)))){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)})}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true}}}return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||(!support.sortDetached&&b.compareDocumentPosition(a)===compare)){if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return -1}if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1}return sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0}else{if(aup===bup){return siblingCheck(a,b)}}cur=a;while((cur=cur.parentNode)){ap.unshift(cur)}cur=b;while((cur=cur.parentNode)){bp.unshift(cur)}while(ap[i]===bp[i]){i++}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return doc};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)}return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while((elem=results[i++])){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while((node=elem[i++])){ret+=getText(node)}}else{if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else{if(nodeType===3||nodeType===4){return elem.nodeValue}}}return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+((match[7]+match[8])||match[3]==="odd")}else{if(match[3]){Sizzle.error(match[0])}}return match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr.CHILD.test(match[0])){return null}if(match[3]){match[2]=match[4]||match[5]||""}else{if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}}return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false}},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return !!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while((node=node[dir])){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}}else{if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns){diff=cache[1]}else{while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){(node[expando]||(node[expando]={}))[type]=[dirruns,diff]}if(node===elem){break}}}}}diff-=last;return diff===first||(diff%first===0&&diff/first>=0)}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return !results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if((elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected)},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false}}return true},parent:function(elem){return !Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},text:function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};Expr.pseudos.nth=Expr.pseudos.eq;for(i in {radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in {submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters();tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push((tokens=[]))}matched=false;if((match=rcombinators.exec(soFar))){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return(newCache[2]=oldCache[2])}else{outerCache[dir]=newCache;if((newCache[2]=matcher(elem,context,xml))){return true}}}}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem))}}postFinder(null,(matcherOut=[]),temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){var ret=(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1),len=elems.length;if(outermost){outermostContext=context!==document&&context}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while((matcher=elementMatchers[j++])){if(matcher(elem,context,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique}}if(bySet){if((elem=!matcher&&elem)){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while((matcher=setMatchers[j++])){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector)}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize((selector=compiled.selector||selector));results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}else{if(compiled){context=context.parentNode}}selector=selector.slice(tokens.shift().value.length)}i=matchExpr.needsContext.test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break}if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context);return results};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#"})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)}})}if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue}})}if(!assert(function(div){return div.getAttribute("disabled")==null})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}})}return Sizzle})(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=(/^<(\w+)\s*\/?>(?:<\/\1>|)$/);var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return !!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return(elem===qualifier)!==not})}if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return(indexOf.call(qualifier,elem)>=0)!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return !!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector){return this}if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else{if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return this.constructor(context).find(selector)}}}else{if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else{if(jQuery.isFunction(selector)){return typeof rootjQuery.ready!=="undefined"?rootjQuery.ready(selector):selector(jQuery)}}}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.extend({dir:function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched},sibling:function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched}});jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.unique(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnotwhite=(/\S+/g);var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?(optionsCache[options]||createOptions(options)):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else{if(memory){list=[]}else{self.disable()}}}},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg)}}else{if(arg&&arg.length&&type!=="string"){add(arg)}}})})(arguments);if(firing){firingLength=list.length}else{if(memory){firingStart=start;fire(memory)}}}return this},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)},empty:function(){list=[];firingLength=0;return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return !list},lock:function(){stack=undefined;if(!memory){self.disable()}return this},locked:function(){return !stack},fireWith:function(context,args){if(list&&(!fired||stack)){args=args||[];args=[context,args.slice?args.slice():args];if(firing){stack.push(args)}else{fire(args)}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return !!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&jQuery.isFunction(subordinate.promise))?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else{if(!(--remaining)){deferred.resolveWith(contexts,values)}}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");jQuery(document).off("ready")}}});function completed(){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false);jQuery.ready()}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}}return readyList.promise(obj)};jQuery.ready.promise();var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)}}else{if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!(+owner.nodeType)};function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=jQuery.expando+Data.uid++}Data.uid=1;Data.accepts=jQuery.acceptData;Data.prototype={key:function(owner){if(!Data.accepts(owner)){return 0}var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock};Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock;jQuery.extend(owner,descriptor)}}if(!this.cache[unlock]){this.cache[unlock]={}}return unlock},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if(typeof data==="string"){cache[data]=value}else{if(jQuery.isEmptyObject(cache)){jQuery.extend(this.cache[unlock],data)}else{for(prop in data){cache[prop]=data[prop]}}}return cache},get:function(owner,key){var cache=this.cache[this.key(owner)];return key===undefined?cache:cache[key]},access:function(owner,key,value){var stored;if(key===undefined||((key&&typeof key==="string")&&value===undefined)){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))}this.set(owner,key,value);return value!==undefined?value:key},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(key===undefined){this.cache[unlock]={}}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase))}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel]}else{name=camel;name=name in cache?[name]:(name.match(rnotwhite)||[])}}i=name.length;while(i--){delete cache[name[i]]}}},hasData:function(owner){return !jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function(owner){if(owner[this.expando]){delete this.cache[owner[this.expando]]}}};var data_priv=new Data();var data_user=new Data();var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}data_user.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function(elem,name,data){return data_user.access(elem,name,data)},removeData:function(elem,name){data_user.remove(elem,name)},_data:function(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function(elem,name){data_priv.remove(elem,name)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=data_user.get(elem);if(elem.nodeType===1&&!data_priv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}data_priv.set(elem,"hasDataAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){data_user.set(this,key)})}return access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&value===undefined){data=data_user.get(elem,key);if(data!==undefined){return data}data=data_user.get(elem,camelKey);if(data!==undefined){return data}data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data}return}this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value);if(key.indexOf("-")!==-1&&data!==undefined){data_user.set(this,key,value)}})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){data_user.remove(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=data_priv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=data_priv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=data_priv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};var rcheckableType=(/^(?:checkbox|radio)$/i);(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin" in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!==strundefined&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined}}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;data_priv.remove(elem,"events")}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&jQuery.acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||event.type!=="click")){for(;cur!==this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length}if(matches[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})}}}}if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)})}return handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)))}return event}},fix:function(event){if(event[jQuery.expando]){return event}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}}copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target){event.target=document}if(event.target.nodeType===3){event.target=event.target.parentNode}return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem)}else{jQuery.event.dispatch.call(elem,e)}if(e.isDefaultPrevented()){event.preventDefault()}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&e.preventDefault){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&e.stopPropagation){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&e.stopImmediatePropagation){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}data_priv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);data_priv.remove(doc,fix)}else{data_priv.access(doc,fix,attaches)}}}})}jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){this.on(type,selector,data,types[type],one)}return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else{if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}}if(fn===false){fn=returnFalse}else{if(!fn){return this}}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(data_priv.hasData(src)){pdataOld=data_priv.access(src);pdataCur=data_priv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(data_user.hasData(src)){udataOld=data_user.access(src);udataCur=jQuery.extend({},udataOld);data_user.set(dest,udataCur)}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else{if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},buildFragment:function(elems,context,scripts,selection){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else{if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}}fragment.textContent="";i=0;while((elem=nodes[i++])){if(selection&&jQuery.inArray(elem,selection)!==-1){continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while((elem=tmp[j++])){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment},cleanData:function(elems){var data,elem,type,key,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(jQuery.acceptData(elem)){key=elem[data_priv.expando];if(key&&(data=data_priv.cache[key])){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}if(data_priv.cache[key]){delete data_priv.cache[key]}}}delete data_user.cache[elem[data_user.expando]]}}});jQuery.fn.extend({text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},remove:function(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem=elems[i])!=null;i++){if(!keepData&&elem.nodeType===1){jQuery.cleanData(getAll(elem))}if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem)){setGlobalEval(getAll(elem,"script"))}elem.parentNode.removeChild(elem)}}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];this.domManip(arguments,function(elem){arg=this.parentNode;jQuery.cleanData(getAll(this));if(arg){arg.replaceChild(elem,this)}});return arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,true)},domManip:function(args,callback){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||(l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value))){return this.each(function(index){var self=set.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}self.domManip(args,callback)})}if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,this);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(this[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}}}}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={};function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}var rmargin=(/^margin/);var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){if(elem.ownerDocument.defaultView.opener){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)}return window.getComputedStyle(elem,null)};function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name]}if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}(function(){var pixelPositionVal,boxSizingReliableVal,docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute";container.appendChild(div);function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";div.innerHTML="";docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal=divStyle.top!=="1%";boxSizingReliableVal=divStyle.width==="4px";docElem.removeChild(container)}if(window.getComputedStyle){jQuery.extend(support,{pixelPosition:function(){computePixelPositionAndBoxSizingReliable();return pixelPositionVal},boxSizingReliable:function(){if(boxSizingReliableVal==null){computePixelPositionAndBoxSizingReliable()}return boxSizingReliableVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";docElem.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight);docElem.removeChild(container);div.removeChild(marginDiv);return ret}})}})();jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style){return name}var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name}}return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return(val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles))+"px"}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=data_priv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))}}else{hidden=isHidden(elem);if(display!=="none"||!hidden){data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||value!==value){return}if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set" in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get" in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return !result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else{if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.easing={linear:function(p){return p},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2}};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||unit!=="px"&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3];parts=parts||[];start=+target||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations)}if(parts){start=tween.start=+start||+target||0;tween.unit=unit;tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined});return(fxNow=jQuery.now())}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}function createTween(value,prop,animation){var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if((tween=collection[index].call(animation,prop,value))){return tween}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height" in props||"width" in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");checkDisplay=display==="none"?data_priv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display;if(checkDisplay==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block"}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true}else{continue}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else{display=undefined}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden" in dataShow){hidden=dataShow.hidden}}else{dataShow=data_priv.access(elem,"fxshow",{})}if(toggle){dataShow.hidden=!hidden}if(hidden){jQuery(elem).show()}else{anim.done(function(){jQuery(elem).hide()})}anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}else{if((display==="none"?defaultDisplay(elem.nodeName):display)==="inline"){style.display=display}}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand" in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.split(" ")}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback)}else{animationPrefilters.push(callback)}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||data_priv.get(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start()}else{jQuery.timers.pop()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute===strundefined){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name)}else{if(hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,value+"");return value}}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while((name=attrNames[i++])){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false}elem.removeAttribute(name)}}},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){return hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem[name]=value)}else{return hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]}},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while((clazz=classes[j++])){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=jQuery.trim(cur);if(elem.className!==finalValue){elem.className=finalValue}}}}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=arguments.length===0||typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;while((clazz=classes[j++])){while(cur.indexOf(" "+clazz+" ")>=0){cur=cur.replace(" "+clazz+" "," ")}}finalValue=value?jQuery.trim(cur):"";if(elem.className!==finalValue){elem.className=finalValue}}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];while((className=classNames[i++])){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else{if(type===strundefined||type==="boolean"){if(this.className){data_priv.set(this,"__className__",this.className)}this.className=this.className||value===false?"":data_priv.get(this,"__className__")||""}}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true}}return false}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get" in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else{if(typeof val==="number"){val+=""}else{if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}}}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set" in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if((option.selected=jQuery.inArray(option.value,values)>=0)){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0)}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now();var rquery=(/\?/);jQuery.parseJSON=function(data){return JSON.parse(data+"")};jQuery.parseXML=function(data){var xml,tmp;if(!data||typeof data!=="string"){return null}try{tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=undefined}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocation=window.location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func)){while((dataType=dataTypes[i++])){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=(structure===transports);function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else{if(seekingTransport){return !(selected=dataTypeOrTransport)}}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0] in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else{if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else{if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}}break}}}}if(conv!==true){if(conv&&s["throws"]){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]]}}else{jqXHR.always(map[jqXHR.status])}}return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443"))))}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=(s.url+=(rquery.test(cacheURL)?"&":"?")+s.data);delete s.data}if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++}}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in {success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return}state=2;if(timeoutTimer){clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204||s.type==="HEAD"){statusText="nocontent"}else{if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,"throws":true})};jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0};jQuery.expr.filters.visible=function(elem){return !jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)}})}else{if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():(value==null?"":value);s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest()}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();if(window.attachEvent){window.attachEvent("onunload",function(){for(var key in xhrCallbacks){xhrCallbacks[key]()}})}support.cors=!!xhrSupported&&("withCredentials" in xhrSupported);support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){xhr.setRequestHeader(i,headers[i])}callback=function(type){return function(){if(callback){delete xhrCallbacks[id];callback=xhr.onload=xhr.onerror=null;if(type==="abort"){xhr.abort()}else{if(type==="error"){complete(xhr.status,xhr.statusText)}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,typeof xhr.responseText==="string"?{text:xhr.responseText}:undefined,xhr.getAllResponseHeaders())}}}}};xhr.onload=callback();xhr.onerror=callback("error");callback=xhrCallbacks[id]=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback){throw e}}},abort:function(){if(callback){callback()}}}}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET"}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({async:true,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type)}});document.head.appendChild(script[0])},abort:function(){if(callback){callback()}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(nonce++));this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else{if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=jQuery.buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=jQuery.trim(url.slice(off));url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else{if(params&&typeof params==="object"){type="POST"}}if(self.length>0){jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])})}return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)}if(options.top!=null){props.top=(options.top-curOffset.top)+curTop}if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft}if("using" in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}if(typeof elem.getBoundingClientRect!==strundefined){box=elem.getBoundingClientRect()}win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}},position:function(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||docElem;while(offsetParent&&(!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent}return offsetParent||docElem})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset)}else{elem[method]=val}},method,val,arguments.length,null)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.size=function(){return this.length};jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if(typeof noGlobal===strundefined){window.jQuery=window.$=jQuery}return jQuery}));
/*!
 * Bootstrap v3.3.5 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */
if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(b){var a=b.fn.jquery.split(" ")[0].split(".");if((a[0]<2&&a[1]<9)||(a[0]==1&&a[1]==9&&a[2]<1)){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}}(jQuery);+function(b){function a(){var e=document.createElement("bootstrap");var d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in d){if(e.style[c]!==undefined){return{end:d[c]}}}return false}b.fn.emulateTransitionEnd=function(e){var d=false;var c=this;b(this).one("bsTransitionEnd",function(){d=true});var f=function(){if(!d){b(c).trigger(b.support.transition.end)}};setTimeout(f,e);return this};b(function(){b.support.transition=a();if(!b.support.transition){return}b.event.special.bsTransitionEnd={bindType:b.support.transition.end,delegateType:b.support.transition.end,handle:function(c){if(b(c.target).is(this)){return c.handleObj.handler.apply(this,arguments)}}}})}(jQuery);+function(e){var d='[data-dismiss="alert"]';var b=function(f){e(f).on("click",d,this.close)};b.VERSION="3.3.5";b.TRANSITION_DURATION=150;b.prototype.close=function(j){var i=e(this);var g=i.attr("data-target");if(!g){g=i.attr("href");g=g&&g.replace(/.*(?=#[^\s]*$)/,"")}var h=e(g);if(j){j.preventDefault()}if(!h.length){h=i.closest(".alert")}h.trigger(j=e.Event("close.bs.alert"));if(j.isDefaultPrevented()){return}h.removeClass("in");function f(){h.detach().trigger("closed.bs.alert").remove()}e.support.transition&&h.hasClass("fade")?h.one("bsTransitionEnd",f).emulateTransitionEnd(b.TRANSITION_DURATION):f()};function c(f){return this.each(function(){var h=e(this);var g=h.data("bs.alert");if(!g){h.data("bs.alert",(g=new b(this)))}if(typeof f=="string"){g[f].call(h)}})}var a=e.fn.alert;e.fn.alert=c;e.fn.alert.Constructor=b;e.fn.alert.noConflict=function(){e.fn.alert=a;return this};e(document).on("click.bs.alert.data-api",d,b.prototype.close)}(jQuery);+function(d){var b=function(f,e){this.$element=d(f);this.options=d.extend({},b.DEFAULTS,e);this.isLoading=false};b.VERSION="3.3.5";b.DEFAULTS={loadingText:"loading..."};b.prototype.setState=function(g){var i="disabled";var e=this.$element;var h=e.is("input")?"val":"html";var f=e.data();g+="Text";if(f.resetText==null){e.data("resetText",e[h]())}setTimeout(d.proxy(function(){e[h](f[g]==null?this.options[g]:f[g]);if(g=="loadingText"){this.isLoading=true;e.addClass(i).attr(i,i)}else{if(this.isLoading){this.isLoading=false;e.removeClass(i).removeAttr(i)}}},this),0)};b.prototype.toggle=function(){var f=true;var e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var g=this.$element.find("input");if(g.prop("type")=="radio"){if(g.prop("checked")){f=false}e.find(".active").removeClass("active");this.$element.addClass("active")}else{if(g.prop("type")=="checkbox"){if((g.prop("checked"))!==this.$element.hasClass("active")){f=false}this.$element.toggleClass("active")}}g.prop("checked",this.$element.hasClass("active"));if(f){g.trigger("change")}}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};function c(e){return this.each(function(){var h=d(this);var g=h.data("bs.button");var f=typeof e=="object"&&e;if(!g){h.data("bs.button",(g=new b(this,f)))}if(e=="toggle"){g.toggle()}else{if(e){g.setState(e)}}})}var a=d.fn.button;d.fn.button=c;d.fn.button.Constructor=b;d.fn.button.noConflict=function(){d.fn.button=a;return this};d(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(g){var f=d(g.target);if(!f.hasClass("btn")){f=f.closest(".btn")}c.call(f,"toggle");if(!(d(g.target).is('input[type="radio"]')||d(g.target).is('input[type="checkbox"]'))){g.preventDefault()}}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(f){d(f.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(f.type))})}(jQuery);+function(c){var d=function(g,f){this.$element=c(g);this.$indicators=this.$element.find(".carousel-indicators");this.options=f;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",c.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart" in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",c.proxy(this.pause,this)).on("mouseleave.bs.carousel",c.proxy(this.cycle,this))};d.VERSION="3.3.5";d.TRANSITION_DURATION=600;d.DEFAULTS={interval:5000,pause:"hover",wrap:true,keyboard:true};d.prototype.keydown=function(f){if(/input|textarea/i.test(f.target.tagName)){return}switch(f.which){case 37:this.prev();break;case 39:this.next();break;default:return}f.preventDefault()};d.prototype.cycle=function(f){f||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(c.proxy(this.next,this),this.options.interval));return this};d.prototype.getItemIndex=function(f){this.$items=f.parent().children(".item");return this.$items.index(f||this.$active)};d.prototype.getItemForDirection=function(j,i){var f=this.getItemIndex(i);var g=(j=="prev"&&f===0)||(j=="next"&&f==(this.$items.length-1));if(g&&!this.options.wrap){return i}var k=j=="prev"?-1:1;var h=(f+k)%this.$items.length;return this.$items.eq(h)};d.prototype.to=function(h){var g=this;var f=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(h>(this.$items.length-1)||h<0){return}if(this.sliding){return this.$element.one("slid.bs.carousel",function(){g.to(h)})}if(f==h){return this.pause().cycle()}return this.slide(h>f?"next":"prev",this.$items.eq(h))};d.prototype.pause=function(f){f||(this.paused=true);if(this.$element.find(".next, .prev").length&&c.support.transition){this.$element.trigger(c.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};d.prototype.next=function(){if(this.sliding){return}return this.slide("next")};d.prototype.prev=function(){if(this.sliding){return}return this.slide("prev")};d.prototype.slide=function(m,i){var p=this.$element.find(".item.active");var g=i||this.getItemForDirection(m,p);var k=this.interval;var n=m=="next"?"left":"right";var j=this;if(g.hasClass("active")){return(this.sliding=false)}var l=g[0];var f=c.Event("slide.bs.carousel",{relatedTarget:l,direction:n});this.$element.trigger(f);if(f.isDefaultPrevented()){return}this.sliding=true;k&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=c(this.$indicators.children()[this.getItemIndex(g)]);h&&h.addClass("active")}var o=c.Event("slid.bs.carousel",{relatedTarget:l,direction:n});if(c.support.transition&&this.$element.hasClass("slide")){g.addClass(m);g[0].offsetWidth;p.addClass(n);g.addClass(n);p.one("bsTransitionEnd",function(){g.removeClass([m,n].join(" ")).addClass("active");p.removeClass(["active",n].join(" "));j.sliding=false;setTimeout(function(){j.$element.trigger(o)},0)}).emulateTransitionEnd(d.TRANSITION_DURATION)}else{p.removeClass("active");g.addClass("active");this.sliding=false;this.$element.trigger(o)}k&&this.cycle();return this};function b(f){return this.each(function(){var j=c(this);var i=j.data("bs.carousel");var g=c.extend({},d.DEFAULTS,j.data(),typeof f=="object"&&f);var h=typeof f=="string"?f:g.slide;if(!i){j.data("bs.carousel",(i=new d(this,g)))}if(typeof f=="number"){i.to(f)}else{if(h){i[h]()}else{if(g.interval){i.pause().cycle()}}}})}var a=c.fn.carousel;c.fn.carousel=b;c.fn.carousel.Constructor=d;c.fn.carousel.noConflict=function(){c.fn.carousel=a;return this};var e=function(k){var g;var j=c(this);var f=c(j.attr("data-target")||(g=j.attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,""));if(!f.hasClass("carousel")){return}var h=c.extend({},f.data(),j.data());var i=j.attr("data-slide-to");if(i){h.interval=false}b.call(f,h);if(i){f.data("bs.carousel").to(i)}k.preventDefault()};c(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e);c(window).on("load",function(){c('[data-ride="carousel"]').each(function(){var f=c(this);b.call(f,f.data())})})}(jQuery);+function(d){var e=function(g,f){this.$element=d(g);this.options=d.extend({},e.DEFAULTS,f);this.$trigger=d('[data-toggle="collapse"][href="#'+g.id+'"],[data-toggle="collapse"][data-target="#'+g.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle){this.toggle()}};e.VERSION="3.3.5";e.TRANSITION_DURATION=350;e.DEFAULTS={toggle:true};e.prototype.dimension=function(){var f=this.$element.hasClass("width");return f?"width":"height"};e.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in")){return}var h;var j=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(j&&j.length){h=j.data("bs.collapse");if(h&&h.transitioning){return}}var g=d.Event("show.bs.collapse");this.$element.trigger(g);if(g.isDefaultPrevented()){return}if(j&&j.length){b.call(j,"hide");h||j.data("bs.collapse",null)}var k=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[k](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[k]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!d.support.transition){return f.call(this)}var i=d.camelCase(["scroll",k].join("-"));this.$element.one("bsTransitionEnd",d.proxy(f,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[k](this.$element[0][i])};e.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in")){return}var g=d.Event("hide.bs.collapse");this.$element.trigger(g);if(g.isDefaultPrevented()){return}var h=this.dimension();this.$element[h](this.$element[h]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var f=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!d.support.transition){return f.call(this)}this.$element[h](0).one("bsTransitionEnd",d.proxy(f,this)).emulateTransitionEnd(e.TRANSITION_DURATION)};e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};e.prototype.getParent=function(){return d(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(d.proxy(function(h,g){var f=d(g);this.addAriaAndCollapsedClass(c(f),f)},this)).end()};e.prototype.addAriaAndCollapsedClass=function(g,f){var h=g.hasClass("in");g.attr("aria-expanded",h);f.toggleClass("collapsed",!h).attr("aria-expanded",h)};function c(f){var g;var h=f.attr("data-target")||(g=f.attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,"");return d(h)}function b(f){return this.each(function(){var i=d(this);var h=i.data("bs.collapse");var g=d.extend({},e.DEFAULTS,i.data(),typeof f=="object"&&f);if(!h&&g.toggle&&/show|hide/.test(f)){g.toggle=false}if(!h){i.data("bs.collapse",(h=new e(this,g)))}if(typeof f=="string"){h[f]()}})}var a=d.fn.collapse;d.fn.collapse=b;d.fn.collapse.Constructor=e;d.fn.collapse.noConflict=function(){d.fn.collapse=a;return this};d(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(j){var i=d(this);if(!i.attr("data-target")){j.preventDefault()}var f=c(i);var h=f.data("bs.collapse");var g=h?"toggle":i.data();b.call(f,g)})}(jQuery);+function(h){var e=".dropdown-backdrop";var b='[data-toggle="dropdown"]';var a=function(i){h(i).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.5";function f(k){var i=k.attr("data-target");if(!i){i=k.attr("href");i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")}var j=i&&h(i);return j&&j.length?j:k.parent()}function d(i){if(i&&i.which===3){return}h(e).remove();h(b).each(function(){var l=h(this);var k=f(l);var j={relatedTarget:this};if(!k.hasClass("open")){return}if(i&&i.type=="click"&&/input|textarea/i.test(i.target.tagName)&&h.contains(k[0],i.target)){return}k.trigger(i=h.Event("hide.bs.dropdown",j));if(i.isDefaultPrevented()){return}l.attr("aria-expanded","false");k.removeClass("open").trigger("hidden.bs.dropdown",j)})}a.prototype.toggle=function(m){var l=h(this);if(l.is(".disabled, :disabled")){return}var k=f(l);var j=k.hasClass("open");d();if(!j){if("ontouchstart" in document.documentElement&&!k.closest(".navbar-nav").length){h(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(h(this)).on("click",d)}var i={relatedTarget:this};k.trigger(m=h.Event("show.bs.dropdown",i));if(m.isDefaultPrevented()){return}l.trigger("focus").attr("aria-expanded","true");k.toggleClass("open").trigger("shown.bs.dropdown",i)}return false};a.prototype.keydown=function(m){if(!/(38|40|27|32)/.test(m.which)||/input|textarea/i.test(m.target.tagName)){return}var l=h(this);m.preventDefault();m.stopPropagation();if(l.is(".disabled, :disabled")){return}var k=f(l);var j=k.hasClass("open");if(!j&&m.which!=27||j&&m.which==27){if(m.which==27){k.find(b).trigger("focus")}return l.trigger("click")}var n=" li:not(.disabled):visible a";var o=k.find(".dropdown-menu"+n);if(!o.length){return}var i=o.index(m.target);if(m.which==38&&i>0){i--}if(m.which==40&&i<o.length-1){i++}if(!~i){i=0}o.eq(i).trigger("focus")};function g(i){return this.each(function(){var k=h(this);var j=k.data("bs.dropdown");if(!j){k.data("bs.dropdown",(j=new a(this)))}if(typeof i=="string"){j[i].call(k)}})}var c=h.fn.dropdown;h.fn.dropdown=g;h.fn.dropdown.Constructor=a;h.fn.dropdown.noConflict=function(){h.fn.dropdown=c;return this};h(document).on("click.bs.dropdown.data-api",d).on("click.bs.dropdown.data-api",".dropdown form",function(i){i.stopPropagation()}).on("click.bs.dropdown.data-api",b,a.prototype.toggle).on("keydown.bs.dropdown.data-api",b,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery);+function(d){var b=function(f,e){this.options=e;this.$body=d(document.body);this.$element=d(f);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,d.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};b.VERSION="3.3.5";b.TRANSITION_DURATION=300;b.BACKDROP_TRANSITION_DURATION=150;b.DEFAULTS={backdrop:true,keyboard:true,show:true};b.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)};b.prototype.show=function(h){var f=this;var g=d.Event("show.bs.modal",{relatedTarget:h});this.$element.trigger(g);if(this.isShown||g.isDefaultPrevented()){return}this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',d.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){f.$element.one("mouseup.dismiss.bs.modal",function(i){if(d(i.target).is(f.$element)){f.ignoreBackdropClick=true}})});this.backdrop(function(){var j=d.support.transition&&f.$element.hasClass("fade");if(!f.$element.parent().length){f.$element.appendTo(f.$body)}f.$element.show().scrollTop(0);f.adjustDialog();if(j){f.$element[0].offsetWidth}f.$element.addClass("in");f.enforceFocus();var i=d.Event("shown.bs.modal",{relatedTarget:h});j?f.$dialog.one("bsTransitionEnd",function(){f.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(b.TRANSITION_DURATION):f.$element.trigger("focus").trigger(i)})};b.prototype.hide=function(f){if(f){f.preventDefault()}f=d.Event("hide.bs.modal");this.$element.trigger(f);if(!this.isShown||f.isDefaultPrevented()){return}this.isShown=false;this.escape();this.resize();d(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");d.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",d.proxy(this.hideModal,this)).emulateTransitionEnd(b.TRANSITION_DURATION):this.hideModal()};b.prototype.enforceFocus=function(){d(document).off("focusin.bs.modal").on("focusin.bs.modal",d.proxy(function(f){if(this.$element[0]!==f.target&&!this.$element.has(f.target).length){this.$element.trigger("focus")}},this))};b.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",d.proxy(function(f){f.which==27&&this.hide()},this))}else{if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}}};b.prototype.resize=function(){if(this.isShown){d(window).on("resize.bs.modal",d.proxy(this.handleUpdate,this))}else{d(window).off("resize.bs.modal")}};b.prototype.hideModal=function(){var e=this;this.$element.hide();this.backdrop(function(){e.$body.removeClass("modal-open");e.resetAdjustments();e.resetScrollbar();e.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(i){var h=this;var f=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=d.support.transition&&f;this.$backdrop=d(document.createElement("div")).addClass("modal-backdrop "+f).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",d.proxy(function(j){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(j.target!==j.currentTarget){return}this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(e){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");if(!i){return}e?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(b.BACKDROP_TRANSITION_DURATION):i()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){h.removeBackdrop();i&&i()};d.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(b.BACKDROP_TRANSITION_DURATION):g()}else{if(i){i()}}}};b.prototype.handleUpdate=function(){this.adjustDialog()};b.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})};b.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};b.prototype.checkScrollbar=function(){var f=window.innerWidth;if(!f){var e=document.documentElement.getBoundingClientRect();f=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<f;this.scrollbarWidth=this.measureScrollbar()};b.prototype.setScrollbar=function(){var e=parseInt((this.$body.css("padding-right")||0),10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing){this.$body.css("padding-right",e+this.scrollbarWidth)}};b.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};b.prototype.measureScrollbar=function(){var f=document.createElement("div");f.className="modal-scrollbar-measure";this.$body.append(f);var e=f.offsetWidth-f.clientWidth;this.$body[0].removeChild(f);return e};function c(e,f){return this.each(function(){var i=d(this);var h=i.data("bs.modal");var g=d.extend({},b.DEFAULTS,i.data(),typeof e=="object"&&e);if(!h){i.data("bs.modal",(h=new b(this,g)))}if(typeof e=="string"){h[e](f)}else{if(g.show){h.show(f)}}})}var a=d.fn.modal;d.fn.modal=c;d.fn.modal.Constructor=b;d.fn.modal.noConflict=function(){d.fn.modal=a;return this};d(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(j){var i=d(this);var g=i.attr("href");var f=d(i.attr("data-target")||(g&&g.replace(/.*(?=#[^\s]+$)/,"")));var h=f.data("bs.modal")?"toggle":d.extend({remote:!/#/.test(g)&&g},f.data(),i.data());if(i.is("a")){j.preventDefault()}f.one("show.bs.modal",function(e){if(e.isDefaultPrevented()){return}f.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})});c.call(f,h,this)})}(jQuery);+function(d){var c=function(f,e){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",f,e)};c.VERSION="3.3.5";c.TRANSITION_DURATION=150;c.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};c.prototype.init=function(l,j,g){this.enabled=true;this.type=l;this.$element=d(j);this.options=this.getOptions(g);this.$viewport=this.options.viewport&&d(d.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):(this.options.viewport.selector||this.options.viewport));this.inState={click:false,hover:false,focus:false};if(this.$element[0] instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var k=this.options.trigger.split(" ");for(var h=k.length;h--;){var f=k[h];if(f=="click"){this.$element.on("click."+this.type,this.options.selector,d.proxy(this.toggle,this))}else{if(f!="manual"){var m=f=="hover"?"mouseenter":"focusin";var e=f=="hover"?"mouseleave":"focusout";this.$element.on(m+"."+this.type,this.options.selector,d.proxy(this.enter,this));this.$element.on(e+"."+this.type,this.options.selector,d.proxy(this.leave,this))}}}this.options.selector?(this._options=d.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()};c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.getOptions=function(e){e=d.extend({},this.getDefaults(),this.$element.data(),e);if(e.delay&&typeof e.delay=="number"){e.delay={show:e.delay,hide:e.delay}}return e};c.prototype.getDelegateOptions=function(){var e={};var f=this.getDefaults();this._options&&d.each(this._options,function(g,h){if(f[g]!=h){e[g]=h}});return e};c.prototype.enter=function(f){var e=f instanceof this.constructor?f:d(f.currentTarget).data("bs."+this.type);if(!e){e=new this.constructor(f.currentTarget,this.getDelegateOptions());d(f.currentTarget).data("bs."+this.type,e)}if(f instanceof d.Event){e.inState[f.type=="focusin"?"focus":"hover"]=true}if(e.tip().hasClass("in")||e.hoverState=="in"){e.hoverState="in";return}clearTimeout(e.timeout);e.hoverState="in";if(!e.options.delay||!e.options.delay.show){return e.show()}e.timeout=setTimeout(function(){if(e.hoverState=="in"){e.show()}},e.options.delay.show)};c.prototype.isInStateTrue=function(){for(var e in this.inState){if(this.inState[e]){return true}}return false};c.prototype.leave=function(f){var e=f instanceof this.constructor?f:d(f.currentTarget).data("bs."+this.type);if(!e){e=new this.constructor(f.currentTarget,this.getDelegateOptions());d(f.currentTarget).data("bs."+this.type,e)}if(f instanceof d.Event){e.inState[f.type=="focusout"?"focus":"hover"]=false}if(e.isInStateTrue()){return}clearTimeout(e.timeout);e.hoverState="out";if(!e.options.delay||!e.options.delay.hide){return e.hide()}e.timeout=setTimeout(function(){if(e.hoverState=="out"){e.hide()}},e.options.delay.hide)};c.prototype.show=function(){var o=d.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(o);var p=d.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(o.isDefaultPrevented()||!p){return}var n=this;var l=this.tip();var h=this.getUID(this.type);this.setContent();l.attr("id",h);this.$element.attr("aria-describedby",h);if(this.options.animation){l.addClass("fade")}var k=typeof this.options.placement=="function"?this.options.placement.call(this,l[0],this.$element[0]):this.options.placement;var s=/\s?auto?\s?/i;var t=s.test(k);if(t){k=k.replace(s,"")||"top"}l.detach().css({top:0,left:0,display:"block"}).addClass(k).data("bs."+this.type,this);this.options.container?l.appendTo(this.options.container):l.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var q=this.getPosition();var f=l[0].offsetWidth;var m=l[0].offsetHeight;if(t){var j=k;var r=this.getPosition(this.$viewport);k=k=="bottom"&&q.bottom+m>r.bottom?"top":k=="top"&&q.top-m<r.top?"bottom":k=="right"&&q.right+f>r.width?"left":k=="left"&&q.left-f<r.left?"right":k;l.removeClass(j).addClass(k)}var i=this.getCalculatedOffset(k,q,f,m);this.applyPlacement(i,k);var g=function(){var e=n.hoverState;n.$element.trigger("shown.bs."+n.type);n.hoverState=null;if(e=="out"){n.leave(n)}};d.support.transition&&this.$tip.hasClass("fade")?l.one("bsTransitionEnd",g).emulateTransitionEnd(c.TRANSITION_DURATION):g()}};c.prototype.applyPlacement=function(j,k){var l=this.tip();var g=l[0].offsetWidth;var q=l[0].offsetHeight;var f=parseInt(l.css("margin-top"),10);var i=parseInt(l.css("margin-left"),10);if(isNaN(f)){f=0}if(isNaN(i)){i=0}j.top+=f;j.left+=i;d.offset.setOffset(l[0],d.extend({using:function(r){l.css({top:Math.round(r.top),left:Math.round(r.left)})}},j),0);l.addClass("in");var e=l[0].offsetWidth;var m=l[0].offsetHeight;if(k=="top"&&m!=q){j.top=j.top+q-m}var p=this.getViewportAdjustedDelta(k,j,e,m);if(p.left){j.left+=p.left}else{j.top+=p.top}var n=/top|bottom/.test(k);var h=n?p.left*2-g+e:p.top*2-q+m;var o=n?"offsetWidth":"offsetHeight";l.offset(j);this.replaceArrow(h,l[0][o],n)};c.prototype.replaceArrow=function(g,e,f){this.arrow().css(f?"left":"top",50*(1-g/e)+"%").css(f?"top":"left","")};c.prototype.setContent=function(){var f=this.tip();var e=this.getTitle();f.find(".tooltip-inner")[this.options.html?"html":"text"](e);f.removeClass("fade in top bottom left right")};c.prototype.hide=function(j){var g=this;var i=d(this.$tip);var h=d.Event("hide.bs."+this.type);function f(){if(g.hoverState!="in"){i.detach()}g.$element.removeAttr("aria-describedby").trigger("hidden.bs."+g.type);j&&j()}this.$element.trigger(h);if(h.isDefaultPrevented()){return}i.removeClass("in");d.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f();this.hoverState=null;return this};c.prototype.fixTitle=function(){var e=this.$element;if(e.attr("title")||typeof e.attr("data-original-title")!="string"){e.attr("data-original-title",e.attr("title")||"").attr("title","")}};c.prototype.hasContent=function(){return this.getTitle()};c.prototype.getPosition=function(g){g=g||this.$element;var i=g[0];var f=i.tagName=="BODY";var h=i.getBoundingClientRect();if(h.width==null){h=d.extend({},h,{width:h.right-h.left,height:h.bottom-h.top})}var k=f?{top:0,left:0}:g.offset();var e={scroll:f?document.documentElement.scrollTop||document.body.scrollTop:g.scrollTop()};var j=f?{width:d(window).width(),height:d(window).height()}:null;return d.extend({},h,e,j,k)};c.prototype.getCalculatedOffset=function(e,h,f,g){return e=="bottom"?{top:h.top+h.height,left:h.left+h.width/2-f/2}:e=="top"?{top:h.top-g,left:h.left+h.width/2-f/2}:e=="left"?{top:h.top+h.height/2-g/2,left:h.left-f}:{top:h.top+h.height/2-g/2,left:h.left+h.width}};c.prototype.getViewportAdjustedDelta=function(h,k,e,j){var m={top:0,left:0};if(!this.$viewport){return m}var g=this.options.viewport&&this.options.viewport.padding||0;var l=this.getPosition(this.$viewport);if(/right|left/.test(h)){var n=k.top-g-l.scroll;var i=k.top+g-l.scroll+j;if(n<l.top){m.top=l.top-n}else{if(i>l.top+l.height){m.top=l.top+l.height-i}}}else{var o=k.left-g;var f=k.left+g+e;if(o<l.left){m.left=l.left-o}else{if(f>l.right){m.left=l.left+l.width-f}}}return m};c.prototype.getTitle=function(){var g;var e=this.$element;var f=this.options;g=e.attr("data-original-title")||(typeof f.title=="function"?f.title.call(e[0]):f.title);return g};c.prototype.getUID=function(e){do{e+=~~(Math.random()*1000000)}while(document.getElementById(e));return e};c.prototype.tip=function(){if(!this.$tip){this.$tip=d(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};c.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow"))};c.prototype.enable=function(){this.enabled=true};c.prototype.disable=function(){this.enabled=false};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(g){var f=this;if(g){f=d(g.currentTarget).data("bs."+this.type);if(!f){f=new this.constructor(g.currentTarget,this.getDelegateOptions());d(g.currentTarget).data("bs."+this.type,f)}}if(g){f.inState.click=!f.inState.click;if(f.isInStateTrue()){f.enter(f)}else{f.leave(f)}}else{f.tip().hasClass("in")?f.leave(f):f.enter(f)}};c.prototype.destroy=function(){var e=this;clearTimeout(this.timeout);this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type);if(e.$tip){e.$tip.detach()}e.$tip=null;e.$arrow=null;e.$viewport=null})};function b(e){return this.each(function(){var h=d(this);var g=h.data("bs.tooltip");var f=typeof e=="object"&&e;if(!g&&/destroy|hide/.test(e)){return}if(!g){h.data("bs.tooltip",(g=new c(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.tooltip;d.fn.tooltip=b;d.fn.tooltip.Constructor=c;d.fn.tooltip.noConflict=function(){d.fn.tooltip=a;return this}}(jQuery);+function(d){var c=function(f,e){this.init("popover",f,e)};if(!d.fn.tooltip){throw new Error("Popover requires tooltip.js")}c.VERSION="3.3.5";c.DEFAULTS=d.extend({},d.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});c.prototype=d.extend({},d.fn.tooltip.Constructor.prototype);c.prototype.constructor=c;c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.setContent=function(){var g=this.tip();var f=this.getTitle();var e=this.getContent();g.find(".popover-title")[this.options.html?"html":"text"](f);g.find(".popover-content").children().detach().end()[this.options.html?(typeof e=="string"?"html":"append"):"text"](e);g.removeClass("fade top bottom left right in");if(!g.find(".popover-title").html()){g.find(".popover-title").hide()}};c.prototype.hasContent=function(){return this.getTitle()||this.getContent()};c.prototype.getContent=function(){var e=this.$element;var f=this.options;return e.attr("data-content")||(typeof f.content=="function"?f.content.call(e[0]):f.content)};c.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find(".arrow"))};function b(e){return this.each(function(){var h=d(this);var g=h.data("bs.popover");var f=typeof e=="object"&&e;if(!g&&/destroy|hide/.test(e)){return}if(!g){h.data("bs.popover",(g=new c(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.popover;d.fn.popover=b;d.fn.popover.Constructor=c;d.fn.popover.noConflict=function(){d.fn.popover=a;return this}}(jQuery);+function(d){function c(f,e){this.$body=d(document.body);this.$scrollElement=d(f).is(document.body)?d(window):d(f);this.options=d.extend({},c.DEFAULTS,e);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",d.proxy(this.process,this));this.refresh();this.process()}c.VERSION="3.3.5";c.DEFAULTS={offset:10};c.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};c.prototype.refresh=function(){var g=this;var e="offset";var f=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!d.isWindow(this.$scrollElement[0])){e="position";f=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var i=d(this);var h=i.data("target")||i.attr("href");var j=/^#./.test(h)&&d(h);return(j&&j.length&&j.is(":visible")&&[[j[e]().top+f,h]])||null}).sort(function(i,h){return i[0]-h[0]}).each(function(){g.offsets.push(this[0]);g.targets.push(this[1])})};c.prototype.process=function(){var k=this.$scrollElement.scrollTop()+this.options.offset;var g=this.getScrollHeight();var j=this.options.offset+g-this.$scrollElement.height();var h=this.offsets;var e=this.targets;var l=this.activeTarget;var f;if(this.scrollHeight!=g){this.refresh()}if(k>=j){return l!=(f=e[e.length-1])&&this.activate(f)}if(l&&k<h[0]){this.activeTarget=null;return this.clear()}for(f=h.length;f--;){l!=e[f]&&k>=h[f]&&(h[f+1]===undefined||k<h[f+1])&&this.activate(e[f])}};c.prototype.activate=function(g){this.activeTarget=g;this.clear();var e=this.selector+'[data-target="'+g+'"],'+this.selector+'[href="'+g+'"]';var f=d(e).parents("li").addClass("active");if(f.parent(".dropdown-menu").length){f=f.closest("li.dropdown").addClass("active")}f.trigger("activate.bs.scrollspy")};c.prototype.clear=function(){d(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function b(e){return this.each(function(){var h=d(this);var g=h.data("bs.scrollspy");var f=typeof e=="object"&&e;if(!g){h.data("bs.scrollspy",(g=new c(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.scrollspy;d.fn.scrollspy=b;d.fn.scrollspy.Constructor=c;d.fn.scrollspy.noConflict=function(){d.fn.scrollspy=a;return this};d(window).on("load.bs.scrollspy.data-api",function(){d('[data-spy="scroll"]').each(function(){var e=d(this);b.call(e,e.data())})})}(jQuery);+function(d){var b=function(f){this.element=d(f)};b.VERSION="3.3.5";b.TRANSITION_DURATION=150;b.prototype.show=function(){var l=this.element;var h=l.closest("ul:not(.dropdown-menu)");var g=l.data("target");if(!g){g=l.attr("href");g=g&&g.replace(/.*(?=#[^\s]*$)/,"")}if(l.parent("li").hasClass("active")){return}var j=h.find(".active:last a");var k=d.Event("hide.bs.tab",{relatedTarget:l[0]});var i=d.Event("show.bs.tab",{relatedTarget:j[0]});j.trigger(k);l.trigger(i);if(i.isDefaultPrevented()||k.isDefaultPrevented()){return}var f=d(g);this.activate(l.closest("li"),h);this.activate(f,f.parent(),function(){j.trigger({type:"hidden.bs.tab",relatedTarget:l[0]});l.trigger({type:"shown.bs.tab",relatedTarget:j[0]})})};b.prototype.activate=function(h,g,k){var f=g.find("> .active");var j=k&&d.support.transition&&(f.length&&f.hasClass("fade")||!!g.find("> .fade").length);function i(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);h.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(j){h[0].offsetWidth;h.addClass("in")}else{h.removeClass("fade")}if(h.parent(".dropdown-menu").length){h.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}k&&k()}f.length&&j?f.one("bsTransitionEnd",i).emulateTransitionEnd(b.TRANSITION_DURATION):i();f.removeClass("in")};function c(f){return this.each(function(){var h=d(this);var g=h.data("bs.tab");if(!g){h.data("bs.tab",(g=new b(this)))}if(typeof f=="string"){g[f]()}})}var a=d.fn.tab;d.fn.tab=c;d.fn.tab.Constructor=b;d.fn.tab.noConflict=function(){d.fn.tab=a;return this};var e=function(f){f.preventDefault();c.call(d(this),"show")};d(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery);+function(d){var c=function(f,e){this.options=d.extend({},c.DEFAULTS,e);this.$target=d(this.options.target).on("scroll.bs.affix.data-api",d.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",d.proxy(this.checkPositionWithEventLoop,this));this.$element=d(f);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};c.VERSION="3.3.5";c.RESET="affix affix-top affix-bottom";c.DEFAULTS={offset:0,target:window};c.prototype.getState=function(n,m,f,g){var e=this.$target.scrollTop();var i=this.$element.offset();var j=this.$target.height();if(f!=null&&this.affixed=="top"){return e<f?"top":false}if(this.affixed=="bottom"){if(f!=null){return(e+this.unpin<=i.top)?false:"bottom"}return(e+j<=n-g)?false:"bottom"}var h=this.affixed==null;var l=h?e:i.top;var k=h?j:m;if(f!=null&&e<=f){return"top"}if(g!=null&&(l+k>=n-g)){return"bottom"}return false};c.prototype.getPinnedOffset=function(){if(this.pinnedOffset){return this.pinnedOffset}this.$element.removeClass(c.RESET).addClass("affix");var f=this.$target.scrollTop();var e=this.$element.offset();return(this.pinnedOffset=e.top-f)};c.prototype.checkPositionWithEventLoop=function(){setTimeout(d.proxy(this.checkPosition,this),1)};c.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return}var f=this.$element.height();var l=this.options.offset;var j=l.top;var h=l.bottom;var i=Math.max(d(document).height(),d(document.body).height());if(typeof l!="object"){h=j=l}if(typeof j=="function"){j=l.top(this.$element)}if(typeof h=="function"){h=l.bottom(this.$element)}var g=this.getState(i,f,j,h);if(this.affixed!=g){if(this.unpin!=null){this.$element.css("top","")}var m="affix"+(g?"-"+g:"");var k=d.Event(m+".bs.affix");this.$element.trigger(k);if(k.isDefaultPrevented()){return}this.affixed=g;this.unpin=g=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(c.RESET).addClass(m).trigger(m.replace("affix","affixed")+".bs.affix")}if(g=="bottom"){this.$element.offset({top:i-f-h})}};function b(e){return this.each(function(){var h=d(this);var g=h.data("bs.affix");var f=typeof e=="object"&&e;if(!g){h.data("bs.affix",(g=new c(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.affix;d.fn.affix=b;d.fn.affix.Constructor=c;d.fn.affix.noConflict=function(){d.fn.affix=a;return this};d(window).on("load",function(){d('[data-spy="affix"]').each(function(){var f=d(this);var e=f.data();e.offset=e.offset||{};if(e.offsetBottom!=null){e.offset.bottom=e.offsetBottom}if(e.offsetTop!=null){e.offset.top=e.offsetTop}b.call(f,e)})})}(jQuery);
/*! jQuery UI - v1.11.4 - 2015-09-20
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, selectable.js, sortable.js, slider.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(g){
/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
g.ui=g.ui||{};g.extend(g.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});g.fn.extend({scrollParent:function(r){var q=this.css("position"),p=q==="absolute",s=r?/(auto|scroll|hidden)/:/(auto|scroll)/,t=this.parents().filter(function(){var u=g(this);if(p&&u.css("position")==="static"){return false}return s.test(u.css("overflow")+u.css("overflow-y")+u.css("overflow-x"))}).eq(0);return q==="fixed"||!t.length?g(this[0].ownerDocument||document):t},uniqueId:(function(){var p=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++p)}})}})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){g(this).removeAttr("id")}})}});function m(r,p){var t,s,q,u=r.nodeName.toLowerCase();if("area"===u){t=r.parentNode;s=t.name;if(!r.href||!s||t.nodeName.toLowerCase()!=="map"){return false}q=g("img[usemap='#"+s+"']")[0];return !!q&&d(q)}return(/^(input|select|textarea|button|object)$/.test(u)?!r.disabled:"a"===u?r.href||p:p)&&d(r)}function d(p){return g.expr.filters.visible(p)&&!g(p).parents().addBack().filter(function(){return g.css(this,"visibility")==="hidden"}).length}g.extend(g.expr[":"],{data:g.expr.createPseudo?g.expr.createPseudo(function(p){return function(q){return !!g.data(q,p)}}):function(r,q,p){return !!g.data(r,p[3])},focusable:function(p){return m(p,!isNaN(g.attr(p,"tabindex")))},tabbable:function(r){var p=g.attr(r,"tabindex"),q=isNaN(p);return(q||p>=0)&&m(r,!q)}});if(!g("<a>").outerWidth(1).jquery){g.each(["Width","Height"],function(r,p){var q=p==="Width"?["Left","Right"]:["Top","Bottom"],s=p.toLowerCase(),u={innerWidth:g.fn.innerWidth,innerHeight:g.fn.innerHeight,outerWidth:g.fn.outerWidth,outerHeight:g.fn.outerHeight};function t(x,w,v,y){g.each(q,function(){w-=parseFloat(g.css(x,"padding"+this))||0;if(v){w-=parseFloat(g.css(x,"border"+this+"Width"))||0}if(y){w-=parseFloat(g.css(x,"margin"+this))||0}});return w}g.fn["inner"+p]=function(v){if(v===undefined){return u["inner"+p].call(this)}return this.each(function(){g(this).css(s,t(this,v)+"px")})};g.fn["outer"+p]=function(v,w){if(typeof v!=="number"){return u["outer"+p].call(this,v)}return this.each(function(){g(this).css(s,t(this,v,true,w)+"px")})}})}if(!g.fn.addBack){g.fn.addBack=function(p){return this.add(p==null?this.prevObject:this.prevObject.filter(p))}}if(g("<a>").data("a-b","a").removeData("a-b").data("a-b")){g.fn.removeData=(function(p){return function(q){if(arguments.length){return p.call(this,g.camelCase(q))}else{return p.call(this)}}})(g.fn.removeData)}g.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());g.fn.extend({focus:(function(p){return function(q,r){return typeof q==="number"?this.each(function(){var s=this;setTimeout(function(){g(s).focus();if(r){r.call(s)}},q)}):p.apply(this,arguments)}})(g.fn.focus),disableSelection:(function(){var p="onselectstart" in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(p+".ui-disableSelection",function(q){q.preventDefault()})}})(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(s){if(s!==undefined){return this.css("zIndex",s)}if(this.length){var q=g(this[0]),p,r;while(q.length&&q[0]!==document){p=q.css("position");if(p==="absolute"||p==="relative"||p==="fixed"){r=parseInt(q.css("zIndex"),10);if(!isNaN(r)&&r!==0){return r}}q=q.parent()}}return 0}});g.ui.plugin={add:function(q,r,t){var p,s=g.ui[q].prototype;for(p in t){s.plugins[p]=s.plugins[p]||[];s.plugins[p].push([r,t[p]])}},call:function(p,s,r,q){var t,u=p.plugins[s];if(!u){return}if(!q&&(!p.element[0].parentNode||p.element[0].parentNode.nodeType===11)){return}for(t=0;t<u.length;t++){if(p.options[u[t][0]]){u[t][1].apply(p.element,r)}}}};
/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var n=0,c=Array.prototype.slice;g.cleanData=(function(p){return function(q){var s,t,r;for(r=0;(t=q[r])!=null;r++){try{s=g._data(t,"events");if(s&&s.remove){g(t).triggerHandler("remove")}}catch(u){}}p(q)}})(g.cleanData);g.widget=function(p,q,x){var u,v,s,w,r={},t=p.split(".")[0];p=p.split(".")[1];u=t+"-"+p;if(!x){x=q;q=g.Widget}g.expr[":"][u.toLowerCase()]=function(y){return !!g.data(y,u)};g[t]=g[t]||{};v=g[t][p];s=g[t][p]=function(y,z){if(!this._createWidget){return new s(y,z)}if(arguments.length){this._createWidget(y,z)}};g.extend(s,v,{version:x.version,_proto:g.extend({},x),_childConstructors:[]});w=new q();w.options=g.widget.extend({},w.options);g.each(x,function(z,y){if(!g.isFunction(y)){r[z]=y;return}r[z]=(function(){var A=function(){return q.prototype[z].apply(this,arguments)},B=function(C){return q.prototype[z].apply(this,C)};return function(){var E=this._super,C=this._superApply,D;this._super=A;this._superApply=B;D=y.apply(this,arguments);this._super=E;this._superApply=C;return D}})()});s.prototype=g.widget.extend(w,{widgetEventPrefix:v?(w.widgetEventPrefix||p):p},r,{constructor:s,namespace:t,widgetName:p,widgetFullName:u});if(v){g.each(v._childConstructors,function(z,A){var y=A.prototype;g.widget(y.namespace+"."+y.widgetName,s,A._proto)});delete v._childConstructors}else{q._childConstructors.push(s)}g.widget.bridge(p,s);return s};g.widget.extend=function(u){var q=c.call(arguments,1),t=0,p=q.length,r,s;for(;t<p;t++){for(r in q[t]){s=q[t][r];if(q[t].hasOwnProperty(r)&&s!==undefined){if(g.isPlainObject(s)){u[r]=g.isPlainObject(u[r])?g.widget.extend({},u[r],s):g.widget.extend({},s)}else{u[r]=s}}}}return u};g.widget.bridge=function(q,p){var r=p.prototype.widgetFullName||q;g.fn[q]=function(u){var s=typeof u==="string",t=c.call(arguments,1),v=this;if(s){this.each(function(){var x,w=g.data(this,r);if(u==="instance"){v=w;return false}if(!w){return g.error("cannot call methods on "+q+" prior to initialization; attempted to call method '"+u+"'")}if(!g.isFunction(w[u])||u.charAt(0)==="_"){return g.error("no such method '"+u+"' for "+q+" widget instance")}x=w[u].apply(w,t);if(x!==w&&x!==undefined){v=x&&x.jquery?v.pushStack(x.get()):x;return false}})}else{if(t.length){u=g.widget.extend.apply(null,[u].concat(t))}this.each(function(){var w=g.data(this,r);if(w){w.option(u||{});if(w._init){w._init()}}else{g.data(this,r,new p(u,this))}})}return v}};g.Widget=function(){};g.Widget._childConstructors=[];g.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(p,q){q=g(q||this.defaultElement||this)[0];this.element=g(q);this.uuid=n++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=g();this.hoverable=g();this.focusable=g();if(q!==this){g.data(q,this.widgetFullName,this);this._on(true,this.element,{remove:function(r){if(r.target===q){this.destroy()}}});this.document=g(q.style?q.ownerDocument:q.document||q);this.window=g(this.document[0].defaultView||this.document[0].parentWindow)}this.options=g.widget.extend({},this.options,this._getCreateOptions(),p);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:g.noop,_getCreateEventData:g.noop,_create:g.noop,_init:g.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(g.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:g.noop,widget:function(){return this.element},option:function(s,t){var p=s,u,r,q;if(arguments.length===0){return g.widget.extend({},this.options)}if(typeof s==="string"){p={};u=s.split(".");s=u.shift();if(u.length){r=p[s]=g.widget.extend({},this.options[s]);for(q=0;q<u.length-1;q++){r[u[q]]=r[u[q]]||{};r=r[u[q]]}s=u.pop();if(arguments.length===1){return r[s]===undefined?null:r[s]}r[s]=t}else{if(arguments.length===1){return this.options[s]===undefined?null:this.options[s]}p[s]=t}}this._setOptions(p);return this},_setOptions:function(p){var q;for(q in p){this._setOption(q,p[q])}return this},_setOption:function(p,q){this.options[p]=q;if(p==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!q);if(q){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_on:function(s,r,q){var t,p=this;if(typeof s!=="boolean"){q=r;r=s;s=false}if(!q){q=r;r=this.element;t=this.widget()}else{r=t=g(r);this.bindings=this.bindings.add(r)}g.each(q,function(z,y){function w(){if(!s&&(p.options.disabled===true||g(this).hasClass("ui-state-disabled"))){return}return(typeof y==="string"?p[y]:y).apply(p,arguments)}if(typeof y!=="string"){w.guid=y.guid=y.guid||w.guid||g.guid++}var x=z.match(/^([\w:-]*)\s*(.*)$/),v=x[1]+p.eventNamespace,u=x[2];if(u){t.delegate(u,v,w)}else{r.bind(v,w)}})},_off:function(q,p){p=(p||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;q.unbind(p).undelegate(p);this.bindings=g(this.bindings.not(q).get());this.focusable=g(this.focusable.not(q).get());this.hoverable=g(this.hoverable.not(q).get())},_delay:function(s,r){function q(){return(typeof s==="string"?p[s]:s).apply(p,arguments)}var p=this;return setTimeout(q,r||0)},_hoverable:function(p){this.hoverable=this.hoverable.add(p);this._on(p,{mouseenter:function(q){g(q.currentTarget).addClass("ui-state-hover")},mouseleave:function(q){g(q.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(p){this.focusable=this.focusable.add(p);this._on(p,{focusin:function(q){g(q.currentTarget).addClass("ui-state-focus")},focusout:function(q){g(q.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(p,q,r){var u,t,s=this.options[p];r=r||{};q=g.Event(q);q.type=(p===this.widgetEventPrefix?p:this.widgetEventPrefix+p).toLowerCase();q.target=this.element[0];t=q.originalEvent;if(t){for(u in t){if(!(u in q)){q[u]=t[u]}}}this.element.trigger(q,r);return !(g.isFunction(s)&&s.apply(this.element[0],[q].concat(r))===false||q.isDefaultPrevented())}};g.each({show:"fadeIn",hide:"fadeOut"},function(q,p){g.Widget.prototype["_"+q]=function(t,s,v){if(typeof s==="string"){s={effect:s}}var u,r=!s?q:s===true||typeof s==="number"?p:s.effect||p;s=s||{};if(typeof s==="number"){s={duration:s}}u=!g.isEmptyObject(s);s.complete=v;if(s.delay){t.delay(s.delay)}if(u&&g.effects&&g.effects.effect[r]){t[q](s)}else{if(r!==q&&t[r]){t[r](s.duration,s.easing,v)}else{t.queue(function(w){g(this)[q]();if(v){v.call(t[0])}w()})}}}});var i=g.widget;
/*!
 * jQuery UI Mouse 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */
var e=false;g(document).mouseup(function(){e=false});var k=g.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var p=this;this.element.bind("mousedown."+this.widgetName,function(q){return p._mouseDown(q)}).bind("click."+this.widgetName,function(q){if(true===g.data(q.target,p.widgetName+".preventClickEvent")){g.removeData(q.target,p.widgetName+".preventClickEvent");q.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(r){if(e){return}this._mouseMoved=false;(this._mouseStarted&&this._mouseUp(r));this._mouseDownEvent=r;var q=this,s=(r.which===1),p=(typeof this.options.cancel==="string"&&r.target.nodeName?g(r.target).closest(this.options.cancel).length:false);if(!s||p||!this._mouseCapture(r)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){q.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(r)&&this._mouseDelayMet(r)){this._mouseStarted=(this._mouseStart(r)!==false);if(!this._mouseStarted){r.preventDefault();return true}}if(true===g.data(r.target,this.widgetName+".preventClickEvent")){g.removeData(r.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(t){return q._mouseMove(t)};this._mouseUpDelegate=function(t){return q._mouseUp(t)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);r.preventDefault();e=true;return true},_mouseMove:function(p){if(this._mouseMoved){if(g.ui.ie&&(!document.documentMode||document.documentMode<9)&&!p.button){return this._mouseUp(p)}else{if(!p.which){return this._mouseUp(p)}}}if(p.which||p.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(p);return p.preventDefault()}if(this._mouseDistanceMet(p)&&this._mouseDelayMet(p)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,p)!==false);(this._mouseStarted?this._mouseDrag(p):this._mouseUp(p))}return !this._mouseStarted},_mouseUp:function(p){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(p.target===this._mouseDownEvent.target){g.data(p.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(p)}e=false;return false},_mouseDistanceMet:function(p){return(Math.max(Math.abs(this._mouseDownEvent.pageX-p.pageX),Math.abs(this._mouseDownEvent.pageY-p.pageY))>=this.options.distance)},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});
/*!
 * jQuery UI Position 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(){g.ui=g.ui||{};var w,z,x=Math.max,C=Math.abs,A=Math.round,r=/left|center|right/,u=/top|center|bottom/,p=/[\+\-]\d+(\.[\d]+)?%?/,y=/^\w+/,q=/%$/,t=g.fn.position;function B(F,E,D){return[parseFloat(F[0])*(q.test(F[0])?E/100:1),parseFloat(F[1])*(q.test(F[1])?D/100:1)]}function v(D,E){return parseInt(g.css(D,E),10)||0}function s(E){var D=E[0];if(D.nodeType===9){return{width:E.width(),height:E.height(),offset:{top:0,left:0}}}if(g.isWindow(D)){return{width:E.width(),height:E.height(),offset:{top:E.scrollTop(),left:E.scrollLeft()}}}if(D.preventDefault){return{width:0,height:0,offset:{top:D.pageY,left:D.pageX}}}return{width:E.outerWidth(),height:E.outerHeight(),offset:E.offset()}}g.position={scrollbarWidth:function(){if(w!==undefined){return w}var E,D,G=g("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),F=G.children()[0];g("body").append(G);E=F.offsetWidth;G.css("overflow","scroll");D=F.offsetWidth;if(E===D){D=G[0].clientWidth}G.remove();return(w=E-D)},getScrollInfo:function(H){var G=H.isWindow||H.isDocument?"":H.element.css("overflow-x"),F=H.isWindow||H.isDocument?"":H.element.css("overflow-y"),E=G==="scroll"||(G==="auto"&&H.width<H.element[0].scrollWidth),D=F==="scroll"||(F==="auto"&&H.height<H.element[0].scrollHeight);return{width:D?g.position.scrollbarWidth():0,height:E?g.position.scrollbarWidth():0}},getWithinInfo:function(E){var F=g(E||window),D=g.isWindow(F[0]),G=!!F[0]&&F[0].nodeType===9;return{element:F,isWindow:D,isDocument:G,offset:F.offset()||{left:0,top:0},scrollLeft:F.scrollLeft(),scrollTop:F.scrollTop(),width:D||G?F.width():F.outerWidth(),height:D||G?F.height():F.outerHeight()}}};g.fn.position=function(N){if(!N||!N.of){return t.apply(this,arguments)}N=g.extend({},N);var O,K,I,M,H,D,J=g(N.of),G=g.position.getWithinInfo(N.within),E=g.position.getScrollInfo(G),L=(N.collision||"flip").split(" "),F={};D=s(J);if(J[0].preventDefault){N.at="left top"}K=D.width;I=D.height;M=D.offset;H=g.extend({},M);g.each(["my","at"],function(){var R=(N[this]||"").split(" "),Q,P;if(R.length===1){R=r.test(R[0])?R.concat(["center"]):u.test(R[0])?["center"].concat(R):["center","center"]}R[0]=r.test(R[0])?R[0]:"center";R[1]=u.test(R[1])?R[1]:"center";Q=p.exec(R[0]);P=p.exec(R[1]);F[this]=[Q?Q[0]:0,P?P[0]:0];N[this]=[y.exec(R[0])[0],y.exec(R[1])[0]]});if(L.length===1){L[1]=L[0]}if(N.at[0]==="right"){H.left+=K}else{if(N.at[0]==="center"){H.left+=K/2}}if(N.at[1]==="bottom"){H.top+=I}else{if(N.at[1]==="center"){H.top+=I/2}}O=B(F.at,K,I);H.left+=O[0];H.top+=O[1];return this.each(function(){var Q,Z,S=g(this),U=S.outerWidth(),R=S.outerHeight(),T=v(this,"marginLeft"),P=v(this,"marginTop"),Y=U+T+v(this,"marginRight")+E.width,X=R+P+v(this,"marginBottom")+E.height,V=g.extend({},H),W=B(F.my,S.outerWidth(),S.outerHeight());if(N.my[0]==="right"){V.left-=U}else{if(N.my[0]==="center"){V.left-=U/2}}if(N.my[1]==="bottom"){V.top-=R}else{if(N.my[1]==="center"){V.top-=R/2}}V.left+=W[0];V.top+=W[1];if(!z){V.left=A(V.left);V.top=A(V.top)}Q={marginLeft:T,marginTop:P};g.each(["left","top"],function(ab,aa){if(g.ui.position[L[ab]]){g.ui.position[L[ab]][aa](V,{targetWidth:K,targetHeight:I,elemWidth:U,elemHeight:R,collisionPosition:Q,collisionWidth:Y,collisionHeight:X,offset:[O[0]+W[0],O[1]+W[1]],my:N.my,at:N.at,within:G,elem:S})}});if(N.using){Z=function(ad){var af=M.left-V.left,ac=af+K-U,ae=M.top-V.top,ab=ae+I-R,aa={target:{element:J,left:M.left,top:M.top,width:K,height:I},element:{element:S,left:V.left,top:V.top,width:U,height:R},horizontal:ac<0?"left":af>0?"right":"center",vertical:ab<0?"top":ae>0?"bottom":"middle"};if(K<U&&C(af+ac)<K){aa.horizontal="center"}if(I<R&&C(ae+ab)<I){aa.vertical="middle"}if(x(C(af),C(ac))>x(C(ae),C(ab))){aa.important="horizontal"}else{aa.important="vertical"}N.using.call(this,ad,aa)}}S.offset(g.extend(V,{using:Z}))})};g.ui.position={fit:{left:function(H,G){var F=G.within,J=F.isWindow?F.scrollLeft:F.offset.left,L=F.width,I=H.left-G.collisionPosition.marginLeft,K=J-I,E=I+G.collisionWidth-L-J,D;if(G.collisionWidth>L){if(K>0&&E<=0){D=H.left+K+G.collisionWidth-L-J;H.left+=K-D}else{if(E>0&&K<=0){H.left=J}else{if(K>E){H.left=J+L-G.collisionWidth}else{H.left=J}}}}else{if(K>0){H.left+=K}else{if(E>0){H.left-=E}else{H.left=x(H.left-I,H.left)}}}},top:function(G,F){var E=F.within,K=E.isWindow?E.scrollTop:E.offset.top,L=F.within.height,I=G.top-F.collisionPosition.marginTop,J=K-I,H=I+F.collisionHeight-L-K,D;if(F.collisionHeight>L){if(J>0&&H<=0){D=G.top+J+F.collisionHeight-L-K;G.top+=J-D}else{if(H>0&&J<=0){G.top=K}else{if(J>H){G.top=K+L-F.collisionHeight}else{G.top=K}}}}else{if(J>0){G.top+=J}else{if(H>0){G.top-=H}else{G.top=x(G.top-I,G.top)}}}}},flip:{left:function(J,I){var H=I.within,N=H.offset.left+H.scrollLeft,Q=H.width,F=H.isWindow?H.scrollLeft:H.offset.left,K=J.left-I.collisionPosition.marginLeft,O=K-F,E=K+I.collisionWidth-Q-F,M=I.my[0]==="left"?-I.elemWidth:I.my[0]==="right"?I.elemWidth:0,P=I.at[0]==="left"?I.targetWidth:I.at[0]==="right"?-I.targetWidth:0,G=-2*I.offset[0],D,L;if(O<0){D=J.left+M+P+G+I.collisionWidth-Q-N;if(D<0||D<C(O)){J.left+=M+P+G}}else{if(E>0){L=J.left-I.collisionPosition.marginLeft+M+P+G-F;if(L>0||C(L)<E){J.left+=M+P+G}}}},top:function(I,H){var G=H.within,P=G.offset.top+G.scrollTop,Q=G.height,D=G.isWindow?G.scrollTop:G.offset.top,K=I.top-H.collisionPosition.marginTop,M=K-D,J=K+H.collisionHeight-Q-D,N=H.my[1]==="top",L=N?-H.elemHeight:H.my[1]==="bottom"?H.elemHeight:0,R=H.at[1]==="top"?H.targetHeight:H.at[1]==="bottom"?-H.targetHeight:0,F=-2*H.offset[1],O,E;if(M<0){E=I.top+L+R+F+H.collisionHeight-Q-P;if(E<0||E<C(M)){I.top+=L+R+F}}else{if(J>0){O=I.top-H.collisionPosition.marginTop+L+R+F-D;if(O>0||C(O)<J){I.top+=L+R+F}}}}},flipfit:{left:function(){g.ui.position.flip.left.apply(this,arguments);g.ui.position.fit.left.apply(this,arguments)},top:function(){g.ui.position.flip.top.apply(this,arguments);g.ui.position.fit.top.apply(this,arguments)}}};(function(){var H,J,E,G,F,D=document.getElementsByTagName("body")[0],I=document.createElement("div");H=document.createElement(D?"div":"body");E={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(D){g.extend(E,{position:"absolute",left:"-1000px",top:"-1000px"})}for(F in E){H.style[F]=E[F]}H.appendChild(I);J=D||document.documentElement;J.insertBefore(H,J.firstChild);I.style.cssText="position: absolute; left: 10.7432222px;";G=g(I).offset().left;z=G>10&&G<11;H.innerHTML="";J.removeChild(H)})()})();var h=g.ui.position;
/*!
 * jQuery UI Draggable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
g.widget("ui.draggable",g.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this.element.addClass("ui-draggable")}if(this.options.disabled){this.element.addClass("ui-draggable-disabled")}this._setHandleClassName();this._mouseInit()},_setOption:function(p,q){this._super(p,q);if(p==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(p){var q=this.options;this._blurActiveElement(p);if(this.helper||q.disabled||g(p.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(p);if(!this.handle){return false}this._blockFrames(q.iframeFix===true?"iframe":q.iframeFix);return true},_blockFrames:function(p){this.iframeBlocks=this.document.find(p).map(function(){var q=g(this);return g("<div>").css("position","absolute").appendTo(q.parent()).outerWidth(q.outerWidth()).outerHeight(q.outerHeight()).offset(q.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(r){var p=this.document[0];if(!this.handleElement.is(r.target)){return}try{if(p.activeElement&&p.activeElement.nodeName.toLowerCase()!=="body"){g(p.activeElement).blur()}}catch(q){}},_mouseStart:function(p){var q=this.options;this.helper=this._createHelper(p);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(g.ui.ddmanager){g.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return g(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(p);this.originalPosition=this.position=this._generatePosition(p,false);this.originalPageX=p.pageX;this.originalPageY=p.pageY;(q.cursorAt&&this._adjustOffsetFromHelper(q.cursorAt));this._setContainment();if(this._trigger("start",p)===false){this._clear();return false}this._cacheHelperProportions();if(g.ui.ddmanager&&!q.dropBehaviour){g.ui.ddmanager.prepareOffsets(this,p)}this._normalizeRightBottom();this._mouseDrag(p,true);if(g.ui.ddmanager){g.ui.ddmanager.dragStart(this,p)}return true},_refreshOffsets:function(p){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:p.pageX-this.offset.left,top:p.pageY-this.offset.top}},_mouseDrag:function(p,r){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(p,true);this.positionAbs=this._convertPositionTo("absolute");if(!r){var q=this._uiHash();if(this._trigger("drag",p,q)===false){this._mouseUp({});return false}this.position=q.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(g.ui.ddmanager){g.ui.ddmanager.drag(this,p)}return false},_mouseStop:function(q){var p=this,r=false;if(g.ui.ddmanager&&!this.options.dropBehaviour){r=g.ui.ddmanager.drop(this,q)}if(this.dropped){r=this.dropped;this.dropped=false}if((this.options.revert==="invalid"&&!r)||(this.options.revert==="valid"&&r)||this.options.revert===true||(g.isFunction(this.options.revert)&&this.options.revert.call(this.element,r))){g(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(p._trigger("stop",q)!==false){p._clear()}})}else{if(this._trigger("stop",q)!==false){this._clear()}}return false},_mouseUp:function(p){this._unblockFrames();if(g.ui.ddmanager){g.ui.ddmanager.dragStop(this,p)}if(this.handleElement.is(p.target)){this.element.focus()}return g.ui.mouse.prototype._mouseUp.call(this,p)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(p){return this.options.handle?!!g(p.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(q){var s=this.options,r=g.isFunction(s.helper),p=r?g(s.helper.apply(this.element[0],[q])):(s.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!p.parents("body").length){p.appendTo((s.appendTo==="parent"?this.element[0].parentNode:s.appendTo))}if(r&&p[0]===this.element[0]){this._setPositionRelative()}if(p[0]!==this.element[0]&&!(/(fixed|absolute)/).test(p.css("position"))){p.css("position","absolute")}return p},_setPositionRelative:function(){if(!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(p){if(typeof p==="string"){p=p.split(" ")}if(g.isArray(p)){p={left:+p[0],top:+p[1]||0}}if("left" in p){this.offset.click.left=p.left+this.margins.left}if("right" in p){this.offset.click.left=this.helperProportions.width-p.right+this.margins.left}if("top" in p){this.offset.click.top=p.top+this.margins.top}if("bottom" in p){this.offset.click.top=this.helperProportions.height-p.bottom+this.margins.top}},_isRootNode:function(p){return(/(html|body)/i).test(p.tagName)||p===this.document[0]},_getParentOffset:function(){var q=this.offsetParent.offset(),p=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==p&&g.contains(this.scrollParent[0],this.offsetParent[0])){q.left+=this.scrollParent.scrollLeft();q.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){q={top:0,left:0}}return{top:q.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:q.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var q=this.element.position(),r=this._isRootNode(this.scrollParent[0]);return{top:q.top-(parseInt(this.helper.css("top"),10)||0)+(!r?this.scrollParent.scrollTop():0),left:q.left-(parseInt(this.helper.css("left"),10)||0)+(!r?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var q,t,r,s=this.options,p=this.document[0];this.relativeContainer=null;if(!s.containment){this.containment=null;return}if(s.containment==="window"){this.containment=[g(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,g(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,g(window).scrollLeft()+g(window).width()-this.helperProportions.width-this.margins.left,g(window).scrollTop()+(g(window).height()||p.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(s.containment==="document"){this.containment=[0,0,g(p).width()-this.helperProportions.width-this.margins.left,(g(p).height()||p.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(s.containment.constructor===Array){this.containment=s.containment;return}if(s.containment==="parent"){s.containment=this.helper[0].parentNode}t=g(s.containment);r=t[0];if(!r){return}q=/(scroll|auto)/.test(t.css("overflow"));this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(q?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(q?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=t},_convertPositionTo:function(q,s){if(!s){s=this.position}var p=q==="absolute"?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:(s.top+this.offset.relative.top*p+this.offset.parent.top*p-((this.cssPosition==="fixed"?-this.offset.scroll.top:(r?0:this.offset.scroll.top))*p)),left:(s.left+this.offset.relative.left*p+this.offset.parent.left*p-((this.cssPosition==="fixed"?-this.offset.scroll.left:(r?0:this.offset.scroll.left))*p))}},_generatePosition:function(q,w){var p,x,y,s,r=this.options,v=this._isRootNode(this.scrollParent[0]),u=q.pageX,t=q.pageY;if(!v||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(w){if(this.containment){if(this.relativeContainer){x=this.relativeContainer.offset();p=[this.containment[0]+x.left,this.containment[1]+x.top,this.containment[2]+x.left,this.containment[3]+x.top]}else{p=this.containment}if(q.pageX-this.offset.click.left<p[0]){u=p[0]+this.offset.click.left}if(q.pageY-this.offset.click.top<p[1]){t=p[1]+this.offset.click.top}if(q.pageX-this.offset.click.left>p[2]){u=p[2]+this.offset.click.left}if(q.pageY-this.offset.click.top>p[3]){t=p[3]+this.offset.click.top}}if(r.grid){y=r.grid[1]?this.originalPageY+Math.round((t-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY;t=p?((y-this.offset.click.top>=p[1]||y-this.offset.click.top>p[3])?y:((y-this.offset.click.top>=p[1])?y-r.grid[1]:y+r.grid[1])):y;s=r.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX;u=p?((s-this.offset.click.left>=p[0]||s-this.offset.click.left>p[2])?s:((s-this.offset.click.left>=p[0])?s-r.grid[0]:s+r.grid[0])):s}if(r.axis==="y"){u=this.originalPageX}if(r.axis==="x"){t=this.originalPageY}}return{top:(t-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:(v?0:this.offset.scroll.top))),left:(u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:(v?0:this.offset.scroll.left)))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_normalizeRightBottom:function(){if(this.options.axis!=="y"&&this.helper.css("right")!=="auto"){this.helper.width(this.helper.width());this.helper.css("right","auto")}if(this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"){this.helper.height(this.helper.height());this.helper.css("bottom","auto")}},_trigger:function(p,q,r){r=r||this._uiHash();g.ui.plugin.call(this,p,[q,r,this],true);if(/^(drag|start|stop)/.test(p)){this.positionAbs=this._convertPositionTo("absolute");r.offset=this.positionAbs}return g.Widget.prototype._trigger.call(this,p,q,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});g.ui.plugin.add("draggable","connectToSortable",{start:function(r,s,p){var q=g.extend({},s,{item:p.element});p.sortables=[];g(p.options.connectToSortable).each(function(){var t=g(this).sortable("instance");if(t&&!t.options.disabled){p.sortables.push(t);t.refreshPositions();t._trigger("activate",r,q)}})},stop:function(r,s,p){var q=g.extend({},s,{item:p.element});p.cancelHelperRemoval=false;g.each(p.sortables,function(){var t=this;if(t.isOver){t.isOver=0;p.cancelHelperRemoval=true;t.cancelHelperRemoval=false;t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")};t._mouseStop(r);t.options.helper=t.options._helper}else{t.cancelHelperRemoval=true;t._trigger("deactivate",r,q)}})},drag:function(q,r,p){g.each(p.sortables,function(){var s=false,t=this;t.positionAbs=p.positionAbs;t.helperProportions=p.helperProportions;t.offset.click=p.offset.click;if(t._intersectsWith(t.containerCache)){s=true;g.each(p.sortables,function(){this.positionAbs=p.positionAbs;this.helperProportions=p.helperProportions;this.offset.click=p.offset.click;if(this!==t&&this._intersectsWith(this.containerCache)&&g.contains(t.element[0],this.element[0])){s=false}return s})}if(s){if(!t.isOver){t.isOver=1;p._parent=r.helper.parent();t.currentItem=r.helper.appendTo(t.element).data("ui-sortable-item",true);t.options._helper=t.options.helper;t.options.helper=function(){return r.helper[0]};q.target=t.currentItem[0];t._mouseCapture(q,true);t._mouseStart(q,true,true);t.offset.click.top=p.offset.click.top;t.offset.click.left=p.offset.click.left;t.offset.parent.left-=p.offset.parent.left-t.offset.parent.left;t.offset.parent.top-=p.offset.parent.top-t.offset.parent.top;p._trigger("toSortable",q);p.dropped=t.element;g.each(p.sortables,function(){this.refreshPositions()});p.currentItem=p.element;t.fromOutside=p}if(t.currentItem){t._mouseDrag(q);r.position=t.position}}else{if(t.isOver){t.isOver=0;t.cancelHelperRemoval=true;t.options._revert=t.options.revert;t.options.revert=false;t._trigger("out",q,t._uiHash(t));t._mouseStop(q,true);t.options.revert=t.options._revert;t.options.helper=t.options._helper;if(t.placeholder){t.placeholder.remove()}r.helper.appendTo(p._parent);p._refreshOffsets(q);r.position=p._generatePosition(q,true);p._trigger("fromSortable",q);p.dropped=false;g.each(p.sortables,function(){this.refreshPositions()})}}})}});g.ui.plugin.add("draggable","cursor",{start:function(r,s,p){var q=g("body"),u=p.options;if(q.css("cursor")){u._cursor=q.css("cursor")}q.css("cursor",u.cursor)},stop:function(q,r,p){var s=p.options;if(s._cursor){g("body").css("cursor",s._cursor)}}});g.ui.plugin.add("draggable","opacity",{start:function(r,s,p){var q=g(s.helper),u=p.options;if(q.css("opacity")){u._opacity=q.css("opacity")}q.css("opacity",u.opacity)},stop:function(q,r,p){var s=p.options;if(s._opacity){g(r.helper).css("opacity",s._opacity)}}});g.ui.plugin.add("draggable","scroll",{start:function(q,r,p){if(!p.scrollParentNotHidden){p.scrollParentNotHidden=p.helper.scrollParent(false)}if(p.scrollParentNotHidden[0]!==p.document[0]&&p.scrollParentNotHidden[0].tagName!=="HTML"){p.overflowOffset=p.scrollParentNotHidden.offset()}},drag:function(s,t,r){var u=r.options,q=false,v=r.scrollParentNotHidden[0],p=r.document[0];if(v!==p&&v.tagName!=="HTML"){if(!u.axis||u.axis!=="x"){if((r.overflowOffset.top+v.offsetHeight)-s.pageY<u.scrollSensitivity){v.scrollTop=q=v.scrollTop+u.scrollSpeed}else{if(s.pageY-r.overflowOffset.top<u.scrollSensitivity){v.scrollTop=q=v.scrollTop-u.scrollSpeed}}}if(!u.axis||u.axis!=="y"){if((r.overflowOffset.left+v.offsetWidth)-s.pageX<u.scrollSensitivity){v.scrollLeft=q=v.scrollLeft+u.scrollSpeed}else{if(s.pageX-r.overflowOffset.left<u.scrollSensitivity){v.scrollLeft=q=v.scrollLeft-u.scrollSpeed}}}}else{if(!u.axis||u.axis!=="x"){if(s.pageY-g(p).scrollTop()<u.scrollSensitivity){q=g(p).scrollTop(g(p).scrollTop()-u.scrollSpeed)}else{if(g(window).height()-(s.pageY-g(p).scrollTop())<u.scrollSensitivity){q=g(p).scrollTop(g(p).scrollTop()+u.scrollSpeed)}}}if(!u.axis||u.axis!=="y"){if(s.pageX-g(p).scrollLeft()<u.scrollSensitivity){q=g(p).scrollLeft(g(p).scrollLeft()-u.scrollSpeed)}else{if(g(window).width()-(s.pageX-g(p).scrollLeft())<u.scrollSensitivity){q=g(p).scrollLeft(g(p).scrollLeft()+u.scrollSpeed)}}}}if(q!==false&&g.ui.ddmanager&&!u.dropBehaviour){g.ui.ddmanager.prepareOffsets(r,s)}}});g.ui.plugin.add("draggable","snap",{start:function(q,r,p){var s=p.options;p.snapElements=[];g(s.snap.constructor!==String?(s.snap.items||":data(ui-draggable)"):s.snap).each(function(){var u=g(this),t=u.offset();if(this!==p.element[0]){p.snapElements.push({item:this,width:u.outerWidth(),height:u.outerHeight(),top:t.top,left:t.left})}})},drag:function(D,A,u){var p,I,w,x,C,z,y,J,E,v,B=u.options,H=B.snapTolerance,G=A.offset.left,F=G+u.helperProportions.width,s=A.offset.top,q=s+u.helperProportions.height;for(E=u.snapElements.length-1;E>=0;E--){C=u.snapElements[E].left-u.margins.left;z=C+u.snapElements[E].width;y=u.snapElements[E].top-u.margins.top;J=y+u.snapElements[E].height;if(F<C-H||G>z+H||q<y-H||s>J+H||!g.contains(u.snapElements[E].item.ownerDocument,u.snapElements[E].item)){if(u.snapElements[E].snapping){(u.options.snap.release&&u.options.snap.release.call(u.element,D,g.extend(u._uiHash(),{snapItem:u.snapElements[E].item})))}u.snapElements[E].snapping=false;continue}if(B.snapMode!=="inner"){p=Math.abs(y-q)<=H;I=Math.abs(J-s)<=H;w=Math.abs(C-F)<=H;x=Math.abs(z-G)<=H;if(p){A.position.top=u._convertPositionTo("relative",{top:y-u.helperProportions.height,left:0}).top}if(I){A.position.top=u._convertPositionTo("relative",{top:J,left:0}).top}if(w){A.position.left=u._convertPositionTo("relative",{top:0,left:C-u.helperProportions.width}).left}if(x){A.position.left=u._convertPositionTo("relative",{top:0,left:z}).left}}v=(p||I||w||x);if(B.snapMode!=="outer"){p=Math.abs(y-s)<=H;I=Math.abs(J-q)<=H;w=Math.abs(C-G)<=H;x=Math.abs(z-F)<=H;if(p){A.position.top=u._convertPositionTo("relative",{top:y,left:0}).top}if(I){A.position.top=u._convertPositionTo("relative",{top:J-u.helperProportions.height,left:0}).top}if(w){A.position.left=u._convertPositionTo("relative",{top:0,left:C}).left}if(x){A.position.left=u._convertPositionTo("relative",{top:0,left:z-u.helperProportions.width}).left}}if(!u.snapElements[E].snapping&&(p||I||w||x||v)){(u.options.snap.snap&&u.options.snap.snap.call(u.element,D,g.extend(u._uiHash(),{snapItem:u.snapElements[E].item})))}u.snapElements[E].snapping=(p||I||w||x||v)}}});g.ui.plugin.add("draggable","stack",{start:function(r,s,p){var q,u=p.options,t=g.makeArray(g(u.stack)).sort(function(w,v){return(parseInt(g(w).css("zIndex"),10)||0)-(parseInt(g(v).css("zIndex"),10)||0)});if(!t.length){return}q=parseInt(g(t[0]).css("zIndex"),10)||0;g(t).each(function(v){g(this).css("zIndex",q+v)});this.css("zIndex",(q+t.length))}});g.ui.plugin.add("draggable","zIndex",{start:function(r,s,p){var q=g(s.helper),u=p.options;if(q.css("zIndex")){u._zIndex=q.css("zIndex")}q.css("zIndex",u.zIndex)},stop:function(q,r,p){var s=p.options;if(s._zIndex){g(r.helper).css("zIndex",s._zIndex)}}});var o=g.ui.draggable;
/*!
 * jQuery UI Droppable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */
g.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var q,r=this.options,p=r.accept;this.isover=false;this.isout=true;this.accept=g.isFunction(p)?p:function(s){return s.is(p)};this.proportions=function(){if(arguments.length){q=arguments[0]}else{return q?q:q={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(r.scope);r.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(p){g.ui.ddmanager.droppables[p]=g.ui.ddmanager.droppables[p]||[];g.ui.ddmanager.droppables[p].push(this)},_splice:function(p){var q=0;for(;q<p.length;q++){if(p[q]===this){p.splice(q,1)}}},_destroy:function(){var p=g.ui.ddmanager.droppables[this.options.scope];this._splice(p);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(q,r){if(q==="accept"){this.accept=g.isFunction(r)?r:function(s){return s.is(r)}}else{if(q==="scope"){var p=g.ui.ddmanager.droppables[this.options.scope];this._splice(p);this._addToManager(r)}}this._super(q,r)},_activate:function(q){var p=g.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}if(p){this._trigger("activate",q,this.ui(p))}},_deactivate:function(q){var p=g.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(p){this._trigger("deactivate",q,this.ui(p))}},_over:function(q){var p=g.ui.ddmanager.current;if(!p||(p.currentItem||p.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(p.currentItem||p.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",q,this.ui(p))}},_out:function(q){var p=g.ui.ddmanager.current;if(!p||(p.currentItem||p.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(p.currentItem||p.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",q,this.ui(p))}},_drop:function(q,r){var p=r||g.ui.ddmanager.current,s=false;if(!p||(p.currentItem||p.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=g(this).droppable("instance");if(t.options.greedy&&!t.options.disabled&&t.options.scope===p.options.scope&&t.accept.call(t.element[0],(p.currentItem||p.element))&&g.ui.intersect(p,g.extend(t,{offset:t.element.offset()}),t.options.tolerance,q)){s=true;return false}});if(s){return false}if(this.accept.call(this.element[0],(p.currentItem||p.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",q,this.ui(p));return this.element}return false},ui:function(p){return{draggable:(p.currentItem||p.element),helper:p.helper,position:p.position,offset:p.positionAbs}}});g.ui.intersect=(function(){function p(r,q,s){return(r>=q)&&(r<(q+s))}return function(D,x,B,s){if(!x.offset){return false}var v=(D.positionAbs||D.position.absolute).left+D.margins.left,A=(D.positionAbs||D.position.absolute).top+D.margins.top,u=v+D.helperProportions.width,z=A+D.helperProportions.height,w=x.offset.left,C=x.offset.top,q=w+x.proportions().width,y=C+x.proportions().height;switch(B){case"fit":return(w<=v&&u<=q&&C<=A&&z<=y);case"intersect":return(w<v+(D.helperProportions.width/2)&&u-(D.helperProportions.width/2)<q&&C<A+(D.helperProportions.height/2)&&z-(D.helperProportions.height/2)<y);case"pointer":return p(s.pageY,C,x.proportions().height)&&p(s.pageX,w,x.proportions().width);case"touch":return((A>=C&&A<=y)||(z>=C&&z<=y)||(A<C&&z>y))&&((v>=w&&v<=q)||(u>=w&&u<=q)||(v<w&&u>q));default:return false}}})();g.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(s,v){var r,q,p=g.ui.ddmanager.droppables[s.options.scope]||[],u=v?v.type:null,w=(s.currentItem||s.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(r=0;r<p.length;r++){if(p[r].options.disabled||(s&&!p[r].accept.call(p[r].element[0],(s.currentItem||s.element)))){continue}for(q=0;q<w.length;q++){if(w[q]===p[r].element[0]){p[r].proportions().height=0;continue droppablesLoop}}p[r].visible=p[r].element.css("display")!=="none";if(!p[r].visible){continue}if(u==="mousedown"){p[r]._activate.call(p[r],v)}p[r].offset=p[r].element.offset();p[r].proportions({width:p[r].element[0].offsetWidth,height:p[r].element[0].offsetHeight})}},drop:function(p,q){var r=false;g.each((g.ui.ddmanager.droppables[p.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&g.ui.intersect(p,this,this.options.tolerance,q)){r=this._drop.call(this,q)||r}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(p.currentItem||p.element))){this.isout=true;this.isover=false;this._deactivate.call(this,q)}});return r},dragStart:function(p,q){p.element.parentsUntil("body").bind("scroll.droppable",function(){if(!p.options.refreshPositions){g.ui.ddmanager.prepareOffsets(p,q)}})},drag:function(p,q){if(p.options.refreshPositions){g.ui.ddmanager.prepareOffsets(p,q)}g.each(g.ui.ddmanager.droppables[p.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var u,s,r,t=g.ui.intersect(p,this,this.options.tolerance,q),v=!t&&this.isover?"isout":(t&&!this.isover?"isover":null);if(!v){return}if(this.options.greedy){s=this.options.scope;r=this.element.parents(":data(ui-droppable)").filter(function(){return g(this).droppable("instance").options.scope===s});if(r.length){u=g(r[0]).droppable("instance");u.greedyChild=(v==="isover")}}if(u&&v==="isover"){u.isover=false;u.isout=true;u._out.call(u,q)}this[v]=true;this[v==="isout"?"isover":"isout"]=false;this[v==="isover"?"_over":"_out"].call(this,q);if(u&&v==="isout"){u.isout=false;u.isover=true;u._over.call(u,q)}})},dragStop:function(p,q){p.element.parentsUntil("body").unbind("scroll.droppable");if(!p.options.refreshPositions){g.ui.ddmanager.prepareOffsets(p,q)}}};var j=g.ui.droppable;
/*!
 * jQuery UI Resizable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */
g.widget("ui.resizable",g.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(p){return parseInt(p,10)||0},_isNumber:function(p){return !isNaN(parseInt(p,10))},_hasScroll:function(s,q){if(g(s).css("overflow")==="hidden"){return false}var p=(q&&q==="left")?"scrollLeft":"scrollTop",r=false;if(s[p]>0){return true}s[p]=1;r=(s[p]>0);s[p]=0;return r},_create:function(){var v,q,t,r,p,s=this,u=this.options;this.element.addClass("ui-resizable");g.extend(this,{_aspectRatio:!!(u.aspectRatio),aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(g("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=u.handles||(!g(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=g();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}v=this.handles.split(",");this.handles={};for(q=0;q<v.length;q++){t=g.trim(v[q]);p="ui-resizable-"+t;r=g("<div class='ui-resizable-handle "+p+"'></div>");r.css({zIndex:u.zIndex});if("se"===t){r.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[t]=".ui-resizable-"+t;this.element.append(r)}}this._renderAxis=function(A){var x,y,w,z;A=A||this.element;for(x in this.handles){if(this.handles[x].constructor===String){this.handles[x]=this.element.children(this.handles[x]).first().show()}else{if(this.handles[x].jquery||this.handles[x].nodeType){this.handles[x]=g(this.handles[x]);this._on(this.handles[x],{mousedown:s._mouseDown})}}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){y=g(this.handles[x],this.element);z=/sw|ne|nw|se|n|s/.test(x)?y.outerHeight():y.outerWidth();w=["padding",/ne|nw|n/.test(x)?"Top":/se|sw|s/.test(x)?"Bottom":/^e$/.test(x)?"Right":"Left"].join("");A.css(w,z);this._proportionallyResize()}this._handles=this._handles.add(this.handles[x])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.mouseover(function(){if(!s.resizing){if(this.className){r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}s.axis=r&&r[1]?r[1]:"se"}});if(u.autoHide){this._handles.hide();g(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled){return}g(this).removeClass("ui-resizable-autohide");s._handles.show()}).mouseleave(function(){if(u.disabled){return}if(!s.resizing){g(this).addClass("ui-resizable-autohide");s._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var q,p=function(r){g(r).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){p(this.element);q=this.element;this.originalElement.css({position:q.css("position"),width:q.outerWidth(),height:q.outerHeight(),top:q.css("top"),left:q.css("left")}).insertAfter(q);q.remove()}this.originalElement.css("resize",this.originalResizeStyle);p(this.originalElement);return this},_mouseCapture:function(r){var q,s,p=false;for(q in this.handles){s=g(this.handles[q])[0];if(s===r.target||g.contains(s,r.target)){p=true}}return !this.options.disabled&&p},_mouseStart:function(q){var u,r,t,s=this.options,p=this.element;this.resizing=true;this._renderProxy();u=this._num(this.helper.css("left"));r=this._num(this.helper.css("top"));if(s.containment){u+=g(s.containment).scrollLeft()||0;r+=g(s.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:u,top:r};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:p.width(),height:p.height()};this.originalSize=this._helper?{width:p.outerWidth(),height:p.outerHeight()}:{width:p.width(),height:p.height()};this.sizeDiff={width:p.outerWidth()-p.width(),height:p.outerHeight()-p.height()};this.originalPosition={left:u,top:r};this.originalMousePosition={left:q.pageX,top:q.pageY};this.aspectRatio=(typeof s.aspectRatio==="number")?s.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);t=g(".ui-resizable-"+this.axis).css("cursor");g("body").css("cursor",t==="auto"?this.axis+"-resize":t);p.addClass("ui-resizable-resizing");this._propagate("start",q);return true},_mouseDrag:function(u){var v,t,w=this.originalMousePosition,q=this.axis,r=(u.pageX-w.left)||0,p=(u.pageY-w.top)||0,s=this._change[q];this._updatePrevProperties();if(!s){return false}v=s.apply(this,[u,r,p]);this._updateVirtualBoundaries(u.shiftKey);if(this._aspectRatio||u.shiftKey){v=this._updateRatio(v,u)}v=this._respectSize(v,u);this._updateCache(v);this._propagate("resize",u);t=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!g.isEmptyObject(t)){this._updatePrevProperties();this._trigger("resize",u,this.ui());this._applyChanges()}return false},_mouseStop:function(t){this.resizing=false;var r,p,q,w,z,v,y,u=this.options,x=this;if(this._helper){r=this._proportionallyResizeElements;p=r.length&&(/textarea/i).test(r[0].nodeName);q=p&&this._hasScroll(r[0],"left")?0:x.sizeDiff.height;w=p?0:x.sizeDiff.width;z={width:(x.helper.width()-w),height:(x.helper.height()-q)};v=(parseInt(x.element.css("left"),10)+(x.position.left-x.originalPosition.left))||null;y=(parseInt(x.element.css("top"),10)+(x.position.top-x.originalPosition.top))||null;if(!u.animate){this.element.css(g.extend(z,{top:y,left:v}))}x.helper.height(x.size.height);x.helper.width(x.size.width);if(this._helper&&!u.animate){this._proportionallyResize()}}g("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",t);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var p={};if(this.position.top!==this.prevPosition.top){p.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){p.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){p.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){p.height=this.size.height+"px"}this.helper.css(p);return p},_updateVirtualBoundaries:function(r){var t,s,q,v,p,u=this.options;p={minWidth:this._isNumber(u.minWidth)?u.minWidth:0,maxWidth:this._isNumber(u.maxWidth)?u.maxWidth:Infinity,minHeight:this._isNumber(u.minHeight)?u.minHeight:0,maxHeight:this._isNumber(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||r){t=p.minHeight*this.aspectRatio;q=p.minWidth/this.aspectRatio;s=p.maxHeight*this.aspectRatio;v=p.maxWidth/this.aspectRatio;if(t>p.minWidth){p.minWidth=t}if(q>p.minHeight){p.minHeight=q}if(s<p.maxWidth){p.maxWidth=s}if(v<p.maxHeight){p.maxHeight=v}}this._vBoundaries=p},_updateCache:function(p){this.offset=this.helper.offset();if(this._isNumber(p.left)){this.position.left=p.left}if(this._isNumber(p.top)){this.position.top=p.top}if(this._isNumber(p.height)){this.size.height=p.height}if(this._isNumber(p.width)){this.size.width=p.width}},_updateRatio:function(r){var s=this.position,q=this.size,p=this.axis;if(this._isNumber(r.height)){r.width=(r.height*this.aspectRatio)}else{if(this._isNumber(r.width)){r.height=(r.width/this.aspectRatio)}}if(p==="sw"){r.left=s.left+(q.width-r.width);r.top=null}if(p==="nw"){r.top=s.top+(q.height-r.height);r.left=s.left+(q.width-r.width)}return r},_respectSize:function(u){var r=this._vBoundaries,x=this.axis,z=this._isNumber(u.width)&&r.maxWidth&&(r.maxWidth<u.width),v=this._isNumber(u.height)&&r.maxHeight&&(r.maxHeight<u.height),s=this._isNumber(u.width)&&r.minWidth&&(r.minWidth>u.width),y=this._isNumber(u.height)&&r.minHeight&&(r.minHeight>u.height),q=this.originalPosition.left+this.originalSize.width,w=this.position.top+this.size.height,t=/sw|nw|w/.test(x),p=/nw|ne|n/.test(x);if(s){u.width=r.minWidth}if(y){u.height=r.minHeight}if(z){u.width=r.maxWidth}if(v){u.height=r.maxHeight}if(s&&t){u.left=q-r.minWidth}if(z&&t){u.left=q-r.maxWidth}if(y&&p){u.top=w-r.minHeight}if(v&&p){u.top=w-r.maxHeight}if(!u.width&&!u.height&&!u.left&&u.top){u.top=null}else{if(!u.width&&!u.height&&!u.top&&u.left){u.left=null}}return u},_getPaddingPlusBorderDimensions:function(r){var q=0,s=[],t=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],p=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")];for(;q<4;q++){s[q]=(parseInt(t[q],10)||0);s[q]+=(parseInt(p[q],10)||0)}return{height:s[0]+s[2],width:s[1]+s[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var r,q=0,p=this.helper||this.element;for(;q<this._proportionallyResizeElements.length;q++){r=this._proportionallyResizeElements[q];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(r)}r.css({height:(p.height()-this.outerDimensions.height)||0,width:(p.width()-this.outerDimensions.width)||0})}},_renderProxy:function(){var p=this.element,q=this.options;this.elementOffset=p.offset();if(this._helper){this.helper=this.helper||g("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++q.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(q,p){return{width:this.originalSize.width+p}},w:function(r,p){var q=this.originalSize,s=this.originalPosition;return{left:s.left+p,width:q.width-p}},n:function(s,q,p){var r=this.originalSize,t=this.originalPosition;return{top:t.top+p,height:r.height-p}},s:function(r,q,p){return{height:this.originalSize.height+p}},se:function(r,q,p){return g.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[r,q,p]))},sw:function(r,q,p){return g.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[r,q,p]))},ne:function(r,q,p){return g.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[r,q,p]))},nw:function(r,q,p){return g.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[r,q,p]))}},_propagate:function(q,p){g.ui.plugin.call(this,q,[p,this.ui()]);(q!=="resize"&&this._trigger(q,p,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});g.ui.plugin.add("resizable","animate",{stop:function(s){var x=g(this).resizable("instance"),u=x.options,r=x._proportionallyResizeElements,p=r.length&&(/textarea/i).test(r[0].nodeName),q=p&&x._hasScroll(r[0],"left")?0:x.sizeDiff.height,w=p?0:x.sizeDiff.width,t={width:(x.size.width-w),height:(x.size.height-q)},v=(parseInt(x.element.css("left"),10)+(x.position.left-x.originalPosition.left))||null,y=(parseInt(x.element.css("top"),10)+(x.position.top-x.originalPosition.top))||null;x.element.animate(g.extend(t,y&&v?{top:y,left:v}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var z={width:parseInt(x.element.css("width"),10),height:parseInt(x.element.css("height"),10),top:parseInt(x.element.css("top"),10),left:parseInt(x.element.css("left"),10)};if(r&&r.length){g(r[0]).css({width:z.width,height:z.height})}x._updateCache(z);x._propagate("resize",s)}})}});g.ui.plugin.add("resizable","containment",{start:function(){var y,s,A,q,x,t,B,z=g(this).resizable("instance"),w=z.options,v=z.element,r=w.containment,u=(r instanceof g)?r.get(0):(/parent/.test(r))?v.parent().get(0):r;if(!u){return}z.containerElement=g(u);if(/document/.test(r)||r===document){z.containerOffset={left:0,top:0};z.containerPosition={left:0,top:0};z.parentData={element:g(document),left:0,top:0,width:g(document).width(),height:g(document).height()||document.body.parentNode.scrollHeight}}else{y=g(u);s=[];g(["Top","Right","Left","Bottom"]).each(function(C,p){s[C]=z._num(y.css("padding"+p))});z.containerOffset=y.offset();z.containerPosition=y.position();z.containerSize={height:(y.innerHeight()-s[3]),width:(y.innerWidth()-s[1])};A=z.containerOffset;q=z.containerSize.height;x=z.containerSize.width;t=(z._hasScroll(u,"left")?u.scrollWidth:x);B=(z._hasScroll(u)?u.scrollHeight:q);z.parentData={element:u,left:A.left,top:A.top,width:t,height:B}}},resize:function(q){var w,B,v,t,x=g(this).resizable("instance"),s=x.options,z=x.containerOffset,y=x.position,A=x._aspectRatio||q.shiftKey,p={top:0,left:0},r=x.containerElement,u=true;if(r[0]!==document&&(/static/).test(r.css("position"))){p=z}if(y.left<(x._helper?z.left:0)){x.size.width=x.size.width+(x._helper?(x.position.left-z.left):(x.position.left-p.left));if(A){x.size.height=x.size.width/x.aspectRatio;u=false}x.position.left=s.helper?z.left:0}if(y.top<(x._helper?z.top:0)){x.size.height=x.size.height+(x._helper?(x.position.top-z.top):x.position.top);if(A){x.size.width=x.size.height*x.aspectRatio;u=false}x.position.top=x._helper?z.top:0}v=x.containerElement.get(0)===x.element.parent().get(0);t=/relative|absolute/.test(x.containerElement.css("position"));if(v&&t){x.offset.left=x.parentData.left+x.position.left;x.offset.top=x.parentData.top+x.position.top}else{x.offset.left=x.element.offset().left;x.offset.top=x.element.offset().top}w=Math.abs(x.sizeDiff.width+(x._helper?x.offset.left-p.left:(x.offset.left-z.left)));B=Math.abs(x.sizeDiff.height+(x._helper?x.offset.top-p.top:(x.offset.top-z.top)));if(w+x.size.width>=x.parentData.width){x.size.width=x.parentData.width-w;if(A){x.size.height=x.size.width/x.aspectRatio;u=false}}if(B+x.size.height>=x.parentData.height){x.size.height=x.parentData.height-B;if(A){x.size.width=x.size.height*x.aspectRatio;u=false}}if(!u){x.position.left=x.prevPosition.left;x.position.top=x.prevPosition.top;x.size.width=x.prevSize.width;x.size.height=x.prevSize.height}},stop:function(){var u=g(this).resizable("instance"),q=u.options,v=u.containerOffset,p=u.containerPosition,r=u.containerElement,s=g(u.helper),y=s.offset(),x=s.outerWidth()-u.sizeDiff.width,t=s.outerHeight()-u.sizeDiff.height;if(u._helper&&!q.animate&&(/relative/).test(r.css("position"))){g(this).css({left:y.left-p.left-v.left,width:x,height:t})}if(u._helper&&!q.animate&&(/static/).test(r.css("position"))){g(this).css({left:y.left-p.left-v.left,width:x,height:t})}}});g.ui.plugin.add("resizable","alsoResize",{start:function(){var p=g(this).resizable("instance"),q=p.options;g(q.alsoResize).each(function(){var r=g(this);r.data("ui-resizable-alsoresize",{width:parseInt(r.width(),10),height:parseInt(r.height(),10),left:parseInt(r.css("left"),10),top:parseInt(r.css("top"),10)})})},resize:function(q,s){var p=g(this).resizable("instance"),t=p.options,r=p.originalSize,v=p.originalPosition,u={height:(p.size.height-r.height)||0,width:(p.size.width-r.width)||0,top:(p.position.top-v.top)||0,left:(p.position.left-v.left)||0};g(t.alsoResize).each(function(){var y=g(this),z=g(this).data("ui-resizable-alsoresize"),x={},w=y.parents(s.originalElement[0]).length?["width","height"]:["width","height","top","left"];g.each(w,function(A,C){var B=(z[C]||0)+(u[C]||0);if(B&&B>=0){x[C]=B||null}});y.css(x)})},stop:function(){g(this).removeData("resizable-alsoresize")}});g.ui.plugin.add("resizable","ghost",{start:function(){var q=g(this).resizable("instance"),r=q.options,p=q.size;q.ghost=q.originalElement.clone();q.ghost.css({opacity:0.25,display:"block",position:"relative",height:p.height,width:p.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof r.ghost==="string"?r.ghost:"");q.ghost.appendTo(q.helper)},resize:function(){var p=g(this).resizable("instance");if(p.ghost){p.ghost.css({position:"relative",height:p.size.height,width:p.size.width})}},stop:function(){var p=g(this).resizable("instance");if(p.ghost&&p.helper){p.helper.get(0).removeChild(p.ghost.get(0))}}});g.ui.plugin.add("resizable","grid",{resize:function(){var s,x=g(this).resizable("instance"),B=x.options,v=x.size,w=x.originalSize,y=x.originalPosition,G=x.axis,p=typeof B.grid==="number"?[B.grid,B.grid]:B.grid,E=(p[0]||1),D=(p[1]||1),u=Math.round((v.width-w.width)/E)*E,t=Math.round((v.height-w.height)/D)*D,z=w.width+u,C=w.height+t,r=B.maxWidth&&(B.maxWidth<z),A=B.maxHeight&&(B.maxHeight<C),F=B.minWidth&&(B.minWidth>z),q=B.minHeight&&(B.minHeight>C);B.grid=p;if(F){z+=E}if(q){C+=D}if(r){z-=E}if(A){C-=D}if(/^(se|s|e)$/.test(G)){x.size.width=z;x.size.height=C}else{if(/^(ne)$/.test(G)){x.size.width=z;x.size.height=C;x.position.top=y.top-t}else{if(/^(sw)$/.test(G)){x.size.width=z;x.size.height=C;x.position.left=y.left-u}else{if(C-D<=0||z-E<=0){s=x._getPaddingPlusBorderDimensions(this)}if(C-D>0){x.size.height=C;x.position.top=y.top-t}else{C=D-s.height;x.size.height=C;x.position.top=y.top+w.height-C}if(z-E>0){x.size.width=z;x.position.left=y.left-u}else{z=E-s.width;x.size.width=z;x.position.left=y.left+w.width-z}}}}}});var a=g.ui.resizable;
/*!
 * jQuery UI Selectable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectable/
 */
var l=g.widget("ui.selectable",g.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var q,p=this;this.element.addClass("ui-selectable");this.dragged=false;this.refresh=function(){q=g(p.options.filter,p.element[0]);q.addClass("ui-selectee");q.each(function(){var r=g(this),s=r.offset();g.data(this,"selectable-item",{element:this,$element:r,left:s.left,top:s.top,right:s.left+r.outerWidth(),bottom:s.top+r.outerHeight(),startselected:false,selected:r.hasClass("ui-selected"),selecting:r.hasClass("ui-selecting"),unselecting:r.hasClass("ui-unselecting")})})};this.refresh();this.selectees=q.addClass("ui-selectee");this._mouseInit();this.helper=g("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(r){var q=this,p=this.options;this.opos=[r.pageX,r.pageY];if(this.options.disabled){return}this.selectees=g(p.filter,this.element[0]);this._trigger("start",r);g(p.appendTo).append(this.helper);this.helper.css({left:r.pageX,top:r.pageY,width:0,height:0});if(p.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var s=g.data(this,"selectable-item");s.startselected=true;if(!r.metaKey&&!r.ctrlKey){s.$element.removeClass("ui-selected");s.selected=false;s.$element.addClass("ui-unselecting");s.unselecting=true;q._trigger("unselecting",r,{unselecting:s.element})}});g(r.target).parents().addBack().each(function(){var s,t=g.data(this,"selectable-item");if(t){s=(!r.metaKey&&!r.ctrlKey)||!t.$element.hasClass("ui-selected");t.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting");t.unselecting=!s;t.selecting=s;t.selected=s;if(s){q._trigger("selecting",r,{selecting:t.element})}else{q._trigger("unselecting",r,{unselecting:t.element})}return false}})},_mouseDrag:function(w){this.dragged=true;if(this.options.disabled){return}var t,v=this,r=this.options,q=this.opos[0],u=this.opos[1],p=w.pageX,s=w.pageY;if(q>p){t=p;p=q;q=t}if(u>s){t=s;s=u;u=t}this.helper.css({left:q,top:u,width:p-q,height:s-u});this.selectees.each(function(){var x=g.data(this,"selectable-item"),y=false;if(!x||x.element===v.element[0]){return}if(r.tolerance==="touch"){y=(!(x.left>p||x.right<q||x.top>s||x.bottom<u))}else{if(r.tolerance==="fit"){y=(x.left>q&&x.right<p&&x.top>u&&x.bottom<s)}}if(y){if(x.selected){x.$element.removeClass("ui-selected");x.selected=false}if(x.unselecting){x.$element.removeClass("ui-unselecting");x.unselecting=false}if(!x.selecting){x.$element.addClass("ui-selecting");x.selecting=true;v._trigger("selecting",w,{selecting:x.element})}}else{if(x.selecting){if((w.metaKey||w.ctrlKey)&&x.startselected){x.$element.removeClass("ui-selecting");x.selecting=false;x.$element.addClass("ui-selected");x.selected=true}else{x.$element.removeClass("ui-selecting");x.selecting=false;if(x.startselected){x.$element.addClass("ui-unselecting");x.unselecting=true}v._trigger("unselecting",w,{unselecting:x.element})}}if(x.selected){if(!w.metaKey&&!w.ctrlKey&&!x.startselected){x.$element.removeClass("ui-selected");x.selected=false;x.$element.addClass("ui-unselecting");x.unselecting=true;v._trigger("unselecting",w,{unselecting:x.element})}}}});return false},_mouseStop:function(q){var p=this;this.dragged=false;g(".ui-unselecting",this.element[0]).each(function(){var r=g.data(this,"selectable-item");r.$element.removeClass("ui-unselecting");r.unselecting=false;r.startselected=false;p._trigger("unselected",q,{unselected:r.element})});g(".ui-selecting",this.element[0]).each(function(){var r=g.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected");r.selecting=false;r.selected=true;r.startselected=true;p._trigger("selected",q,{selected:r.element})});this._trigger("stop",q);this.helper.remove();return false}});
/*!
 * jQuery UI Sortable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 */
var f=g.widget("ui.sortable",g.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(q,p,r){return(q>=p)&&(q<(p+r))},_isFloating:function(p){return(/left|right/).test(p.css("float"))||(/inline|table-cell/).test(p.css("display"))},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(p,q){this._super(p,q);if(p==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");g.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var p=this.items.length-1;p>=0;p--){this.items[p].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(r,s){var p=null,t=false,q=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(r);g(r.target).parents().each(function(){if(g.data(this,q.widgetName+"-item")===q){p=g(this);return false}});if(g.data(r.target,q.widgetName+"-item")===q){p=g(r.target)}if(!p){return false}if(this.options.handle&&!s){g(this.options.handle,p).find("*").addBack().each(function(){if(this===r.target){t=true}});if(!t){return false}}this.currentItem=p;this._removeCurrentsFromItems();return true},_mouseStart:function(s,t,q){var r,p,u=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(s);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};g.extend(this.offset,{click:{left:s.pageX-this.offset.left,top:s.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(s);this.originalPageX=s.pageX;this.originalPageY=s.pageY;(u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(u.containment){this._setContainment()}if(u.cursor&&u.cursor!=="auto"){p=this.document.find("body");this.storedCursor=p.css("cursor");p.css("cursor",u.cursor);this.storedStylesheet=g("<style>*{ cursor: "+u.cursor+" !important; }</style>").appendTo(p)}if(u.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",u.opacity)}if(u.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",u.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",s,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!q){for(r=this.containers.length-1;r>=0;r--){this.containers[r]._trigger("activate",s,this._uiHash(this))}}if(g.ui.ddmanager){g.ui.ddmanager.current=this}if(g.ui.ddmanager&&!u.dropBehaviour){g.ui.ddmanager.prepareOffsets(this,s)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(s);return true},_mouseDrag:function(t){var r,s,q,v,u=this.options,p=false;this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-t.pageY<u.scrollSensitivity){this.scrollParent[0].scrollTop=p=this.scrollParent[0].scrollTop+u.scrollSpeed}else{if(t.pageY-this.overflowOffset.top<u.scrollSensitivity){this.scrollParent[0].scrollTop=p=this.scrollParent[0].scrollTop-u.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-t.pageX<u.scrollSensitivity){this.scrollParent[0].scrollLeft=p=this.scrollParent[0].scrollLeft+u.scrollSpeed}else{if(t.pageX-this.overflowOffset.left<u.scrollSensitivity){this.scrollParent[0].scrollLeft=p=this.scrollParent[0].scrollLeft-u.scrollSpeed}}}else{if(t.pageY-this.document.scrollTop()<u.scrollSensitivity){p=this.document.scrollTop(this.document.scrollTop()-u.scrollSpeed)}else{if(this.window.height()-(t.pageY-this.document.scrollTop())<u.scrollSensitivity){p=this.document.scrollTop(this.document.scrollTop()+u.scrollSpeed)}}if(t.pageX-this.document.scrollLeft()<u.scrollSensitivity){p=this.document.scrollLeft(this.document.scrollLeft()-u.scrollSpeed)}else{if(this.window.width()-(t.pageX-this.document.scrollLeft())<u.scrollSensitivity){p=this.document.scrollLeft(this.document.scrollLeft()+u.scrollSpeed)}}}if(p!==false&&g.ui.ddmanager&&!u.dropBehaviour){g.ui.ddmanager.prepareOffsets(this,t)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(r=this.items.length-1;r>=0;r--){s=this.items[r];q=s.item[0];v=this._intersectsWithPointer(s);if(!v){continue}if(s.instance!==this.currentContainer){continue}if(q!==this.currentItem[0]&&this.placeholder[v===1?"next":"prev"]()[0]!==q&&!g.contains(this.placeholder[0],q)&&(this.options.type==="semi-dynamic"?!g.contains(this.element[0],q):true)){this.direction=v===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(s)){this._rearrange(t,s)}else{break}this._trigger("change",t,this._uiHash());break}}this._contactContainers(t);if(g.ui.ddmanager){g.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(r,t){if(!r){return}if(g.ui.ddmanager&&!this.options.dropBehaviour){g.ui.ddmanager.drop(this,r)}if(this.options.revert){var q=this,u=this.placeholder.offset(),p=this.options.axis,s={};if(!p||p==="x"){s.left=u.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!p||p==="y"){s.top=u.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;g(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){q._clear(r)})}else{this._clear(r,t)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var p=this.containers.length-1;p>=0;p--){this.containers[p]._trigger("deactivate",null,this._uiHash(this));if(this.containers[p].containerCache.over){this.containers[p]._trigger("out",null,this._uiHash(this));this.containers[p].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}g.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){g(this.domPosition.prev).after(this.currentItem)}else{g(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(r){var p=this._getItemsAsjQuery(r&&r.connected),q=[];r=r||{};g(p).each(function(){var s=(g(r.item||this).attr(r.attribute||"id")||"").match(r.expression||(/(.+)[\-=_](.+)/));if(s){q.push((r.key||s[1]+"[]")+"="+(r.key&&r.expression?s[1]:s[2]))}});if(!q.length&&r.key){q.push(r.key+"=")}return q.join("&")},toArray:function(r){var p=this._getItemsAsjQuery(r&&r.connected),q=[];r=r||{};p.each(function(){q.push(g(r.item||this).attr(r.attribute||"id")||"")});return q},_intersectsWith:function(C){var s=this.positionAbs.left,q=s+this.helperProportions.width,A=this.positionAbs.top,z=A+this.helperProportions.height,u=C.left,p=u+C.width,D=C.top,y=D+C.height,E=this.offset.click.top,x=this.offset.click.left,w=(this.options.axis==="x")||((A+E)>D&&(A+E)<y),B=(this.options.axis==="y")||((s+x)>u&&(s+x)<p),v=w&&B;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>C[this.floating?"width":"height"])){return v}else{return(u<s+(this.helperProportions.width/2)&&q-(this.helperProportions.width/2)<p&&D<A+(this.helperProportions.height/2)&&z-(this.helperProportions.height/2)<y)}},_intersectsWithPointer:function(r){var s=(this.options.axis==="x")||this._isOverAxis(this.positionAbs.top+this.offset.click.top,r.top,r.height),q=(this.options.axis==="y")||this._isOverAxis(this.positionAbs.left+this.offset.click.left,r.left,r.width),u=s&&q,p=this._getDragVerticalDirection(),t=this._getDragHorizontalDirection();if(!u){return false}return this.floating?(((t&&t==="right")||p==="down")?2:1):(p&&(p==="down"?2:1))},_intersectsWithSides:function(s){var q=this._isOverAxis(this.positionAbs.top+this.offset.click.top,s.top+(s.height/2),s.height),r=this._isOverAxis(this.positionAbs.left+this.offset.click.left,s.left+(s.width/2),s.width),p=this._getDragVerticalDirection(),t=this._getDragHorizontalDirection();if(this.floating&&t){return((t==="right"&&r)||(t==="left"&&!r))}else{return p&&((p==="down"&&q)||(p==="up"&&!q))}},_getDragVerticalDirection:function(){var p=this.positionAbs.top-this.lastPositionAbs.top;return p!==0&&(p>0?"down":"up")},_getDragHorizontalDirection:function(){var p=this.positionAbs.left-this.lastPositionAbs.left;return p!==0&&(p>0?"right":"left")},refresh:function(p){this._refreshItems(p);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var p=this.options;return p.connectWith.constructor===String?[p.connectWith]:p.connectWith},_getItemsAsjQuery:function(p){var r,q,w,t,u=[],s=[],v=this._connectWith();if(v&&p){for(r=v.length-1;r>=0;r--){w=g(v[r],this.document[0]);for(q=w.length-1;q>=0;q--){t=g.data(w[q],this.widgetFullName);if(t&&t!==this&&!t.options.disabled){s.push([g.isFunction(t.options.items)?t.options.items.call(t.element):g(t.options.items,t.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),t])}}}}s.push([g.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):g(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function x(){u.push(this)}for(r=s.length-1;r>=0;r--){s[r][0].each(x)}return g(u)},_removeCurrentsFromItems:function(){var p=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=g.grep(this.items,function(r){for(var q=0;q<p.length;q++){if(p[q]===r.item[0]){return false}}return true})},_refreshItems:function(p){this.items=[];this.containers=[this];var t,r,y,u,x,q,A,z,v=this.items,s=[[g.isFunction(this.options.items)?this.options.items.call(this.element[0],p,{item:this.currentItem}):g(this.options.items,this.element),this]],w=this._connectWith();if(w&&this.ready){for(t=w.length-1;t>=0;t--){y=g(w[t],this.document[0]);for(r=y.length-1;r>=0;r--){u=g.data(y[r],this.widgetFullName);if(u&&u!==this&&!u.options.disabled){s.push([g.isFunction(u.options.items)?u.options.items.call(u.element[0],p,{item:this.currentItem}):g(u.options.items,u.element),u]);this.containers.push(u)}}}}for(t=s.length-1;t>=0;t--){x=s[t][1];q=s[t][0];for(r=0,z=q.length;r<z;r++){A=g(q[r]);A.data(this.widgetName+"-item",x);v.push({item:A,instance:x,width:0,height:0,left:0,top:0})}}},refreshPositions:function(q){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var s,u,r,v;for(s=this.items.length-1;s>=0;s--){u=this.items[s];if(u.instance!==this.currentContainer&&this.currentContainer&&u.item[0]!==this.currentItem[0]){continue}r=this.options.toleranceElement?g(this.options.toleranceElement,u.item):u.item;if(!q){u.width=r.outerWidth();u.height=r.outerHeight()}v=r.offset();u.left=v.left;u.top=v.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(s=this.containers.length-1;s>=0;s--){v=this.containers[s].element.offset();this.containers[s].containerCache.left=v.left;this.containers[s].containerCache.top=v.top;this.containers[s].containerCache.width=this.containers[s].element.outerWidth();this.containers[s].containerCache.height=this.containers[s].element.outerHeight()}}return this},_createPlaceholder:function(q){q=q||this;var p,r=q.options;if(!r.placeholder||r.placeholder.constructor===String){p=r.placeholder;r.placeholder={element:function(){var t=q.currentItem[0].nodeName.toLowerCase(),s=g("<"+t+">",q.document[0]).addClass(p||q.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(t==="tbody"){q._createTrPlaceholder(q.currentItem.find("tr").eq(0),g("<tr>",q.document[0]).appendTo(s))}else{if(t==="tr"){q._createTrPlaceholder(q.currentItem,s)}else{if(t==="img"){s.attr("src",q.currentItem.attr("src"))}}}if(!p){s.css("visibility","hidden")}return s},update:function(s,t){if(p&&!r.forcePlaceholderSize){return}if(!t.height()){t.height(q.currentItem.innerHeight()-parseInt(q.currentItem.css("paddingTop")||0,10)-parseInt(q.currentItem.css("paddingBottom")||0,10))}if(!t.width()){t.width(q.currentItem.innerWidth()-parseInt(q.currentItem.css("paddingLeft")||0,10)-parseInt(q.currentItem.css("paddingRight")||0,10))}}}}q.placeholder=g(r.placeholder.element.call(q.element,q.currentItem));q.currentItem.after(q.placeholder);r.placeholder.update(q,q.placeholder)},_createTrPlaceholder:function(q,p){var r=this;q.children().each(function(){g("<td>&#160;</td>",r.document[0]).attr("colspan",g(this).attr("colspan")||1).appendTo(p)})},_contactContainers:function(p){var u,s,y,v,w,A,B,t,x,r,q=null,z=null;for(u=this.containers.length-1;u>=0;u--){if(g.contains(this.currentItem[0],this.containers[u].element[0])){continue}if(this._intersectsWith(this.containers[u].containerCache)){if(q&&g.contains(this.containers[u].element[0],q.element[0])){continue}q=this.containers[u];z=u}else{if(this.containers[u].containerCache.over){this.containers[u]._trigger("out",p,this._uiHash(this));this.containers[u].containerCache.over=0}}}if(!q){return}if(this.containers.length===1){if(!this.containers[z].containerCache.over){this.containers[z]._trigger("over",p,this._uiHash(this));this.containers[z].containerCache.over=1}}else{y=10000;v=null;x=q.floating||this._isFloating(this.currentItem);w=x?"left":"top";A=x?"width":"height";r=x?"clientX":"clientY";for(s=this.items.length-1;s>=0;s--){if(!g.contains(this.containers[z].element[0],this.items[s].item[0])){continue}if(this.items[s].item[0]===this.currentItem[0]){continue}B=this.items[s].item.offset()[w];t=false;if(p[r]-B>this.items[s][A]/2){t=true}if(Math.abs(p[r]-B)<y){y=Math.abs(p[r]-B);v=this.items[s];this.direction=t?"up":"down"}}if(!v&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[z]){if(!this.currentContainer.containerCache.over){this.containers[z]._trigger("over",p,this._uiHash());this.currentContainer.containerCache.over=1}return}v?this._rearrange(p,v,null,true):this._rearrange(p,null,this.containers[z].element,true);this._trigger("change",p,this._uiHash());this.containers[z]._trigger("change",p,this._uiHash(this));this.currentContainer=this.containers[z];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[z]._trigger("over",p,this._uiHash(this));this.containers[z].containerCache.over=1}},_createHelper:function(q){var r=this.options,p=g.isFunction(r.helper)?g(r.helper.apply(this.element[0],[q,this.currentItem])):(r.helper==="clone"?this.currentItem.clone():this.currentItem);if(!p.parents("body").length){g(r.appendTo!=="parent"?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(p[0])}if(p[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!p[0].style.width||r.forceHelperSize){p.width(this.currentItem.width())}if(!p[0].style.height||r.forceHelperSize){p.height(this.currentItem.height())}return p},_adjustOffsetFromHelper:function(p){if(typeof p==="string"){p=p.split(" ")}if(g.isArray(p)){p={left:+p[0],top:+p[1]||0}}if("left" in p){this.offset.click.left=p.left+this.margins.left}if("right" in p){this.offset.click.left=this.helperProportions.width-p.right+this.margins.left}if("top" in p){this.offset.click.top=p.top+this.margins.top}if("bottom" in p){this.offset.click.top=this.helperProportions.height-p.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var p=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0])){p.left+=this.scrollParent.scrollLeft();p.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&g.ui.ie)){p={top:0,left:0}}return{top:p.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:p.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var q=this.currentItem.position();return{top:q.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:q.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var q,s,p,r=this.options;if(r.containment==="parent"){r.containment=this.helper[0].parentNode}if(r.containment==="document"||r.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,r.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(r.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(r.containment)){q=g(r.containment)[0];s=g(r.containment).offset();p=(g(q).css("overflow")!=="hidden");this.containment=[s.left+(parseInt(g(q).css("borderLeftWidth"),10)||0)+(parseInt(g(q).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(g(q).css("borderTopWidth"),10)||0)+(parseInt(g(q).css("paddingTop"),10)||0)-this.margins.top,s.left+(p?Math.max(q.scrollWidth,q.offsetWidth):q.offsetWidth)-(parseInt(g(q).css("borderLeftWidth"),10)||0)-(parseInt(g(q).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(p?Math.max(q.scrollHeight,q.offsetHeight):q.offsetHeight)-(parseInt(g(q).css("borderTopWidth"),10)||0)-(parseInt(g(q).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(r,t){if(!t){t=this.position}var q=r==="absolute"?1:-1,p=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,s=(/(html|body)/i).test(p[0].tagName);return{top:(t.top+this.offset.relative.top*q+this.offset.parent.top*q-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(s?0:p.scrollTop()))*q)),left:(t.left+this.offset.relative.left*q+this.offset.parent.left*q-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:p.scrollLeft())*q))}},_generatePosition:function(s){var u,t,v=this.options,r=s.pageX,q=s.pageY,p=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&g.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,w=(/(html|body)/i).test(p[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(s.pageX-this.offset.click.left<this.containment[0]){r=this.containment[0]+this.offset.click.left}if(s.pageY-this.offset.click.top<this.containment[1]){q=this.containment[1]+this.offset.click.top}if(s.pageX-this.offset.click.left>this.containment[2]){r=this.containment[2]+this.offset.click.left}if(s.pageY-this.offset.click.top>this.containment[3]){q=this.containment[3]+this.offset.click.top}}if(v.grid){u=this.originalPageY+Math.round((q-this.originalPageY)/v.grid[1])*v.grid[1];q=this.containment?((u-this.offset.click.top>=this.containment[1]&&u-this.offset.click.top<=this.containment[3])?u:((u-this.offset.click.top>=this.containment[1])?u-v.grid[1]:u+v.grid[1])):u;t=this.originalPageX+Math.round((r-this.originalPageX)/v.grid[0])*v.grid[0];r=this.containment?((t-this.offset.click.left>=this.containment[0]&&t-this.offset.click.left<=this.containment[2])?t:((t-this.offset.click.left>=this.containment[0])?t-v.grid[0]:t+v.grid[0])):t}}return{top:(q-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(w?0:p.scrollTop())))),left:(r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():w?0:p.scrollLeft())))}},_rearrange:function(t,s,q,r){q?q[0].appendChild(this.placeholder[0]):s.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?s.item[0]:s.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var p=this.counter;this._delay(function(){if(p===this.counter){this.refreshPositions(!r)}})},_clear:function(q,s){this.reverting=false;var p,t=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(p in this._storedCSS){if(this._storedCSS[p]==="auto"||this._storedCSS[p]==="static"){this._storedCSS[p]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!s){t.push(function(u){this._trigger("receive",u,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!s){t.push(function(u){this._trigger("update",u,this._uiHash())})}if(this!==this.currentContainer){if(!s){t.push(function(u){this._trigger("remove",u,this._uiHash())});t.push((function(u){return function(v){u._trigger("receive",v,this._uiHash(this))}}).call(this,this.currentContainer));t.push((function(u){return function(v){u._trigger("update",v,this._uiHash(this))}}).call(this,this.currentContainer))}}function r(w,u,v){return function(x){v._trigger(w,x,u._uiHash(u))}}for(p=this.containers.length-1;p>=0;p--){if(!s){t.push(r("deactivate",this,this.containers[p]))}if(this.containers[p].containerCache.over){t.push(r("out",this,this.containers[p]));this.containers[p].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!s){this._trigger("beforeStop",q,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!s){for(p=0;p<t.length;p++){t[p].call(this,q)}this._trigger("stop",q,this._uiHash())}this.fromOutside=false;return !this.cancelHelperRemoval},_trigger:function(){if(g.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(p){var q=p||this;return{helper:q.helper,placeholder:q.placeholder||g([]),position:q.position,originalPosition:q.originalPosition,offset:q.positionAbs,item:q.currentItem,sender:p?p.element:null}}});
/*!
 * jQuery UI Slider 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */
var b=g.widget("ui.slider",g.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var s,p,q=this.options,u=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),t="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",r=[];p=(q.values&&q.values.length)||1;if(u.length>p){u.slice(p).remove();u=u.slice(0,p)}for(s=u.length;s<p;s++){r.push(t)}this.handles=u.add(g(r.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(v){g(this).data("ui-slider-handle-index",v)})},_createRange:function(){var p=this.options,q="";if(p.range){if(p.range===true){if(!p.values){p.values=[this._valueMin(),this._valueMin()]}else{if(p.values.length&&p.values.length!==2){p.values=[p.values[0],p.values[0]]}else{if(g.isArray(p.values)){p.values=p.values.slice(0)}}}}if(!this.range||!this.range.length){this.range=g("<div></div>").appendTo(this.element);q="ui-slider-range ui-widget-header ui-corner-all"}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""})}this.range.addClass(q+((p.range==="min"||p.range==="max")?" ui-slider-range-"+p.range:""))}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(r){var v,y,q,t,x,z,u,p,w=this,s=this.options;if(s.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();v={x:r.pageX,y:r.pageY};y=this._normValueFromMouse(v);q=this._valueMax()-this._valueMin()+1;this.handles.each(function(A){var B=Math.abs(y-w.values(A));if((q>B)||(q===B&&(A===w._lastChangedValue||w.values(A)===s.min))){q=B;t=g(this);x=A}});z=this._start(r,x);if(z===false){return false}this._mouseSliding=true;this._handleIndex=x;t.addClass("ui-state-active").focus();u=t.offset();p=!g(r.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=p?{left:0,top:0}:{left:r.pageX-u.left-(t.width()/2),top:r.pageY-u.top-(t.height()/2)-(parseInt(t.css("borderTopWidth"),10)||0)-(parseInt(t.css("borderBottomWidth"),10)||0)+(parseInt(t.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(r,x,y)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(r){var p={x:r.pageX,y:r.pageY},q=this._normValueFromMouse(p);this._slide(r,this._handleIndex,q);return false},_mouseStop:function(p){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(p,this._handleIndex);this._change(p,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"},_normValueFromMouse:function(q){var p,t,s,r,u;if(this.orientation==="horizontal"){p=this.elementSize.width;t=q.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{p=this.elementSize.height;t=q.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}s=(t/p);if(s>1){s=1}if(s<0){s=0}if(this.orientation==="vertical"){s=1-s}r=this._valueMax()-this._valueMin();u=this._valueMin()+s*r;return this._trimAlignValue(u)},_start:function(r,q){var p={handle:this.handles[q],value:this.value()};if(this.options.values&&this.options.values.length){p.value=this.values(q);p.values=this.values()}return this._trigger("start",r,p)},_slide:function(t,s,r){var p,q,u;if(this.options.values&&this.options.values.length){p=this.values(s?0:1);if((this.options.values.length===2&&this.options.range===true)&&((s===0&&r>p)||(s===1&&r<p))){r=p}if(r!==this.values(s)){q=this.values();q[s]=r;u=this._trigger("slide",t,{handle:this.handles[s],value:r,values:q});p=this.values(s?0:1);if(u!==false){this.values(s,r)}}}else{if(r!==this.value()){u=this._trigger("slide",t,{handle:this.handles[s],value:r});if(u!==false){this.value(r)}}}},_stop:function(r,q){var p={handle:this.handles[q],value:this.value()};if(this.options.values&&this.options.values.length){p.value=this.values(q);p.values=this.values()}this._trigger("stop",r,p)},_change:function(r,q){if(!this._keySliding&&!this._mouseSliding){var p={handle:this.handles[q],value:this.value()};if(this.options.values&&this.options.values.length){p.value=this.values(q);p.values=this.values()}this._lastChangedValue=q;this._trigger("change",r,p)}},value:function(p){if(arguments.length){this.options.value=this._trimAlignValue(p);this._refreshValue();this._change(null,0);return}return this._value()},values:function(q,t){var s,p,r;if(arguments.length>1){this.options.values[q]=this._trimAlignValue(t);this._refreshValue();this._change(null,q);return}if(arguments.length){if(g.isArray(arguments[0])){s=this.options.values;p=arguments[0];for(r=0;r<s.length;r+=1){s[r]=this._trimAlignValue(p[r]);this._change(null,r)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(q)}else{return this.value()}}}else{return this._values()}},_setOption:function(q,r){var p,s=0;if(q==="range"&&this.options.range===true){if(r==="min"){this.options.value=this._values(0);this.options.values=null}else{if(r==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}}if(g.isArray(this.options.values)){s=this.options.values.length}if(q==="disabled"){this.element.toggleClass("ui-state-disabled",!!r)}this._super(q,r);switch(q){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this.handles.css(r==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(p=0;p<s;p+=1){this._change(null,p)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_value:function(){var p=this.options.value;p=this._trimAlignValue(p);return p},_values:function(p){var s,r,q;if(arguments.length){s=this.options.values[p];s=this._trimAlignValue(s);return s}else{if(this.options.values&&this.options.values.length){r=this.options.values.slice();for(q=0;q<r.length;q+=1){r[q]=this._trimAlignValue(r[q])}return r}else{return[]}}},_trimAlignValue:function(s){if(s<=this._valueMin()){return this._valueMin()}if(s>=this._valueMax()){return this._valueMax()}var p=(this.options.step>0)?this.options.step:1,r=(s-this._valueMin())%p,q=s-r;if(Math.abs(r)*2>=p){q+=(r>0)?p:(-p)}return parseFloat(q.toFixed(5))},_calculateNewMax:function(){var p=this.options.max,q=this._valueMin(),r=this.options.step,s=Math.floor((+(p-q).toFixed(this._precision()))/r)*r;p=s+q;this.max=parseFloat(p.toFixed(this._precision()))},_precision:function(){var p=this._precisionOf(this.options.step);if(this.options.min!==null){p=Math.max(p,this._precisionOf(this.options.min))}return p},_precisionOf:function(q){var r=q.toString(),p=r.indexOf(".");return p===-1?0:r.length-p-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var u,t,x,v,y,s=this.options.range,r=this.options,w=this,q=(!this._animateOff)?r.animate:false,p={};if(this.options.values&&this.options.values.length){this.handles.each(function(z){t=(w.values(z)-w._valueMin())/(w._valueMax()-w._valueMin())*100;p[w.orientation==="horizontal"?"left":"bottom"]=t+"%";g(this).stop(1,1)[q?"animate":"css"](p,r.animate);if(w.options.range===true){if(w.orientation==="horizontal"){if(z===0){w.range.stop(1,1)[q?"animate":"css"]({left:t+"%"},r.animate)}if(z===1){w.range[q?"animate":"css"]({width:(t-u)+"%"},{queue:false,duration:r.animate})}}else{if(z===0){w.range.stop(1,1)[q?"animate":"css"]({bottom:(t)+"%"},r.animate)}if(z===1){w.range[q?"animate":"css"]({height:(t-u)+"%"},{queue:false,duration:r.animate})}}}u=t})}else{x=this.value();v=this._valueMin();y=this._valueMax();t=(y!==v)?(x-v)/(y-v)*100:0;p[this.orientation==="horizontal"?"left":"bottom"]=t+"%";this.handle.stop(1,1)[q?"animate":"css"](p,r.animate);if(s==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[q?"animate":"css"]({width:t+"%"},r.animate)}if(s==="max"&&this.orientation==="horizontal"){this.range[q?"animate":"css"]({width:(100-t)+"%"},{queue:false,duration:r.animate})}if(s==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[q?"animate":"css"]({height:t+"%"},r.animate)}if(s==="max"&&this.orientation==="vertical"){this.range[q?"animate":"css"]({height:(100-t)+"%"},{queue:false,duration:r.animate})}}},_handleEvents:{keydown:function(t){var u,r,q,s,p=g(t.target).data("ui-slider-handle-index");switch(t.keyCode){case g.ui.keyCode.HOME:case g.ui.keyCode.END:case g.ui.keyCode.PAGE_UP:case g.ui.keyCode.PAGE_DOWN:case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=true;g(t.target).addClass("ui-state-active");u=this._start(t,p);if(u===false){return}}break}s=this.options.step;if(this.options.values&&this.options.values.length){r=q=this.values(p)}else{r=q=this.value()}switch(t.keyCode){case g.ui.keyCode.HOME:q=this._valueMin();break;case g.ui.keyCode.END:q=this._valueMax();break;case g.ui.keyCode.PAGE_UP:q=this._trimAlignValue(r+((this._valueMax()-this._valueMin())/this.numPages));break;case g.ui.keyCode.PAGE_DOWN:q=this._trimAlignValue(r-((this._valueMax()-this._valueMin())/this.numPages));break;case g.ui.keyCode.UP:case g.ui.keyCode.RIGHT:if(r===this._valueMax()){return}q=this._trimAlignValue(r+s);break;case g.ui.keyCode.DOWN:case g.ui.keyCode.LEFT:if(r===this._valueMin()){return}q=this._trimAlignValue(r-s);break}this._slide(t,p,q)},keyup:function(q){var p=g(q.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(q,p);this._change(q,p);g(q.target).removeClass("ui-state-active")}}}})}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function($){$.jgrid=$.jgrid||{};if(!$.jgrid.hasOwnProperty("defaults")){$.jgrid.defaults={}}$.extend($.jgrid,{version:"5.1.0",htmlDecode:function(value){if(value&&(value==="&nbsp;"||value==="&#160;"||(value.length===1&&value.charCodeAt(0)===160))){return""}return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},template:function(format){var args=$.makeArray(arguments).slice(1),j,al=args.length;if(format==null){format=""}return format.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(m,i){if(!isNaN(parseInt(i,10))){return args[parseInt(i,10)]}for(j=0;j<al;j++){if($.isArray(args[j])){var nmarr=args[j],k=nmarr.length;while(k--){if(i===nmarr[k].nm){return nmarr[k].v}}}}})},msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var rv=-1;var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(re.exec(ua)!=null){rv=parseFloat(RegExp.$1)}return rv},getCellIndex:function(cell){var c=$(cell);if(c.is("tr")){return -1}c=(!c.is("td")&&!c.is("th")?c.closest("td,th"):c)[0];if($.jgrid.msie){return $.inArray(c,c.parentNode.cells)}return c.cellIndex},stripHtml:function(v){v=String(v);var regexp=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(v){v=v.replace(regexp,"");return(v&&v!=="&nbsp;"&&v!=="&#160;")?v.replace(/\"/g,"'"):""}return v},stripPref:function(pref,id){var obj=$.type(pref);if(obj==="string"||obj==="number"){pref=String(pref);id=pref!==""?String(id).replace(String(pref),""):id}return id},parse:function(jsonString){var js=jsonString;if(js.substr(0,9)==="while(1);"){js=js.substr(9)}if(js.substr(0,2)==="/*"){js=js.substr(2,js.length-4)}if(!js){js="{}"}return($.jgrid.useJSON===true&&typeof JSON==="object"&&typeof JSON.parse==="function")?JSON.parse(js):eval("("+js+")")},parseDate:function(format,date,newformat,opts){var token=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,msDateRegExp=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),msMatch=((typeof date==="string")?date.match(msDateRegExp):null),pad=function(value,length){value=String(value);length=parseInt(length,10)||2;while(value.length<length){value="0"+value}return value},ts={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},timestamp=0,dM,k,hl,h12to24=function(ampm,h){if(ampm===0){if(h===12){h=0}}else{if(h!==12){h+=12}}return h},offset=0;if(opts===undefined){opts=$.jgrid.getRegional(this,"formatter.date")}if(opts.parseRe===undefined){opts.parseRe=/[#%\\\/:_;.,\t\s-]/}if(opts.masks.hasOwnProperty(format)){format=opts.masks[format]}if(date&&date!=null){if(!isNaN(date-0)&&String(format).toLowerCase()==="u"){timestamp=new Date(parseFloat(date)*1000)}else{if(date.constructor===Date){timestamp=date}else{if(msMatch!==null){timestamp=new Date(parseInt(msMatch[1],10));if(msMatch[3]){offset=Number(msMatch[5])*60+Number(msMatch[6]);offset*=((msMatch[4]==="-")?1:-1);offset-=timestamp.getTimezoneOffset();timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}else{if(opts.srcformat==="ISO8601Long"&&date.charAt(date.length-1)==="Z"){offset-=(new Date()).getTimezoneOffset()}date=String(date).replace(/\T/g,"#").replace(/\t/,"%").split(opts.parseRe);format=format.replace(/\T/g,"#").replace(/\t/,"%").split(opts.parseRe);for(k=0,hl=format.length;k<hl;k++){switch(format[k]){case"M":dM=$.inArray(date[k],opts.monthNames);if(dM!==-1&&dM<12){date[k]=dM+1;ts.m=date[k]}break;case"F":dM=$.inArray(date[k],opts.monthNames,12);if(dM!==-1&&dM>11){date[k]=dM+1-12;ts.m=date[k]}break;case"n":format[k]="m";break;case"j":format[k]="d";break;case"a":dM=$.inArray(date[k],opts.AmPm);if(dM!==-1&&dM<2&&date[k]===opts.AmPm[dM]){date[k]=dM;ts.h=h12to24(date[k],ts.h)}break;case"A":dM=$.inArray(date[k],opts.AmPm);if(dM!==-1&&dM>1&&date[k]===opts.AmPm[dM]){date[k]=dM-2;ts.h=h12to24(date[k],ts.h)}break;case"g":ts.h=parseInt(date[k],10);break}if(date[k]!==undefined){ts[format[k].toLowerCase()]=parseInt(date[k],10)}}if(ts.f){ts.m=ts.f}if(ts.m===0&&ts.y===0&&ts.d===0){return"&#160;"}ts.m=parseInt(ts.m,10)-1;var ty=ts.y;if(ty>=70&&ty<=99){ts.y=1900+ts.y}else{if(ty>=0&&ty<=69){ts.y=2000+ts.y}}timestamp=new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u);if(offset>0){timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}}}}else{timestamp=new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u)}if(opts.userLocalTime&&offset===0){offset-=(new Date()).getTimezoneOffset();if(offset>0){timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}if(newformat===undefined){return timestamp}if(opts.masks.hasOwnProperty(newformat)){newformat=opts.masks[newformat]}else{if(!newformat){newformat="Y-m-d"}}var G=timestamp.getHours(),i=timestamp.getMinutes(),j=timestamp.getDate(),n=timestamp.getMonth()+1,o=timestamp.getTimezoneOffset(),s=timestamp.getSeconds(),u=timestamp.getMilliseconds(),w=timestamp.getDay(),Y=timestamp.getFullYear(),N=(w+6)%7+1,z=(new Date(Y,n-1,j)-new Date(Y,0,1))/86400000,flags={d:pad(j),D:opts.dayNames[w],j:j,l:opts.dayNames[w+7],N:N,S:opts.S(j),w:w,z:z,W:N<5?Math.floor((z+N-1)/7)+1:Math.floor((z+N-1)/7)||((new Date(Y-1,0,1).getDay()+6)%7<4?53:52),F:opts.monthNames[n-1+12],m:pad(n),M:opts.monthNames[n-1],n:n,t:"?",L:"?",o:"?",Y:Y,y:String(Y).substring(2),a:G<12?opts.AmPm[0]:opts.AmPm[1],A:G<12?opts.AmPm[2]:opts.AmPm[3],B:"?",g:G%12||12,G:G,h:pad(G%12||12),H:pad(G),i:pad(i),s:pad(s),u:u,e:"?",I:"?",O:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),P:"?",T:(String(timestamp).match(timezone)||[""]).pop().replace(timezoneClip,""),Z:"?",c:"?",r:"?",U:Math.floor(timestamp/1000)};return newformat.replace(token,function($0){return flags.hasOwnProperty($0)?flags[$0]:$0.substring(1)})},jqID:function(sid){return String(sid).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(prefix){return(prefix||$.jgrid.uidPref)+($.jgrid.guid++)},getAccessor:function(obj,expr){var ret,p,prm=[],i;if(typeof expr==="function"){return expr(obj)}ret=obj[expr];if(ret===undefined){try{if(typeof expr==="string"){prm=expr.split(".")}i=prm.length;if(i){ret=obj;while(ret&&i--){p=prm.shift();ret=ret[p]}}}catch(e){}}return ret},getXmlData:function(obj,expr,returnObj){var ret,m=typeof expr==="string"?expr.match(/^(.*)\[(\w+)\]$/):null;if(typeof expr==="function"){return expr(obj)}if(m&&m[2]){return m[1]?$(m[1],obj).attr(m[2]):$(obj).attr(m[2])}ret=$(expr,obj);if(returnObj){return ret}return ret.length>0?$(ret).text():undefined},cellWidth:function(){var $testDiv=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),testCell=$testDiv.appendTo("body").find("td").width();$testDiv.remove();return Math.abs(testCell-5)>0.1},isLocalStorage:function(){try{return"localStorage" in window&&window.localStorage!==null}catch(e){return false}},getRegional:function(inst,param,def_val){var ret;if(def_val!==undefined){return def_val}if(inst.p&&inst.p.regional&&$.jgrid.regional){ret=$.jgrid.getAccessor($.jgrid.regional[inst.p.regional]||{},param)}if(ret===undefined){ret=$.jgrid.getAccessor($.jgrid,param)}return ret},isMobile:function(){try{if(/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)){return true}return false}catch(e){return false}},cell_width:true,ajaxOptions:{},from:function(source){var $t=this,QueryObject=function(d,q){if(typeof d==="string"){d=$.data(d)}var self=this,_data=d,_usecase=true,_trim=false,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=false,_queuedOperator="",_sorting=[],_useProperties=true;if(typeof d==="object"&&d.push){if(d.length>0){if(typeof d[0]!=="object"){_useProperties=false}else{_useProperties=true}}}else{throw"data provides is not an array"}this._hasData=function(){return _data===null?false:_data.length===0?false:true};this._getStr=function(s){var phrase=[];if(_trim){phrase.push("jQuery.trim(")}phrase.push("String("+s+")");if(_trim){phrase.push(")")}if(!_usecase){phrase.push(".toLowerCase()")}return phrase.join("")};this._strComp=function(val){if(typeof val==="string"){return".toString()"}return""};this._group=function(f,u){return({field:f.toString(),unique:u,items:[]})};this._toStr=function(phrase){if(_trim){phrase=$.trim(phrase)}phrase=phrase.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return _usecase?phrase:phrase.toLowerCase()};this._funcLoop=function(func){var results=[];$.each(_data,function(i,v){results.push(func(v))});return results};this._append=function(s){var i;if(_query===null){_query=""}else{_query+=_queuedOperator===""?" && ":_queuedOperator}for(i=0;i<_orDepth;i++){_query+="("}if(_negate){_query+="!"}_query+="("+s+")";_negate=false;_queuedOperator="";_orDepth=0};this._setCommand=function(f,c){_lastCommand=f;_lastField=c};this._resetNegate=function(){_negate=false};this._repeatCommand=function(f,v){if(_lastCommand===null){return self}if(f!==null&&v!==null){return _lastCommand(f,v)}if(_lastField===null){return _lastCommand(f)}if(!_useProperties){return _lastCommand(f)}return _lastCommand(_lastField,f)};this._equals=function(a,b){return(self._compare(a,b,1)===0)};this._compare=function(a,b,d){var toString=Object.prototype.toString;if(d===undefined){d=1}if(a===undefined){a=null}if(b===undefined){b=null}if(a===null&&b===null){return 0}if(a===null&&b!==null){return 1}if(a!==null&&b===null){return -1}if(toString.call(a)==="[object Date]"&&toString.call(b)==="[object Date]"){if(a<b){return -d}if(a>b){return d}return 0}if(!_usecase&&typeof a!=="number"&&typeof b!=="number"){a=String(a);b=String(b)}if(a<b){return -d}if(a>b){return d}return 0};this._performSort=function(){if(_sorting.length===0){return}_data=self._doSort(_data,0)};this._doSort=function(d,q){var by=_sorting[q].by,dir=_sorting[q].dir,type=_sorting[q].type,dfmt=_sorting[q].datefmt,sfunc=_sorting[q].sfunc;if(q===_sorting.length-1){return self._getOrder(d,by,dir,type,dfmt,sfunc)}q++;var values=self._getGroup(d,by,dir,type,dfmt),results=[],i,j,sorted;for(i=0;i<values.length;i++){sorted=self._doSort(values[i].items,q);for(j=0;j<sorted.length;j++){results.push(sorted[j])}}return results};this._getOrder=function(data,by,dir,type,dfmt,sfunc){var sortData=[],_sortData=[],newDir=dir==="a"?1:-1,i,ab,j,findSortKey;if(type===undefined){type="text"}if(type==="float"||type==="number"||type==="currency"||type==="numeric"){findSortKey=function($cell){var key=parseFloat(String($cell).replace(_stripNum,""));return isNaN(key)?Number.NEGATIVE_INFINITY:key}}else{if(type==="int"||type==="integer"){findSortKey=function($cell){return $cell?parseFloat(String($cell).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}}else{if(type==="date"||type==="datetime"){findSortKey=function($cell){return $.jgrid.parseDate.call($t,dfmt,$cell).getTime()}}else{if($.isFunction(type)){findSortKey=type}else{findSortKey=function($cell){$cell=$cell?$.trim(String($cell)):"";return _usecase?$cell:$cell.toLowerCase()}}}}}$.each(data,function(i,v){ab=by!==""?$.jgrid.getAccessor(v,by):v;if(ab===undefined){ab=""}ab=findSortKey(ab,v);_sortData.push({vSort:ab,index:i})});if($.isFunction(sfunc)){_sortData.sort(function(a,b){a=a.vSort;b=b.vSort;return sfunc.call(this,a,b,newDir)})}else{_sortData.sort(function(a,b){a=a.vSort;b=b.vSort;return self._compare(a,b,newDir)})}j=0;var nrec=data.length;while(j<nrec){i=_sortData[j].index;sortData.push(data[i]);j++}return sortData};this._getGroup=function(data,by,dir,type,dfmt){var results=[],group=null,last=null,val;$.each(self._getOrder(data,by,dir,type,dfmt),function(i,v){val=$.jgrid.getAccessor(v,by);if(val==null){val=""}if(!self._equals(last,val)){last=val;if(group!==null){results.push(group)}group=self._group(by,val)}group.items.push(v)});if(group!==null){results.push(group)}return results};this.ignoreCase=function(){_usecase=false;return self};this.useCase=function(){_usecase=true;return self};this.trim=function(){_trim=true;return self};this.noTrim=function(){_trim=false;return self};this.execute=function(){var match=_query,results=[];if(match===null){return self}$.each(_data,function(){if(eval(match)){results.push(this)}});_data=results;return self};this.data=function(){return _data};this.select=function(f){self._performSort();if(!self._hasData()){return[]}self.execute();if($.isFunction(f)){var results=[];$.each(_data,function(i,v){results.push(f(v))});return results}return _data};this.hasMatch=function(){if(!self._hasData()){return false}self.execute();return _data.length>0};this.andNot=function(f,v,x){_negate=!_negate;return self.and(f,v,x)};this.orNot=function(f,v,x){_negate=!_negate;return self.or(f,v,x)};this.not=function(f,v,x){return self.andNot(f,v,x)};this.and=function(f,v,x){_queuedOperator=" && ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.or=function(f,v,x){_queuedOperator=" || ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.orBegin=function(){_orDepth++;return self};this.orEnd=function(){if(_query!==null){_query+=")"}return self};this.isNot=function(f){_negate=!_negate;return self.is(f)};this.is=function(f){self._append("this."+f);self._resetNegate();return self};this._compareValues=function(func,f,v,how,t){var fld;if(_useProperties){fld="jQuery.jgrid.getAccessor(this,'"+f+"')"}else{fld="this"}if(v===undefined){v=null}var val=v,swst=t.stype===undefined?"text":t.stype;if(v!==null){switch(swst){case"int":case"integer":val=(isNaN(Number(val))||val==="")?"0":val;fld="parseInt("+fld+",10)";val="parseInt("+val+",10)";break;case"float":case"number":case"numeric":val=String(val).replace(_stripNum,"");val=(isNaN(Number(val))||val==="")?"0":val;fld="parseFloat("+fld+")";val="parseFloat("+val+")";break;case"date":case"datetime":val=String($.jgrid.parseDate.call($t,t.srcfmt||"Y-m-d",val).getTime());fld='jQuery.jgrid.parseDate.call(jQuery("#'+$.jgrid.jqID($t.p.id)+'")[0],"'+t.srcfmt+'",'+fld+").getTime()";break;default:fld=self._getStr(fld);val=self._getStr('"'+self._toStr(val)+'"')}}self._append(fld+" "+how+" "+val);self._setCommand(func,f);self._resetNegate();return self};this.equals=function(f,v,t){return self._compareValues(self.equals,f,v,"==",t)};this.notEquals=function(f,v,t){return self._compareValues(self.equals,f,v,"!==",t)};this.isNull=function(f,v,t){return self._compareValues(self.equals,f,null,"===",t)};this.greater=function(f,v,t){return self._compareValues(self.greater,f,v,">",t)};this.less=function(f,v,t){return self._compareValues(self.less,f,v,"<",t)};this.greaterOrEquals=function(f,v,t){return self._compareValues(self.greaterOrEquals,f,v,">=",t)};this.lessOrEquals=function(f,v,t){return self._compareValues(self.lessOrEquals,f,v,"<=",t)};this.startsWith=function(f,v){var val=(v==null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(v)+'"'))}else{if(v!=null){length=_trim?$.trim(v.toString()).length:v.toString().length}self._append(self._getStr("this")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(f)+'"'))}self._setCommand(self.startsWith,f);self._resetNegate();return self};this.endsWith=function(f,v){var val=(v==null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".length-"+length+","+length+') == "'+self._toStr(v)+'"')}else{self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(f)+'".length,"'+self._toStr(f)+'".length) == "'+self._toStr(f)+'"')}self._setCommand(self.endsWith,f);self._resetNegate();return self};this.contains=function(f,v){if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+'.indexOf("'+self._toStr(v)+'",0) > -1')}else{self._append(self._getStr("this")+'.indexOf("'+self._toStr(f)+'",0) > -1')}self._setCommand(self.contains,f);self._resetNegate();return self};this.groupBy=function(by,dir,type,datefmt){if(!self._hasData()){return null}return self._getGroup(_data,by,dir,type,datefmt)};this.orderBy=function(by,dir,stype,dfmt,sfunc){dir=dir==null?"a":$.trim(dir.toString().toLowerCase());if(stype==null){stype="text"}if(dfmt==null){dfmt="Y-m-d"}if(sfunc==null){sfunc=false}if(dir==="desc"||dir==="descending"){dir="d"}if(dir==="asc"||dir==="ascending"){dir="a"}_sorting.push({by:by,dir:dir,type:stype,datefmt:dfmt,sfunc:sfunc});return self};return self};return new QueryObject(source,null)},getMethod:function(name){return this.getAccessor($.fn.jqGrid,name)},extend:function(methods){$.extend($.fn.jqGrid,methods);if(!this.no_legacy_api){$.fn.extend(methods)}},clearBeforeUnload:function(jqGridId){var $t=$("#"+$.jgrid.jqID(jqGridId))[0],grid;if(!$t.grid){return}grid=$t.grid;if($.isFunction(grid.emptyRows)){grid.emptyRows.call($t,true,true)}$(document).unbind("mouseup.jqGrid"+$t.p.id);$(grid.hDiv).unbind("mousemove");$($t).unbind();var i,l=grid.headers.length,removevents=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","grid","p"];for(i=0;i<l;i++){grid.headers[i].el=null}for(i in grid){if(grid.hasOwnProperty(i)){grid[i]=null}}for(i in $t.p){if($t.p.hasOwnProperty(i)){$t.p[i]=$.isArray($t.p[i])?[]:null}}l=removevents.length;for(i=0;i<l;i++){if($t.hasOwnProperty(removevents[i])){$t[removevents[i]]=null;delete ($t[removevents[i]])}}},gridUnload:function(jqGridId){if(!jqGridId){return}jqGridId=$.trim(jqGridId);if(jqGridId.indexOf("#")===0){jqGridId=jqGridId.substring(1)}var $t=$("#"+$.jgrid.jqID(jqGridId))[0];if(!$t.grid){return}var defgrid={id:$($t).attr("id"),cl:$($t).attr("class")};if($t.p.pager){$($t.p.pager).unbind().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom")}var newtable=document.createElement("table");newtable.className=defgrid.cl;var gid=$.jgrid.jqID($t.id);$(newtable).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+gid);if($($t.p.pager).parents("#gbox_"+gid).length===1){$($t.p.pager).insertBefore("#gbox_"+gid)}$.jgrid.clearBeforeUnload(jqGridId);$("#gbox_"+gid).remove();$(newtable).attr({id:defgrid.id});$("#alertmod_"+$.jgrid.jqID(jqGridId)).remove()},gridDestroy:function(jqGridId){if(!jqGridId){return}jqGridId=$.trim(jqGridId);if(jqGridId.indexOf("#")===0){jqGridId=jqGridId.substring(1)}var $t=$("#"+$.jgrid.jqID(jqGridId))[0];if(!$t.grid){return}if($t.p.pager){$($t.p.pager).remove()}try{$.jgrid.clearBeforeUnload(jqGridId);$("#gbox_"+$.jgrid.jqID(jqGridId)).remove()}catch(_){}},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content"},base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",footerTable:"",footerBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",multiBox:"cbox",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all ui-dialog",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{inputClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"},colmenu:{menu_widget:"ui-widget ui-widget-content ui-corner-all",input_checkbox:"ui-widget ui-widget-content",filter_select:"ui-widget-content ui-corner-all",filter_input:"ui-widget-content ui-corner-all",icon_menu:"ui-icon-comment",icon_sort_asc:"ui-icon-arrow-1-n",icon_sort_desc:"ui-icon-arrow-1-s",icon_columns:"ui-icon-extlink",icon_filter:"ui-icon-calculator",icon_group:"ui-icon-grip-solid-horizontal",icon_freeze:"ui-icon-grip-solid-vertical",icon_move:"ui-icon-arrow-4"}},Bootstrap:{common:{disabled:"ui-disabled",highlight:"success",hover:"active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",icon_base:"glyphicon",overlay:"ui-overlay",active:"active",error:"bg-danger",button:"btn btn-default",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:"",icon_first:"glyphicon-step-backward",icon_prev:"glyphicon-backward",icon_next:"glyphicon-forward",icon_end:"glyphicon-step-forward",icon_asc:"glyphicon-triangle-top",icon_desc:"glyphicon-triangle-bottom",icon_caption_open:"glyphicon-circle-arrow-up",icon_caption_close:"glyphicon-circle-arrow-down"},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"glyphicon-remove-circle",icon_resizable:"glyphicon-import"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control",icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_save_nav:"glyphicon-save",icon_cancel_nav:"glyphicon-remove-circle"},formedit:{inputClass:"form-control",icon_prev:"glyphicon-step-backward",icon_next:"glyphicon-step-forward",icon_save:"glyphicon-save",icon_close:"glyphicon-remove-circle",icon_del:"glyphicon-trash",icon_cancel:"glyphicon-remove-circle"},navigator:{icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_del_nav:"glyphicon-trash",icon_search_nav:"glyphicon-search",icon_refresh_nav:"glyphicon-refresh",icon_view_nav:"glyphicon-info-sign",icon_newbutton_nav:"glyphicon-new-window"},grouping:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom"},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:"",icon_search:"glyphicon-search",icon_reset:"glyphicon-refresh",icon_query:"glyphicon-comment"},subgrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_open:"glyphicon-indent-left"},treegrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_leaf:"glyphicon-unchecked"},fmatter:{icon_edit:"glyphicon-edit",icon_add:"glyphicon-plus",icon_save:"glyphicon-save",icon_cancel:"glyphicon-remove-circle",icon_del:"glyphicon-trash"},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-control",filter_input:"form-control",icon_menu:"glyphicon-menu-hamburger",icon_sort_asc:"glyphicon-sort-by-alphabet",icon_sort_desc:"glyphicon-sort-by-alphabet-alt",icon_columns:"glyphicon-list-alt",icon_filter:"glyphicon-filter",icon_group:"glyphicon-align-left",icon_freeze:"glyphicon-object-align-horizontal",icon_move:"glyphicon-move"}}}});$.fn.jqGrid=function(pin){if(typeof pin==="string"){var fn=$.jgrid.getMethod(pin);if(!fn){throw ("jqGrid - No such method: "+pin)}var args=$.makeArray(arguments).slice(1);return fn.apply(this,args)}return this.each(function(){if(this.grid){return}var localData;if(pin!=null&&pin.data!==undefined){localData=pin.data;pin.data=[]}var p=$.extend(true,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:30,gridview:true,rownumWidth:35,rownumbers:false,pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:false,headertitles:false,scrollTimeout:40,data:[],_index:{},grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:false},ignoreCase:true,cmTemplate:{},idPrefix:"",multiSort:false,minColWidth:33,scrollPopUp:false,scrollTopOffset:0,scrollLeftOffset:"100%",storeNavOptions:false,regional:"en",styleUI:"jQueryUI",responsive:false,restoreCellonFail:true,colFilters:{},colMenu:false},$.jgrid.defaults,pin);if(localData!==undefined){p.data=localData;pin.data=localData}var ts=this,grid={headers:[],cols:[],footers:[],dragStart:function(i,x,y){var gridLeftPos=$(this.bDiv).offset().left;this.resizing={idx:i,startX:x.pageX,sOL:x.pageX-gridLeftPos};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+$.jgrid.jqID(p.id),"#gbox_"+$.jgrid.jqID(p.id));this.curGbox.css({display:"block",left:x.pageX-gridLeftPos,top:y[1],height:y[2]});$(ts).triggerHandler("jqGridResizeStart",[x,i]);if($.isFunction(p.resizeStart)){p.resizeStart.call(ts,x,i)}document.onselectstart=function(){return false}},dragMove:function(x){if(this.resizing){var diff=x.pageX-this.resizing.startX,h=this.headers[this.resizing.idx],newWidth=p.direction==="ltr"?h.width+diff:h.width-diff,hn,nWn;if(newWidth>33){this.curGbox.css({left:this.resizing.sOL+diff});if(p.forceFit===true){hn=this.headers[this.resizing.idx+p.nv];nWn=p.direction==="ltr"?hn.width-diff:hn.width+diff;if(nWn>p.minColWidth){h.newWidth=newWidth;hn.newWidth=nWn}}else{this.newWidth=p.direction==="ltr"?p.tblwidth+diff:p.tblwidth-diff;h.newWidth=newWidth}}}},dragEnd:function(events){this.hDiv.style.cursor="default";if(this.resizing){var idx=this.resizing.idx,nw=this.headers[idx].newWidth||this.headers[idx].width;nw=parseInt(nw,10);this.resizing=false;$("#rs_m"+$.jgrid.jqID(p.id)).css("display","none");p.colModel[idx].width=nw;this.headers[idx].width=nw;this.headers[idx].el.style.width=nw+"px";this.cols[idx].style.width=nw+"px";if(this.footers.length>0){this.footers[idx].style.width=nw+"px"}if(p.forceFit===true){nw=this.headers[idx+p.nv].newWidth||this.headers[idx+p.nv].width;this.headers[idx+p.nv].width=nw;this.headers[idx+p.nv].el.style.width=nw+"px";this.cols[idx+p.nv].style.width=nw+"px";if(this.footers.length>0){this.footers[idx+p.nv].style.width=nw+"px"}p.colModel[idx+p.nv].width=nw}else{p.tblwidth=this.newWidth||p.tblwidth;$("table:first",this.bDiv).css("width",p.tblwidth+"px");$("table:first",this.hDiv).css("width",p.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(p.footerrow){$("table:first",this.sDiv).css("width",p.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft}}if(events){$(ts).triggerHandler("jqGridResizeStop",[nw,idx]);if($.isFunction(p.resizeStop)){p.resizeStop.call(ts,nw,idx)}}}this.curGbox=null;document.onselectstart=function(){return true}},populateVisible:function(){if(grid.timer){clearTimeout(grid.timer)}grid.timer=null;var dh=$(grid.bDiv).height();if(!dh){return}var table=$("table:first",grid.bDiv);var rows,rh;if(table[0].rows.length){try{rows=table[0].rows[1];rh=rows?$(rows).outerHeight()||grid.prevRowHeight:grid.prevRowHeight}catch(pv){rh=grid.prevRowHeight}}if(!rh){return}grid.prevRowHeight=rh;var rn=p.rowNum;var scrollTop=grid.scrollTop=grid.bDiv.scrollTop;var ttop=Math.round(table.position().top)-scrollTop;var tbot=ttop+table.height();var div=rh*rn;var page,npage,empty;if(tbot<dh&&ttop<=0&&(p.lastpage===undefined||(parseInt((tbot+scrollTop+div-1)/div,10)||0)<=p.lastpage)){npage=parseInt((dh-tbot+div-1)/div,10)||1;if(tbot>=0||npage<2||p.scroll===true){page=(Math.round((tbot+scrollTop)/div)||0)+1;ttop=-1}else{ttop=1}}if(ttop>0){page=(parseInt(scrollTop/div,10)||0)+1;npage=(parseInt((scrollTop+dh)/div,10)||0)+2-page;empty=true}if(npage){if(p.lastpage&&(page>p.lastpage||p.lastpage===1||(page===p.page&&page===p.lastpage))){return}if(grid.hDiv.loading){grid.timer=setTimeout(grid.populateVisible,p.scrollTimeout)}else{p.page=page;if(empty){grid.selectionPreserver(table[0]);grid.emptyRows.call(table[0],false,false)}grid.populate(npage)}if(p.scrollPopUp&&p.lastpage!=null){$("#scroll_g"+p.id).show().html($.jgrid.template($.jgrid.getRegional(ts,"defaults.pgtext",p.pgtext),p.page,p.lastpage)).css({top:p.scrollTopOffset+scrollTop*((parseInt(p.height,10)-45)/(parseInt(rh,10)*parseInt(p.records,10)))+"px",left:p.scrollLeftOffset});$(this).mouseout(function(){$("#scroll_g"+p.id).hide()})}}},scrollGrid:function(e){if(p.scroll){var scrollTop=grid.bDiv.scrollTop;if(grid.scrollTop===undefined){grid.scrollTop=0}if(scrollTop!==grid.scrollTop){grid.scrollTop=scrollTop;if(grid.timer){clearTimeout(grid.timer)}grid.timer=setTimeout(grid.populateVisible,p.scrollTimeout)}}grid.hDiv.scrollLeft=grid.bDiv.scrollLeft;if(p.footerrow){grid.sDiv.scrollLeft=grid.bDiv.scrollLeft}if(p.frozenColumns){$(grid.fbDiv).scrollTop(grid.bDiv.scrollTop)}if(e){e.stopPropagation()}},selectionPreserver:function(ts){var p=ts.p,sr=p.selrow,sra=p.selarrrow?$.makeArray(p.selarrrow):null,left=ts.grid.bDiv.scrollLeft,restoreSelection=function(){var i;p.selrow=null;p.selarrrow=[];if(p.multiselect&&sra&&sra.length>0){for(i=0;i<sra.length;i++){if(sra[i]!==sr){$(ts).jqGrid("setSelection",sra[i],false,null)}}}if(sr){$(ts).jqGrid("setSelection",sr,false,null)}ts.grid.bDiv.scrollLeft=left;$(ts).unbind(".selectionPreserver",restoreSelection)};$(ts).bind("jqGridGridComplete.selectionPreserver",restoreSelection)}};if(this.tagName.toUpperCase()!=="TABLE"||this.id==null){alert("Element is not a table or has no id!");return}if(document.documentMode!==undefined){if(document.documentMode<=5){alert("Grid can not be used in this ('quirks') mode!");return}}var i=0,lr,lk,dir;for(lk in $.jgrid.regional){if($.jgrid.regional.hasOwnProperty(lk)){if(i===0){lr=lk}i++}}if(i===1&&lr!==p.regional){p.regional=lr}$(this).empty().attr("tabindex","0");this.p=p;this.p.useProp=!!$.fn.prop;if(this.p.colNames.length===0){for(i=0;i<this.p.colModel.length;i++){this.p.colNames[i]=this.p.colModel[i].label||this.p.colModel[i].name}}if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.getRegional(this,"errors.model"));return}var getstyle=$.jgrid.getMethod("getStyleUI"),stylemodule=ts.p.styleUI+".common",disabled=getstyle(stylemodule,"disabled",true),highlight=getstyle(stylemodule,"highlight",true),hover=getstyle(stylemodule,"hover",true),cornerall=getstyle(stylemodule,"cornerall",true),iconbase=getstyle(stylemodule,"icon_base",true),colmenustyle=$.jgrid.styleUI[(ts.p.styleUI||"jQueryUI")].colmenu,isMSIE=$.jgrid.msie,gv,sortarr=[],sortord=[],sotmp=[];stylemodule=ts.p.styleUI+".base";gv=$("<div "+getstyle(stylemodule,"viewBox",false,"ui-jqgrid-view")+" role='grid'></div>");ts.p.direction=$.trim(ts.p.direction.toLowerCase());ts.p._ald=false;if($.inArray(ts.p.direction,["ltr","rtl"])===-1){ts.p.direction="ltr"}dir=ts.p.direction;$(gv).insertBefore(this);$(this).appendTo(gv);var eg=$("<div "+getstyle(stylemodule,"entrieBox",false,"ui-jqgrid")+"></div>");$(eg).attr({id:"gbox_"+this.id,dir:dir}).insertBefore(gv);$(gv).attr("id","gview_"+this.id).appendTo(eg);$("<div "+getstyle(ts.p.styleUI+".common","overlay",false,"jqgrid-overlay")+" id='lui_"+this.id+"'></div>").insertBefore(gv);$("<div "+getstyle(stylemodule,"loadingBox",false,"loading")+" id='load_"+this.id+"'>"+$.jgrid.getRegional(ts,"defaults.loadtext",this.p.loadtext)+"</div>").insertBefore(gv);$(this).attr({role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var sortkeys=["shiftKey","altKey","ctrlKey"],intNum=function(val,defval){val=parseInt(val,10);if(isNaN(val)){return defval||0}return val},formatCol=function(pos,rowInd,tv,rawObject,rowId,rdata){var cm=ts.p.colModel[pos],cellAttrFunc,ral=cm.align,result='style="',clas=cm.classes,nm=cm.name,celp,acp=[];if(ral){result+="text-align:"+ral+";"}if(cm.hidden===true){result+="display:none;"}if(rowInd===0){result+="width: "+grid.headers[pos].width+"px;"}else{if($.isFunction(cm.cellattr)||(typeof cm.cellattr==="string"&&$.jgrid.cellattr!=null&&$.isFunction($.jgrid.cellattr[cm.cellattr]))){cellAttrFunc=$.isFunction(cm.cellattr)?cm.cellattr:$.jgrid.cellattr[cm.cellattr];celp=cellAttrFunc.call(ts,rowId,tv,rawObject,cm,rdata);if(celp&&typeof celp==="string"){celp=celp.replace(/style/i,"style").replace(/title/i,"title");if(celp.indexOf("title")>-1){cm.title=false}if(celp.indexOf("class")>-1){clas=undefined}acp=celp.replace(/\-style/g,"-sti").split(/style/);if(acp.length===2){acp[1]=$.trim(acp[1].replace(/\-sti/g,"-style").replace("=",""));if(acp[1].indexOf("'")===0||acp[1].indexOf('"')===0){acp[1]=acp[1].substring(1)}result+=acp[1].replace(/'/gi,'"')}else{result+='"'}}}}if(!acp.length){acp[0]="";result+='"'}result+=(clas!==undefined?(' class="'+clas+'"'):"")+((cm.title&&tv)?(' title="'+$.jgrid.stripHtml(tv)+'"'):"");result+=' aria-describedby="'+ts.p.id+"_"+nm+'"';return result+acp[0]},cellVal=function(val){return val==null||val===""?"&#160;":(ts.p.autoencode?$.jgrid.htmlEncode(val):String(val))},formatter=function(rowId,cellval,colpos,rwdat,_act){var cm=ts.p.colModel[colpos],v;if(cm.formatter!==undefined){rowId=String(ts.p.idPrefix)!==""?$.jgrid.stripPref(ts.p.idPrefix,rowId):rowId;var opts={rowId:rowId,colModel:cm,gid:ts.p.id,pos:colpos,styleUI:ts.p.styleUI};if($.isFunction(cm.formatter)){v=cm.formatter.call(ts,cellval,opts,rwdat,_act)}else{if($.fmatter){v=$.fn.fmatter.call(ts,cm.formatter,cellval,opts,rwdat,_act)}else{v=cellVal(cellval)}}}else{v=cellVal(cellval)}return v},addCell=function(rowId,cell,pos,irow,srvr,rdata){var v,prp;v=formatter(rowId,cell,pos,srvr,"add");prp=formatCol(pos,irow,v,srvr,rowId,rdata);return'<td role="gridcell" '+prp+">"+v+"</td>"},addMulti=function(rowid,pos,irow,checked,uiclass){var v='<input role="checkbox" type="checkbox" id="jqg_'+ts.p.id+"_"+rowid+'" '+uiclass+' name="jqg_'+ts.p.id+"_"+rowid+'"'+(checked?'checked="checked"':"")+"/>",prp=formatCol(pos,irow,"",null,rowid,true);return'<td role="gridcell" '+prp+">"+v+"</td>"},addRowNum=function(pos,irow,pG,rN,uiclass){var v=(parseInt(pG,10)-1)*parseInt(rN,10)+1+irow,prp=formatCol(pos,irow,v,null,irow,true);return'<td role="gridcell" '+uiclass+" "+prp+">"+v+"</td>"},reader=function(datatype){var field,f=[],j=0,i;for(i=0;i<ts.p.colModel.length;i++){field=ts.p.colModel[i];if(field.name!=="cb"&&field.name!=="subgrid"&&field.name!=="rn"){f[j]=datatype==="local"?field.name:((datatype==="xml"||datatype==="xmlstring")?field.xmlmap||field.name:field.jsonmap||field.name);if(ts.p.keyName!==false&&field.key===true){ts.p.keyName=f[j]}j++}}return f},orderedCols=function(offset){var order=ts.p.remapColumns;if(!order||!order.length){order=$.map(ts.p.colModel,function(v,i){return i})}if(offset){order=$.map(order,function(v){return v<offset?null:v-offset})}return order},emptyRows=function(scroll,locdata){var firstrow;if(this.p.deepempty){$(this.rows).slice(1).remove()}else{firstrow=this.rows.length>0?this.rows[0]:null;$(this.firstChild).empty().append(firstrow)}if(scroll&&this.p.scroll){$(this.grid.bDiv.firstChild).css({height:"auto"});$(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"});if(this.grid.bDiv.scrollTop!==0){this.grid.bDiv.scrollTop=0}}if(locdata===true&&this.p.treeGrid&&!this.p.loadonce){this.p.data=[];this.p._index={}}},normalizeData=function(){var p=ts.p,data=p.data,dataLength=data.length,i,j,cur,idn,idr,ccur,v,rd,localReader=p.localReader,colModel=p.colModel,cellName=localReader.cell,iOffset=(p.multiselect===true?1:0)+(p.subGrid===true?1:0)+(p.rownumbers===true?1:0),br=p.scroll?$.jgrid.randId():1,arrayReader,objectReader,rowReader;if(p.datatype!=="local"||localReader.repeatitems!==true){return}arrayReader=orderedCols(iOffset);objectReader=reader("local");idn=p.keyIndex===false?($.isFunction(localReader.id)?localReader.id.call(ts,data):localReader.id):p.keyIndex;for(i=0;i<dataLength;i++){cur=data[i];idr=$.jgrid.getAccessor(cur,idn);if(idr===undefined){if(typeof idn==="number"&&colModel[idn+iOffset]!=null){idr=$.jgrid.getAccessor(cur,colModel[idn+iOffset].name)}if(idr===undefined){idr=br+i;if(cellName){ccur=$.jgrid.getAccessor(cur,cellName)||cur;idr=ccur!=null&&ccur[idn]!==undefined?ccur[idn]:idr;ccur=null}}}rd={};rd[localReader.id]=idr;if(cellName){cur=$.jgrid.getAccessor(cur,cellName)||cur}rowReader=$.isArray(cur)?arrayReader:objectReader;for(j=0;j<rowReader.length;j++){v=$.jgrid.getAccessor(cur,rowReader[j]);rd[colModel[j+iOffset].name]=v}$.extend(true,data[i],rd)}},refreshIndex=function(){var datalen=ts.p.data.length,idname,i,val;if(ts.p.keyName===false||ts.p.loadonce===true){idname=ts.p.localReader.id}else{idname=ts.p.keyName}ts.p._index=[];for(i=0;i<datalen;i++){val=$.jgrid.getAccessor(ts.p.data[i],idname);if(val===undefined){val=String(i+1)}ts.p._index[val]=i}},constructTr=function(id,hide,classes,rd,cur){var tabindex="-1",restAttr="",attrName,style=hide?"display:none;":"",rowAttrObj=$(ts).triggerHandler("jqGridRowAttr",[rd,cur,id]);if(typeof rowAttrObj!=="object"){rowAttrObj=$.isFunction(ts.p.rowattr)?ts.p.rowattr.call(ts,rd,cur,id):(typeof ts.p.rowattr==="string"&&$.jgrid.rowattr!=null&&$.isFunction($.jgrid.rowattr[ts.p.rowattr])?$.jgrid.rowattr[ts.p.rowattr].call(ts,rd,cur,id):{})}if(!$.isEmptyObject(rowAttrObj)){if(rowAttrObj.hasOwnProperty("id")){id=rowAttrObj.id;delete rowAttrObj.id}if(rowAttrObj.hasOwnProperty("tabindex")){tabindex=rowAttrObj.tabindex;delete rowAttrObj.tabindex}if(rowAttrObj.hasOwnProperty("style")){style+=rowAttrObj.style;delete rowAttrObj.style}if(rowAttrObj.hasOwnProperty("class")){classes+=" "+rowAttrObj["class"];delete rowAttrObj["class"]}try{delete rowAttrObj.role}catch(ra){}for(attrName in rowAttrObj){if(rowAttrObj.hasOwnProperty(attrName)){restAttr+=" "+attrName+"="+rowAttrObj[attrName]}}}return'<tr role="row" id="'+id+'" tabindex="'+tabindex+'" class="'+classes+'"'+(style===""?"":' style="'+style+'"')+restAttr+">"},addXmlData=function(xml,rcnt,more,adjust){var startReq=new Date(),locdata=(ts.p.datatype!=="local"&&ts.p.loadonce)||ts.p.datatype==="xmlstring",xmlid="_id_",xmlRd=ts.p.xmlReader,frd=ts.p.datatype==="local"?"local":"xml";if(locdata){ts.p.data=[];ts.p._index={};ts.p.localReader.id=xmlid}ts.p.reccount=0;if($.isXMLDoc(xml)){if(ts.p.treeANode===-1&&!ts.p.scroll){emptyRows.call(ts,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return}var self=$(ts),i,fpos,ir=0,v,gi=ts.p.multiselect===true?1:0,si=0,addSubGridCell,ni=ts.p.rownumbers===true?1:0,idn,getId,f=[],F,rd={},xmlr,rid,rowData=[],cn=(ts.p.altRows===true)?ts.p.altclass:"",cn1=getstyle(stylemodule,"rowBox",true,"jqgrow ui-row-"+ts.p.direction),classes;if(ts.p.subGrid===true){si=1;addSubGridCell=$.jgrid.getMethod("addSubGridCell")}if(!xmlRd.repeatitems){f=reader(frd)}if(ts.p.keyName===false){idn=$.isFunction(xmlRd.id)?xmlRd.id.call(ts,xml):xmlRd.id}else{idn=ts.p.keyName}if(String(idn).indexOf("[")===-1){if(f.length){getId=function(trow,k){return $(idn,trow).text()||k}}else{getId=function(trow,k){return $(xmlRd.cell,trow).eq(idn).text()||k}}}else{getId=function(trow,k){return trow.getAttribute(idn.replace(/[\[\]]/g,""))||k}}ts.p.userData={};ts.p.page=intNum($.jgrid.getXmlData(xml,xmlRd.page),ts.p.page);ts.p.lastpage=intNum($.jgrid.getXmlData(xml,xmlRd.total),1);ts.p.records=intNum($.jgrid.getXmlData(xml,xmlRd.records));if($.isFunction(xmlRd.userdata)){ts.p.userData=xmlRd.userdata.call(ts,xml)||{}}else{$.jgrid.getXmlData(xml,xmlRd.userdata,true).each(function(){ts.p.userData[this.getAttribute("name")]=$(this).text()})}var gxml=$.jgrid.getXmlData(xml,xmlRd.root,true);gxml=$.jgrid.getXmlData(gxml,xmlRd.row,true);if(!gxml){gxml=[]}var gl=gxml.length,j=0,grpdata=[],rn=parseInt(ts.p.rowNum,10),br=ts.p.scroll?$.jgrid.randId():1,altr,tablebody=$("#"+$.jgrid.jqID(ts.p.id)+" tbody:first");if(gl>0&&ts.p.page<=0){ts.p.page=1}if(gxml&&gl){if(adjust){rn*=adjust+1}var afterInsRow=$.isFunction(ts.p.afterInsertRow),hiderow=false,groupingPrepare,rnc=ni?getstyle(stylemodule,"rownumBox",false,"jqgrid-rownum"):"",mlc=gi?getstyle(stylemodule,"multiBox",false,"cbox"):"";if(ts.p.grouping){hiderow=ts.p.groupingView.groupCollapse===true;groupingPrepare=$.jgrid.getMethod("groupingPrepare")}while(j<gl){xmlr=gxml[j];rid=getId(xmlr,br+j);rid=ts.p.idPrefix+rid;altr=rcnt===0?0:rcnt+1;classes=cn1+((altr+j)%2===1?" "+cn:"");var iStartTrTag=rowData.length;rowData.push("");if(ni){rowData.push(addRowNum(0,j,ts.p.page,ts.p.rowNum,rnc))}if(gi){rowData.push(addMulti(rid,ni,j,false,mlc))}if(si){rowData.push(addSubGridCell.call(self,gi+ni,j+rcnt))}if(xmlRd.repeatitems){if(!F){F=orderedCols(gi+si+ni)}var cells=$.jgrid.getXmlData(xmlr,xmlRd.cell,true);$.each(F,function(k){var cell=cells[this];if(!cell){return false}v=cell.textContent||cell.text;rd[ts.p.colModel[k+gi+si+ni].name]=v;rowData.push(addCell(rid,v,k+gi+si+ni,j+rcnt,xmlr,rd))})}else{for(i=0;i<f.length;i++){v=$.jgrid.getXmlData(xmlr,f[i]);rd[ts.p.colModel[i+gi+si+ni].name]=v;rowData.push(addCell(rid,v,i+gi+si+ni,j+rcnt,xmlr,rd))}}rowData[iStartTrTag]=constructTr(rid,hiderow,classes,rd,xmlr);rowData.push("</tr>");if(ts.p.grouping){grpdata.push(rowData);if(!ts.p.groupingView._locgr){groupingPrepare.call(self,rd,j)}rowData=[]}if(locdata||(ts.p.treeGrid===true&&!(ts.p._ald))){rd[xmlid]=$.jgrid.stripPref(ts.p.idPrefix,rid);ts.p.data.push(rd);ts.p._index[rd[xmlid]]=ts.p.data.length-1}if(ts.p.gridview===false){tablebody.append(rowData.join(""));self.triggerHandler("jqGridAfterInsertRow",[rid,rd,xmlr]);if(afterInsRow){ts.p.afterInsertRow.call(ts,rid,rd,xmlr)}rowData=[]}rd={};ir++;j++;if(ir===rn){break}}}if(ts.p.gridview===true){fpos=ts.p.treeANode>-1?ts.p.treeANode:0;if(ts.p.grouping){if(!locdata){self.jqGrid("groupingRender",grpdata,ts.p.colModel.length,ts.p.page,rn);grpdata=null}}else{if(ts.p.treeGrid===true&&fpos>0){$(ts.rows[fpos]).after(rowData.join(""))}else{tablebody.append(rowData.join(""));ts.grid.cols=ts.rows[0].cells}}}ts.p.totaltime=new Date()-startReq;rowData=null;if(ts.p.subGrid===true){try{self.jqGrid("addSubGrid",gi+ni)}catch(_){}}if(ir>0){if(ts.p.records===0){ts.p.records=gl}}if(ts.p.treeGrid===true){try{self.jqGrid("setTreeNode",fpos+1,ir+fpos+1)}catch(e){}}ts.p.reccount=ir;ts.p.treeANode=-1;if(ts.p.userDataOnFooter){self.jqGrid("footerData","set",ts.p.userData,true)}if(locdata){ts.p.records=gl;ts.p.lastpage=Math.ceil(gl/rn)}if(!more){ts.updatepager(false,true)}if(locdata){while(ir<gl){xmlr=gxml[ir];rid=getId(xmlr,ir+br);rid=ts.p.idPrefix+rid;if(xmlRd.repeatitems){if(!F){F=orderedCols(gi+si+ni)}var cells2=$.jgrid.getXmlData(xmlr,xmlRd.cell,true);$.each(F,function(k){var cell=cells2[this];if(!cell){return false}v=cell.textContent||cell.text;rd[ts.p.colModel[k+gi+si+ni].name]=v})}else{for(i=0;i<f.length;i++){v=$.jgrid.getXmlData(xmlr,f[i]);rd[ts.p.colModel[i+gi+si+ni].name]=v}}rd[xmlid]=$.jgrid.stripPref(ts.p.idPrefix,rid);if(ts.p.grouping){groupingPrepare.call(self,rd,ir)}ts.p.data.push(rd);ts.p._index[rd[xmlid]]=ts.p.data.length-1;rd={};ir++}if(ts.p.grouping){ts.p.groupingView._locgr=true;self.jqGrid("groupingRender",grpdata,ts.p.colModel.length,ts.p.page,rn);grpdata=null}}},addJSONData=function(data,rcnt,more,adjust){var startReq=new Date();if(data){if(ts.p.treeANode===-1&&!ts.p.scroll){emptyRows.call(ts,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return}var dReader,locid="_id_",frd,locdata=(ts.p.datatype!=="local"&&ts.p.loadonce)||ts.p.datatype==="jsonstring";if(locdata){ts.p.data=[];ts.p._index={};ts.p.localReader.id=locid}ts.p.reccount=0;if(ts.p.datatype==="local"){dReader=ts.p.localReader;frd="local"}else{dReader=ts.p.jsonReader;frd="json"}var self=$(ts),ir=0,v,i,j,f=[],cur,gi=ts.p.multiselect?1:0,si=ts.p.subGrid===true?1:0,addSubGridCell,ni=ts.p.rownumbers===true?1:0,arrayReader=orderedCols(gi+si+ni),objectReader=reader(frd),rowReader,len,drows,idn,rd={},fpos,idr,rowData=[],cn=(ts.p.altRows===true)?ts.p.altclass:"",cn1=getstyle(stylemodule,"rowBox",true,"jqgrow ui-row-"+ts.p.direction),classes;ts.p.page=intNum($.jgrid.getAccessor(data,dReader.page),ts.p.page);ts.p.lastpage=intNum($.jgrid.getAccessor(data,dReader.total),1);ts.p.records=intNum($.jgrid.getAccessor(data,dReader.records));ts.p.userData=$.jgrid.getAccessor(data,dReader.userdata)||{};if(si){addSubGridCell=$.jgrid.getMethod("addSubGridCell")}if(ts.p.keyName===false){idn=$.isFunction(dReader.id)?dReader.id.call(ts,data):dReader.id}else{idn=ts.p.keyName}drows=$.jgrid.getAccessor(data,dReader.root);if(drows==null&&$.isArray(data)){drows=data}if(!drows){drows=[]}len=drows.length;i=0;if(len>0&&ts.p.page<=0){ts.p.page=1}var rn=parseInt(ts.p.rowNum,10),br=ts.p.scroll?$.jgrid.randId():1,altr,selected=false,selr;if(adjust){rn*=adjust+1}if(ts.p.datatype==="local"&&!ts.p.deselectAfterSort){selected=true}var afterInsRow=$.isFunction(ts.p.afterInsertRow),grpdata=[],hiderow=false,groupingPrepare,tablebody=$("#"+$.jgrid.jqID(ts.p.id)+" tbody:first"),rnc=ni?getstyle(stylemodule,"rownumBox",false,"jqgrid-rownum"):"",mlc=gi?getstyle(stylemodule,"multiBox",false,"cbox"):"";if(ts.p.grouping){hiderow=ts.p.groupingView.groupCollapse===true;groupingPrepare=$.jgrid.getMethod("groupingPrepare")}while(i<len){cur=drows[i];idr=$.jgrid.getAccessor(cur,idn);if(idr===undefined){if(typeof idn==="number"&&ts.p.colModel[idn+gi+si+ni]!=null){idr=$.jgrid.getAccessor(cur,ts.p.colModel[idn+gi+si+ni].name)}if(idr===undefined){idr=br+i;if(f.length===0){if(dReader.cell){var ccur=$.jgrid.getAccessor(cur,dReader.cell)||cur;idr=ccur!=null&&ccur[idn]!==undefined?ccur[idn]:idr;ccur=null}}}}idr=ts.p.idPrefix+idr;altr=rcnt===1?0:rcnt;classes=cn1+((altr+i)%2===1?" "+cn:"");if(selected){if(ts.p.multiselect){selr=($.inArray(idr,ts.p.selarrrow)!==-1)}else{selr=(idr===ts.p.selrow)}}var iStartTrTag=rowData.length;rowData.push("");if(ni){rowData.push(addRowNum(0,i,ts.p.page,ts.p.rowNum,rnc))}if(gi){rowData.push(addMulti(idr,ni,i,selr,mlc))}if(si){rowData.push(addSubGridCell.call(self,gi+ni,i+rcnt))}rowReader=objectReader;if(dReader.repeatitems){if(dReader.cell){cur=$.jgrid.getAccessor(cur,dReader.cell)||cur}if($.isArray(cur)){rowReader=arrayReader}}for(j=0;j<rowReader.length;j++){v=$.jgrid.getAccessor(cur,rowReader[j]);rd[ts.p.colModel[j+gi+si+ni].name]=v;rowData.push(addCell(idr,v,j+gi+si+ni,i+rcnt,cur,rd))}classes+=(selr?" "+highlight:"");rowData[iStartTrTag]=constructTr(idr,hiderow,classes,rd,cur);rowData.push("</tr>");if(ts.p.grouping){grpdata.push(rowData);if(!ts.p.groupingView._locgr){groupingPrepare.call(self,rd,i)}rowData=[]}if(locdata||(ts.p.treeGrid===true&&!(ts.p._ald))){rd[locid]=$.jgrid.stripPref(ts.p.idPrefix,idr);ts.p.data.push(rd);ts.p._index[rd[locid]]=ts.p.data.length-1}if(ts.p.gridview===false){tablebody.append(rowData.join(""));self.triggerHandler("jqGridAfterInsertRow",[idr,rd,cur]);if(afterInsRow){ts.p.afterInsertRow.call(ts,idr,rd,cur)}rowData=[]}rd={};ir++;i++;if(ir===rn){break}}if(ts.p.gridview===true){fpos=ts.p.treeANode>-1?ts.p.treeANode:0;if(ts.p.grouping){if(!locdata){self.jqGrid("groupingRender",grpdata,ts.p.colModel.length,ts.p.page,rn);grpdata=null}}else{if(ts.p.treeGrid===true&&fpos>0){$(ts.rows[fpos]).after(rowData.join(""))}else{tablebody.append(rowData.join(""));ts.grid.cols=ts.rows[0].cells}}}ts.p.totaltime=new Date()-startReq;rowData=null;if(ts.p.subGrid===true){try{self.jqGrid("addSubGrid",gi+ni)}catch(_){}}if(ir>0){if(ts.p.records===0){ts.p.records=len}}if(ts.p.treeGrid===true){try{self.jqGrid("setTreeNode",fpos+1,ir+fpos+1)}catch(e){}}ts.p.reccount=ir;ts.p.treeANode=-1;if(ts.p.userDataOnFooter){self.jqGrid("footerData","set",ts.p.userData,true)}if(locdata){ts.p.records=len;ts.p.lastpage=Math.ceil(len/rn)}if(!more){ts.updatepager(false,true)}if(locdata){while(ir<len&&drows[ir]){cur=drows[ir];idr=$.jgrid.getAccessor(cur,idn);if(idr===undefined){if(typeof idn==="number"&&ts.p.colModel[idn+gi+si+ni]!=null){idr=$.jgrid.getAccessor(cur,ts.p.colModel[idn+gi+si+ni].name)}if(idr===undefined){idr=br+ir;if(f.length===0){if(dReader.cell){var ccur2=$.jgrid.getAccessor(cur,dReader.cell)||cur;idr=ccur2!=null&&ccur2[idn]!==undefined?ccur2[idn]:idr;ccur2=null}}}}if(cur){idr=ts.p.idPrefix+idr;rowReader=objectReader;if(dReader.repeatitems){if(dReader.cell){cur=$.jgrid.getAccessor(cur,dReader.cell)||cur}if($.isArray(cur)){rowReader=arrayReader}}for(j=0;j<rowReader.length;j++){rd[ts.p.colModel[j+gi+si+ni].name]=$.jgrid.getAccessor(cur,rowReader[j])}rd[locid]=$.jgrid.stripPref(ts.p.idPrefix,idr);if(ts.p.grouping){groupingPrepare.call(self,rd,ir)}ts.p.data.push(rd);ts.p._index[rd[locid]]=ts.p.data.length-1;rd={}}ir++}if(ts.p.grouping){ts.p.groupingView._locgr=true;self.jqGrid("groupingRender",grpdata,ts.p.colModel.length,ts.p.page,rn);grpdata=null}}},addLocalData=function(){var st=ts.p.multiSort?[]:"",sto=[],fndsort=false,cmtypes={},grtypes=[],grindexes=[],srcformat,sorttype,newformat,sfld;if(!$.isArray(ts.p.data)){return}var grpview=ts.p.grouping?ts.p.groupingView:false,lengrp,gin,si;$.each(ts.p.colModel,function(){sorttype=this.sorttype||"text";si=this.index||this.name;if(sorttype==="date"||sorttype==="datetime"){if(this.formatter&&typeof this.formatter==="string"&&this.formatter==="date"){if(this.formatoptions&&this.formatoptions.srcformat){srcformat=this.formatoptions.srcformat}else{srcformat=$.jgrid.getRegional(ts,"formatter.date.srcformat")}if(this.formatoptions&&this.formatoptions.newformat){newformat=this.formatoptions.newformat}else{newformat=$.jgrid.getRegional(ts,"formatter.date.newformat")}}else{srcformat=newformat=this.datefmt||"Y-m-d"}cmtypes[si]={stype:sorttype,srcfmt:srcformat,newfmt:newformat,sfunc:this.sortfunc||null}}else{cmtypes[si]={stype:sorttype,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null}}if(ts.p.grouping){for(gin=0,lengrp=grpview.groupField.length;gin<lengrp;gin++){if(this.name===grpview.groupField[gin]){grtypes[gin]=cmtypes[si];grindexes[gin]=si}}}if(!ts.p.multiSort){if(!fndsort&&(si===ts.p.sortname)){st=si;fndsort=true}}});if(ts.p.multiSort){st=sortarr;sto=sortord}if(ts.p.treeGrid&&ts.p._sort){$(ts).jqGrid("SortTree",st,ts.p.sortorder,cmtypes[st].stype||"text",cmtypes[st].srcfmt||"");return}var compareFnMap={eq:function(queryObj){return queryObj.equals},ne:function(queryObj){return queryObj.notEquals},lt:function(queryObj){return queryObj.less},le:function(queryObj){return queryObj.lessOrEquals},gt:function(queryObj){return queryObj.greater},ge:function(queryObj){return queryObj.greaterOrEquals},cn:function(queryObj){return queryObj.contains},nc:function(queryObj,op){return op==="OR"?queryObj.orNot().contains:queryObj.andNot().contains},bw:function(queryObj){return queryObj.startsWith},bn:function(queryObj,op){return op==="OR"?queryObj.orNot().startsWith:queryObj.andNot().startsWith},en:function(queryObj,op){return op==="OR"?queryObj.orNot().endsWith:queryObj.andNot().endsWith},ew:function(queryObj){return queryObj.endsWith},ni:function(queryObj,op){return op==="OR"?queryObj.orNot().equals:queryObj.andNot().equals},"in":function(queryObj){return queryObj.equals},nu:function(queryObj){return queryObj.isNull},nn:function(queryObj,op){return op==="OR"?queryObj.orNot().isNull:queryObj.andNot().isNull}},query=$.jgrid.from.call(ts,ts.p.data);if(ts.p.ignoreCase){query=query.ignoreCase()}function tojLinq(group){var s=0,index,gor,ror,opr,rule,fld;if(group.groups!=null){gor=group.groups.length&&group.groupOp.toString().toUpperCase()==="OR";if(gor){query.orBegin()}for(index=0;index<group.groups.length;index++){if(s>0&&gor){query.or()}try{tojLinq(group.groups[index])}catch(e){alert(e)}s++}if(gor){query.orEnd()}}if(group.rules!=null){try{ror=group.rules.length&&group.groupOp.toString().toUpperCase()==="OR";if(ror){query.orBegin()}for(index=0;index<group.rules.length;index++){rule=group.rules[index];opr=group.groupOp.toString().toUpperCase();if(compareFnMap[rule.op]&&rule.field){if(s>0&&opr&&opr==="OR"){query=query.or()}fld=cmtypes[rule.field];if(fld.stype==="date"){if(fld.srcfmt&&fld.newfmt&&fld.srcfmt!==fld.newfmt){rule.data=$.jgrid.parseDate.call(ts,fld.newfmt,rule.data,fld.srcfmt)}}query=compareFnMap[rule.op](query,opr)(rule.field,rule.data,cmtypes[rule.field])}s++}if(ror){query.orEnd()}}catch(g){alert(g)}}}if(ts.p.search===true){var srules=ts.p.postData.filters;if(srules){if(typeof srules==="string"){srules=$.jgrid.parse(srules)}tojLinq(srules)}else{try{sfld=cmtypes[ts.p.postData.searchField];if(sfld.stype==="date"){if(sfld.srcfmt&&sfld.newfmt&&sfld.srcfmt!==sfld.newfmt){ts.p.postData.searchString=$.jgrid.parseDate.call(ts,sfld.newfmt,ts.p.postData.searchString,sfld.srcfmt)}}query=compareFnMap[ts.p.postData.searchOper](query)(ts.p.postData.searchField,ts.p.postData.searchString,cmtypes[ts.p.postData.searchField])}catch(se){}}}else{if(ts.p.treeGrid&&ts.p.treeGridModel==="nested"){query.orderBy(ts.p.treeReader.left_field,"asc","integer","",null)}}if(ts.p.treeGrid&&ts.p.treeGridModel==="adjacency"){lengrp=0;st=null}if(ts.p.grouping){for(gin=0;gin<lengrp;gin++){query.orderBy(grindexes[gin],grpview.groupOrder[gin],grtypes[gin].stype,grtypes[gin].srcfmt)}}if(ts.p.multiSort){$.each(st,function(i){query.orderBy(this,sto[i],cmtypes[this].stype,cmtypes[this].srcfmt,cmtypes[this].sfunc)})}else{if(st&&ts.p.sortorder&&fndsort){if(ts.p.sortorder.toUpperCase()==="DESC"){query.orderBy(ts.p.sortname,"d",cmtypes[st].stype,cmtypes[st].srcfmt,cmtypes[st].sfunc)}else{query.orderBy(ts.p.sortname,"a",cmtypes[st].stype,cmtypes[st].srcfmt,cmtypes[st].sfunc)}}}var queryResults=query.select(),recordsperpage=parseInt(ts.p.rowNum,10),total=queryResults.length,page=parseInt(ts.p.page,10),totalpages=Math.ceil(total/recordsperpage),retresult={};if((ts.p.search||ts.p.resetsearch)&&ts.p.grouping&&ts.p.groupingView._locgr){ts.p.groupingView.groups=[];var j,grPrepare=$.jgrid.getMethod("groupingPrepare"),key,udc;if(ts.p.footerrow&&ts.p.userDataOnFooter){for(key in ts.p.userData){if(ts.p.userData.hasOwnProperty(key)){ts.p.userData[key]=0}}udc=true}for(j=0;j<total;j++){if(udc){for(key in ts.p.userData){if(ts.p.userData.hasOwnProperty(key)){ts.p.userData[key]+=parseFloat(queryResults[j][key]||0)}}}grPrepare.call($(ts),queryResults[j],j,recordsperpage)}}if(ts.p.treeGrid&&ts.p.search){queryResults=$(ts).jqGrid("searchTree",queryResults)}else{queryResults=queryResults.slice((page-1)*recordsperpage,page*recordsperpage)}query=null;cmtypes=null;retresult[ts.p.localReader.total]=totalpages;retresult[ts.p.localReader.page]=page;retresult[ts.p.localReader.records]=total;retresult[ts.p.localReader.root]=queryResults;retresult[ts.p.localReader.userdata]=ts.p.userData;queryResults=null;return retresult},updatepager=function(rn,dnd){var cp,last,base,from,to,tot,fmt,pgboxes="",sppg,pgid=ts.p.pager?$.jgrid.jqID(ts.p.pager.substr(1)):"",tspg=pgid?"_"+pgid:"",tspg_t=ts.p.toppager?"_"+ts.p.toppager.substr(1):"";base=parseInt(ts.p.page,10)-1;if(base<0){base=0}base=base*parseInt(ts.p.rowNum,10);to=base+ts.p.reccount;if(ts.p.scroll){var rows=$("tbody:first > tr:gt(0)",ts.grid.bDiv);base=to-rows.length;ts.p.reccount=rows.length;var rh=rows.outerHeight()||ts.grid.prevRowHeight;if(rh){var top=base*rh;var height=parseInt(ts.p.records,10)*rh;$(">div:first",ts.grid.bDiv).css({height:height}).children("div:first").css({height:top,display:top?"":"none"});if(ts.grid.bDiv.scrollTop===0&&ts.p.page>1){ts.grid.bDiv.scrollTop=ts.p.rowNum*(ts.p.page-1)*rh}}ts.grid.bDiv.scrollLeft=ts.grid.hDiv.scrollLeft}pgboxes=ts.p.pager||"";pgboxes+=ts.p.toppager?(pgboxes?","+ts.p.toppager:ts.p.toppager):"";if(pgboxes){fmt=$.jgrid.getRegional(ts,"formatter.integer");cp=intNum(ts.p.page);last=intNum(ts.p.lastpage);$(".selbox",pgboxes)[this.p.useProp?"prop":"attr"]("disabled",false);if(ts.p.pginput===true){$("#input"+tspg).html($.jgrid.template($.jgrid.getRegional(ts,"defaults.pgtext",ts.p.pgtext)||"","<input "+getstyle(stylemodule,"pgInput",false,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(pgid)+"'></span>"));if(ts.p.toppager){$("#input_t"+tspg_t).html($.jgrid.template($.jgrid.getRegional(ts,"defaults.pgtext",ts.p.pgtext)||"","<input "+getstyle(stylemodule,"pgInput",false,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(pgid)+"_toppager'></span>"))}$(".ui-pg-input",pgboxes).val(ts.p.page);sppg=ts.p.toppager?"#sp_1"+tspg+",#sp_1"+tspg+"_toppager":"#sp_1"+tspg;$(sppg).html($.fmatter?$.fmatter.util.NumberFormat(ts.p.lastpage,fmt):ts.p.lastpage)}if(ts.p.viewrecords){if(ts.p.reccount===0){$(".ui-paging-info",pgboxes).html($.jgrid.getRegional(ts,"defaults.emptyrecords",ts.p.emptyrecords))}else{from=base+1;tot=ts.p.records;if($.fmatter){from=$.fmatter.util.NumberFormat(from,fmt);to=$.fmatter.util.NumberFormat(to,fmt);tot=$.fmatter.util.NumberFormat(tot,fmt)}var rt=$.jgrid.getRegional(ts,"defaults.recordtext",ts.p.recordtext);$(".ui-paging-info",pgboxes).html($.jgrid.template(rt,from,to,tot))}}if(ts.p.pgbuttons===true){if(cp<=0){cp=last=0}if(cp===1||cp===0){$("#first"+tspg+", #prev"+tspg).addClass(disabled).removeClass(hover);if(ts.p.toppager){$("#first_t"+tspg_t+", #prev_t"+tspg_t).addClass(disabled).removeClass(hover)}}else{$("#first"+tspg+", #prev"+tspg).removeClass(disabled);if(ts.p.toppager){$("#first_t"+tspg_t+", #prev_t"+tspg_t).removeClass(disabled)}}if(cp===last||cp===0){$("#next"+tspg+", #last"+tspg).addClass(disabled).removeClass(hover);if(ts.p.toppager){$("#next_t"+tspg_t+", #last_t"+tspg_t).addClass(disabled).removeClass(hover)}}else{$("#next"+tspg+", #last"+tspg).removeClass(disabled);if(ts.p.toppager){$("#next_t"+tspg_t+", #last_t"+tspg_t).removeClass(disabled)}}}}if(rn===true&&ts.p.rownumbers===true){$(">td.jqgrid-rownum",ts.rows).each(function(i){$(this).html(base+1+i)})}if(dnd&&ts.p.jqgdnd){$(ts).jqGrid("gridDnD","updateDnD")}$(ts).triggerHandler("jqGridGridComplete");if($.isFunction(ts.p.gridComplete)){ts.p.gridComplete.call(ts)}$(ts).triggerHandler("jqGridAfterGridComplete")},beginReq=function(){ts.grid.hDiv.loading=true;if(ts.p.hiddengrid){return}$(ts).jqGrid("progressBar",{method:"show",loadtype:ts.p.loadui,htmlcontent:$.jgrid.getRegional(ts,"defaults.loadtext",ts.p.loadtext)})},endReq=function(){ts.grid.hDiv.loading=false;$(ts).jqGrid("progressBar",{method:"hide",loadtype:ts.p.loadui})},populate=function(npage){if(!ts.grid.hDiv.loading){var pvis=ts.p.scroll&&npage===false,prm={},dt,dstr,pN=ts.p.prmNames;if(ts.p.page<=0){ts.p.page=Math.min(1,ts.p.lastpage)}if(pN.search!==null){prm[pN.search]=ts.p.search}if(pN.nd!==null){prm[pN.nd]=new Date().getTime()}if(pN.rows!==null){prm[pN.rows]=ts.p.rowNum}if(pN.page!==null){prm[pN.page]=ts.p.page}if(pN.sort!==null){prm[pN.sort]=ts.p.sortname}if(pN.order!==null){prm[pN.order]=ts.p.sortorder}if(ts.p.rowTotal!==null&&pN.totalrows!==null){prm[pN.totalrows]=ts.p.rowTotal}var lcf=$.isFunction(ts.p.loadComplete),lc=lcf?ts.p.loadComplete:null;var adjust=0;npage=npage||1;if(npage>1){if(pN.npage!==null){prm[pN.npage]=npage;adjust=npage-1;npage=1}else{lc=function(req){ts.p.page++;ts.grid.hDiv.loading=false;if(lcf){ts.p.loadComplete.call(ts,req)}populate(npage-1)}}}else{if(pN.npage!==null){delete ts.p.postData[pN.npage]}}if(ts.p.grouping){$(ts).jqGrid("groupingSetup");var grp=ts.p.groupingView,gi,gs="";for(gi=0;gi<grp.groupField.length;gi++){var index=grp.groupField[gi];$.each(ts.p.colModel,function(cmIndex,cmValue){if(cmValue.name===index&&cmValue.index){index=cmValue.index}});gs+=index+" "+grp.groupOrder[gi]+", "}prm[pN.sort]=gs+prm[pN.sort]}$.extend(ts.p.postData,prm);var rcnt=!ts.p.scroll?1:ts.rows.length-1;var bfr=$(ts).triggerHandler("jqGridBeforeRequest");if(bfr===false||bfr==="stop"){return}if($.isFunction(ts.p.datatype)){ts.p.datatype.call(ts,ts.p.postData,"load_"+ts.p.id,rcnt,npage,adjust);return}if($.isFunction(ts.p.beforeRequest)){bfr=ts.p.beforeRequest.call(ts);if(bfr===undefined){bfr=true}if(bfr===false){return}}dt=ts.p.datatype.toLowerCase();switch(dt){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:ts.p.url,type:ts.p.mtype,dataType:dt,data:$.isFunction(ts.p.serializeGridData)?ts.p.serializeGridData.call(ts,ts.p.postData):ts.p.postData,success:function(data,st,xhr){if($.isFunction(ts.p.beforeProcessing)){if(ts.p.beforeProcessing.call(ts,data,st,xhr)===false){endReq();return}}if(dt==="xml"){addXmlData(data,rcnt,npage>1,adjust)}else{addJSONData(data,rcnt,npage>1,adjust)}$(ts).triggerHandler("jqGridLoadComplete",[data]);if(lc){lc.call(ts,data)}$(ts).triggerHandler("jqGridAfterLoadComplete",[data]);if(pvis){ts.grid.populateVisible()}if(ts.p.loadonce||ts.p.treeGrid){ts.p.datatype="local"}data=null;if(npage===1){endReq()}},error:function(xhr,st,err){if($.isFunction(ts.p.loadError)){ts.p.loadError.call(ts,xhr,st,err)}if(npage===1){endReq()}xhr=null},beforeSend:function(xhr,settings){var gotoreq=true;if($.isFunction(ts.p.loadBeforeSend)){gotoreq=ts.p.loadBeforeSend.call(ts,xhr,settings)}if(gotoreq===undefined){gotoreq=true}if(gotoreq===false){return false}beginReq()}},$.jgrid.ajaxOptions,ts.p.ajaxGridOptions));break;case"xmlstring":beginReq();dstr=typeof ts.p.datastr!=="string"?ts.p.datastr:$.parseXML(ts.p.datastr);addXmlData(dstr);$(ts).triggerHandler("jqGridLoadComplete",[dstr]);if(lcf){ts.p.loadComplete.call(ts,dstr)}$(ts).triggerHandler("jqGridAfterLoadComplete",[dstr]);ts.p.datatype="local";ts.p.datastr=null;endReq();break;case"jsonstring":beginReq();if(typeof ts.p.datastr==="string"){dstr=$.jgrid.parse(ts.p.datastr)}else{dstr=ts.p.datastr}addJSONData(dstr);$(ts).triggerHandler("jqGridLoadComplete",[dstr]);if(lcf){ts.p.loadComplete.call(ts,dstr)}$(ts).triggerHandler("jqGridAfterLoadComplete",[dstr]);ts.p.datatype="local";ts.p.datastr=null;endReq();break;case"local":case"clientside":beginReq();ts.p.datatype="local";ts.p._ald=true;var req=addLocalData();addJSONData(req,rcnt,npage>1,adjust);$(ts).triggerHandler("jqGridLoadComplete",[req]);if(lc){lc.call(ts,req)}$(ts).triggerHandler("jqGridAfterLoadComplete",[req]);if(pvis){ts.grid.populateVisible()}endReq();ts.p._ald=false;break}ts.p._sort=false}},setHeadCheckBox=function(checked){$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv)[ts.p.useProp?"prop":"attr"]("checked",checked);var fid=ts.p.frozenColumns?ts.p.id+"_frozen":"";if(fid){$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.fhDiv)[ts.p.useProp?"prop":"attr"]("checked",checked)}},setPager=function(pgid,tp){var sep="<td class='ui-pg-button "+disabled+"'><span class='ui-separator'></span></td>",pginp="",pgl="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",str="",pgcnt,lft,cent,rgt,twd,tdw,i,clearVals=function(onpaging,thus){var ret;if($.isFunction(ts.p.onPaging)){ret=ts.p.onPaging.call(ts,onpaging,thus)}if(ret==="stop"){return false}ts.p.selrow=null;if(ts.p.multiselect){ts.p.selarrrow=[];setHeadCheckBox(false)}ts.p.savedRow=[];return true};pgid=pgid.substr(1);tp+="_"+pgid;pgcnt="pg_"+pgid;lft=pgid+"_left";cent=pgid+"_center";rgt=pgid+"_right";$("#"+$.jgrid.jqID(pgid)).append("<div id='"+pgcnt+"' class='ui-pager-control' role='group'><table "+getstyle(stylemodule,"pagerTable",false,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+lft+"' align='left'></td><td id='"+cent+"' align='center' style='white-space:pre;'></td><td id='"+rgt+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(ts.p.rowList.length>0){str='<td dir="'+dir+'">';str+="<select "+getstyle(stylemodule,"pgSelectBox",false,"ui-pg-selbox")+' role="listbox" title="'+($.jgrid.getRegional(ts,"defaults.pgrecs",ts.p.pgrecs)||"")+'">';var strnm;for(i=0;i<ts.p.rowList.length;i++){strnm=ts.p.rowList[i].toString().split(":");if(strnm.length===1){strnm[1]=strnm[0]}str+='<option role="option" value="'+strnm[0]+'"'+((intNum(ts.p.rowNum,0)===intNum(strnm[0],0))?' selected="selected"':"")+">"+strnm[1]+"</option>"}str+="</select></td>"}if(dir==="rtl"){pgl+=str}if(ts.p.pginput===true){pginp="<td id='input"+tp+"' dir='"+dir+"'>"+$.jgrid.template($.jgrid.getRegional(ts,"defaults.pgtext",ts.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(pgid)+"'></span>")+"</td>"}if(ts.p.pgbuttons===true){var po=["first"+tp,"prev"+tp,"next"+tp,"last"+tp],btc=getstyle(stylemodule,"pgButtonBox",true,"ui-pg-button"),pot=[($.jgrid.getRegional(ts,"defaults.pgfirst",ts.p.pgfirst)||""),($.jgrid.getRegional(ts,"defaults.pgprev",ts.p.pgprev)||""),($.jgrid.getRegional(ts,"defaults.pgnext",ts.p.pgnext)||""),($.jgrid.getRegional(ts,"defaults.pglast",ts.p.pglast)||"")];if(dir==="rtl"){po.reverse();pot.reverse()}pgl+="<td id='"+po[0]+"' class='"+btc+"' title='"+pot[0]+"'><span "+getstyle(stylemodule,"icon_first",false,iconbase)+"></span></td>";pgl+="<td id='"+po[1]+"' class='"+btc+"'  title='"+pot[1]+"'><span "+getstyle(stylemodule,"icon_prev",false,iconbase)+"></span></td>";pgl+=pginp!==""?sep+pginp+sep:"";pgl+="<td id='"+po[2]+"' class='"+btc+"' title='"+pot[2]+"'><span "+getstyle(stylemodule,"icon_next",false,iconbase)+"></span></td>";pgl+="<td id='"+po[3]+"' class='"+btc+"' title='"+pot[3]+"'><span "+getstyle(stylemodule,"icon_end",false,iconbase)+"></span></td>"}else{if(pginp!==""){pgl+=pginp}}if(dir==="ltr"){pgl+=str}pgl+="</tr></tbody></table>";if(ts.p.viewrecords===true){$("td#"+pgid+"_"+ts.p.recordpos,"#"+pgcnt).append("<div dir='"+dir+"' style='text-align:"+ts.p.recordpos+"' class='ui-paging-info'></div>")}$("td#"+pgid+"_"+ts.p.pagerpos,"#"+pgcnt).append(pgl);tdw=$("#gbox_"+$.jgrid.jqID(ts.p.id)).css("font-size")||"11px";$("#gbox_"+$.jgrid.jqID(ts.p.id)).append("<div id='testpg' "+getstyle(stylemodule,"entrieBox",false,"ui-jqgrid")+" style='font-size:"+tdw+";visibility:hidden;' ></div>");twd=$(pgl).clone().appendTo("#testpg").width();$("#testpg").remove();if(twd>0){if(pginp!==""){twd+=50}$("td#"+pgid+"_"+ts.p.pagerpos,"#"+pgcnt).width(twd)}ts.p._nvtd=[];ts.p._nvtd[0]=twd?Math.floor((ts.p.width-twd)/2):Math.floor(ts.p.width/3);ts.p._nvtd[1]=0;pgl=null;$(".ui-pg-selbox","#"+pgcnt).bind("change",function(){if(!clearVals("records",this)){return false}ts.p.page=Math.round(ts.p.rowNum*(ts.p.page-1)/this.value-0.5)+1;ts.p.rowNum=this.value;if(ts.p.pager){$(".ui-pg-selbox",ts.p.pager).val(this.value)}if(ts.p.toppager){$(".ui-pg-selbox",ts.p.toppager).val(this.value)}populate();return false});if(ts.p.pgbuttons===true){$(".ui-pg-button","#"+pgcnt).hover(function(){if($(this).hasClass(disabled)){this.style.cursor="default"}else{$(this).addClass(hover);this.style.cursor="pointer"}},function(){if(!$(this).hasClass(disabled)){$(this).removeClass(hover);this.style.cursor="default"}});$("#first"+$.jgrid.jqID(tp)+", #prev"+$.jgrid.jqID(tp)+", #next"+$.jgrid.jqID(tp)+", #last"+$.jgrid.jqID(tp)).click(function(){if($(this).hasClass(disabled)){return false}var cp=intNum(ts.p.page,1),last=intNum(ts.p.lastpage,1),selclick=false,fp=true,pp=true,np=true,lp=true;if(last===0||last===1){fp=false;pp=false;np=false;lp=false}else{if(last>1&&cp>=1){if(cp===1){fp=false;pp=false}else{if(cp===last){np=false;lp=false}}}else{if(last>1&&cp===0){np=false;lp=false;cp=last-1}}}if(!clearVals(this.id.split("_")[0],this)){return false}if(this.id==="first"+tp&&fp){ts.p.page=1;selclick=true}if(this.id==="prev"+tp&&pp){ts.p.page=(cp-1);selclick=true}if(this.id==="next"+tp&&np){ts.p.page=(cp+1);selclick=true}if(this.id==="last"+tp&&lp){ts.p.page=last;selclick=true}if(selclick){populate()}return false})}if(ts.p.pginput===true){$("#"+pgcnt).on("keypress","input.ui-pg-input",function(e){var key=e.charCode||e.keyCode||0;if(key===13){if(!clearVals("user",this)){return false}$(this).val(intNum($(this).val(),1));ts.p.page=($(this).val()>0)?$(this).val():ts.p.page;populate();return false}return this})}},multiSort=function(iCol,obj,sor){var cm=ts.p.colModel,selTh=ts.p.frozenColumns?obj:ts.grid.headers[iCol].el,so="",sn;$("span.ui-grid-ico-sort",selTh).addClass(disabled);$(selTh).attr("aria-selected","false");sn=(cm[iCol].index||cm[iCol].name);if(typeof sor=="undefined"){if(cm[iCol].lso){if(cm[iCol].lso==="asc"){cm[iCol].lso+="-desc";so="desc"}else{if(cm[iCol].lso==="desc"){cm[iCol].lso+="-asc";so="asc"}else{if(cm[iCol].lso==="asc-desc"||cm[iCol].lso==="desc-asc"){cm[iCol].lso=""}}}}else{cm[iCol].lso=so=cm[iCol].firstsortorder||"asc"}}else{cm[iCol].lso=so=sor}if(so){$("span.s-ico",selTh).show();$("span.ui-icon-"+so,selTh).removeClass(disabled);$(selTh).attr("aria-selected","true")}else{if(!ts.p.viewsortcols[0]){$("span.s-ico",selTh).hide()}}var isn=sortarr.indexOf(sn);if(isn===-1){sortarr.push(sn);sortord.push(so)}else{if(so){sortord[isn]=so}else{sortord.splice(isn,1);sortarr.splice(isn,1)}}ts.p.sortorder="";ts.p.sortname="";for(var i=0,len=sortarr.length;i<len;i++){if(i>0){ts.p.sortname+=", "}ts.p.sortname+=sortarr[i];if(i!==len-1){ts.p.sortname+=" "+sortord[i]}}ts.p.sortorder=sortord[len-1]},sortData=function(index,idxcol,reload,sor,obj){if(!ts.p.colModel[idxcol].sortable){return}if(ts.p.savedRow.length>0){return}if(!reload){if(ts.p.lastsort===idxcol&&ts.p.sortname!==""){if(ts.p.sortorder==="asc"){ts.p.sortorder="desc"}else{if(ts.p.sortorder==="desc"){ts.p.sortorder="asc"}}}else{ts.p.sortorder=ts.p.colModel[idxcol].firstsortorder||"asc"}ts.p.page=1}if(ts.p.multiSort){multiSort(idxcol,obj,sor)}else{if(sor){if(ts.p.lastsort===idxcol&&ts.p.sortorder===sor&&!reload){return}ts.p.sortorder=sor}var previousSelectedTh=ts.grid.headers[ts.p.lastsort]?ts.grid.headers[ts.p.lastsort].el:null,newSelectedTh=ts.p.frozenColumns?obj:ts.grid.headers[idxcol].el,usehide=ts.p.viewsortcols[1]==="single"?true:false,tmpicon;tmpicon=$(previousSelectedTh).find("span.ui-grid-ico-sort");tmpicon.addClass(disabled);if(usehide){$(tmpicon).css("display","none")}$(previousSelectedTh).attr("aria-selected","false");if(ts.p.frozenColumns){tmpicon=ts.grid.fhDiv.find("span.ui-grid-ico-sort");tmpicon.addClass(disabled);if(usehide){tmpicon.css("display","none")}ts.grid.fhDiv.find("th").attr("aria-selected","false")}tmpicon=$(newSelectedTh).find("span.ui-icon-"+ts.p.sortorder);tmpicon.removeClass(disabled);if(usehide){tmpicon.css("display","")}$(newSelectedTh).attr("aria-selected","true");if(!ts.p.viewsortcols[0]){if(ts.p.lastsort!==idxcol){if(ts.p.frozenColumns){ts.grid.fhDiv.find("span.s-ico").hide()}$("span.s-ico",previousSelectedTh).hide();$("span.s-ico",newSelectedTh).show()}else{if(ts.p.sortname===""){$("span.s-ico",newSelectedTh).show()}}}index=index.substring(5+ts.p.id.length+1);ts.p.sortname=ts.p.colModel[idxcol].index||index}if($(ts).triggerHandler("jqGridSortCol",[ts.p.sortname,idxcol,ts.p.sortorder])==="stop"){ts.p.lastsort=idxcol;return}if($.isFunction(ts.p.onSortCol)){if(ts.p.onSortCol.call(ts,ts.p.sortname,idxcol,ts.p.sortorder)==="stop"){ts.p.lastsort=idxcol;return}}if(ts.p.datatype==="local"){if(ts.p.deselectAfterSort){$(ts).jqGrid("resetSelection")}}else{ts.p.selrow=null;if(ts.p.multiselect){setHeadCheckBox(false)}ts.p.selarrrow=[];ts.p.savedRow=[]}if(ts.p.scroll){var sscroll=ts.grid.bDiv.scrollLeft;emptyRows.call(ts,true,false);ts.grid.hDiv.scrollLeft=sscroll}if(ts.p.subGrid&&ts.p.datatype==="local"){$("td.sgexpanded","#"+$.jgrid.jqID(ts.p.id)).each(function(){$(this).trigger("click")})}ts.p._sort=true;populate();ts.p.lastsort=idxcol;if(ts.p.sortname!==index&&idxcol){ts.p.lastsort=idxcol}},setColWidth=function(){var initwidth=0,brd=$.jgrid.cell_width?0:intNum(ts.p.cellLayout,0),vc=0,lvc,scw=intNum(ts.p.scrollOffset,0),cw,hs=false,aw,gw=0,cr;$.each(ts.p.colModel,function(){if(this.hidden===undefined){this.hidden=false}if(ts.p.grouping&&ts.p.autowidth){var ind=$.inArray(this.name,ts.p.groupingView.groupField);if(ind>=0&&ts.p.groupingView.groupColumnShow.length>ind){this.hidden=!ts.p.groupingView.groupColumnShow[ind]}}this.widthOrg=cw=intNum(this.width,0);if(this.hidden===false){initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}}});if(isNaN(ts.p.width)){ts.p.width=initwidth+((ts.p.shrinkToFit===false&&!isNaN(ts.p.height))?scw:0)}grid.width=ts.p.width;ts.p.tblwidth=initwidth;if(ts.p.shrinkToFit===false&&ts.p.forceFit===true){ts.p.forceFit=false}if(ts.p.shrinkToFit===true&&vc>0){aw=grid.width-brd*vc-gw;if(!isNaN(ts.p.height)){aw-=scw;hs=true}initwidth=0;$.each(ts.p.colModel,function(i){if(this.hidden===false&&!this.fixed){cw=Math.round(aw*this.width/(ts.p.tblwidth-brd*vc-gw));this.width=cw;initwidth+=cw;lvc=i}});cr=0;if(hs){if(grid.width-gw-(initwidth+brd*vc)!==scw){cr=grid.width-gw-(initwidth+brd*vc)-scw}}else{if(!hs&&Math.abs(grid.width-gw-(initwidth+brd*vc))!==1){cr=grid.width-gw-(initwidth+brd*vc)}}ts.p.colModel[lvc].width+=cr;ts.p.tblwidth=initwidth+cr+brd*vc+gw;if(ts.p.tblwidth>ts.p.width){ts.p.colModel[lvc].width-=(ts.p.tblwidth-parseInt(ts.p.width,10));ts.p.tblwidth=ts.p.width}}},nextVisible=function(iCol){var ret=iCol,j=iCol,i;for(i=iCol+1;i<ts.p.colModel.length;i++){if(ts.p.colModel[i].hidden!==true){j=i;break}}return j-ret},getOffset=function(iCol){var $th=$(ts.grid.headers[iCol].el),ret=[$th.position().left+$th.outerWidth()];if(ts.p.direction==="rtl"){ret[0]=ts.p.width-ret[0]}ret[0]-=ts.grid.bDiv.scrollLeft;ret.push($(ts.grid.hDiv).position().top);ret.push($(ts.grid.bDiv).offset().top-$(ts.grid.hDiv).offset().top+$(ts.grid.bDiv).height());return ret},getColumnHeaderIndex=function(th){var i,headers=ts.grid.headers,ci=$.jgrid.getCellIndex(th);for(i=0;i<headers.length;i++){if(th===headers[i].el){ci=i;break}}return ci},buildColItems=function(top,left,parent){var cm=ts.p.colModel,len=cm.length,i,cols=[],disp,texts=$.jgrid.getRegional(ts,"colmenu"),str1='<ul id="col_menu" class="ui-search-menu  ui-col-menu modal-content" role="menu" tabindex="0" style="left:'+left+"px;top:"+top+'px;">';for(i=0;i<len;i++){var hid=!cm[i].hidden?"checked":"",nm=cm[i].name,lb=ts.p.colNames[i];disp=(nm==="cb"||nm==="subgrid"||nm==="rn"||cm[i].hidedlg)?"style='display:none'":"";str1+="<li "+disp+' class="ui-menu-item" role="presentation" draggable="true"><a class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table" ><tr><td class="menu_icon" title="'+texts.reorder+'"><span class="'+iconbase+" "+colmenustyle.icon_move+' notclick"></span></td><td class="menu_icon"><input class="'+colmenustyle.input_checkbox+'" type="checkbox" name="'+nm+'" '+hid+'></td><td class="menu_text">'+lb+"</td></tr></table></a></li>";cols.push(i)}str1+="</ul>";$(parent).append(str1);$("#col_menu").addClass("ui-menu "+colmenustyle.menu_widget);if($.fn.html5sortable()){$("#col_menu").html5sortable({handle:"span",forcePlaceholderSize:true}).bind("sortupdate",function(e,ui){cols.splice(ui.startindex,1);cols.splice(ui.endindex,0,ui.startindex);$(ts).jqGrid("destroyFrozenColumns");$(ts).jqGrid("remapColumns",cols,true);$(ts).jqGrid("setFrozenColumns");for(i=0;i<len;i++){cols[i]=i}})}$("#col_menu > li > a").on("click",function(e){var checked;if($(e.target).hasClass("notclick")){return}if($(e.target).is(":input")){checked=$(e.target).is(":checked")}else{checked=!$("input",this).is(":checked");$("input",this).prop("checked",checked)}if(!checked){$(ts).jqGrid("hideCol",$("input",this).attr("name"));$(this).parent().attr("draggable","false")}else{$(ts).jqGrid("showCol",$("input",this).attr("name"));$(this).parent().attr("draggable","true")}}).hover(function(){$(this).addClass(hover)},function(){$(this).removeClass(hover)})},buildSearchBox=function(index,top,left,parent){var cm=ts.p.colModel[index],rules,o1="",v1="",r1="",o2="",v2="",so,op,repstr="",selected,elem,numopts=["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts=["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],texts=$.jgrid.getRegional(ts,"search"),common=$.jgrid.styleUI[(ts.p.styleUI||"jQueryUI")].common;if(!cm){return}rules=ts.p.colFilters&&ts.p.colFilters[cm.name]?ts.p.colFilters[cm.name]:false;if(rules&&!$.isEmptyObject(rules)){o1=rules.oper1;v1=rules.value1;r1=rules.rule;o2=rules.oper2;v2=rules.value2}if(!cm.searchoptions){cm.searchoptions={}}if(cm.searchoptions.sopt){so=cm.searchoptions.sopt}else{if(cm.sorttype==="text"){so=stropts}else{so=numopts}}if(cm.searchoptions.operands){op=cm.searchoptions.operands}else{op=texts.groupOps}elem=$("<form></form>");var str1="<div>"+$.jgrid.getRegional(ts,"colmenu.searchTitle")+"</div>";str1+='<div><select id="oper1" class="'+colmenustyle.filter_select+'">';$.each(texts.odata,function(i,n){selected=n.oper===o1?'selected="selected"':"";if($.inArray(n.oper,so)!==-1){repstr+='<option value="'+n.oper+'" '+selected+">"+n.text+"</option>"}});str1+=repstr;str1+="</select></div>";elem.append(str1);var df="";if(cm.searchoptions.defaultValue){df=$.isFunction(cm.searchoptions.defaultValue)?cm.searchoptions.defaultValue.call(ts):cm.searchoptions.defaultValue}if(v1){df=v1}var soptions=$.extend(cm.searchoptions,{name:cm.index||cm.name,id:"sval1_"+ts.p.idPrefix+cm.name,oper:"search"});var input=$.jgrid.createEl.call(ts,cm.stype,soptions,df,false,$.extend({},$.jgrid.ajaxOptions,ts.p.ajaxSelectOptions||{}));$(input).addClass(colmenustyle.filter_input);str1=$("<div></div>").append(input);elem.append(str1);str1='<div><select id="operand" class="'+colmenustyle.filter_select+'">';$.each(op,function(i,n){selected=n.op===r1?'selected="selected"':"";str1+="<option value='"+n.op+"' "+selected+">"+n.text+"</option>"});str1+="</select></div>";elem.append(str1);repstr="";$.each(texts.odata,function(i,n){selected=n.oper===o2?'selected="selected"':"";if($.inArray(n.oper,so)!==-1){repstr+='<option value="'+n.oper+'" '+selected+">"+n.text+"</option>"}});str1='<div><select id="oper2" class="'+colmenustyle.filter_select+'">'+repstr+"</select></div>";elem.append(str1);if(v2){df=v2}else{df=""}soptions=$.extend(cm.searchoptions,{name:cm.index||cm.name,id:"sval2_"+ts.p.idPrefix+cm.name,oper:"search"});input=$.jgrid.createEl.call(ts,cm.stype,soptions,df,false,$.extend({},$.jgrid.ajaxOptions,ts.p.ajaxSelectOptions||{}));$(input).addClass(colmenustyle.filter_input);str1=$("<div></div>").append(input);elem.append(str1);str1="<div>";str1+="<div class='search_buttons'><a tabindex='0' id='bs_reset' class='fm-button "+common.button+" ui-reset'>"+texts.Reset+"</a></div>";str1+="<div class='search_buttons'><a tabindex='0' id='bs_search' class='fm-button "+common.button+" ui-search'>"+texts.Find+"</a></div>";str1+="</div>";elem.append(str1);elem=$('<li class="ui-menu-item" role="presentation"></li>').append(elem);elem=$('<ul id="search_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="left:'+left+"px;top:"+top+'px;"></ul>').append(elem);$(parent).append(elem);$("#search_menu").addClass("ui-menu "+colmenustyle.menu_widget);$("#bs_reset, #bs_search","#search_menu").hover(function(){$(this).addClass(hover)},function(){$(this).removeClass(hover)});$(elem).find("#bs_reset").click(function(e){ts.p.colFilters[cm.name]={};ts.p.postData.filters=buildFilters();ts.p.search=true;$(ts).trigger("reloadGrid");$("#column_menu").remove();return false});$(elem).find("#bs_search").click(function(e){ts.p.colFilters[cm.name]={oper1:$("#oper1","#search_menu").val(),value1:$("#sval1_"+ts.p.idPrefix+cm.name,"#search_menu").val(),rule:$("#operand","#search_menu").val(),oper2:$("#oper2","#search_menu").val(),value2:$("#sval2_"+ts.p.idPrefix+cm.name,"#search_menu").val()};ts.p.postData.filters=buildFilters();ts.p.search=true;$(ts).trigger("reloadGrid");$("#column_menu").remove();return false})},buildFilters=function(){var go="AND",filters='{"groupOp":"'+go+'","rules":[], "groups" : [',i=0;for(var item in ts.p.colFilters){if(ts.p.colFilters.hasOwnProperty(item)){var si=ts.p.colFilters[item];if(!$.isEmptyObject(si)){if(i>0){filters+=","}filters+='{"groupOp": "'+si.rule+'", "rules" : [';filters+='{"field":"'+item+'",';filters+='"op":"'+si.oper1+'",';si.value1+="";filters+='"data":"'+si.value1.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';if(si.value2){filters+=',{"field":"'+item+'",';filters+='"op":"'+si.oper2+'",';si.value2+="";filters+='"data":"'+si.value2.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}'}filters+="]}";i++}else{}}}filters+="]}";return filters},buildGrouping=function(index,isgroup){var cm=ts.p.colModel[index],group=ts.p.groupingView;if(isgroup!==-1){group.groupField.splice(isgroup,1)}else{group.groupField.push(cm.name)}$(ts).jqGrid("groupingGroupBy",group.groupField);if(ts.p.frozenColumns){$(ts).jqGrid("destroyFrozenColumns");$(ts).jqGrid("setFrozenColumns")}},buildFreeze=function(index,isfreeze){var cols=[],i,len=ts.p.colModel.length,lastfrozen=-1,cm=ts.p.colModel;for(i=0;i<len;i++){if(cm[i].frozen){lastfrozen=i}cols.push(i)}cols.splice(index,1);cols.splice(lastfrozen+(isfreeze?1:0),0,index);cm[index].frozen=isfreeze;$(ts).jqGrid("destroyFrozenColumns");$(ts).jqGrid("remapColumns",cols,true);$(ts).jqGrid("setFrozenColumns")},buildColMenu=function(index,left,top){left=parseInt(left,10);top=parseInt(top,10)+25;var fs=$(".ui-jqgrid-view").css("font-size")||"11px";var str='<ul id="column_menu" class="ui-search-menu modal-content column-menu" role="menu" tabindex="0" style="font-size:'+fs+";left:"+left+"px;top:"+top+'px;">',cm=ts.p.colModel[index],op=$.extend({sorting:true,columns:true,filtering:true,seraching:true,grouping:true,freeze:true},cm.coloptions),texts=$.jgrid.getRegional(ts,"colmenu"),isgroup,isfreeze;if(op.sorting){str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="sortasc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_sort_asc+'"></span></td><td class="menu_text">'+texts.sortasc+"</td></tr></table></a></li>";str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="sortdesc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_sort_desc+'"></span></td><td class="menu_text">'+texts.sortdesc+"</td></tr></table></a></li>"}if(op.columns){str+='<li class="ui-menu-item divider" role="separator"></li>';str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="columns"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_columns+'"></span></td><td class="menu_text">'+texts.columns+"</td></tr></table></a></li>"}if(op.filtering){str+='<li class="ui-menu-item divider" role="separator"></li>';str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="filtering"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_filter+'"></span></td><td class="menu_text">'+texts.filter+" "+(cm.label||cm.name)+"</td></tr></table></a></li>"}if(op.grouping){isgroup=$.inArray(cm.name,ts.p.groupingView.groupField);str+='<li class="ui-menu-item divider" role="separator"></li>';str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="grouping"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_group+'"></span></td><td class="menu_text">'+(isgroup!==-1?texts.ungrouping:texts.grouping+" "+(cm.label||cm.name))+"</td></tr></table></a></li>"}if(op.freeze){isfreeze=(cm.frozen&&ts.p.frozenColumns)?false:true;str+='<li class="ui-menu-item divider" role="separator"></li>';str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="freeze"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_freeze+'"></span></td><td class="menu_text">'+(isfreeze?(texts.freeze+" "+(cm.label||cm.name)):texts.unfreeze)+"</td></tr></table></a></li>"}str+="</ul>";$("body").append(str);$("#column_menu").addClass("ui-menu "+colmenustyle.menu_widget);$("#column_menu > li > a").hover(function(){$("#col_menu").remove();$("#search_menu").remove();if($(this).attr("value")==="columns"){var left1=$(this).parent().width()+18,top1=$(this).parent().position().top-5;buildColItems(top1,left1,$(this).parent())}if($(this).attr("value")==="filtering"){var left1=$(this).parent().width()+18,top1=$(this).parent().position().top-5;buildSearchBox(index,top1,left1,$(this).parent())}$(this).addClass(hover)},function(){$(this).removeClass(hover)}).click(function(){var v=$(this).attr("value"),sobj=ts.grid.headers[index].el;if(v==="sortasc"){sortData("jqgh_"+ts.p.id+"_"+cm.name,index,true,"asc",sobj)}else{if(v==="sortdesc"){sortData("jqgh_"+ts.p.id+"_"+cm.name,index,true,"desc",sobj)}else{if(v==="grouping"){buildGrouping(index,isgroup)}else{if(v==="freeze"){buildFreeze(index,isfreeze)}}}}if(v.indexOf("sort")!==-1||v==="grouping"||v==="freeze"){$(this).remove()}})},colTemplate;if(ts.p.colMenu){$("body").on("click",function(e){if(!$(e.target).closest(".column-menu").length){$("#column_menu").remove()}})}this.p.id=this.id;if($.inArray(ts.p.multikey,sortkeys)===-1){ts.p.multikey=false}ts.p.keyName=false;for(i=0;i<ts.p.colModel.length;i++){colTemplate=typeof ts.p.colModel[i].template==="string"?($.jgrid.cmTemplate!=null&&typeof $.jgrid.cmTemplate[ts.p.colModel[i].template]==="object"?$.jgrid.cmTemplate[ts.p.colModel[i].template]:{}):ts.p.colModel[i].template;ts.p.colModel[i]=$.extend(true,{},ts.p.cmTemplate,colTemplate||{},ts.p.colModel[i]);if(ts.p.keyName===false&&ts.p.colModel[i].key===true){ts.p.keyName=ts.p.colModel[i].name}}ts.p.sortorder=ts.p.sortorder.toLowerCase();$.jgrid.cell_width=$.jgrid.cellWidth();if(ts.p.grouping===true){ts.p.scroll=false;ts.p.rownumbers=false;ts.p.treeGrid=false;ts.p.gridview=true}if(this.p.treeGrid===true){try{$(this).jqGrid("setTreeGrid")}catch(_){}if(ts.p.datatype!=="local"){ts.p.localReader={id:"_id_"}}}if(this.p.subGrid){try{$(ts).jqGrid("setSubGrid")}catch(s){}}if(this.p.multiselect){this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>");this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?ts.p.multiselectWidth+ts.p.cellLayout:ts.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true,frozen:true})}if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:"rn",width:ts.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true,frozen:true})}ts.p.xmlReader=$.extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},ts.p.xmlReader);ts.p.jsonReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},ts.p.jsonReader);ts.p.localReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},ts.p.localReader);if(ts.p.scroll){ts.p.pgbuttons=false;ts.p.pginput=false;ts.p.rowList=[]}if(ts.p.data.length){normalizeData();refreshIndex()}var thead="<thead><tr class='ui-jqgrid-labels' role='row'>",tdc,idn,w,res,sort="",td,ptr,tbody,imgs,iac="",idc="",tmpcm;if(ts.p.shrinkToFit===true&&ts.p.forceFit===true){for(i=ts.p.colModel.length-1;i>=0;i--){if(!ts.p.colModel[i].hidden){ts.p.colModel[i].resizable=false;break}}}if(ts.p.viewsortcols[1]==="horizontal"){iac=" ui-i-asc";idc=" ui-i-desc"}else{if(ts.p.viewsortcols[1]==="single"){iac=" ui-single-sort-asc";idc=" ui-single-sort-desc";sort=" style='display:none'";ts.p.viewsortcols[0]=false}}tdc=isMSIE?"class='ui-th-div-ie'":"";imgs="<span class='s-ico' style='display:none'>";imgs+="<span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+iac+" ui-sort-"+dir+" "+disabled+" "+iconbase+" "+getstyle(stylemodule,"icon_asc",true)+"'"+sort+"></span>";imgs+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+idc+" ui-sort-"+dir+" "+disabled+" "+iconbase+" "+getstyle(stylemodule,"icon_desc",true)+"'"+sort+"></span></span>";if(ts.p.multiSort){if(ts.p.sortname){sortarr=ts.p.sortname.split(",");for(i=0;i<sortarr.length;i++){sotmp=$.trim(sortarr[i]).split(" ");sortarr[i]=$.trim(sotmp[0]);sortord[i]=sotmp[1]?$.trim(sotmp[1]):ts.p.sortorder||"asc"}}}for(i=0;i<this.p.colNames.length;i++){var tooltip=ts.p.headertitles?(' title="'+$.jgrid.stripHtml(ts.p.colNames[i])+'"'):"";tmpcm=ts.p.colModel[i];if(!tmpcm.hasOwnProperty("colmenu")){tmpcm.colmenu=(tmpcm.name==="rn"||tmpcm.name==="cb"||tmpcm.name==="subgrid")?false:true}thead+="<th id='"+ts.p.id+"_"+tmpcm.name+"' role='columnheader' "+getstyle(stylemodule,"headerBox",false,"ui-th-column ui-th-"+dir)+" "+tooltip+">";idn=tmpcm.index||tmpcm.name;thead+="<div class='ui-th-div' id='jqgh_"+ts.p.id+"_"+tmpcm.name+"' "+tdc+">"+ts.p.colNames[i];if(!tmpcm.width){tmpcm.width=150}else{tmpcm.width=parseInt(tmpcm.width,10)}if(typeof tmpcm.title!=="boolean"){tmpcm.title=true}tmpcm.lso="";if(idn===ts.p.sortname){ts.p.lastsort=i}if(ts.p.multiSort){sotmp=$.inArray(idn,sortarr);if(sotmp!==-1){tmpcm.lso=sortord[sotmp]}}thead+=imgs;if(ts.p.colMenu&&tmpcm.colmenu){thead+="<a class='colmenu' href='#'><span class='colmenuspan "+iconbase+" "+colmenustyle.icon_menu+"'></span></a>"}thead+="</div></th>"}thead+="</tr></thead>";imgs=null;tmpcm=null;$(this).append(thead);$("thead tr:first th",this).hover(function(){$(this).addClass(hover)},function(){$(this).removeClass(hover)});if(this.p.multiselect){var emp=[],chk;$("#cb_"+$.jgrid.jqID(ts.p.id),this).bind("click",function(){ts.p.selarrrow=[];var froz=ts.p.frozenColumns===true?ts.p.id+"_frozen":"";if(this.checked){$(ts.rows).each(function(i){if(i>0){if(!$(this).hasClass("ui-subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass(disabled)&&!$(this).hasClass("jqfoot")){$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id))[ts.p.useProp?"prop":"attr"]("checked",true);$(this).addClass(highlight).attr("aria-selected","true");ts.p.selarrrow.push(this.id);ts.p.selrow=this.id;if(froz){$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id),ts.grid.fbDiv)[ts.p.useProp?"prop":"attr"]("checked",true);$("#"+$.jgrid.jqID(this.id),ts.grid.fbDiv).addClass(highlight)}}}});chk=true;emp=[]}else{$(ts.rows).each(function(i){if(i>0){if(!$(this).hasClass("ui-subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass(disabled)&&!$(this).hasClass("jqfoot")){$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id))[ts.p.useProp?"prop":"attr"]("checked",false);$(this).removeClass(highlight).attr("aria-selected","false");emp.push(this.id);if(froz){$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id),ts.grid.fbDiv)[ts.p.useProp?"prop":"attr"]("checked",false);$("#"+$.jgrid.jqID(this.id),ts.grid.fbDiv).removeClass(highlight)}}}});ts.p.selrow=null;chk=false}$(ts).triggerHandler("jqGridSelectAll",[chk?ts.p.selarrrow:emp,chk]);if($.isFunction(ts.p.onSelectAll)){ts.p.onSelectAll.call(ts,chk?ts.p.selarrrow:emp,chk)}})}if(ts.p.autowidth===true){var pw=$(eg).innerWidth();ts.p.width=pw>0?pw:"nw"}setColWidth();$(eg).css("width",grid.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+ts.p.id+"'>&#160;</div>");if(ts.p.scrollPopUp){$(eg).append("<div "+getstyle(stylemodule,"scrollBox",false,"loading ui-scroll-popup")+" id='scroll_g"+ts.p.id+"'></div>")}$(gv).css("width",grid.width+"px");thead=$("thead:first",ts).get(0);var tfoot="";if(ts.p.footerrow){tfoot+="<table role='presentation' style='width:"+ts.p.tblwidth+"px' "+getstyle(stylemodule,"footerTable",false,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+getstyle(stylemodule,"footerBox",false,"footrow footrow-"+dir)+">"}var thr=$("tr:first",thead),firstr="<tr class='jqgfirstrow' role='row'>";ts.p.disableClick=false;$("th",thr).each(function(j){tmpcm=ts.p.colModel[j];w=tmpcm.width;if(tmpcm.resizable===undefined){tmpcm.resizable=true}if(tmpcm.resizable){res=document.createElement("span");$(res).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+dir).css("cursor","col-resize");$(this).addClass(ts.p.resizeclass)}else{res=""}$(this).css("width",w+"px").prepend(res);res=null;var hdcol="";if(tmpcm.hidden){$(this).css("display","none");hdcol="display:none;"}firstr+="<td role='gridcell' style='height:0px;width:"+w+"px;"+hdcol+"'></td>";grid.headers[j]={width:w,el:this};sort=tmpcm.sortable;if(typeof sort!=="boolean"){tmpcm.sortable=true;sort=true}var nm=tmpcm.name;if(!(nm==="cb"||nm==="subgrid"||nm==="rn")){if(ts.p.viewsortcols[2]){$(">div",this).addClass("ui-jqgrid-sortable")}}if(sort){if(ts.p.multiSort){if(ts.p.viewsortcols[0]){$("div span.s-ico",this).show();if(ts.p.colModel[j].lso){$("div span.ui-icon-"+tmpcm.lso,this).removeClass(disabled).css("display","")}}else{if(ts.p.colModel[j].lso){$("div span.s-ico",this).show();$("div span.ui-icon-"+tmpcm.lso,this).removeClass(disabled).css("display","")}}}else{if(ts.p.viewsortcols[0]){$("div span.s-ico",this).show();if(j===ts.p.lastsort){$("div span.ui-icon-"+ts.p.sortorder,this).removeClass(disabled).css("display","")}}else{if(j===ts.p.lastsort&&ts.p.sortname!==""){$("div span.s-ico",this).show();$("div span.ui-icon-"+ts.p.sortorder,this).removeClass(disabled).css("display","")}}}}if(ts.p.footerrow){tfoot+="<td role='gridcell' "+formatCol(j,0,"",null,"",false)+">&#160;</td>"}}).mousedown(function(e){if($(e.target).closest("th>span.ui-jqgrid-resize").length!==1){return}var ci=getColumnHeaderIndex(this);if(ts.p.forceFit===true){ts.p.nv=nextVisible(ci)}grid.dragStart(ci,e,getOffset(ci));return false}).click(function(e){if(ts.p.disableClick){ts.p.disableClick=false;return false}var s="th>div.ui-jqgrid-sortable",r,d;if(!ts.p.viewsortcols[2]){s="th>div>span>span.ui-grid-ico-sort"}var t=$(e.target).closest(s);if(t.length!==1){return}var ci;if(ts.p.frozenColumns){var tid=$(this)[0].id.substring(ts.p.id.length+1);$(ts.p.colModel).each(function(i){if(this.name===tid){ci=i;return false}})}else{ci=getColumnHeaderIndex(this)}if($(e.target).hasClass("colmenuspan")){if($("#column_menu")[0]!=null){$("#column_menu").remove()}var colindex=$.jgrid.getCellIndex(e.target);if(colindex===-1){return}var offset=$(this).offset(),left=(offset.left),top=(offset.top);buildColMenu(colindex,left,top,t);e.stopPropagation();return}if(!ts.p.viewsortcols[2]){r=true;d=t.attr("sort")}if(ci!=null){sortData($("div",this)[0].id,ci,r,d,this)}return false});tmpcm=null;if(ts.p.sortable&&$.fn.sortable){try{$(ts).jqGrid("sortableColumns",thr)}catch(e){}}if(ts.p.footerrow){tfoot+="</tr></tbody></table>"}firstr+="</tr>";tbody=document.createElement("tbody");this.appendChild(tbody);$(this).addClass(getstyle(stylemodule,"rowTable",true,"ui-jqgrid-btable ui-common-table")).append(firstr);firstr=null;var hTable=$("<table "+getstyle(stylemodule,"headerTable",false,"ui-jqgrid-htable ui-common-table")+" style='width:"+ts.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"'></table>").append(thead),hg=(ts.p.caption&&ts.p.hiddengrid===true)?true:false,hb=$("<div class='ui-jqgrid-hbox"+(dir==="rtl"?"-rtl":"")+"'></div>");thead=null;grid.hDiv=document.createElement("div");grid.hDiv.style.width=(grid.width)+"px";grid.hDiv.className=getstyle(stylemodule,"headerDiv",true,"ui-jqgrid-hdiv");$(grid.hDiv).append(hb);$(hb).append(hTable);hTable=null;if(hg){$(grid.hDiv).hide()}if(ts.p.pager){if(typeof ts.p.pager==="string"){if(ts.p.pager.substr(0,1)!=="#"){ts.p.pager="#"+ts.p.pager}}else{ts.p.pager="#"+$(ts.p.pager).attr("id")}$(ts.p.pager).css({width:grid.width+"px"}).addClass(getstyle(stylemodule,"pagerBox",true,"ui-jqgrid-pager")).appendTo(eg);if(hg){$(ts.p.pager).hide()}setPager(ts.p.pager,"")}if(ts.p.cellEdit===false&&ts.p.hoverrows===true){$(ts).bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="ui-subgrid"){$(ptr).addClass(hover)}}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass(hover)})}var ri,ci,tdHtml;$(ts).before(grid.hDiv).click(function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0||ptr[0].className.indexOf(disabled)>-1||($(td,ts).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==ts.id){return this}var scb=$(td).hasClass("cbox"),cSel=$(ts).triggerHandler("jqGridBeforeSelectRow",[ptr[0].id,e]);cSel=(cSel===false||cSel==="stop")?false:true;if($.isFunction(ts.p.beforeSelectRow)){var allowRowSelect=ts.p.beforeSelectRow.call(ts,ptr[0].id,e);if(allowRowSelect===false||allowRowSelect==="stop"){cSel=false}}if(td.tagName==="A"||((td.tagName==="INPUT"||td.tagName==="TEXTAREA"||td.tagName==="OPTION"||td.tagName==="SELECT")&&!scb)){return}ri=ptr[0].id;td=$(td).closest("tr.jqgrow>td");if(td.length>0){ci=$.jgrid.getCellIndex(td);tdHtml=$(td).closest("td,th").html();$(ts).triggerHandler("jqGridCellSelect",[ri,ci,tdHtml,e]);if($.isFunction(ts.p.onCellSelect)){ts.p.onCellSelect.call(ts,ri,ci,tdHtml,e)}}if(ts.p.cellEdit===true){if(ts.p.multiselect&&scb&&cSel){$(ts).jqGrid("setSelection",ri,true,e)}else{if(td.length>0){try{$(ts).jqGrid("editCell",ptr[0].rowIndex,ci,true)}catch(_){}}}return}if(!cSel){return}if(!ts.p.multikey){if(ts.p.multiselect&&ts.p.multiboxonly){if(scb){$(ts).jqGrid("setSelection",ri,true,e)}else{var frz=ts.p.frozenColumns?ts.p.id+"_frozen":"";$(ts.p.selarrrow).each(function(i,n){var trid=$(ts).jqGrid("getGridRowById",n);if(trid){$(trid).removeClass(highlight)}$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(n))[ts.p.useProp?"prop":"attr"]("checked",false);if(frz){$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(frz)).removeClass(highlight);$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(frz))[ts.p.useProp?"prop":"attr"]("checked",false)}});ts.p.selarrrow=[];$(ts).jqGrid("setSelection",ri,true,e)}}else{$(ts).jqGrid("setSelection",ri,true,e)}}else{if(e[ts.p.multikey]){$(ts).jqGrid("setSelection",ri,true,e)}else{if(ts.p.multiselect&&scb){scb=$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+ri).is(":checked");$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+ri)[ts.p.useProp?"prop":"attr"]("checked",!scb)}}}}).bind("reloadGrid",function(e,opts){if(ts.p.treeGrid===true){ts.p.datatype=ts.p.treedatatype}opts=opts||{};if(opts.current){ts.grid.selectionPreserver(ts)}if(ts.p.datatype==="local"){$(ts).jqGrid("resetSelection");if(ts.p.data.length){normalizeData();refreshIndex()}}else{if(!ts.p.treeGrid){ts.p.selrow=null;if(ts.p.multiselect){ts.p.selarrrow=[];setHeadCheckBox(false)}ts.p.savedRow=[]}}if(ts.p.scroll){emptyRows.call(ts,true,false)}if(opts.page){var page=opts.page;if(page>ts.p.lastpage){page=ts.p.lastpage}if(page<1){page=1}ts.p.page=page;if(ts.grid.prevRowHeight){ts.grid.bDiv.scrollTop=(page-1)*ts.grid.prevRowHeight*ts.p.rowNum}else{ts.grid.bDiv.scrollTop=0}}if(ts.grid.prevRowHeight&&ts.p.scroll&&opts.page===undefined){delete ts.p.lastpage;ts.grid.populateVisible()}else{ts.grid.populate()}if(ts.p.inlineNav===true){$(ts).jqGrid("showAddEditButtons")}return false}).dblclick(function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return}ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);var dbcr=$(ts).triggerHandler("jqGridDblClickRow",[$(ptr).attr("id"),ri,ci,e]);if(dbcr!=null){return dbcr}if($.isFunction(ts.p.ondblClickRow)){dbcr=ts.p.ondblClickRow.call(ts,$(ptr).attr("id"),ri,ci,e);if(dbcr!=null){return dbcr}}}).bind("contextmenu",function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return}if(!ts.p.multiselect){$(ts).jqGrid("setSelection",ptr[0].id,true,e)}ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);var rcr=$(ts).triggerHandler("jqGridRightClickRow",[$(ptr).attr("id"),ri,ci,e]);if(rcr!=null){return rcr}if($.isFunction(ts.p.onRightClickRow)){rcr=ts.p.onRightClickRow.call(ts,$(ptr).attr("id"),ri,ci,e);if(rcr!=null){return rcr}}});grid.bDiv=document.createElement("div");if(isMSIE){if(String(ts.p.height).toLowerCase()==="auto"){ts.p.height="100%"}}$(grid.bDiv).append($('<div style="position:relative;"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:ts.p.height+(isNaN(ts.p.height)?"":"px"),width:(grid.width)+"px"}).scroll(grid.scrollGrid);$("table:first",grid.bDiv).css({width:ts.p.tblwidth+"px"});if(!$.support.tbody){if($("tbody",this).length===2){$("tbody:gt(0)",this).remove()}}if(ts.p.multikey){if($.jgrid.msie){$(grid.bDiv).bind("selectstart",function(){return false})}else{$(grid.bDiv).bind("mousedown",function(){return false})}}if(hg){$(grid.bDiv).hide()}var icoo=iconbase+" "+getstyle(stylemodule,"icon_caption_open",true),icoc=iconbase+" "+getstyle(stylemodule,"icon_caption_close",true);grid.cDiv=document.createElement("div");var arf=ts.p.hidegrid===true?$("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+cornerall+"' title='"+($.jgrid.getRegional(ts,"defaults.showhide",ts.p.showhide)||"")+"' />").hover(function(){arf.addClass(hover)},function(){arf.removeClass(hover)}).append("<span class='ui-jqgrid-headlink "+icoo+"'></span>").css((dir==="rtl"?"left":"right"),"0px"):"";$(grid.cDiv).append(arf).append("<span class='ui-jqgrid-title'>"+ts.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+(dir==="rtl"?"-rtl":"")+" "+getstyle(stylemodule,"gridtitleBox",true));$(grid.cDiv).insertBefore(grid.hDiv);if(ts.p.toolbar[0]){var tbstyle=getstyle(stylemodule,"customtoolbarBox",true,"ui-userdata");grid.uDiv=document.createElement("div");if(ts.p.toolbar[1]==="top"){$(grid.uDiv).insertBefore(grid.hDiv)}else{if(ts.p.toolbar[1]==="bottom"){$(grid.uDiv).insertAfter(grid.hDiv)}}if(ts.p.toolbar[1]==="both"){grid.ubDiv=document.createElement("div");$(grid.uDiv).addClass(tbstyle+" ui-userdata-top").attr("id","t_"+this.id).insertBefore(grid.hDiv).width(grid.width);$(grid.ubDiv).addClass(tbstyle+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(grid.hDiv).width(grid.width);if(hg){$(grid.ubDiv).hide()}}else{$(grid.uDiv).width(grid.width).addClass(tbstyle+" ui-userdata-top").attr("id","t_"+this.id)}if(hg){$(grid.uDiv).hide()}}if(ts.p.toppager){ts.p.toppager=$.jgrid.jqID(ts.p.id)+"_toppager";grid.topDiv=$("<div id='"+ts.p.toppager+"'></div>")[0];ts.p.toppager="#"+ts.p.toppager;$(grid.topDiv).addClass(getstyle(stylemodule,"toppagerBox",true,"ui-jqgrid-toppager")).width(grid.width).insertBefore(grid.hDiv);setPager(ts.p.toppager,"_t")}if(ts.p.footerrow){grid.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0];hb=$("<div class='ui-jqgrid-hbox"+(dir==="rtl"?"-rtl":"")+"'></div>");$(grid.sDiv).append(hb).width(grid.width).insertAfter(grid.hDiv);$(hb).append(tfoot);grid.footers=$(".ui-jqgrid-ftable",grid.sDiv)[0].rows[0].cells;if(ts.p.rownumbers){grid.footers[0].className=getstyle(stylemodule,"rownumBox",true,"jqgrid-rownum")}if(hg){$(grid.sDiv).hide()}}hb=null;if(ts.p.caption){var tdt=ts.p.datatype;if(ts.p.hidegrid===true){$(".ui-jqgrid-titlebar-close",grid.cDiv).click(function(e){var onHdCl=$.isFunction(ts.p.onHeaderClick),elems=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv",counter,self=this;if(ts.p.toolbar[0]===true){if(ts.p.toolbar[1]==="both"){elems+=", #"+$(grid.ubDiv).attr("id")}elems+=", #"+$(grid.uDiv).attr("id")}counter=$(elems,"#gview_"+$.jgrid.jqID(ts.p.id)).length;if(ts.p.gridstate==="visible"){$(elems,"#gbox_"+$.jgrid.jqID(ts.p.id)).slideUp("fast",function(){counter--;if(counter===0){$("span",self).removeClass(icoo).addClass(icoc);ts.p.gridstate="hidden";if($("#gbox_"+$.jgrid.jqID(ts.p.id)).hasClass("ui-resizable")){$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(ts.p.id)).hide()}$(ts).triggerHandler("jqGridHeaderClick",[ts.p.gridstate,e]);if(onHdCl){if(!hg){ts.p.onHeaderClick.call(ts,ts.p.gridstate,e)}}}})}else{if(ts.p.gridstate==="hidden"){$(elems,"#gbox_"+$.jgrid.jqID(ts.p.id)).slideDown("fast",function(){counter--;if(counter===0){$("span",self).removeClass(icoc).addClass(icoo);if(hg){ts.p.datatype=tdt;populate();hg=false}ts.p.gridstate="visible";if($("#gbox_"+$.jgrid.jqID(ts.p.id)).hasClass("ui-resizable")){$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(ts.p.id)).show()}$(ts).triggerHandler("jqGridHeaderClick",[ts.p.gridstate,e]);if(onHdCl){if(!hg){ts.p.onHeaderClick.call(ts,ts.p.gridstate,e)}}}})}}return false});if(hg){ts.p.datatype="local";$(".ui-jqgrid-titlebar-close",grid.cDiv).trigger("click")}}}else{$(grid.cDiv).hide();if(!ts.p.toppager){$(grid.hDiv).addClass(getstyle(ts.p.styleUI+".common","cornertop",true))}}$(grid.hDiv).after(grid.bDiv).mousemove(function(e){if(grid.resizing){grid.dragMove(e);return false}});$(".ui-jqgrid-labels",grid.hDiv).bind("selectstart",function(){return false});$(document).bind("mouseup.jqGrid"+ts.p.id,function(){if(grid.resizing){grid.dragEnd(true);return false}return true});ts.formatCol=formatCol;ts.sortData=sortData;ts.updatepager=updatepager;ts.refreshIndex=refreshIndex;ts.setHeadCheckBox=setHeadCheckBox;ts.constructTr=constructTr;ts.formatter=function(rowId,cellval,colpos,rwdat,act){return formatter(rowId,cellval,colpos,rwdat,act)};$.extend(grid,{populate:populate,emptyRows:emptyRows,beginReq:beginReq,endReq:endReq});this.grid=grid;ts.addXmlData=function(d){addXmlData(d)};ts.addJSONData=function(d){addJSONData(d)};this.grid.cols=this.rows[0].cells;$(ts).triggerHandler("jqGridInitGrid");if($.isFunction(ts.p.onInitGrid)){ts.p.onInitGrid.call(ts)}populate();ts.p.hiddengrid=false;if(ts.p.responsive){var supportsOrientationChange="onorientationchange" in window,orientationEvent=supportsOrientationChange?"orientationchange":"resize";$(window).on(orientationEvent,function(){$(ts).jqGrid("resizeGrid")})}})};$.jgrid.extend({getGridParam:function(name,module){var $t=this[0],ret;if(!$t||!$t.grid){return}if(module===undefined&&typeof module!=="string"){module="jqGrid"}ret=$t.p;if(module!=="jqGrid"){try{ret=$($t).data(module)}catch(e){ret=$t.p}}if(!name){return ret}return ret[name]!==undefined?ret[name]:null},setGridParam:function(newParams,overwrite){return this.each(function(){if(overwrite==null){overwrite=false}if(this.grid&&typeof newParams==="object"){if(overwrite===true){var params=$.extend({},this.p,newParams);this.p=params}else{$.extend(true,this.p,newParams)}}})},getGridRowById:function(rowid){var row;this.each(function(){try{var i=this.rows.length;while(i--){if(rowid.toString()===this.rows[i].id){row=this.rows[i];break}}}catch(e){row=$(this.grid.bDiv).find("#"+$.jgrid.jqID(rowid))}});return row},getDataIDs:function(){var ids=[],i=0,len,j=0;this.each(function(){len=this.rows.length;if(len&&len>0){while(i<len){if($(this.rows[i]).hasClass("jqgrow")){ids[j]=this.rows[i].id;j++}i++}}});return ids},setSelection:function(selection,onsr,e){return this.each(function(){var $t=this,stat,pt,ner,ia,tpsr,fid,csr,getstyle=$.jgrid.getMethod("getStyleUI"),highlight=getstyle($t.p.styleUI+".common","highlight",true),disabled=getstyle($t.p.styleUI+".common","disabled",true);if(selection===undefined){return}onsr=onsr===false?false:true;pt=$($t).jqGrid("getGridRowById",selection);if(!pt||!pt.className||pt.className.indexOf(disabled)>-1){return}function scrGrid(iR){var ch=$($t.grid.bDiv)[0].clientHeight,st=$($t.grid.bDiv)[0].scrollTop,rpos=$($t.rows[iR]).position().top,rh=$t.rows[iR].clientHeight;if(rpos+rh>=ch+st){$($t.grid.bDiv)[0].scrollTop=rpos-(ch+st)+rh+st}else{if(rpos<ch+st){if(rpos<st){$($t.grid.bDiv)[0].scrollTop=rpos}}}}if($t.p.scrollrows===true){ner=$($t).jqGrid("getGridRowById",selection).rowIndex;if(ner>=0){scrGrid(ner)}}if($t.p.frozenColumns===true){fid=$t.p.id+"_frozen"}if(!$t.p.multiselect){if(pt.className!=="ui-subgrid"){if($t.p.selrow!==pt.id){csr=$($t).jqGrid("getGridRowById",$t.p.selrow);if(csr){$(csr).removeClass(highlight).attr({"aria-selected":"false",tabindex:"-1"})}$(pt).addClass(highlight).attr({"aria-selected":"true",tabindex:"0"});if(fid){$("#"+$.jgrid.jqID($t.p.selrow),"#"+$.jgrid.jqID(fid)).removeClass(highlight);$("#"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid)).addClass(highlight)}stat=true}else{stat=false}$t.p.selrow=pt.id;if(onsr){$($t).triggerHandler("jqGridSelectRow",[pt.id,stat,e]);if($t.p.onSelectRow){$t.p.onSelectRow.call($t,pt.id,stat,e)}}}}else{$t.setHeadCheckBox(false);$t.p.selrow=pt.id;ia=$.inArray($t.p.selrow,$t.p.selarrrow);if(ia===-1){if(pt.className!=="ui-subgrid"){$(pt).addClass(highlight).attr("aria-selected","true")}stat=true;$t.p.selarrrow.push($t.p.selrow)}else{if(pt.className!=="ui-subgrid"){$(pt).removeClass(highlight).attr("aria-selected","false")}stat=false;$t.p.selarrrow.splice(ia,1);tpsr=$t.p.selarrrow[0];$t.p.selrow=(tpsr===undefined)?null:tpsr}$("#jqg_"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID(pt.id))[$t.p.useProp?"prop":"attr"]("checked",stat);if(fid){if(ia===-1){$("#"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid)).addClass(highlight)}else{$("#"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid)).removeClass(highlight)}$("#jqg_"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid))[$t.p.useProp?"prop":"attr"]("checked",stat)}if(onsr){$($t).triggerHandler("jqGridSelectRow",[pt.id,stat,e]);if($t.p.onSelectRow){$t.p.onSelectRow.call($t,pt.id,stat,e)}}}})},resetSelection:function(rowid){return this.each(function(){var t=this,sr,fid,getstyle=$.jgrid.getMethod("getStyleUI"),highlight=getstyle(t.p.styleUI+".common","highlight",true),hover=getstyle(t.p.styleUI+".common","hover",true);if(t.p.frozenColumns===true){fid=t.p.id+"_frozen"}if(rowid!==undefined){sr=rowid===t.p.selrow?t.p.selrow:rowid;$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(sr)).removeClass(highlight).attr("aria-selected","false");if(fid){$("#"+$.jgrid.jqID(sr),"#"+$.jgrid.jqID(fid)).removeClass(highlight)}if(t.p.multiselect){$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(sr),"#"+$.jgrid.jqID(t.p.id))[t.p.useProp?"prop":"attr"]("checked",false);if(fid){$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(sr),"#"+$.jgrid.jqID(fid))[t.p.useProp?"prop":"attr"]("checked",false)}t.setHeadCheckBox(false);var ia=$.inArray($.jgrid.jqID(sr),t.p.selarrrow);if(ia!==-1){t.p.selarrrow.splice(ia,1)}}if(t.p.onUnSelectRow){t.p.onUnSelectRow.call(t,sr)}sr=null}else{if(!t.p.multiselect){if(t.p.selrow){$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(t.p.selrow)).removeClass(highlight).attr("aria-selected","false");if(fid){$("#"+$.jgrid.jqID(t.p.selrow),"#"+$.jgrid.jqID(fid)).removeClass(highlight)}if(t.p.onUnSelectRow){t.p.onUnSelectRow.call(t,t.p.selrow)}t.p.selrow=null}}else{$(t.p.selarrrow).each(function(i,n){$($(t).jqGrid("getGridRowById",n)).removeClass(highlight).attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n))[t.p.useProp?"prop":"attr"]("checked",false);if(fid){$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(fid)).removeClass(highlight);$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(fid))[t.p.useProp?"prop":"attr"]("checked",false)}if(t.p.onUnSelectRow){t.p.onUnSelectRow.call(t,n)}});t.setHeadCheckBox(false);t.p.selarrrow=[];t.p.selrow=null}}if(t.p.cellEdit===true){if(parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0){$("td:eq("+t.p.iCol+")",t.rows[t.p.iRow]).removeClass("edit-cell "+highlight);$(t.rows[t.p.iRow]).removeClass("selected-row "+hover)}}t.p.savedRow=[]})},getRowData:function(rowid,usedata){var res={},resall,getall=false,len,j=0;this.each(function(){var $t=this,nm,ind;if(rowid==null){getall=true;resall=[];len=$t.rows.length-1}else{ind=$($t).jqGrid("getGridRowById",rowid);if(!ind){return res}len=1}if(!(usedata&&usedata===true&&$t.p.data.length>0)){usedata=false}while(j<len){if(getall){ind=$t.rows[j]}if($(ind).hasClass("jqgrow")){if(usedata){res=$t.p.data[$t.p._index[ind.id]]}else{$('td[role="gridcell"]',ind).each(function(i){nm=$t.p.colModel[i].name;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if($t.p.treeGrid===true&&nm===$t.p.ExpandColumn){res[nm]=$.jgrid.htmlDecode($("span:first",this).html())}else{try{res[nm]=$.unformat.call($t,this,{rowId:ind.id,colModel:$t.p.colModel[i]},i)}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html())}}}})}if(getall){resall.push(res);res={}}}j++}});return resall||res},delRowData:function(rowid){var success=false,rowInd,ia,nextRow;this.each(function(){var $t=this;rowInd=$($t).jqGrid("getGridRowById",rowid);if(!rowInd){return false}if($t.p.subGrid){nextRow=$(rowInd).next();if(nextRow.hasClass("ui-subgrid")){nextRow.remove()}}$(rowInd).remove();$t.p.records--;$t.p.reccount--;$t.updatepager(true,false);success=true;if($t.p.multiselect){ia=$.inArray(rowid,$t.p.selarrrow);if(ia!==-1){$t.p.selarrrow.splice(ia,1)}}if($t.p.multiselect&&$t.p.selarrrow.length>0){$t.p.selrow=$t.p.selarrrow[$t.p.selarrrow.length-1]}else{if($t.p.selrow===rowid){$t.p.selrow=null}}if($t.p.datatype==="local"){var id=$.jgrid.stripPref($t.p.idPrefix,rowid),pos=$t.p._index[id];if(pos!==undefined){$t.p.data.splice(pos,1);$t.refreshIndex()}}if($t.p.altRows===true&&success){var cn=$t.p.altclass;$($t.rows).each(function(i){if(i%2===1){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}});return success},setRowData:function(rowid,data,cssp){var nm,success=true,title;this.each(function(){if(!this.grid){return false}var t=this,vl,ind,cp=typeof cssp,lcdata={};ind=$(this).jqGrid("getGridRowById",rowid);if(!ind){return false}if(data){try{$(this.p.colModel).each(function(i){nm=this.name;var dval=$.jgrid.getAccessor(data,nm);if(dval!==undefined){lcdata[nm]=this.formatter&&typeof this.formatter==="string"&&this.formatter==="date"?$.unformat.date.call(t,dval,this):dval;vl=t.formatter(rowid,lcdata[nm],i,data,"edit");title=this.title?{title:$.jgrid.stripHtml(vl)}:{};if(t.p.treeGrid===true&&nm===t.p.ExpandColumn){$("td[role='gridcell']:eq("+i+") > span:first",ind).html(vl).attr(title)}else{$("td[role='gridcell']:eq("+i+")",ind).html(vl).attr(title)}}});if(t.p.datatype==="local"){var id=$.jgrid.stripPref(t.p.idPrefix,rowid),pos=t.p._index[id],key;if(t.p.treeGrid){for(key in t.p.treeReader){if(t.p.treeReader.hasOwnProperty(key)){delete lcdata[t.p.treeReader[key]]}}}if(pos!==undefined){t.p.data[pos]=$.extend(true,t.p.data[pos],lcdata)}lcdata=null}}catch(e){success=false}}if(success){if(cp==="string"){$(ind).addClass(cssp)}else{if(cssp!==null&&cp==="object"){$(ind).css(cssp)}}$(t).triggerHandler("jqGridAfterGridComplete")}});return success},addRowData:function(rowid,rdata,pos,src){if($.inArray(pos,["first","last","before","after"])===-1){pos="last"}var success=false,nm,row,rnc="",msc="",gi,si,ni,sind,i,v,prp="",aradd,cnm,cn,data,cm,id;if(rdata){if($.isArray(rdata)){aradd=true;cnm=rowid}else{rdata=[rdata];aradd=false}this.each(function(){var t=this,datalen=rdata.length;ni=t.p.rownumbers===true?1:0;gi=t.p.multiselect===true?1:0;si=t.p.subGrid===true?1:0;if(!aradd){if(rowid!==undefined){rowid=String(rowid)}else{rowid=$.jgrid.randId();if(t.p.keyName!==false){cnm=t.p.keyName;if(rdata[0][cnm]!==undefined){rowid=rdata[0][cnm]}}}}cn=t.p.altclass;var k=0,cna=$(t).jqGrid("getStyleUI",t.p.styleUI+".base","rowBox",true,"jqgrow ui-row-"+t.p.direction),lcdata={},classes,air=$.isFunction(t.p.afterInsertRow)?true:false;if(ni){rnc=$(t).jqGrid("getStyleUI",t.p.styleUI+".base","rownumBox",false,"jqgrid-rownum")}if(gi){msc=$(t).jqGrid("getStyleUI",t.p.styleUI+".base","multiBox",false,"cbox")}while(k<datalen){data=rdata[k];row=[];classes=cna;if(aradd){try{rowid=data[cnm];if(rowid===undefined){rowid=$.jgrid.randId()}}catch(e){rowid=$.jgrid.randId()}classes+=(t.p.altRows===true?(t.rows.length-1)%2===0?" "+cn:"":"")}id=rowid;rowid=t.p.idPrefix+rowid;if(ni){prp=t.formatCol(0,1,"",null,rowid,true);row[row.length]='<td role="gridcell" '+rnc+" "+prp+">0</td>"}if(gi){v='<input role="checkbox" type="checkbox" id="jqg_'+t.p.id+"_"+rowid+'" '+msc+"/>";prp=t.formatCol(ni,1,"",null,rowid,true);row[row.length]='<td role="gridcell" '+prp+">"+v+"</td>"}if(si){row[row.length]=$(t).jqGrid("addSubGridCell",gi+ni,1)}for(i=gi+si+ni;i<t.p.colModel.length;i++){cm=t.p.colModel[i];nm=cm.name;lcdata[nm]=data[nm];v=t.formatter(rowid,$.jgrid.getAccessor(data,nm),i,data);prp=t.formatCol(i,1,v,data,rowid,lcdata);row[row.length]='<td role="gridcell" '+prp+">"+v+"</td>"}row.unshift(t.constructTr(rowid,false,classes,lcdata,data));row[row.length]="</tr>";if(t.rows.length===0){$("table:first",t.grid.bDiv).append(row.join(""))}else{switch(pos){case"last":$(t.rows[t.rows.length-1]).after(row.join(""));sind=t.rows.length-1;break;case"first":$(t.rows[0]).after(row.join(""));sind=1;break;case"after":sind=$(t).jqGrid("getGridRowById",src);if(sind){if($(t.rows[sind.rowIndex+1]).hasClass("ui-subgrid")){$(t.rows[sind.rowIndex+1]).after(row)}else{$(sind).after(row.join(""))}sind=sind.rowIndex+1}break;case"before":sind=$(t).jqGrid("getGridRowById",src);if(sind){$(sind).before(row.join(""));sind=sind.rowIndex-1}break}}if(t.p.subGrid===true){$(t).jqGrid("addSubGrid",gi+ni,sind)}t.p.records++;t.p.reccount++;$(t).triggerHandler("jqGridAfterInsertRow",[rowid,data,data]);if(air){t.p.afterInsertRow.call(t,rowid,data,data)}k++;if(t.p.datatype==="local"){lcdata[t.p.localReader.id]=id;t.p._index[id]=t.p.data.length;t.p.data.push(lcdata);lcdata={}}}if(t.p.altRows===true&&!aradd){if(pos==="last"){if((t.rows.length-1)%2===0){$(t.rows[t.rows.length-1]).addClass(cn)}}else{$(t.rows).each(function(i){if(i%2===0){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}}t.updatepager(true,true);success=true})}return success},footerData:function(action,data,format){var nm,success=false,res={},title;function isEmpty(obj){var i;for(i in obj){if(obj.hasOwnProperty(i)){return false}}return true}if(action===undefined){action="get"}if(typeof format!=="boolean"){format=true}action=action.toLowerCase();this.each(function(){var t=this,vl;if(!t.grid||!t.p.footerrow){return false}if(action==="set"){if(isEmpty(data)){return false}}success=true;$(this.p.colModel).each(function(i){nm=this.name;if(action==="set"){if(data[nm]!==undefined){vl=format?t.formatter("",data[nm],i,data,"edit"):data[nm];title=this.title?{title:$.jgrid.stripHtml(vl)}:{};$("tr.footrow td:eq("+i+")",t.grid.sDiv).html(vl).attr(title);success=true}}else{if(action==="get"){res[nm]=$("tr.footrow td:eq("+i+")",t.grid.sDiv).html()}}})});return action==="get"?res:success},showHideCol:function(colname,show){return this.each(function(){var $t=this,fndh=false,brd=$.jgrid.cell_width?0:$t.p.cellLayout,cw;if(!$t.grid){return}if(typeof colname==="string"){colname=[colname]}show=show!=="none"?"":"none";var sw=show===""?true:false,gh=$t.p.groupHeader&&($.isArray($t.p.groupHeader)||$.isFunction($t.p.groupHeader));if(gh){$($t).jqGrid("destroyGroupHeader",false)}$(this.p.colModel).each(function(i){if($.inArray(this.name,colname)!==-1&&this.hidden===sw){if($t.p.frozenColumns===true&&this.frozen===true){return true}$("tr[role=row]",$t.grid.hDiv).each(function(){$(this.cells[i]).css("display",show)});$($t.rows).each(function(){if(!$(this).hasClass("jqgroup")){$(this.cells[i]).css("display",show)}});if($t.p.footerrow){$("tr.footrow td:eq("+i+")",$t.grid.sDiv).css("display",show)}cw=parseInt(this.width,10);if(show==="none"){$t.p.tblwidth-=cw+brd}else{$t.p.tblwidth+=cw+brd}this.hidden=!sw;fndh=true;$($t).triggerHandler("jqGridShowHideCol",[sw,this.name,i])}});if(fndh===true){if($t.p.shrinkToFit===true&&!isNaN($t.p.height)){$t.p.tblwidth+=parseInt($t.p.scrollOffset,10)}$($t).jqGrid("setGridWidth",$t.p.shrinkToFit===true?$t.p.tblwidth:$t.p.width)}if(gh){var gHead=$.extend([],$t.p.groupHeader);$t.p.groupHeader=null;for(var k=0;k<gHead.length;k++){$($t).jqGrid("setGroupHeaders",gHead[k])}}})},hideCol:function(colname){return this.each(function(){$(this).jqGrid("showHideCol",colname,"none")})},showCol:function(colname){return this.each(function(){$(this).jqGrid("showHideCol",colname,"")})},remapColumns:function(permutation,updateCells,keepHeader){function resortArray(a){var ac;if(a.length){ac=$.makeArray(a)}else{ac=$.extend({},a)}$.each(permutation,function(i){a[i]=ac[this]})}var ts=this.get(0);function resortRows(parent,clobj){$(">tr"+(clobj||""),parent).each(function(){var row=this;var elems=$.makeArray(row.cells);$.each(permutation,function(){var e=elems[this];if(e){row.appendChild(e)}})})}resortArray(ts.p.colModel);resortArray(ts.p.colNames);resortArray(ts.grid.headers);resortRows($("thead:first",ts.grid.hDiv),keepHeader&&":not(.ui-jqgrid-labels)");if(updateCells){resortRows($("#"+$.jgrid.jqID(ts.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot")}if(ts.p.footerrow){resortRows($("tbody:first",ts.grid.sDiv))}if(ts.p.remapColumns){if(!ts.p.remapColumns.length){ts.p.remapColumns=$.makeArray(permutation)}else{resortArray(ts.p.remapColumns)}}ts.p.lastsort=$.inArray(ts.p.lastsort,permutation);if(ts.p.treeGrid){ts.p.expColInd=$.inArray(ts.p.expColInd,permutation)}$(ts).triggerHandler("jqGridRemapColumns",[permutation,updateCells,keepHeader])},setGridWidth:function(nwidth,shrink){return this.each(function(){if(!this.grid){return}var $t=this,cw,initwidth=0,brd=$.jgrid.cell_width?0:$t.p.cellLayout,lvc,vc=0,hs=false,scw=$t.p.scrollOffset,aw,gw=0,cr;if(typeof shrink!=="boolean"){shrink=$t.p.shrinkToFit}if(isNaN(nwidth)){return}nwidth=parseInt(nwidth,10);$t.grid.width=$t.p.width=nwidth;$("#gbox_"+$.jgrid.jqID($t.p.id)).css("width",nwidth+"px");$("#gview_"+$.jgrid.jqID($t.p.id)).css("width",nwidth+"px");$($t.grid.bDiv).css("width",nwidth+"px");$($t.grid.hDiv).css("width",nwidth+"px");if($t.p.pager){$($t.p.pager).css("width",nwidth+"px")}if($t.p.toppager){$($t.p.toppager).css("width",nwidth+"px")}if($t.p.toolbar[0]===true){$($t.grid.uDiv).css("width",nwidth+"px");if($t.p.toolbar[1]==="both"){$($t.grid.ubDiv).css("width",nwidth+"px")}}if($t.p.footerrow){$($t.grid.sDiv).css("width",nwidth+"px")}if(shrink===false&&$t.p.forceFit===true){$t.p.forceFit=false}if(shrink===true){$.each($t.p.colModel,function(){if(this.hidden===false){cw=this.widthOrg;initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}}});if(vc===0){return}$t.p.tblwidth=initwidth;aw=nwidth-brd*vc-gw;if(!isNaN($t.p.height)){if($($t.grid.bDiv)[0].clientHeight<$($t.grid.bDiv)[0].scrollHeight||$t.rows.length===1){hs=true;aw-=scw}}initwidth=0;var cle=$t.grid.cols.length>0;$.each($t.p.colModel,function(i){if(this.hidden===false&&!this.fixed){cw=this.widthOrg;cw=Math.round(aw*cw/($t.p.tblwidth-brd*vc-gw));if(cw<0){return}this.width=cw;initwidth+=cw;$t.grid.headers[i].width=cw;$t.grid.headers[i].el.style.width=cw+"px";if($t.p.footerrow){$t.grid.footers[i].style.width=cw+"px"}if(cle){$t.grid.cols[i].style.width=cw+"px"}lvc=i}});if(!lvc){return}cr=0;if(hs){if(nwidth-gw-(initwidth+brd*vc)!==scw){cr=nwidth-gw-(initwidth+brd*vc)-scw}}else{if(Math.abs(nwidth-gw-(initwidth+brd*vc))!==1){cr=nwidth-gw-(initwidth+brd*vc)}}$t.p.colModel[lvc].width+=cr;$t.p.tblwidth=initwidth+cr+brd*vc+gw;if($t.p.tblwidth>nwidth){var delta=$t.p.tblwidth-parseInt(nwidth,10);$t.p.tblwidth=nwidth;cw=$t.p.colModel[lvc].width=$t.p.colModel[lvc].width-delta}else{cw=$t.p.colModel[lvc].width}$t.grid.headers[lvc].width=cw;$t.grid.headers[lvc].el.style.width=cw+"px";if(cle){$t.grid.cols[lvc].style.width=cw+"px"}if($t.p.footerrow){$t.grid.footers[lvc].style.width=cw+"px"}}if($t.p.tblwidth){$("table:first",$t.grid.bDiv).css("width",$t.p.tblwidth+"px");$("table:first",$t.grid.hDiv).css("width",$t.p.tblwidth+"px");$t.grid.hDiv.scrollLeft=$t.grid.bDiv.scrollLeft;if($t.p.footerrow){$("table:first",$t.grid.sDiv).css("width",$t.p.tblwidth+"px")}}})},setGridHeight:function(nh){return this.each(function(){var $t=this;if(!$t.grid){return}var bDiv=$($t.grid.bDiv);bDiv.css({height:nh+(isNaN(nh)?"":"px")});if($t.p.frozenColumns===true){$("#"+$.jgrid.jqID($t.p.id)+"_frozen").parent().height(bDiv.height()-16)}$t.p.height=nh;if($t.p.scroll){$t.grid.populateVisible()}})},setCaption:function(newcap){return this.each(function(){var ctop=$(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",true);this.p.caption=newcap;$(".ui-jqgrid-title, .ui-jqgrid-title-rtl",this.grid.cDiv).html(newcap);$(this.grid.cDiv).show();$(this.grid.hDiv).removeClass(ctop)})},setLabel:function(colname,nData,prop,attrp){return this.each(function(){var $t=this,pos=-1;if(!$t.grid){return}if(colname!=null){if(isNaN(colname)){$($t.p.colModel).each(function(i){if(this.name===colname){pos=i;return false}})}else{pos=parseInt(colname,10)}}else{return}if(pos>=0){var thecol=$("tr.ui-jqgrid-labels th:eq("+pos+")",$t.grid.hDiv);if(nData){var ico=$(".s-ico",thecol);$("[id^=jqgh_]",thecol).empty().html(nData).append(ico);$t.p.colNames[pos]=nData}if(prop){if(typeof prop==="string"){$(thecol).addClass(prop)}else{$(thecol).css(prop)}}if(typeof attrp==="object"){$(thecol).attr(attrp)}}})},setCell:function(rowid,colname,nData,cssp,attrp,forceupd){return this.each(function(){var $t=this,pos=-1,v,title;if(!$t.grid){return}if(isNaN(colname)){$($t.p.colModel).each(function(i){if(this.name===colname){pos=i;return false}})}else{pos=parseInt(colname,10)}if(pos>=0){var ind=$($t).jqGrid("getGridRowById",rowid);if(ind){var tcell=$("td:eq("+pos+")",ind),cl=0,rawdat=[];if(nData!==""||forceupd===true){if(ind.cells!==undefined){while(cl<ind.cells.length){rawdat.push(ind.cells[cl].innerHTML);cl++}}v=$t.formatter(rowid,nData,pos,rawdat,"edit");title=$t.p.colModel[pos].title?{title:$.jgrid.stripHtml(v)}:{};if($t.p.treeGrid&&$(".tree-wrap",$(tcell)).length>0){$("span",$(tcell)).html(v).attr(title)}else{$(tcell).html(v).attr(title)}if($t.p.datatype==="local"){var cm=$t.p.colModel[pos],index;nData=cm.formatter&&typeof cm.formatter==="string"&&cm.formatter==="date"?$.unformat.date.call($t,nData,cm):nData;index=$t.p._index[$.jgrid.stripPref($t.p.idPrefix,rowid)];if(index!==undefined){$t.p.data[index][cm.name]=nData}}}if(typeof cssp==="string"){$(tcell).addClass(cssp)}else{if(cssp){$(tcell).css(cssp)}}if(typeof attrp==="object"){$(tcell).attr(attrp)}}}})},getCell:function(rowid,col){var ret=false;this.each(function(){var $t=this,pos=-1;if(!$t.grid){return}if(isNaN(col)){$($t.p.colModel).each(function(i){if(this.name===col){pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ind=$($t).jqGrid("getGridRowById",rowid);if(ind){try{ret=$.unformat.call($t,$("td:eq("+pos+")",ind),{rowId:ind.id,colModel:$t.p.colModel[pos]},pos)}catch(e){ret=$.jgrid.htmlDecode($("td:eq("+pos+")",ind).html())}}}});return ret},getCol:function(col,obj,mathopr){var ret=[],val,sum=0,min,max,v;obj=typeof obj!=="boolean"?false:obj;if(mathopr===undefined){mathopr=false}this.each(function(){var $t=this,pos=-1;if(!$t.grid){return}if(isNaN(col)){$($t.p.colModel).each(function(i){if(this.name===col){pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ln=$t.rows.length,i=0,dlen=0;if(ln&&ln>0){while(i<ln){if($($t.rows[i]).hasClass("jqgrow")){try{val=$.unformat.call($t,$($t.rows[i].cells[pos]),{rowId:$t.rows[i].id,colModel:$t.p.colModel[pos]},pos)}catch(e){val=$.jgrid.htmlDecode($t.rows[i].cells[pos].innerHTML)}if(mathopr){v=parseFloat(val);if(!isNaN(v)){sum+=v;if(max===undefined){max=min=v}min=Math.min(min,v);max=Math.max(max,v);dlen++}}else{if(obj){ret.push({id:$t.rows[i].id,value:val})}else{ret.push(val)}}}i++}if(mathopr){switch(mathopr.toLowerCase()){case"sum":ret=sum;break;case"avg":ret=sum/dlen;break;case"count":ret=(ln-1);break;case"min":ret=min;break;case"max":ret=max;break}}}}});return ret},clearGridData:function(clearfooter){return this.each(function(){var $t=this;if(!$t.grid){return}if(typeof clearfooter!=="boolean"){clearfooter=false}if($t.p.deepempty){$("#"+$.jgrid.jqID($t.p.id)+" tbody:first tr:gt(0)").remove()}else{var trf=$("#"+$.jgrid.jqID($t.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID($t.p.id)+" tbody:first").empty().append(trf)}if($t.p.footerrow&&clearfooter){$(".ui-jqgrid-ftable td",$t.grid.sDiv).html("&#160;")}$t.p.selrow=null;$t.p.selarrrow=[];$t.p.savedRow=[];$t.p.records=0;$t.p.page=1;$t.p.lastpage=0;$t.p.reccount=0;$t.p.data=[];$t.p._index={};$t.updatepager(true,false)})},getInd:function(rowid,rc){var ret=false,rw;this.each(function(){rw=$(this).jqGrid("getGridRowById",rowid);if(rw){ret=rc===true?rw:rw.rowIndex}});return ret},bindKeys:function(settings){var o=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:true},settings||{});return this.each(function(){var $t=this;if(!$("body").is("[role]")){$("body").attr("role","application")}$t.p.scrollrows=o.scrollingRows;$($t).keydown(function(event){var target=$($t).find("tr[tabindex=0]")[0],id,r,mind,expanded=$t.p.treeReader.expanded_field;if(target){mind=$t.p._index[$.jgrid.stripPref($t.p.idPrefix,target.id)];if(event.keyCode===37||event.keyCode===38||event.keyCode===39||event.keyCode===40){if(event.keyCode===38){r=target.previousSibling;id="";if(r){if($(r).is(":hidden")){while(r){r=r.previousSibling;if(!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){id=r.id;break}}}else{id=r.id}}$($t).jqGrid("setSelection",id,true,event);event.preventDefault()}if(event.keyCode===40){r=target.nextSibling;id="";if(r){if($(r).is(":hidden")){while(r){r=r.nextSibling;if(!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){id=r.id;break}}}else{id=r.id}}$($t).jqGrid("setSelection",id,true,event);event.preventDefault()}if(event.keyCode===37){if($t.p.treeGrid&&$t.p.data[mind][expanded]){$(target).find("div.treeclick").trigger("click")}$($t).triggerHandler("jqGridKeyLeft",[$t.p.selrow]);if($.isFunction(o.onLeftKey)){o.onLeftKey.call($t,$t.p.selrow)}}if(event.keyCode===39){if($t.p.treeGrid&&!$t.p.data[mind][expanded]){$(target).find("div.treeclick").trigger("click")}$($t).triggerHandler("jqGridKeyRight",[$t.p.selrow]);if($.isFunction(o.onRightKey)){o.onRightKey.call($t,$t.p.selrow)}}}else{if(event.keyCode===13){$($t).triggerHandler("jqGridKeyEnter",[$t.p.selrow]);if($.isFunction(o.onEnter)){o.onEnter.call($t,$t.p.selrow)}}else{if(event.keyCode===32){$($t).triggerHandler("jqGridKeySpace",[$t.p.selrow]);if($.isFunction(o.onSpace)){o.onSpace.call($t,$t.p.selrow)}}}}}})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(rowid){var ret=false,ind;this.each(function(){if(rowid!==undefined){ind=this.p._index[$.jgrid.stripPref(this.p.idPrefix,rowid)];if(ind>=0){ret=this.p.data[ind]}}});return ret},progressBar:function(p){p=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},p||{});return this.each(function(){var sh=p.method==="show"?true:false,loadDiv=$("#load_"+$.jgrid.jqID(this.p.id)),offsetParent,top,scrollTop=$(window).scrollTop();if(p.htmlcontent!==""){loadDiv.html(p.htmlcontent)}switch(p.loadtype){case"disable":break;case"enable":loadDiv.toggle(sh);break;case"block":$("#lui_"+$.jgrid.jqID(this.p.id)).toggle(sh);loadDiv.toggle(sh);break}if(loadDiv.is(":visible")){offsetParent=loadDiv.offsetParent();loadDiv.css("top","");if(loadDiv.offset().top<scrollTop){top=Math.min(10+scrollTop-offsetParent.offset().top,offsetParent.height()-loadDiv.height());loadDiv.css("top",top+"px")}}})},getColProp:function(colname){var ret={},$t=this[0];if(!$t.grid){return false}var cM=$t.p.colModel,i;for(i=0;i<cM.length;i++){if(cM[i].name===colname){ret=cM[i];break}}return ret},setColProp:function(colname,obj){return this.each(function(){if(this.grid){if(obj){var cM=this.p.colModel,i;for(i=0;i<cM.length;i++){if(cM[i].name===colname){$.extend(true,this.p.colModel[i],obj);break}}}}})},sortGrid:function(colname,reload,sor){return this.each(function(){var $t=this,idx=-1,i,sobj=false;if(!$t.grid){return}if(!colname){colname=$t.p.sortname}for(i=0;i<$t.p.colModel.length;i++){if($t.p.colModel[i].index===colname||$t.p.colModel[i].name===colname){idx=i;if($t.p.frozenColumns===true&&$t.p.colModel[i].frozen===true){sobj=$t.grid.fhDiv.find("#"+$t.p.id+"_"+colname)}break}}if(idx!==-1){var sort=$t.p.colModel[idx].sortable;if(!sobj){sobj=$t.grid.headers[idx].el}if(typeof sort!=="boolean"){sort=true}if(typeof reload!=="boolean"){reload=false}if(sort){$t.sortData("jqgh_"+$t.p.id+"_"+colname,idx,reload,sor,sobj)}}})},setGridState:function(state){return this.each(function(){if(!this.grid){return}var $t=this,open=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",true),close=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",true);if(state==="hidden"){$(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID($t.p.id)).slideUp("fast");if($t.p.pager){$($t.p.pager).slideUp("fast")}if($t.p.toppager){$($t.p.toppager).slideUp("fast")}if($t.p.toolbar[0]===true){if($t.p.toolbar[1]==="both"){$($t.grid.ubDiv).slideUp("fast")}$($t.grid.uDiv).slideUp("fast")}if($t.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID($t.p.id)).slideUp("fast")}$(".ui-jqgrid-headlink",$t.grid.cDiv).removeClass(open).addClass(close);$t.p.gridstate="hidden"}else{if(state==="visible"){$(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID($t.p.id)).slideDown("fast");if($t.p.pager){$($t.p.pager).slideDown("fast")}if($t.p.toppager){$($t.p.toppager).slideDown("fast")}if($t.p.toolbar[0]===true){if($t.p.toolbar[1]==="both"){$($t.grid.ubDiv).slideDown("fast")}$($t.grid.uDiv).slideDown("fast")}if($t.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID($t.p.id)).slideDown("fast")}$(".ui-jqgrid-headlink",$t.grid.cDiv).removeClass(close).addClass(open);$t.p.gridstate="visible"}}})},setFrozenColumns:function(){return this.each(function(){if(!this.grid){return}var $t=this,cm=$t.p.colModel,i=0,len=cm.length,maxfrozen=-1,frozen=false,hd=$($t).jqGrid("getStyleUI",$t.p.styleUI+".base","headerDiv",true,"ui-jqgrid-hdiv"),hover=$($t).jqGrid("getStyleUI",$t.p.styleUI+".common","hover",true);if($t.p.subGrid===true||$t.p.treeGrid===true||$t.p.cellEdit===true||$t.p.sortable||$t.p.scroll){return}if($t.p.rownumbers){i++}if($t.p.multiselect){i++}while(i<len){if(cm[i].frozen===true){frozen=true;maxfrozen=i}else{break}i++}if(maxfrozen>=0&&frozen){var top=$t.p.caption?$($t.grid.cDiv).outerHeight():0,hth=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID($t.p.id)).height();if($t.p.toppager){top=top+$($t.grid.topDiv).outerHeight()}if($t.p.toolbar[0]===true){if($t.p.toolbar[1]!=="bottom"){top=top+$($t.grid.uDiv).outerHeight()}}$t.grid.fhDiv=$('<div style="position:absolute;'+($t.p.direction==="rtl"?"right:0;":"left:0;")+"top:"+top+"px;height:"+hth+'px;" class="frozen-div '+hd+'"></div>');$t.grid.fbDiv=$('<div style="position:absolute;'+($t.p.direction==="rtl"?"right:0;":"left:0;")+"top:"+(parseInt(top,10)+parseInt(hth,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');$("#gview_"+$.jgrid.jqID($t.p.id)).append($t.grid.fhDiv);var htbl=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID($t.p.id)).clone(true);if($t.p.groupHeader){$("tr.jqg-first-row-header, tr.jqg-third-row-header",htbl).each(function(){$("th:gt("+maxfrozen+")",this).remove()});var swapfroz=-1,fdel=-1,cs,rs;$("tr.jqg-second-row-header th",htbl).each(function(){cs=parseInt($(this).attr("colspan"),10);rs=parseInt($(this).attr("rowspan"),10);if(rs){swapfroz++;fdel++}if(cs){swapfroz=swapfroz+cs;fdel++}if(swapfroz===maxfrozen){fdel=maxfrozen;return false}});if(swapfroz!==maxfrozen){fdel=maxfrozen}$("tr.jqg-second-row-header",htbl).each(function(){$("th:gt("+fdel+")",this).remove()})}else{$("tr",htbl).each(function(){$("th:gt("+maxfrozen+")",this).remove()})}$(htbl).width(1);if(!$.jgrid.msie){$(htbl).css("height","100%")}$($t.grid.fhDiv).append(htbl).mousemove(function(e){if($t.grid.resizing){$t.grid.dragMove(e);return false}});if($t.p.footerrow){var hbd=$(".ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID($t.p.id)).height();$t.grid.fsDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(top,10)+parseInt(hth,10)+parseInt(hbd,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>');$("#gview_"+$.jgrid.jqID($t.p.id)).append($t.grid.fsDiv);var ftbl=$(".ui-jqgrid-ftable","#gview_"+$.jgrid.jqID($t.p.id)).clone(true);$("tr",ftbl).each(function(){$("td:gt("+maxfrozen+")",this).remove()});$(ftbl).width(1);$($t.grid.fsDiv).append(ftbl)}$($t).bind("jqGridResizeStop.setFrozenColumns",function(e,w,index){var rhth=$(".ui-jqgrid-htable",$t.grid.fhDiv);$("th:eq("+index+")",rhth).width(w);var btd=$(".ui-jqgrid-btable",$t.grid.fbDiv);$("tr:first td:eq("+index+")",btd).width(w);if($t.p.footerrow){var ftd=$(".ui-jqgrid-ftable",$t.grid.fsDiv);$("tr:first td:eq("+index+")",ftd).width(w)}});$("#gview_"+$.jgrid.jqID($t.p.id)).append($t.grid.fbDiv);$($t.grid.fbDiv).bind("mousewheel DOMMouseScroll",function(e){var st=$($t.grid.bDiv).scrollTop();if(e.originalEvent.wheelDelta>0||e.originalEvent.detail<0){$($t.grid.bDiv).scrollTop(st-25)}else{$($t.grid.bDiv).scrollTop(st+25)}e.preventDefault()});if($t.p.hoverrows===true){$("#"+$.jgrid.jqID($t.p.id)).unbind("mouseover").unbind("mouseout")}$($t).bind("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID($t.p.id)+"_frozen").remove();$($t.grid.fbDiv).height($($t.grid.bDiv).height()-16);var btbl=$("#"+$.jgrid.jqID($t.p.id)).clone(true);$("tr[role=row]",btbl).each(function(){$("td[role=gridcell]:gt("+maxfrozen+")",this).remove()});$(btbl).width(1).attr("id",$t.p.id+"_frozen");$($t.grid.fbDiv).append(btbl);if($t.p.hoverrows===true){$("tr.jqgrow",btbl).hover(function(){$(this).addClass(hover);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)).addClass(hover)},function(){$(this).removeClass(hover);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)).removeClass(hover)});$("tr.jqgrow","#"+$.jgrid.jqID($t.p.id)).hover(function(){$(this).addClass(hover);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)+"_frozen").addClass(hover)},function(){$(this).removeClass(hover);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)+"_frozen").removeClass(hover)})}btbl=null});if(!$t.grid.hDiv.loading){$($t).triggerHandler("jqGridAfterGridComplete")}$t.p.frozenColumns=true}})},destroyFrozenColumns:function(){return this.each(function(){if(!this.grid){return}if(this.p.frozenColumns===true){var $t=this,hover=$($t).jqGrid("getStyleUI",$t.p.styleUI+".common","hover",true);$($t.grid.fhDiv).remove();$($t.grid.fbDiv).remove();$t.grid.fhDiv=null;$t.grid.fbDiv=null;if($t.p.footerrow){$($t.grid.fsDiv).remove();$t.grid.fsDiv=null}$(this).unbind(".setFrozenColumns");if($t.p.hoverrows===true){var ptr;$("#"+$.jgrid.jqID($t.p.id)).bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="ui-subgrid"){$(ptr).addClass(hover)}}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass(hover)})}this.p.frozenColumns=false}})},resizeColumn:function(iCol,newWidth){return this.each(function(){var grid=this.grid,p=this.p,cm=p.colModel,i,cmLen=cm.length,diff,diffnv;if(typeof iCol==="string"){for(i=0;i<cmLen;i++){if(cm[i].name===iCol){iCol=i;break}}}else{iCol=parseInt(iCol,10)}newWidth=parseInt(newWidth,10);if(typeof iCol!=="number"||iCol<0||iCol>cm.length-1||typeof newWidth!=="number"){return}if(newWidth<p.minColWidth){return}if(p.forceFit){p.nv=0;for(i=iCol+1;i<cmLen;i++){if(cm[i].hidden!==true){p.nv=i-iCol;break}}}grid.resizing={idx:iCol};diff=newWidth-grid.headers[iCol].width;if(p.forceFit){diffnv=grid.headers[iCol+p.nv].width-diff;if(diffnv<p.minColWidth){return}grid.headers[iCol+p.nv].newWidth=grid.headers[iCol+p.nv].width-diff}grid.newWidth=p.tblwidth+diff;grid.headers[iCol].newWidth=newWidth;grid.dragEnd(false)})},getStyleUI:function(styleui,classui,notclasstag,gridclass){try{var ret="",stylemod=styleui.split("."),q="";if(!notclasstag){ret="class=";q='"'}if(gridclass==null){gridclass=""}switch(stylemod.length){case 1:ret+=q+gridclass+" "+$.jgrid.styleUI[stylemod[0]][classui]+q;break;case 2:ret+=q+gridclass+" "+$.jgrid.styleUI[stylemod[0]][stylemod[1]][classui]+q}}catch(cls){ret=""}return $.trim(ret)},resizeGrid:function(timeout){return this.each(function(){var $t=this;if(timeout===undefined){timeout=500}setTimeout(function(){try{var winwidth=$(window).width(),parentwidth=$("#gbox_"+$.jgrid.jqID($t.p.id)).parent().width(),ww=$t.p.width;if((winwidth-parentwidth)>3){ww=parentwidth}else{ww=winwidth}$("#"+$.jgrid.jqID($t.p.id)).jqGrid("setGridWidth",ww)}catch(e){}},timeout)})}});$.jgrid.extend({editCell:function(iRow,iCol,ed){return this.each(function(){var $t=this,nm,tmp,cc,cm,highlight=$(this).jqGrid("getStyleUI",$t.p.styleUI+".common","highlight",true),hover=$(this).jqGrid("getStyleUI",$t.p.styleUI+".common","hover",true),inpclass=$(this).jqGrid("getStyleUI",$t.p.styleUI+".celledit","inputClass",true);if(!$t.grid||$t.p.cellEdit!==true){return}iCol=parseInt(iCol,10);$t.p.selrow=$t.rows[iRow].id;if(!$t.p.knv){$($t).jqGrid("GridNav")}if($t.p.savedRow.length>0){if(ed===true){if(iRow==$t.p.iRow&&iCol==$t.p.iCol){return}}$($t).jqGrid("saveCell",$t.p.savedRow[0].id,$t.p.savedRow[0].ic)}else{window.setTimeout(function(){$("#"+$.jgrid.jqID($t.p.knv)).attr("tabindex","-1").focus()},1)}cm=$t.p.colModel[iCol];nm=cm.name;if(nm==="subgrid"||nm==="cb"||nm==="rn"){return}cc=$("td:eq("+iCol+")",$t.rows[iRow]);if(cm.editable===true&&ed===true&&!cc.hasClass("not-editable-cell")&&(!$.isFunction($t.p.isCellEditable)||$t.p.isCellEditable.call($t,nm,iRow,iCol))){if(parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0){$($t.rows[$t.p.iRow]).removeClass("selected-row "+hover).find("td:eq("+$t.p.iCol+")").removeClass("edit-cell "+highlight)}$(cc).addClass("edit-cell "+highlight);$($t.rows[iRow]).addClass("selected-row "+hover);try{tmp=$.unformat.call($t,cc,{rowId:$t.rows[iRow].id,colModel:cm},iCol)}catch(_){tmp=(cm.edittype&&cm.edittype==="textarea")?$(cc).text():$(cc).html()}if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp)}if(!cm.edittype){cm.edittype="text"}$t.p.savedRow.push({id:iRow,ic:iCol,name:nm,v:tmp});if(tmp==="&nbsp;"||tmp==="&#160;"||(tmp.length===1&&tmp.charCodeAt(0)===160)){tmp=""}if($.isFunction($t.p.formatCell)){var tmp2=$t.p.formatCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol);if(tmp2!==undefined){tmp=tmp2}}$($t).triggerHandler("jqGridBeforeEditCell",[$t.rows[iRow].id,nm,tmp,iRow,iCol]);if($.isFunction($t.p.beforeEditCell)){$t.p.beforeEditCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol)}var opt=$.extend({},cm.editoptions||{},{id:iRow+"_"+nm,name:nm,rowId:$t.rows[iRow].id,oper:"edit"});var elc=$.jgrid.createEl.call($t,cm.edittype,opt,tmp,true,$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));if($.inArray(cm.edittype,["text","textarea","password","select"])>-1){$(elc).addClass(inpclass)}$(cc).html("").append(elc).attr("tabindex","0");$.jgrid.bindEv.call($t,elc,opt);window.setTimeout(function(){$(elc).focus()},1);$("input, select, textarea",cc).bind("keydown",function(e){if(e.keyCode===27){if($("input.hasDatepicker",cc).length>0){if($(".ui-datepicker").is(":hidden")){$($t).jqGrid("restoreCell",iRow,iCol)}else{$("input.hasDatepicker",cc).datepicker("hide")}}else{$($t).jqGrid("restoreCell",iRow,iCol)}}if(e.keyCode===13&&!e.shiftKey){$($t).jqGrid("saveCell",iRow,iCol);return false}if(e.keyCode===9){if(!$t.grid.hDiv.loading){if(e.shiftKey){$($t).jqGrid("prevCell",iRow,iCol)}else{$($t).jqGrid("nextCell",iRow,iCol)}}else{return false}}e.stopPropagation()});$($t).triggerHandler("jqGridAfterEditCell",[$t.rows[iRow].id,nm,tmp,iRow,iCol]);if($.isFunction($t.p.afterEditCell)){$t.p.afterEditCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol)}}else{if(parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0){$($t.rows[$t.p.iRow]).removeClass("selected-row "+hover).find("td:eq("+$t.p.iCol+")").removeClass("edit-cell "+highlight)}cc.addClass("edit-cell "+highlight);$($t.rows[iRow]).addClass("selected-row "+hover);tmp=cc.html().replace(/\&#160\;/ig,"");$($t).triggerHandler("jqGridSelectCell",[$t.rows[iRow].id,nm,tmp,iRow,iCol]);if($.isFunction($t.p.onSelectCell)){$t.p.onSelectCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol)}}$t.p.iCol=iCol;$t.p.iRow=iRow})},saveCell:function(iRow,iCol){return this.each(function(){var $t=this,fr,errors=$.jgrid.getRegional(this,"errors"),edit=$.jgrid.getRegional(this,"edit");if(!$t.grid||$t.p.cellEdit!==true){return}if($t.p.savedRow.length>=1){fr=0}else{fr=null}if(fr!==null){var cc=$("td:eq("+iCol+")",$t.rows[iRow]),v,v2,cm=$t.p.colModel[iCol],nm=cm.name,nmjq=$.jgrid.jqID(nm),p=$(cc).offset();switch(cm.edittype){case"select":if(!cm.editoptions.multiple){v=$("#"+iRow+"_"+nmjq+" option:selected",$t.rows[iRow]).val();v2=$("#"+iRow+"_"+nmjq+" option:selected",$t.rows[iRow]).text()}else{var sel=$("#"+iRow+"_"+nmjq,$t.rows[iRow]),selectedText=[];v=$(sel).val();if(v){v.join(",")}else{v=""}$("option:selected",sel).each(function(i,selected){selectedText[i]=$(selected).text()});v2=selectedText.join(",")}if(cm.formatter){v2=v}break;case"checkbox":var cbv=["Yes","No"];if(cm.editoptions){cbv=cm.editoptions.value.split(":")}v=$("#"+iRow+"_"+nmjq,$t.rows[iRow]).is(":checked")?cbv[0]:cbv[1];v2=v;break;case"password":case"text":case"textarea":case"button":v=$("#"+iRow+"_"+nmjq,$t.rows[iRow]).val();v2=v;break;case"custom":try{if(cm.editoptions&&$.isFunction(cm.editoptions.custom_value)){v=cm.editoptions.custom_value.call($t,$(".customelement",cc),"get");if(v===undefined){throw"e2"}else{v2=v}}else{throw"e1"}}catch(e){if(e==="e1"){$.jgrid.info_dialog(errors.errcap,"function 'custom_value' "+edit.msg.nodefined,edit.bClose,{styleUI:$t.p.styleUI})}else{if(e==="e2"){$.jgrid.info_dialog(errors.errcap,"function 'custom_value' "+edit.msg.novalue,edit.bClose,{styleUI:$t.p.styleUI})}else{$.jgrid.info_dialog(errors.errcap,e.message,edit.bClose,{styleUI:$t.p.styleUI})}}}break}if(v2!==$t.p.savedRow[fr].v){var vvv=$($t).triggerHandler("jqGridBeforeSaveCell",[$t.rows[iRow].id,nm,v,iRow,iCol]);if(vvv){v=vvv;v2=vvv}if($.isFunction($t.p.beforeSaveCell)){var vv=$t.p.beforeSaveCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol);if(vv){v=vv;v2=vv}}var cv=$.jgrid.checkValues.call($t,v,iCol),nuem=false;if(cv[0]===true){var addpost=$($t).triggerHandler("jqGridBeforeSubmitCell",[$t.rows[iRow].id,nm,v,iRow,iCol])||{};if($.isFunction($t.p.beforeSubmitCell)){addpost=$t.p.beforeSubmitCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol);if(!addpost){addpost={}}}if($("input.hasDatepicker",cc).length>0){$("input.hasDatepicker",cc).datepicker("hide")}if($t.p.cellsubmit==="remote"){if($t.p.cellurl){var postdata={};if($t.p.autoencode){v=$.jgrid.htmlEncode(v)}if(cm.editoptions&&cm.editoptions.NullIfEmpty&&v===""){v="null";nuem=true}postdata[nm]=v;var idname,oper,opers;opers=$t.p.prmNames;idname=opers.id;oper=opers.oper;postdata[idname]=$.jgrid.stripPref($t.p.idPrefix,$t.rows[iRow].id);postdata[oper]=opers.editoper;postdata=$.extend(addpost,postdata);$($t).jqGrid("progressBar",{method:"show",loadtype:$t.p.loadui,htmlcontent:$.jgrid.getRegional($t,"defaults.savetext")});$t.grid.hDiv.loading=true;$.ajax($.extend({url:$t.p.cellurl,data:$.isFunction($t.p.serializeCellData)?$t.p.serializeCellData.call($t,postdata,nm):postdata,type:"POST",complete:function(result,stat){$($t).jqGrid("progressBar",{method:"hide",loadtype:$t.p.loadui});$t.grid.hDiv.loading=false;if(stat==="success"){var ret=$($t).triggerHandler("jqGridAfterSubmitCell",[$t,result,postdata.id,nm,v,iRow,iCol])||[true,""];if(ret[0]===true&&$.isFunction($t.p.afterSubmitCell)){ret=$t.p.afterSubmitCell.call($t,result,postdata.id,nm,v,iRow,iCol)}if(ret[0]===true){if(nuem){v=""}$(cc).empty();$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,v2,false,false,true);$(cc).addClass("dirty-cell");$($t.rows[iRow]).addClass("edited");$($t).triggerHandler("jqGridAfterSaveCell",[$t.rows[iRow].id,nm,v,iRow,iCol]);if($.isFunction($t.p.afterSaveCell)){$t.p.afterSaveCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol)}$t.p.savedRow.splice(0,1)}else{$.jgrid.info_dialog(errors.errcap,ret[1],edit.bClose,{styleUI:$t.p.styleUI});if($t.p.restoreCellonFail){$($t).jqGrid("restoreCell",iRow,iCol)}}}},error:function(res,stat,err){$("#lui_"+$.jgrid.jqID($t.p.id)).hide();$t.grid.hDiv.loading=false;$($t).triggerHandler("jqGridErrorCell",[res,stat,err]);if($.isFunction($t.p.errorCell)){$t.p.errorCell.call($t,res,stat,err)}else{$.jgrid.info_dialog(errors.errcap,res.status+" : "+res.statusText+"<br/>"+stat,edit.bClose,{styleUI:$t.p.styleUI})}if($t.p.restoreCellonFail){$($t).jqGrid("restoreCell",iRow,iCol)}}},$.jgrid.ajaxOptions,$t.p.ajaxCellOptions||{}))}else{try{$.jgrid.info_dialog(errors.errcap,errors.nourl,edit.bClose,{styleUI:$t.p.styleUI});if($t.p.restoreCellonFail){$($t).jqGrid("restoreCell",iRow,iCol)}}catch(e){}}}if($t.p.cellsubmit==="clientArray"){$(cc).empty();$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,v2,false,false,true);$(cc).addClass("dirty-cell");$($t.rows[iRow]).addClass("edited");$($t).triggerHandler("jqGridAfterSaveCell",[$t.rows[iRow].id,nm,v,iRow,iCol]);if($.isFunction($t.p.afterSaveCell)){$t.p.afterSaveCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol)}$t.p.savedRow.splice(0,1)}}else{try{window.setTimeout(function(){$.jgrid.info_dialog(errors.errcap,v+" "+cv[1],edit.bClose,{styleUI:$t.p.styleUI,top:p.top+40,left:p.left})},100);$($t).jqGrid("restoreCell",iRow,iCol)}catch(e){}}}else{$($t).jqGrid("restoreCell",iRow,iCol)}}window.setTimeout(function(){$("#"+$.jgrid.jqID($t.p.knv)).attr("tabindex","-1").focus()},0)})},restoreCell:function(iRow,iCol){return this.each(function(){var $t=this,fr;if(!$t.grid||$t.p.cellEdit!==true){return}if($t.p.savedRow.length>=1){fr=0}else{fr=null}if(fr!==null){var cc=$("td:eq("+iCol+")",$t.rows[iRow]);if($.isFunction($.fn.datepicker)){try{$("input.hasDatepicker",cc).datepicker("hide")}catch(e){}}$(cc).empty().attr("tabindex","-1");$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,$t.p.savedRow[fr].v,false,false,true);$($t).triggerHandler("jqGridAfterRestoreCell",[$t.rows[iRow].id,$t.p.savedRow[fr].v,iRow,iCol]);if($.isFunction($t.p.afterRestoreCell)){$t.p.afterRestoreCell.call($t,$t.rows[iRow].id,$t.p.savedRow[fr].v,iRow,iCol)}$t.p.savedRow.splice(0,1)}window.setTimeout(function(){$("#"+$t.p.knv).attr("tabindex","-1").focus()},0)})},nextCell:function(iRow,iCol){return this.each(function(){var $t=this,nCol=false,i;if(!$t.grid||$t.p.cellEdit!==true){return}for(i=iCol+1;i<$t.p.colModel.length;i++){if($t.p.colModel[i].editable===true&&(!$.isFunction($t.p.isCellEditable)||$t.p.isCellEditable.call($t,$t.p.colModel[i].name,iRow,i))){nCol=i;break}}if(nCol!==false){$($t).jqGrid("editCell",iRow,nCol,true)}else{if($t.p.savedRow.length>0){$($t).jqGrid("saveCell",iRow,iCol)}}})},prevCell:function(iRow,iCol){return this.each(function(){var $t=this,nCol=false,i;if(!$t.grid||$t.p.cellEdit!==true){return}for(i=iCol-1;i>=0;i--){if($t.p.colModel[i].editable===true&&(!$.isFunction($t.p.isCellEditable)||$t.p.isCellEditable.call($t,$t.p.colModel[i].name,iRow,i))){nCol=i;break}}if(nCol!==false){$($t).jqGrid("editCell",iRow,nCol,true)}else{if($t.p.savedRow.length>0){$($t).jqGrid("saveCell",iRow,iCol)}}})},GridNav:function(){return this.each(function(){var $t=this;if(!$t.grid||$t.p.cellEdit!==true){return}$t.p.knv=$t.p.id+"_kn";var selection=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+$t.p.knv+"'></div></div>"),i,kdir;function scrollGrid(iR,iC,tp){if(tp.substr(0,1)==="v"){var ch=$($t.grid.bDiv)[0].clientHeight,st=$($t.grid.bDiv)[0].scrollTop,nROT=$t.rows[iR].offsetTop+$t.rows[iR].clientHeight,pROT=$t.rows[iR].offsetTop;if(tp==="vd"){if(nROT>=ch){$($t.grid.bDiv)[0].scrollTop=$($t.grid.bDiv)[0].scrollTop+$t.rows[iR].clientHeight}}if(tp==="vu"){if(pROT<st){$($t.grid.bDiv)[0].scrollTop=$($t.grid.bDiv)[0].scrollTop-$t.rows[iR].clientHeight}}}if(tp==="h"){var cw=$($t.grid.bDiv)[0].clientWidth,sl=$($t.grid.bDiv)[0].scrollLeft,nCOL=$t.rows[iR].cells[iC].offsetLeft+$t.rows[iR].cells[iC].clientWidth,pCOL=$t.rows[iR].cells[iC].offsetLeft;if(nCOL>=cw+parseInt(sl,10)){$($t.grid.bDiv)[0].scrollLeft=$($t.grid.bDiv)[0].scrollLeft+$t.rows[iR].cells[iC].clientWidth}else{if(pCOL<sl){$($t.grid.bDiv)[0].scrollLeft=$($t.grid.bDiv)[0].scrollLeft-$t.rows[iR].cells[iC].clientWidth}}}}function findNextVisible(iC,act){var ind,i;if(act==="lft"){ind=iC+1;for(i=iC;i>=0;i--){if($t.p.colModel[i].hidden!==true){ind=i;break}}}if(act==="rgt"){ind=iC-1;for(i=iC;i<$t.p.colModel.length;i++){if($t.p.colModel[i].hidden!==true){ind=i;break}}}return ind}$(selection).insertBefore($t.grid.cDiv);$("#"+$t.p.knv).focus().keydown(function(e){kdir=e.keyCode;if($t.p.direction==="rtl"){if(kdir===37){kdir=39}else{if(kdir===39){kdir=37}}}switch(kdir){case 38:if($t.p.iRow-1>0){scrollGrid($t.p.iRow-1,$t.p.iCol,"vu");$($t).jqGrid("editCell",$t.p.iRow-1,$t.p.iCol,false)}break;case 40:if($t.p.iRow+1<=$t.rows.length-1){scrollGrid($t.p.iRow+1,$t.p.iCol,"vd");$($t).jqGrid("editCell",$t.p.iRow+1,$t.p.iCol,false)}break;case 37:if($t.p.iCol-1>=0){i=findNextVisible($t.p.iCol-1,"lft");scrollGrid($t.p.iRow,i,"h");$($t).jqGrid("editCell",$t.p.iRow,i,false)}break;case 39:if($t.p.iCol+1<=$t.p.colModel.length-1){i=findNextVisible($t.p.iCol+1,"rgt");scrollGrid($t.p.iRow,i,"h");$($t).jqGrid("editCell",$t.p.iRow,i,false)}break;case 13:if(parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0){$($t).jqGrid("editCell",$t.p.iRow,$t.p.iCol,true)}break;default:return true}return false})})},getChangedCells:function(mthd){var ret=[];if(!mthd){mthd="all"}this.each(function(){var $t=this,nm;if(!$t.grid||$t.p.cellEdit!==true){return}$($t.rows).each(function(j){var res={};if($(this).hasClass("edited")){$("td",this).each(function(i){nm=$t.p.colModel[i].name;if(nm!=="cb"&&nm!=="subgrid"){if(mthd==="dirty"){if($(this).hasClass("dirty-cell")){try{res[nm]=$.unformat.call($t,this,{rowId:$t.rows[j].id,colModel:$t.p.colModel[i]},i)}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html())}}}else{try{res[nm]=$.unformat.call($t,this,{rowId:$t.rows[j].id,colModel:$t.p.colModel[i]},i)}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html())}}}});res.id=this.id;ret.push(res)}})});return ret}});$.extend($.jgrid,{showModal:function(h){h.w.show()},closeModal:function(h){h.w.hide().attr("aria-hidden","true");if(h.o){h.o.remove()}},hideModal:function(selector,o){o=$.extend({jqm:true,gb:"",removemodal:false,formprop:false,form:""},o||{});var thisgrid=o.gb&&typeof o.gb==="string"&&o.gb.substr(0,6)==="#gbox_"?$("#"+o.gb.substr(6))[0]:false;if(o.onClose){var oncret=thisgrid?o.onClose.call(thisgrid,selector):o.onClose(selector);if(typeof oncret==="boolean"&&!oncret){return}}if(o.formprop&&thisgrid&&o.form){var fh=$(selector)[0].style.height,fw=$(selector)[0].style.width;if(fh.indexOf("px")>-1){fh=parseFloat(fh)}if(fw.indexOf("px")>-1){fw=parseFloat(fw)}var frmgr,frmdata;if(o.form==="edit"){frmgr="#"+$.jgrid.jqID("FrmGrid_"+o.gb.substr(6));frmdata="formProp"}else{if(o.form==="view"){frmgr="#"+$.jgrid.jqID("ViewGrid_"+o.gb.substr(6));frmdata="viewProp"}}$(thisgrid).data(frmdata,{top:parseFloat($(selector).css("top")),left:parseFloat($(selector).css("left")),width:fw,height:fh,dataheight:$(frmgr).height(),datawidth:$(frmgr).width()})}if($.fn.jqm&&o.jqm===true){$(selector).attr("aria-hidden","true").jqmHide()}else{if(o.gb!==""){try{$(".jqgrid-overlay:first",o.gb).hide()}catch(e){}}$(selector).hide().attr("aria-hidden","true")}if(o.removemodal){$(selector).remove()}},findPos:function(obj){var curleft=0,curtop=0;if(obj.offsetParent){do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop}while(obj=obj.offsetParent)}return[curleft,curtop]},createModal:function(aIDs,content,p,insertSelector,posSelector,appendsel,css){p=$.extend(true,{},$.jgrid.jqModal||{},p);var self=this,rtlsup=$(p.gbox).attr("dir")==="rtl"?true:false,classes=$.jgrid.styleUI[(p.styleUI||"jQueryUI")].modal,common=$.jgrid.styleUI[(p.styleUI||"jQueryUI")].common,mw=document.createElement("div");css=$.extend({},css||{});mw.className="ui-jqdialog "+classes.modal;mw.id=aIDs.themodal;var mh=document.createElement("div");mh.className="ui-jqdialog-titlebar "+classes.header;mh.id=aIDs.modalhead;$(mh).append("<span class='ui-jqdialog-title'>"+p.caption+"</span>");var ahr=$("<a class='ui-jqdialog-titlebar-close "+common.cornerall+"'></a>").hover(function(){ahr.addClass(common.hover)},function(){ahr.removeClass(common.hover)}).append("<span class='"+common.icon_base+" "+classes.icon_close+"'></span>");$(mh).append(ahr);if(rtlsup){mw.dir="rtl";$(".ui-jqdialog-title",mh).css("float","right");$(".ui-jqdialog-titlebar-close",mh).css("left",0.3+"em")}else{mw.dir="ltr";$(".ui-jqdialog-title",mh).css("float","left");$(".ui-jqdialog-titlebar-close",mh).css("right",0.3+"em")}var mc=document.createElement("div");$(mc).addClass("ui-jqdialog-content "+classes.content).attr("id",aIDs.modalcontent);$(mc).append(content);mw.appendChild(mc);$(mw).prepend(mh);if(appendsel===true){$("body").append(mw)}else{if(typeof appendsel==="string"){$(appendsel).append(mw)}else{$(mw).insertBefore(insertSelector)}}$(mw).css(css);if(p.jqModal===undefined){p.jqModal=true}var coord={};if($.fn.jqm&&p.jqModal===true){if(p.left===0&&p.top===0&&p.overlay){var pos=[];pos=$.jgrid.findPos(posSelector);p.left=pos[0]+4;p.top=pos[1]+4}coord.top=p.top+"px";coord.left=p.left}else{if(p.left!==0||p.top!==0){coord.left=p.left;coord.top=p.top+"px"}}$("a.ui-jqdialog-titlebar-close",mh).click(function(){var oncm=$("#"+$.jgrid.jqID(aIDs.themodal)).data("onClose")||p.onClose;var gboxclose=$("#"+$.jgrid.jqID(aIDs.themodal)).data("gbox")||p.gbox;self.hideModal("#"+$.jgrid.jqID(aIDs.themodal),{gb:gboxclose,jqm:p.jqModal,onClose:oncm,removemodal:p.removemodal||false,formprop:!p.recreateForm||false,form:p.form||""});return false});if(p.width===0||!p.width){p.width=300}if(p.height===0||!p.height){p.height=200}if(!p.zIndex){var parentZ=$(insertSelector).parents("*[role=dialog]").filter(":first").css("z-index");if(parentZ){p.zIndex=parseInt(parentZ,10)+2}else{p.zIndex=950}}var rtlt=0;if(rtlsup&&coord.left&&!appendsel){rtlt=$(p.gbox).width()-(!isNaN(p.width)?parseInt(p.width,10):0)-8;coord.left=parseInt(coord.left,10)+parseInt(rtlt,10)}if(coord.left){coord.left+="px"}$(mw).css($.extend({width:isNaN(p.width)?"auto":p.width+"px",height:isNaN(p.height)?"auto":p.height+"px",zIndex:p.zIndex,overflow:"hidden"},coord)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":aIDs.modalhead,"aria-hidden":"true"});if(p.drag===undefined){p.drag=true}if(p.resize===undefined){p.resize=true}if(p.drag){$(mh).css("cursor","move");if($.fn.tinyDraggable){$(mw).tinyDraggable({handle:"#"+$.jgrid.jqID(mh.id)})}else{try{$(mw).draggable({handle:$("#"+$.jgrid.jqID(mh.id))})}catch(e){}}}if(p.resize){if($.fn.jqResize){$(mw).append("<div class='jqResize "+classes.resizable+" "+common.icon_base+" "+classes.icon_resizable+"'></div>");$("#"+$.jgrid.jqID(aIDs.themodal)).jqResize(".jqResize",aIDs.scrollelm?"#"+$.jgrid.jqID(aIDs.scrollelm):false)}else{try{$(mw).resizable({handles:"se, sw",alsoResize:aIDs.scrollelm?"#"+$.jgrid.jqID(aIDs.scrollelm):false})}catch(r){}}}if(p.closeOnEscape===true){$(mw).keydown(function(e){if(e.which===27){var cone=$("#"+$.jgrid.jqID(aIDs.themodal)).data("onClose")||p.onClose;self.hideModal("#"+$.jgrid.jqID(aIDs.themodal),{gb:p.gbox,jqm:p.jqModal,onClose:cone,removemodal:p.removemodal||false,formprop:!p.recreateForm||false,form:p.form||""})}})}},viewModal:function(selector,o){o=$.extend({toTop:true,overlay:10,modal:false,overlayClass:"ui-widget-overlay",onShow:$.jgrid.showModal,onHide:$.jgrid.closeModal,gbox:"",jqm:true,jqM:true},o||{});if(o.focusField===undefined){o.focusField=0}if(typeof o.focusField==="number"&&o.focusField>=0){o.focusField=parseInt(o.focusField,10)}else{if(typeof o.focusField==="boolean"&&!o.focusField){o.focusField=false}else{o.focusField=0}}if($.fn.jqm&&o.jqm===true){if(o.jqM){$(selector).attr("aria-hidden","false").jqm(o).jqmShow()}else{$(selector).attr("aria-hidden","false").jqmShow()}}else{if(o.gbox!==""){$(".jqgrid-overlay:first",o.gbox).show();$(selector).data("gbox",o.gbox)}$(selector).show().attr("aria-hidden","false");if(o.focusField>=0){try{$(":input:visible",selector)[parseInt(o.focusField,10)].focus()}catch(_){}}}},info_dialog:function(caption,content,c_b,modalopt){var mopt={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,left:250,top:170,zIndex:1000,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};$.extend(true,mopt,$.jgrid.jqModal||{},{caption:"<b>"+caption+"</b>"},modalopt||{});var jm=mopt.jqModal,self=this,classes=$.jgrid.styleUI[(mopt.styleUI||"jQueryUI")].modal,common=$.jgrid.styleUI[(mopt.styleUI||"jQueryUI")].common;if($.fn.jqm&&!jm){jm=false}var buttstr="",i;if(mopt.buttons.length>0){for(i=0;i<mopt.buttons.length;i++){if(mopt.buttons[i].id===undefined){mopt.buttons[i].id="info_button_"+i}buttstr+="<a id='"+mopt.buttons[i].id+"' class='fm-button "+common.button+"'>"+mopt.buttons[i].text+"</a>"}}var dh=isNaN(mopt.dataheight)?mopt.dataheight:mopt.dataheight+"px",cn="text-align:"+mopt.align+";";var cnt="<div id='info_id'>";cnt+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+dh+";"+cn+"'>"+content+"</div>";cnt+=c_b?"<div class='"+classes.content+"' style='text-align:"+mopt.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+common.button+"'>"+c_b+"</a>"+buttstr+"</div>":buttstr!==""?"<div class='"+classes.content+"' style='text-align:"+mopt.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+buttstr+"</div>":"";cnt+="</div>";try{if($("#info_dialog").attr("aria-hidden")==="false"){$.jgrid.hideModal("#info_dialog",{jqm:jm})}$("#info_dialog").remove()}catch(e){}$.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},cnt,mopt,"","",true);if(buttstr){$.each(mopt.buttons,function(i){$("#"+$.jgrid.jqID(this.id),"#info_id").bind("click",function(){mopt.buttons[i].onClick.call($("#info_dialog"));return false})})}$("#closedialog","#info_id").click(function(){self.hideModal("#info_dialog",{jqm:jm,onClose:$("#info_dialog").data("onClose")||mopt.onClose,gb:$("#info_dialog").data("gbox")||mopt.gbox});return false});$(".fm-button","#info_dialog").hover(function(){$(this).addClass(common.hover)},function(){$(this).removeClass(common.hover)});if($.isFunction(mopt.beforeOpen)){mopt.beforeOpen()}$.jgrid.viewModal("#info_dialog",{onHide:function(h){h.w.hide().remove();if(h.o){h.o.remove()}},modal:mopt.modal,jqm:jm});if($.isFunction(mopt.afterOpen)){mopt.afterOpen()}try{$("#info_dialog").focus()}catch(m){}},bindEv:function(el,opt){var $t=this;if($.isFunction(opt.dataInit)){opt.dataInit.call($t,el,opt)}if(opt.dataEvents){$.each(opt.dataEvents,function(){if(this.data!==undefined){$(el).bind(this.type,this.data,this.fn)}else{$(el).bind(this.type,this.fn)}})}},createEl:function(eltype,options,vl,autowidth,ajaxso){var elem="",$t=this;function setAttributes(elm,atr,exl){var exclude=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];if(exl!==undefined&&$.isArray(exl)){$.merge(exclude,exl)}$.each(atr,function(key,value){if($.inArray(key,exclude)===-1){$(elm).attr(key,value)}});if(!atr.hasOwnProperty("id")){$(elm).attr("id",$.jgrid.randId())}}switch(eltype){case"textarea":elem=document.createElement("textarea");if(autowidth){if(!options.cols){$(elem).css({width:"98%"})}}else{if(!options.cols){options.cols=20}}if(!options.rows){options.rows=2}if(vl==="&nbsp;"||vl==="&#160;"||(vl.length===1&&vl.charCodeAt(0)===160)){vl=""}elem.value=vl;setAttributes(elem,options);$(elem).attr({role:"textbox",multiline:"true"});break;case"checkbox":elem=document.createElement("input");elem.type="checkbox";if(!options.value){var vl1=(vl+"").toLowerCase();if(vl1.search(/(false|f|0|no|n|off|undefined)/i)<0&&vl1!==""){elem.checked=true;elem.defaultChecked=true;elem.value=vl}else{elem.value="on"}$(elem).attr("offval","off")}else{var cbval=options.value.split(":");if(vl===cbval[0]){elem.checked=true;elem.defaultChecked=true}elem.value=cbval[0];$(elem).attr("offval",cbval[1])}setAttributes(elem,options,["value"]);$(elem).attr("role","checkbox");break;case"select":elem=document.createElement("select");elem.setAttribute("role","select");var msl,ovm=[];if(options.multiple===true){msl=true;elem.multiple="multiple";$(elem).attr("aria-multiselectable","true")}else{msl=false}if(options.dataUrl!=null){var rowid=null,postData=options.postData||ajaxso.postData;try{rowid=options.rowId}catch(e){}if($t.p&&$t.p.idPrefix){rowid=$.jgrid.stripPref($t.p.idPrefix,rowid)}$.ajax($.extend({url:$.isFunction(options.dataUrl)?options.dataUrl.call($t,rowid,vl,String(options.name)):options.dataUrl,type:"GET",dataType:"html",data:$.isFunction(postData)?postData.call($t,rowid,vl,String(options.name)):postData,context:{elem:elem,options:options,vl:vl},success:function(data){var ovm=[],elem=this.elem,vl=this.vl,options=$.extend({},this.options),msl=options.multiple===true,cU=options.cacheUrlData===true,oV="",txt,a=$.isFunction(options.buildSelect)?options.buildSelect.call($t,data):data;if(typeof a==="string"){a=$($.trim(a)).html()}if(a){$(elem).append(a);setAttributes(elem,options,postData?["postData"]:undefined);if(options.size===undefined){options.size=msl?3:1}if(msl){ovm=vl.split(",");ovm=$.map(ovm,function(n){return $.trim(n)})}else{ovm[0]=$.trim(vl)}$("option",elem).each(function(i){txt=$(this).text();vl=$(this).val()||txt;if(cU){oV+=(i!==0?";":"")+vl+":"+txt}if(i===0&&elem.multiple){this.selected=false}$(this).attr("role","option");if($.inArray($.trim(txt),ovm)>-1||$.inArray($.trim(vl),ovm)>-1){this.selected="selected"}});if(cU){if(options.oper==="edit"){$($t).jqGrid("setColProp",options.name,{editoptions:{buildSelect:null,dataUrl:null,value:oV}})}else{if(options.oper==="search"){$($t).jqGrid("setColProp",options.name,{searchoptions:{dataUrl:null,value:oV}})}else{if(options.oper==="filter"){if($("#fbox_"+$t.p.id)[0].p){var cols=$("#fbox_"+$t.p.id)[0].p.columns,nm;$.each(cols,function(i){nm=this.index||this.name;if(options.name===nm){this.searchoptions.dataUrl=null;this.searchoptions.value=oV;return false}})}}}}}$($t).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[elem])}}},ajaxso||{}))}else{if(options.value){var i;if(options.size===undefined){options.size=msl?3:1}if(msl){ovm=vl.split(",");ovm=$.map(ovm,function(n){return $.trim(n)})}if(typeof options.value==="function"){options.value=options.value()}var so,sv,ov,oSv,key,value,sep=options.separator===undefined?":":options.separator,delim=options.delimiter===undefined?";":options.delimiter;if(typeof options.value==="string"){so=options.value.split(delim);for(i=0;i<so.length;i++){sv=so[i].split(sep);if(sv.length>2){sv[1]=$.map(sv,function(n,ii){if(ii>0){return n}}).join(sep)}ov=document.createElement("option");ov.setAttribute("role","option");ov.value=sv[0];ov.innerHTML=sv[1];elem.appendChild(ov);if(!msl&&($.trim(sv[0])===$.trim(vl)||$.trim(sv[1])===$.trim(vl))){ov.selected="selected"}if(msl&&($.inArray($.trim(sv[1]),ovm)>-1||$.inArray($.trim(sv[0]),ovm)>-1)){ov.selected="selected"}}}else{if(Object.prototype.toString.call(options.value)==="[object Array]"){oSv=options.value;for(i=0;i<oSv.length;i++){if(oSv[i].length===2){key=oSv[i][0];value=oSv[i][1];ov=document.createElement("option");ov.setAttribute("role","option");ov.value=key;ov.innerHTML=value;elem.appendChild(ov);if(!msl&&($.trim(key)===$.trim(vl)||$.trim(value)===$.trim(vl))){ov.selected="selected"}if(msl&&($.inArray($.trim(value),ovm)>-1||$.inArray($.trim(key),ovm)>-1)){ov.selected="selected"}}}}else{if(typeof options.value==="object"){oSv=options.value;for(key in oSv){if(oSv.hasOwnProperty(key)){ov=document.createElement("option");ov.setAttribute("role","option");ov.value=key;ov.innerHTML=oSv[key];elem.appendChild(ov);if(!msl&&($.trim(key)===$.trim(vl)||$.trim(oSv[key])===$.trim(vl))){ov.selected="selected"}if(msl&&($.inArray($.trim(oSv[key]),ovm)>-1||$.inArray($.trim(key),ovm)>-1)){ov.selected="selected"}}}}}}setAttributes(elem,options,["value"])}}break;case"image":case"file":elem=document.createElement("input");elem.type=eltype;setAttributes(elem,options);break;case"custom":elem=document.createElement("span");try{if($.isFunction(options.custom_element)){var celm=options.custom_element.call($t,vl,options);if(celm){celm=$(celm).addClass("customelement").attr({id:options.id,name:options.name});$(elem).empty().append(celm)}else{throw"e2"}}else{throw"e1"}}catch(e){var errors=$.jgrid.getRegional($t,"errors"),edit=$.jgrid.getRegional($t,"edit");if(e==="e1"){$.jgrid.info_dialog(errors.errcap,"function 'custom_element' "+edit.msg.nodefined,edit.bClose,{styleUI:$t.p.styleUI})}else{if(e==="e2"){$.jgrid.info_dialog(errors.errcap,"function 'custom_element' "+edit.msg.novalue,edit.bClose,{styleUI:$t.p.styleUI})}else{$.jgrid.info_dialog(errors.errcap,typeof e==="string"?e:e.message,edit.bClose,{styleUI:$t.p.styleUI})}}}break;default:var role;if(eltype==="button"){role="button"}else{role="textbox"}elem=document.createElement("input");elem.type=eltype;elem.value=vl;setAttributes(elem,options);if(eltype!=="button"){if(autowidth){if(!options.size){$(elem).css({width:"96%"})}}else{if(!options.size){options.size=20}}}$(elem).attr("role",role)}return elem},checkDate:function(format,date){var daysInFebruary=function(year){return(((year%4===0)&&(year%100!==0||(year%400===0)))?29:28)},tsp={},sep;format=format.toLowerCase();if(format.indexOf("/")!==-1){sep="/"}else{if(format.indexOf("-")!==-1){sep="-"}else{if(format.indexOf(".")!==-1){sep="."}else{sep="/"}}}format=format.split(sep);date=date.split(sep);if(date.length!==3){return false}var j=-1,yln,dln=-1,mln=-1,i;for(i=0;i<format.length;i++){var dv=isNaN(date[i])?0:parseInt(date[i],10);tsp[format[i]]=dv;yln=format[i];if(yln.indexOf("y")!==-1){j=i}if(yln.indexOf("m")!==-1){mln=i}if(yln.indexOf("d")!==-1){dln=i}}if(format[j]==="y"||format[j]==="yyyy"){yln=4}else{if(format[j]==="yy"){yln=2}else{yln=-1}}var daysInMonth=[0,31,29,31,30,31,30,31,31,30,31,30,31],strDate;if(j===-1){return false}strDate=tsp[format[j]].toString();if(yln===2&&strDate.length===1){yln=1}if(strDate.length!==yln||(tsp[format[j]]===0&&date[j]!=="00")){return false}if(mln===-1){return false}strDate=tsp[format[mln]].toString();if(strDate.length<1||tsp[format[mln]]<1||tsp[format[mln]]>12){return false}if(dln===-1){return false}strDate=tsp[format[dln]].toString();if(strDate.length<1||tsp[format[dln]]<1||tsp[format[dln]]>31||(tsp[format[mln]]===2&&tsp[format[dln]]>daysInFebruary(tsp[format[j]]))||tsp[format[dln]]>daysInMonth[tsp[format[mln]]]){return false}return true},isEmpty:function(val){if(val.match(/^\s+$/)||val===""){return true}return false},checkTime:function(time){var re=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/,regs;if(!$.jgrid.isEmpty(time)){regs=time.match(re);if(regs){if(regs[3]){if(regs[1]<1||regs[1]>12){return false}}else{if(regs[1]>23){return false}}if(regs[2]>59){return false}}else{return false}}return true},checkValues:function(val,valref,customobject,nam){var edtrul,i,nm,dft,len,g=this,cm=g.p.colModel,msg=$.jgrid.getRegional(this,"edit.msg"),fmtdate;if(customobject===undefined){if(typeof valref==="string"){for(i=0,len=cm.length;i<len;i++){if(cm[i].name===valref){edtrul=cm[i].editrules;valref=i;if(cm[i].formoptions!=null){nm=cm[i].formoptions.label}break}}}else{if(valref>=0){edtrul=cm[valref].editrules}}}else{edtrul=customobject;nm=nam===undefined?"_":nam}if(edtrul){if(!nm){nm=g.p.colNames!=null?g.p.colNames[valref]:cm[valref].label}if(edtrul.required===true){if($.jgrid.isEmpty(val)){return[false,nm+": "+msg.required,""]}}var rqfield=edtrul.required===false?false:true;if(edtrul.number===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){if(isNaN(val)){return[false,nm+": "+msg.number,""]}}}if(edtrul.minValue!==undefined&&!isNaN(edtrul.minValue)){if(parseFloat(val)<parseFloat(edtrul.minValue)){return[false,nm+": "+msg.minValue+" "+edtrul.minValue,""]}}if(edtrul.maxValue!==undefined&&!isNaN(edtrul.maxValue)){if(parseFloat(val)>parseFloat(edtrul.maxValue)){return[false,nm+": "+msg.maxValue+" "+edtrul.maxValue,""]}}var filter;if(edtrul.email===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){filter=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!filter.test(val)){return[false,nm+": "+msg.email,""]}}}if(edtrul.integer===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){if(isNaN(val)){return[false,nm+": "+msg.integer,""]}if((val%1!==0)||(val.indexOf(".")!==-1)){return[false,nm+": "+msg.integer,""]}}}if(edtrul.date===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){if(cm[valref].formatoptions&&cm[valref].formatoptions.newformat){dft=cm[valref].formatoptions.newformat;fmtdate=$.jgrid.getRegional(g,"formatter.date.masks");if(fmtdate&&fmtdate.hasOwnProperty(dft)){dft=fmtdate[dft]}}else{dft=cm[valref].datefmt||"Y-m-d"}if(!$.jgrid.checkDate(dft,val)){return[false,nm+": "+msg.date+" - "+dft,""]}}}if(edtrul.time===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){if(!$.jgrid.checkTime(val)){return[false,nm+": "+msg.date+" - hh:mm (am/pm)",""]}}}if(edtrul.url===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){filter=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!filter.test(val)){return[false,nm+": "+msg.url,""]}}}if(edtrul.custom===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){if($.isFunction(edtrul.custom_func)){var ret=edtrul.custom_func.call(g,val,nm,valref);return $.isArray(ret)?ret:[false,msg.customarray,""]}return[false,msg.customfcheck,""]}}}return[true,"",""]}});$.fn.jqFilter=function(arg){if(typeof arg==="string"){var fn=$.fn.jqFilter[arg];if(!fn){throw ("jqFilter - No such method: "+arg)}var args=$.makeArray(arguments).slice(1);return fn.apply(this,args)}var p=$.extend(true,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:false,errmsg:"",errorcheck:true,showQuery:true,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:true,ruleButtons:true,uniqueSearchFields:false,direction:"ltr"},$.jgrid.filter,arg||{});return this.each(function(){if(this.filter){return}this.p=p;if(this.p.filter===null||this.p.filter===undefined){this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}}if(this.p.sortStrategy!=null&&$.isFunction(this.p.sortStrategy)){this.p.columns.sort(this.p.sortStrategy)}var i,len=this.p.columns.length,cl,isIE=/msie/i.test(navigator.userAgent)&&!window.opera;this.p.initFilter=$.extend(true,{},this.p.filter);if(!len){return}for(i=0;i<len;i++){cl=this.p.columns[i];if(cl.stype){cl.inputtype=cl.stype}else{if(!cl.inputtype){cl.inputtype="text"}}if(cl.sorttype){cl.searchtype=cl.sorttype}else{if(!cl.searchtype){cl.searchtype="string"}}if(cl.hidden===undefined){cl.hidden=false}if(!cl.label){cl.label=cl.name}if(cl.index){cl.name=cl.index}if(!cl.hasOwnProperty("searchoptions")){cl.searchoptions={}}if(!cl.hasOwnProperty("searchrules")){cl.searchrules={}}if(cl.search===undefined){cl.inlist=true}else{cl.inlist=cl.search}}var getGrid=function(){return $("#"+$.jgrid.jqID(p.id))[0]||null},$tg=getGrid(),classes=$.jgrid.styleUI[($tg.p.styleUI||"jQueryUI")].filter,common=$.jgrid.styleUI[($tg.p.styleUI||"jQueryUI")].common;if(this.p.showQuery){$(this).append("<table class='queryresult "+classes.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>")}var checkData=function(val,colModelItem){var ret=[true,""],$t=getGrid();if($.isFunction(colModelItem.searchrules)){ret=colModelItem.searchrules.call($t,val,colModelItem)}else{if($.jgrid&&$.jgrid.checkValues){try{ret=$.jgrid.checkValues.call($t,val,-1,colModelItem.searchrules,colModelItem.label)}catch(e){}}}if(ret&&ret.length&&ret[0]===false){p.error=!ret[0];p.errmsg=ret[1]}};this.onchange=function(){this.p.error=false;this.p.errmsg="";return $.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):false};this.reDraw=function(){$("table.group:first",this).remove();var t=this.createTableForGroup(p.filter,null);$(this).append(t);if($.isFunction(this.p.afterRedraw)){this.p.afterRedraw.call(this,this.p)}};this.createTableForGroup=function(group,parentgroup){var that=this,i;var table=$("<table class='group "+classes.table_widget+" ui-search-table' style='border:0px none;'><tbody></tbody></table>"),align="left";if(this.p.direction==="rtl"){align="right";table.attr("dir","rtl")}if(parentgroup===null){table.append("<tr class='error' style='display:none;'><th colspan='5' class='"+common.error+"' align='"+align+"'></th></tr>")}var tr=$("<tr></tr>");table.append(tr);var th=$("<th colspan='5' align='"+align+"'></th>");tr.append(th);if(this.p.ruleButtons===true){var groupOpSelect=$("<select class='opsel "+classes.srSelect+"'></select>");th.append(groupOpSelect);var str="",selected;for(i=0;i<p.groupOps.length;i++){selected=group.groupOp===that.p.groupOps[i].op?" selected='selected'":"";str+="<option value='"+that.p.groupOps[i].op+"'"+selected+">"+that.p.groupOps[i].text+"</option>"}groupOpSelect.append(str).bind("change",function(){group.groupOp=$(groupOpSelect).val();that.onchange()})}var inputAddSubgroup="<span></span>";if(this.p.groupButton){inputAddSubgroup=$("<input type='button' value='+ {}' title='Add subgroup' class='add-group "+common.button+"'/>");inputAddSubgroup.bind("click",function(){if(group.groups===undefined){group.groups=[]}group.groups.push({groupOp:p.groupOps[0].op,rules:[],groups:[]});that.reDraw();that.onchange();return false})}th.append(inputAddSubgroup);if(this.p.ruleButtons===true){var inputAddRule=$("<input type='button' value='+' title='Add rule' class='add-rule ui-add "+common.button+"'/>"),cm;inputAddRule.bind("click",function(){if(group.rules===undefined){group.rules=[]}for(i=0;i<that.p.columns.length;i++){var searchable=(that.p.columns[i].search===undefined)?true:that.p.columns[i].search,hidden=(that.p.columns[i].hidden===true),ignoreHiding=(that.p.columns[i].searchoptions.searchhidden===true);if((ignoreHiding&&searchable)||(searchable&&!hidden)){cm=that.p.columns[i];break}}if(!cm){return false}var opr;if(cm.searchoptions.sopt){opr=cm.searchoptions.sopt}else{if(that.p.sopt){opr=that.p.sopt}else{if($.inArray(cm.searchtype,that.p.strarr)!==-1){opr=that.p.stropts}else{opr=that.p.numopts}}}group.rules.push({field:cm.name,op:opr[0],data:""});that.reDraw();return false});th.append(inputAddRule)}if(parentgroup!==null){var inputDeleteGroup=$("<input type='button' value='-' title='Delete group' class='delete-group "+common.button+"'/>");th.append(inputDeleteGroup);inputDeleteGroup.bind("click",function(){for(i=0;i<parentgroup.groups.length;i++){if(parentgroup.groups[i]===group){parentgroup.groups.splice(i,1);break}}that.reDraw();that.onchange();return false})}if(group.groups!==undefined){for(i=0;i<group.groups.length;i++){var trHolderForSubgroup=$("<tr></tr>");table.append(trHolderForSubgroup);var tdFirstHolderForSubgroup=$("<td class='first'></td>");trHolderForSubgroup.append(tdFirstHolderForSubgroup);var tdMainHolderForSubgroup=$("<td colspan='4'></td>");tdMainHolderForSubgroup.append(this.createTableForGroup(group.groups[i],group));trHolderForSubgroup.append(tdMainHolderForSubgroup)}}if(group.groupOp===undefined){group.groupOp=that.p.groupOps[0].op}var suni=that.p.ruleButtons&&that.p.uniqueSearchFields;if(suni){for(var ii=0;ii<that.p.columns.length;ii++){if(that.p.columns[ii].inlist){that.p.columns[ii].search=true}}}if(group.rules!==undefined){for(i=0;i<group.rules.length;i++){table.append(this.createTableRowForRule(group.rules[i],group));if(suni){var field=group.rules[i].field;for(var ii=0;ii<that.p.columns.length;ii++){if(field===that.p.columns[ii].name){that.p.columns[ii].search=false;break}}}}}return table};this.createTableRowForRule=function(rule,group){var that=this,$t=getGrid(),tr=$("<tr></tr>"),i,op,trpar,cm,str="",selected;tr.append("<td class='first'></td>");var ruleFieldTd=$("<td class='columns'></td>");tr.append(ruleFieldTd);var ruleFieldSelect=$("<select class='"+classes.srSelect+"'></select>"),ina,aoprs=[];ruleFieldTd.append(ruleFieldSelect);ruleFieldSelect.bind("change",function(){rule.field=$(ruleFieldSelect).val();trpar=$(this).parents("tr:first");$(".data",trpar).empty();for(i=0;i<that.p.columns.length;i++){if(that.p.columns[i].name===rule.field){cm=that.p.columns[i];break}}if(!cm){return}cm.searchoptions.id=$.jgrid.randId();cm.searchoptions.name=rule.field;cm.searchoptions.oper="filter";if(isIE&&cm.inputtype==="text"){if(!cm.searchoptions.size){cm.searchoptions.size=10}}var elm=$.jgrid.createEl.call($t,cm.inputtype,cm.searchoptions,"",true,that.p.ajaxSelectOptions||{},true);$(elm).addClass("input-elm "+classes.srInput);if(cm.searchoptions.sopt){op=cm.searchoptions.sopt}else{if(that.p.sopt){op=that.p.sopt}else{if($.inArray(cm.searchtype,that.p.strarr)!==-1){op=that.p.stropts}else{op=that.p.numopts}}}var s="",so=0;aoprs=[];$.each(that.p.ops,function(){aoprs.push(this.oper)});for(i=0;i<op.length;i++){ina=$.inArray(op[i],aoprs);if(ina!==-1){if(so===0){rule.op=that.p.ops[ina].oper}s+="<option value='"+that.p.ops[ina].oper+"'>"+that.p.ops[ina].text+"</option>";so++}}$(".selectopts",trpar).empty().append(s);$(".selectopts",trpar)[0].selectedIndex=0;if($.jgrid.msie&&$.jgrid.msiever()<9){var sw=parseInt($("select.selectopts",trpar)[0].offsetWidth,10)+1;$(".selectopts",trpar).width(sw);$(".selectopts",trpar).css("width","auto")}$(".data",trpar).append(elm);$.jgrid.bindEv.call($t,elm,cm.searchoptions);$(".input-elm",trpar).bind("change",function(e){var elem=e.target;rule.data=elem.nodeName.toUpperCase()==="SPAN"&&cm.searchoptions&&$.isFunction(cm.searchoptions.custom_value)?cm.searchoptions.custom_value.call($t,$(elem).children(".customelement:first"),"get"):elem.value;that.onchange()});setTimeout(function(){rule.data=$(elm).val();that.onchange()},0)});var j=0;for(i=0;i<that.p.columns.length;i++){var searchable=(that.p.columns[i].search===undefined)?true:that.p.columns[i].search,hidden=(that.p.columns[i].hidden===true),ignoreHiding=(that.p.columns[i].searchoptions.searchhidden===true);if((ignoreHiding&&searchable)||(searchable&&!hidden)){selected="";if(rule.field===that.p.columns[i].name){selected=" selected='selected'";j=i}str+="<option value='"+that.p.columns[i].name+"'"+selected+">"+that.p.columns[i].label+"</option>"}}ruleFieldSelect.append(str);var ruleOperatorTd=$("<td class='operators'></td>");tr.append(ruleOperatorTd);cm=p.columns[j];cm.searchoptions.id=$.jgrid.randId();if(isIE&&cm.inputtype==="text"){if(!cm.searchoptions.size){cm.searchoptions.size=10}}cm.searchoptions.name=rule.field;cm.searchoptions.oper="filter";var ruleDataInput=$.jgrid.createEl.call($t,cm.inputtype,cm.searchoptions,rule.data,true,that.p.ajaxSelectOptions||{},true);if(rule.op==="nu"||rule.op==="nn"){$(ruleDataInput).attr("readonly","true");$(ruleDataInput).attr("disabled","true")}var ruleOperatorSelect=$("<select class='selectopts "+classes.srSelect+"'></select>");ruleOperatorTd.append(ruleOperatorSelect);ruleOperatorSelect.bind("change",function(){rule.op=$(ruleOperatorSelect).val();trpar=$(this).parents("tr:first");var rd=$(".input-elm",trpar)[0];if(rule.op==="nu"||rule.op==="nn"){rule.data="";if(rd.tagName.toUpperCase()!=="SELECT"){rd.value=""}rd.setAttribute("readonly","true");rd.setAttribute("disabled","true")}else{if(rd.tagName.toUpperCase()==="SELECT"){rule.data=rd.value}rd.removeAttribute("readonly");rd.removeAttribute("disabled")}that.onchange()});if(cm.searchoptions.sopt){op=cm.searchoptions.sopt}else{if(that.p.sopt){op=that.p.sopt}else{if($.inArray(cm.searchtype,that.p.strarr)!==-1){op=that.p.stropts}else{op=that.p.numopts}}}str="";$.each(that.p.ops,function(){aoprs.push(this.oper)});for(i=0;i<op.length;i++){ina=$.inArray(op[i],aoprs);if(ina!==-1){selected=rule.op===that.p.ops[ina].oper?" selected='selected'":"";str+="<option value='"+that.p.ops[ina].oper+"'"+selected+">"+that.p.ops[ina].text+"</option>"}}ruleOperatorSelect.append(str);var ruleDataTd=$("<td class='data'></td>");tr.append(ruleDataTd);ruleDataTd.append(ruleDataInput);$.jgrid.bindEv.call($t,ruleDataInput,cm.searchoptions);$(ruleDataInput).addClass("input-elm "+classes.srInput).bind("change",function(){rule.data=cm.inputtype==="custom"?cm.searchoptions.custom_value.call($t,$(this).children(".customelement:first"),"get"):$(this).val();that.onchange()});var ruleDeleteTd=$("<td></td>");tr.append(ruleDeleteTd);if(this.p.ruleButtons===true){var ruleDeleteInput=$("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del "+common.button+"'/>");ruleDeleteTd.append(ruleDeleteInput);ruleDeleteInput.bind("click",function(){for(i=0;i<group.rules.length;i++){if(group.rules[i]===rule){group.rules.splice(i,1);break}}that.reDraw();that.onchange();return false})}return tr};this.getStringForGroup=function(group){var s="(",index;if(group.groups!==undefined){for(index=0;index<group.groups.length;index++){if(s.length>1){s+=" "+group.groupOp+" "}try{s+=this.getStringForGroup(group.groups[index])}catch(eg){alert(eg)}}}if(group.rules!==undefined){try{for(index=0;index<group.rules.length;index++){if(s.length>1){s+=" "+group.groupOp+" "}s+=this.getStringForRule(group.rules[index])}}catch(e){alert(e)}}s+=")";if(s==="()"){return""}return s};this.getStringForRule=function(rule){var opUF="",opC="",i,cm,ret,val,numtypes=["int","integer","float","number","currency"];for(i=0;i<this.p.ops.length;i++){if(this.p.ops[i].oper===rule.op){opUF=this.p.operands.hasOwnProperty(rule.op)?this.p.operands[rule.op]:"";opC=this.p.ops[i].oper;break}}for(i=0;i<this.p.columns.length;i++){if(this.p.columns[i].name===rule.field){cm=this.p.columns[i];break}}if(cm===undefined){return""}val=rule.data;if(opC==="bw"||opC==="bn"){val=val+"%"}if(opC==="ew"||opC==="en"){val="%"+val}if(opC==="cn"||opC==="nc"){val="%"+val+"%"}if(opC==="in"||opC==="ni"){val=" ("+val+")"}if(p.errorcheck){checkData(rule.data,cm)}if($.inArray(cm.searchtype,numtypes)!==-1||opC==="nn"||opC==="nu"){ret=rule.field+" "+opUF+" "+val}else{ret=rule.field+" "+opUF+' "'+val+'"'}return ret};this.resetFilter=function(){this.p.filter=$.extend(true,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){$("th."+common.error,this).html("");$("tr.error",this).hide()};this.showError=function(){$("th."+common.error,this).html(this.p.errmsg);$("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(p.filter)};this.toString=function(){var that=this;function getStringRule(rule){if(that.p.errorcheck){var i,cm;for(i=0;i<that.p.columns.length;i++){if(that.p.columns[i].name===rule.field){cm=that.p.columns[i];break}}if(cm){checkData(rule.data,cm)}}return rule.op+"(item."+rule.field+",'"+rule.data+"')"}function getStringForGroup(group){var s="(",index;if(group.groups!==undefined){for(index=0;index<group.groups.length;index++){if(s.length>1){if(group.groupOp==="OR"){s+=" || "}else{s+=" && "}}s+=getStringForGroup(group.groups[index])}}if(group.rules!==undefined){for(index=0;index<group.rules.length;index++){if(s.length>1){if(group.groupOp==="OR"){s+=" || "}else{s+=" && "}}s+=getStringRule(group.rules[index])}}s+=")";if(s==="()"){return""}return s}return getStringForGroup(this.p.filter)};this.reDraw();if(this.p.showQuery){this.onchange()}this.filter=true})};$.extend($.fn.jqFilter,{toSQLString:function(){var s="";this.each(function(){s=this.toUserFriendlyString()});return s},filterData:function(){var s;this.each(function(){s=this.p.filter});return s},getParameter:function(param){if(param!==undefined){if(this.p.hasOwnProperty(param)){return this.p[param]}}return this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(pfilter){if(typeof pfilter==="string"){pfilter=$.jgrid.parse(pfilter)}this.each(function(){this.p.filter=pfilter;this.reDraw();this.onchange()})}});$.jgrid.extend({filterToolbar:function(p){var regional=$.jgrid.getRegional(this[0],"search");p=$.extend({autosearch:true,autosearchDelay:500,searchOnEnter:true,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,onClearSearchValue:null,searchurl:"",stringResult:false,groupOp:"AND",defaultSearch:"bw",searchOperators:false,resetIcon:"x",splitSelect:",",groupOpSelect:"OR",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#",bt:"..."}},regional,p||{});return this.each(function(){var $t=this;if($t.p.filterToolbar){return}if(!$($t).data("filterToolbar")){$($t).data("filterToolbar",p)}if($t.p.force_regional){p=$.extend(p,regional)}var classes=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].filter,common=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].common,base=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].base,triggerToolbar=function(){var sdata={},j=0,v,nm,sopt={},so,ms=false,ssfield=[],bbt=false,sop;$.each($t.p.colModel,function(){var $elem=$("#gs_"+$t.p.idPrefix+$.jgrid.jqID(this.name),(this.frozen===true&&$t.p.frozenColumns===true)?$t.grid.fhDiv:$t.grid.hDiv);nm=this.index||this.name;sop=this.searchoptions||{};if(p.searchOperators&&sop.searchOperMenu){so=$elem.parent().prev().children("a").attr("soper")||p.defaultSearch}else{so=(sop.sopt)?sop.sopt[0]:this.stype==="select"?"eq":p.defaultSearch}v=this.stype==="custom"&&$.isFunction(sop.custom_value)&&$elem.length>0&&$elem[0].nodeName.toUpperCase()==="SPAN"?sop.custom_value.call($t,$elem.children(".customelement:first"),"get"):$elem.val();if(this.stype==="select"&&sop.multiple&&$.isArray(v)&&v.length){ms=true;ssfield.push(nm);v=v.length===1?v[0]:v}if(so==="bt"){bbt=true}if(v||so==="nu"||so==="nn"){sdata[nm]=v;sopt[nm]=so;j++}else{try{delete $t.p.postData[nm]}catch(z){}}});var sd=j>0?true:false;if(p.stringResult===true||$t.p.datatype==="local"||p.searchOperators===true){var ruleGroup='{"groupOp":"'+p.groupOp+'","rules":[';var gi=0;$.each(sdata,function(i,n){if(gi>0){ruleGroup+=","}ruleGroup+='{"field":"'+i+'",';ruleGroup+='"op":"'+sopt[i]+'",';n+="";ruleGroup+='"data":"'+n.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';gi++});ruleGroup+="]}";var filters,rules,k,str,rule,ssdata,group;if(ms){filters=$.jgrid.parse(ruleGroup);if(filters.rules&&filters.rules.length){rules=filters.rules;for(k=0;k<rules.length;k++){rule=rules[k];if($.inArray(rule.filed,ssfield)){ssdata=rule.data.split(p.splitSelect);if(ssdata.length>1){if(filters.groups===undefined){filters.groups=[]}group={groupOp:p.groupOpSelect,groups:[],rules:[]};filters.groups.push(group);$.each(ssdata,function(l){str=ssdata[l];if(str){group.rules.push({data:ssdata[l],op:rule.op,field:rule.field})}});rules.splice(k,1);k--}}}}}if(bbt){if(!$.isPlainObject(filters)){filters=$.jgrid.parse(ruleGroup)}if(filters.rules&&filters.rules.length){rules=filters.rules;for(k=0;k<rules.length;k++){rule=rules[k];if(rule.op==="bt"){ssdata=rule.data.split("...");if(ssdata.length>1){if(filters.groups===undefined){filters.groups=[]}group={groupOp:"AND",groups:[],rules:[]};filters.groups.push(group);$.each(ssdata,function(l){var btop=l===0?"ge":"le";str=ssdata[l];if(str){group.rules.push({data:ssdata[l],op:btop,field:rule.field})}});rules.splice(k,1);k--}}}}}if(bbt||ms){ruleGroup=JSON.stringify(filters)}$.extend($t.p.postData,{filters:ruleGroup});$.each(["searchField","searchString","searchOper"],function(i,n){if($t.p.postData.hasOwnProperty(n)){delete $t.p.postData[n]}})}else{$.extend($t.p.postData,sdata)}var saveurl;if($t.p.searchurl){saveurl=$t.p.url;$($t).jqGrid("setGridParam",{url:$t.p.searchurl})}var bsr=$($t).triggerHandler("jqGridToolbarBeforeSearch")==="stop"?true:false;if(!bsr&&$.isFunction(p.beforeSearch)){bsr=p.beforeSearch.call($t)}if(!bsr){$($t).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}])}if(saveurl){$($t).jqGrid("setGridParam",{url:saveurl})}$($t).triggerHandler("jqGridToolbarAfterSearch");if($.isFunction(p.afterSearch)){p.afterSearch.call($t)}},clearToolbar=function(trigger){var sdata={},j=0,nm;trigger=(typeof trigger!=="boolean")?true:trigger;$.each($t.p.colModel,function(){var v,$elem=$("#gs_"+$t.p.idPrefix+$.jgrid.jqID(this.name),(this.frozen===true&&$t.p.frozenColumns===true)?$t.grid.fhDiv:$t.grid.hDiv);if(this.searchoptions&&this.searchoptions.defaultValue!==undefined){v=this.searchoptions.defaultValue}nm=this.index||this.name;switch(this.stype){case"select":$elem.find("option").each(function(i){if(i===0){this.selected=true}if($(this).val()===v){this.selected=true;return false}});if(v!==undefined){sdata[nm]=v;j++}else{try{delete $t.p.postData[nm]}catch(e){}}break;case"text":$elem.val(v||"");if(v!==undefined){sdata[nm]=v;j++}else{try{delete $t.p.postData[nm]}catch(y){}}break;case"custom":if($.isFunction(this.searchoptions.custom_value)&&$elem.length>0&&$elem[0].nodeName.toUpperCase()==="SPAN"){this.searchoptions.custom_value.call($t,$elem.children(".customelement:first"),"set",v||"")}break}});var sd=j>0?true:false;$t.p.resetsearch=true;if(p.stringResult===true||$t.p.datatype==="local"){var ruleGroup='{"groupOp":"'+p.groupOp+'","rules":[';var gi=0;$.each(sdata,function(i,n){if(gi>0){ruleGroup+=","}ruleGroup+='{"field":"'+i+'",';ruleGroup+='"op":"eq",';n+="";ruleGroup+='"data":"'+n.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';gi++});ruleGroup+="]}";$.extend($t.p.postData,{filters:ruleGroup});$.each(["searchField","searchString","searchOper"],function(i,n){if($t.p.postData.hasOwnProperty(n)){delete $t.p.postData[n]}})}else{$.extend($t.p.postData,sdata)}var saveurl;if($t.p.searchurl){saveurl=$t.p.url;$($t).jqGrid("setGridParam",{url:$t.p.searchurl})}var bcv=$($t).triggerHandler("jqGridToolbarBeforeClear")==="stop"?true:false;if(!bcv&&$.isFunction(p.beforeClear)){bcv=p.beforeClear.call($t)}if(!bcv){if(trigger){$($t).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}])}}if(saveurl){$($t).jqGrid("setGridParam",{url:saveurl})}$($t).triggerHandler("jqGridToolbarAfterClear");if($.isFunction(p.afterClear)){p.afterClear()}},toggleToolbar=function(){var trow=$("tr.ui-search-toolbar",$t.grid.hDiv),trow2=$t.p.frozenColumns===true?$("tr.ui-search-toolbar",$t.grid.fhDiv):false;if(trow.css("display")==="none"){trow.show();if(trow2){trow2.show()}}else{trow.hide();if(trow2){trow2.hide()}}},buildRuleMenu=function(elem,left,top){$("#sopt_menu").remove();left=parseInt(left,10);top=parseInt(top,10)+18;var fs=$(".ui-jqgrid-view").css("font-size")||"11px";var str='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+fs+";left:"+left+"px;top:"+top+'px;">',selected=$(elem).attr("soper"),selclass,aoprs=[],ina;var i=0,nm=$(elem).attr("colname"),len=$t.p.colModel.length;while(i<len){if($t.p.colModel[i].name===nm){break}i++}var cm=$t.p.colModel[i],options=$.extend({},cm.searchoptions);if(!options.sopt){options.sopt=[];options.sopt[0]=cm.stype==="select"?"eq":p.defaultSearch}$.each(p.odata,function(){aoprs.push(this.oper)});for(i=0;i<options.sopt.length;i++){ina=$.inArray(options.sopt[i],aoprs);if(ina!==-1){selclass=selected===p.odata[ina].oper?common.highlight:"";str+='<li class="ui-menu-item '+selclass+'" role="presentation"><a class="'+common.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+p.odata[ina].oper+'" oper="'+p.operands[p.odata[ina].oper]+'"><table class="ui-common-table"><tr><td width="25px">'+p.operands[p.odata[ina].oper]+"</td><td>"+p.odata[ina].text+"</td></tr></table></a></li>"}}str+="</ul>";$("body").append(str);$("#sopt_menu").addClass("ui-menu "+classes.menu_widget);$("#sopt_menu > li > a").hover(function(){$(this).addClass(common.hover)},function(){$(this).removeClass(common.hover)}).click(function(){var v=$(this).attr("value"),oper=$(this).attr("oper");$($t).triggerHandler("jqGridToolbarSelectOper",[v,oper,elem]);$("#sopt_menu").hide();$(elem).text(oper).attr("soper",v);if(p.autosearch===true){var inpelm=$(elem).parent().next().children()[0];if($(inpelm).val()||v==="nu"||v==="nn"){triggerToolbar()}}})};var tr=$("<tr class='ui-search-toolbar' role='row'></tr>"),timeoutHnd,rules,filterobj;if(p.restoreFromFilters){filterobj=$t.p.postData.filters;if(filterobj){if(typeof filterobj==="string"){filterobj=$.jgrid.parse(filterobj)}rules=filterobj.rules.length?filterobj.rules:false}}$.each($t.p.colModel,function(ci){var cm=this,soptions,select="",sot="=",so,i,st,csv,df,elem,restores,th=$("<th role='columnheader' class='"+base.headerBox+" ui-th-"+$t.p.direction+"' id='gsh_"+$t.p.id+"_"+cm.name+"' ></th>"),thd=$("<div></div>"),stbl=$("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''></td><td class='ui-search-input' headers=''></td><td class='ui-search-clear' headers=''></td></tr></table>");if(this.hidden===true){$(th).css("display","none")}this.search=this.search===false?false:true;if(this.stype===undefined){this.stype="text"}this.searchoptions=this.searchoptions||{};if(this.searchoptions.searchOperMenu===undefined){this.searchoptions.searchOperMenu=true}soptions=$.extend({},this.searchoptions,{name:cm.index||cm.name,id:"gs_"+$t.p.idPrefix+cm.name,oper:"search"});if(this.search){if(p.restoreFromFilters&&rules){restores=false;for(var is=0;is<rules.length;is++){if(rules[is].field){var snm=cm.index||cm.name;if(snm===rules[is].field){restores=rules[is];break}}}}if(p.searchOperators){so=(soptions.sopt)?soptions.sopt[0]:cm.stype==="select"?"eq":p.defaultSearch;if(p.restoreFromFilters&&restores){so=restores.op}for(i=0;i<p.odata.length;i++){if(p.odata[i].oper===so){sot=p.operands[so]||"";break}}st=soptions.searchtitle!=null?soptions.searchtitle:p.operandTitle;select=this.searchoptions.searchOperMenu?"<a title='"+st+"' style='padding-right: 0.5em;' soper='"+so+"' class='soptclass' colname='"+this.name+"'>"+sot+"</a>":""}$("td:eq(0)",stbl).attr("colindex",ci).append(select);if(soptions.clearSearch===undefined){soptions.clearSearch=true}if(soptions.clearSearch){csv=p.resetTitle||"Clear Search Value";$("td:eq(2)",stbl).append("<a title='"+csv+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+p.resetIcon+"</a>")}else{$("td:eq(2)",stbl).hide()}if(this.surl){soptions.dataUrl=this.surl}df="";if(soptions.defaultValue){df=$.isFunction(soptions.defaultValue)?soptions.defaultValue.call($t):soptions.defaultValue}if(p.restoreFromFilters&&restores){df=restores.data}elem=$.jgrid.createEl.call($t,this.stype,soptions,df,false,$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));$(elem).addClass(classes.srInput);$("td:eq(1)",stbl).append(elem);$(thd).append(stbl);if(soptions.dataEvents==null){soptions.dataEvents=[]}switch(this.stype){case"select":if(p.autosearch===true){soptions.dataEvents.push({type:"change",fn:function(){triggerToolbar();return false}})}break;case"text":if(p.autosearch===true){if(p.searchOnEnter){soptions.dataEvents.push({type:"keypress",fn:function(e){var key=e.charCode||e.keyCode||0;if(key===13){triggerToolbar();return false}return this}})}else{soptions.dataEvents.push({type:"keydown",fn:function(e){var key=e.which;switch(key){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:if(timeoutHnd){clearTimeout(timeoutHnd)}timeoutHnd=setTimeout(function(){triggerToolbar()},p.autosearchDelay)}}})}}break}$.jgrid.bindEv.call($t,elem,soptions)}$(th).append(thd);$(tr).append(th);if(!p.searchOperators||select===""){$("td:eq(0)",stbl).hide()}});$("table thead",$t.grid.hDiv).append(tr);if(p.searchOperators){$(".soptclass",tr).click(function(e){var offset=$(this).offset(),left=(offset.left),top=(offset.top);buildRuleMenu(this,left,top);e.stopPropagation()});$("body").on("click",function(e){if(e.target.className!=="soptclass"){$("#sopt_menu").remove()}})}$(".clearsearchclass",tr).click(function(){var ptr=$(this).parents("tr:first"),coli=parseInt($("td.ui-search-oper",ptr).attr("colindex"),10),sval=$.extend({},$t.p.colModel[coli].searchoptions||{}),dval=sval.defaultValue?sval.defaultValue:"",elem;if($t.p.colModel[coli].stype==="select"){elem=$("td.ui-search-input select",ptr);if(dval){elem.val(dval)}else{elem[0].selectedIndex=0}}else{elem=$("td.ui-search-input input",ptr);elem.val(dval)}$($t).triggerHandler("jqGridToolbarClearVal",[elem[0],coli,sval,dval]);if($.isFunction(p.onClearSearchValue)){p.onClearSearchValue.call($t,elem[0],coli,sval,dval)}if(p.autosearch===true){triggerToolbar()}});this.p.filterToolbar=true;this.triggerToolbar=triggerToolbar;this.clearToolbar=clearToolbar;this.toggleToolbar=toggleToolbar})},destroyFilterToolbar:function(){return this.each(function(){if(!this.p.filterToolbar){return}this.triggerToolbar=null;this.clearToolbar=null;this.toggleToolbar=null;this.p.filterToolbar=false;$(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove()})},refreshFilterToolbar:function(p){p=$.extend(true,{filters:"",onClearVal:null,onSetVal:null},p||{});return this.each(function(){var $t=this,cm=$t.p.colModel,i,l=$t.p.colModel.length,searchitem,filters,rules,rule,ssfield=[],ia;if(!$t.p.filterToolbar){return}for(i=0;i<l;i++){ssfield.push(cm[i].name);searchitem=$("#gs_"+$t.p.idPrefix+$.jgrid.jqID(cm[i].name));switch(cm[i].stype){case"select":case"text":searchitem.val("");break}if($.isFunction(p.onClearVal)){p.onClearVal.call($t,searchitem,cm[i].name)}}function setrules(filter){if(filter&&filter.rules){rules=filter.rules;l=rules.length;for(i=0;i<l;i++){rule=rules[i];ia=$.inArray(rule.field,ssfield);if(ia!==-1){searchitem=$("#gs_"+$t.p.idPrefix+$.jgrid.jqID(cm[ia].name));if(searchitem.length>0){if(cm[ia].stype==="select"){searchitem.find("option[value='"+$.jgrid.jqID(rule.data)+"']").prop("selected",true)}else{if(cm[ia].stype==="text"){searchitem.val(rule.data)}}if($.isFunction(p.onSetVal)){p.onSetVal.call($t,searchitem,cm[ia].name)}}}}if(filter.groups){for(var k=0;k<filter.groups.length;k++){setrules(filter.groups[k])}}}}if(typeof(p.filters)==="string"&&p.filters.length){filters=$.jgrid.parse(p.filters)}if($.isPlainObject(filters)){setrules(filters)}})},searchGrid:function(p){var regional=$.jgrid.getRegional(this[0],"search");p=$.extend(true,{recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,searchOnEnter:false,multipleSearch:false,multipleGroup:false,top:0,left:0,jqModal:true,modal:false,resize:true,width:450,height:"auto",dataheight:"auto",showQuery:false,errorcheck:true,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:true,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:false,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},regional,p||{});return this.each(function(){var $t=this;if(!$t.grid){return}var fid="fbox_"+$t.p.id,showFrm=true,mustReload=true,IDs={themodal:"searchmod"+fid,modalhead:"searchhd"+fid,modalcontent:"searchcnt"+fid,scrollelm:fid},defaultFilters=$t.p.postData[p.sFilter],fl,classes=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].filter,common=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].common;p.styleUI=$t.p.styleUI;if(typeof defaultFilters==="string"){defaultFilters=$.jgrid.parse(defaultFilters)}if(p.recreateFilter===true){$("#"+$.jgrid.jqID(IDs.themodal)).remove()}function showFilter(_filter){showFrm=$($t).triggerHandler("jqGridFilterBeforeShow",[_filter]);if(showFrm===undefined){showFrm=true}if(showFrm&&$.isFunction(p.beforeShowSearch)){showFrm=p.beforeShowSearch.call($t,_filter)}if(showFrm){$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(fid),jqm:p.jqModal,modal:p.modal,overlay:p.overlay,toTop:p.toTop});$($t).triggerHandler("jqGridFilterAfterShow",[_filter]);if($.isFunction(p.afterShowSearch)){p.afterShowSearch.call($t,_filter)}}}if($("#"+$.jgrid.jqID(IDs.themodal))[0]!==undefined){showFilter($("#fbox_"+$.jgrid.jqID($t.p.id)))}else{var fil=$("<div><div id='"+fid+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+$.jgrid.jqID($t.p.id)),align="left",butleft="";if($t.p.direction==="rtl"){align="right";butleft=" style='text-align:left'";fil.attr("dir","rtl")}var columns=$.extend([],$t.p.colModel),bS="<a id='"+fid+"_search' class='fm-button "+common.button+" fm-button-icon-right ui-search'><span class='"+common.icon_base+" "+classes.icon_search+"'></span>"+p.Find+"</a>",bC="<a id='"+fid+"_reset' class='fm-button "+common.button+" fm-button-icon-left ui-reset'><span class='"+common.icon_base+" "+classes.icon_reset+"'></span>"+p.Reset+"</a>",bQ="",tmpl="",colnm,found=false,bt,cmi=-1;if(p.showQuery){bQ="<a id='"+fid+"_query' class='fm-button "+common.button+" fm-button-icon-left'><span class='"+common.icon_base+" "+classes.icon_query+"'></span>Query</a>"}if(!p.columns.length){$.each(columns,function(i,n){if(!n.label){n.label=$t.p.colNames[i]}if(!found){var searchable=(n.search===undefined)?true:n.search,hidden=(n.hidden===true),ignoreHiding=(n.searchoptions&&n.searchoptions.searchhidden===true);if((ignoreHiding&&searchable)||(searchable&&!hidden)){found=true;colnm=n.index||n.name;cmi=i}}})}else{columns=p.columns;cmi=0;colnm=columns[0].index||columns[0].name}if((!defaultFilters&&colnm)||p.multipleSearch===false){var cmop="eq";if(cmi>=0&&columns[cmi].searchoptions&&columns[cmi].searchoptions.sopt){cmop=columns[cmi].searchoptions.sopt[0]}else{if(p.sopt&&p.sopt.length){cmop=p.sopt[0]}}defaultFilters={groupOp:"AND",rules:[{field:colnm,op:cmop,data:""}]}}found=false;if(p.tmplNames&&p.tmplNames.length){found=true;tmpl="<tr><td class='ui-search-label'>"+p.tmplLabel+"</td>";tmpl+="<td><select class='ui-template "+classes.srSelect+"'>";tmpl+="<option value='default'>Default</option>";$.each(p.tmplNames,function(i,n){tmpl+="<option value='"+i+"'>"+n+"</option>"});tmpl+="</select></td></tr>"}bt="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+fid+"_2'><tbody><tr><td colspan='2'><hr class='"+common.content+"' style='margin:1px'/></td></tr>"+tmpl+"<tr><td class='EditButton' style='text-align:"+align+"'>"+bC+"</td><td class='EditButton' "+butleft+">"+bQ+bS+"</td></tr></tbody></table>";fid=$.jgrid.jqID(fid);$("#"+fid).jqFilter({columns:columns,sortStrategy:p.sortStrategy,filter:p.loadDefaults?defaultFilters:null,showQuery:p.showQuery,errorcheck:p.errorcheck,sopt:p.sopt,groupButton:p.multipleGroup,ruleButtons:p.multipleSearch,uniqueSearchFields:p.uniqueSearchFields,afterRedraw:p.afterRedraw,ops:p.odata,operands:p.operands,ajaxSelectOptions:$t.p.ajaxSelectOptions,groupOps:p.groupOps,onChange:function(){if(this.p.showQuery){$(".query",this).html(this.toUserFriendlyString())}if($.isFunction(p.afterChange)){p.afterChange.call($t,$("#"+fid),p)}},direction:$t.p.direction,id:$t.p.id});fil.append(bt);if(found&&p.tmplFilters&&p.tmplFilters.length){$(".ui-template",fil).bind("change",function(){var curtempl=$(this).val();if(curtempl==="default"){$("#"+fid).jqFilter("addFilter",defaultFilters)}else{$("#"+fid).jqFilter("addFilter",p.tmplFilters[parseInt(curtempl,10)])}return false})}if(p.multipleGroup===true){p.multipleSearch=true}$($t).triggerHandler("jqGridFilterInitialize",[$("#"+fid)]);if($.isFunction(p.onInitializeSearch)){p.onInitializeSearch.call($t,$("#"+fid))}p.gbox="#gbox_"+fid;if(p.layer){$.jgrid.createModal(IDs,fil,p,"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0],"#"+$.jgrid.jqID(p.layer),{position:"relative"})}else{$.jgrid.createModal(IDs,fil,p,"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0])}if(p.searchOnEnter||p.closeOnEscape){$("#"+$.jgrid.jqID(IDs.themodal)).keydown(function(e){var $target=$(e.target);if(p.searchOnEnter&&e.which===13&&!$target.hasClass("add-group")&&!$target.hasClass("add-rule")&&!$target.hasClass("delete-group")&&!$target.hasClass("delete-rule")&&(!$target.hasClass("fm-button")||!$target.is("[id$=_query]"))){$("#"+fid+"_search").click();return false}if(p.closeOnEscape&&e.which===27){$("#"+$.jgrid.jqID(IDs.modalhead)).find(".ui-jqdialog-titlebar-close").click();return false}})}if(bQ){$("#"+fid+"_query").bind("click",function(){$(".queryresult",fil).toggle();return false})}if(p.stringResult===undefined){p.stringResult=p.multipleSearch}$("#"+fid+"_search").bind("click",function(){var sdata={},res,filters;fl=$("#"+fid);fl.find(".input-elm:focus").change();filters=fl.jqFilter("filterData");if(p.errorcheck){fl[0].hideError();if(!p.showQuery){fl.jqFilter("toSQLString")}if(fl[0].p.error){fl[0].showError();return false}}if(p.stringResult){try{res=JSON.stringify(filters)}catch(e2){}if(typeof res==="string"){sdata[p.sFilter]=res;$.each([p.sField,p.sValue,p.sOper],function(){sdata[this]=""})}}else{if(p.multipleSearch){sdata[p.sFilter]=filters;$.each([p.sField,p.sValue,p.sOper],function(){sdata[this]=""})}else{sdata[p.sField]=filters.rules[0].field;sdata[p.sValue]=filters.rules[0].data;sdata[p.sOper]=filters.rules[0].op;sdata[p.sFilter]=""}}$t.p.search=true;$.extend($t.p.postData,sdata);mustReload=$($t).triggerHandler("jqGridFilterSearch");if(mustReload===undefined){mustReload=true}if(mustReload&&$.isFunction(p.onSearch)){mustReload=p.onSearch.call($t,$t.p.filters)}if(mustReload!==false){$($t).trigger("reloadGrid",[{page:1}])}if(p.closeAfterSearch){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:p.jqModal,onClose:p.onClose})}return false});$("#"+fid+"_reset").bind("click",function(){var sdata={},fl=$("#"+fid);$t.p.search=false;$t.p.resetsearch=true;if(p.multipleSearch===false){sdata[p.sField]=sdata[p.sValue]=sdata[p.sOper]=""}else{sdata[p.sFilter]=""}fl[0].resetFilter();if(found){$(".ui-template",fil).val("default")}$.extend($t.p.postData,sdata);mustReload=$($t).triggerHandler("jqGridFilterReset");if(mustReload===undefined){mustReload=true}if(mustReload&&$.isFunction(p.onReset)){mustReload=p.onReset.call($t)}if(mustReload!==false){$($t).trigger("reloadGrid",[{page:1}])}if(p.closeAfterReset){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:p.jqModal,onClose:p.onClose})}return false});showFilter($("#"+fid));$(".fm-button:not(."+common.disabled+")",fil).hover(function(){$(this).addClass(common.hover)},function(){$(this).removeClass(common.hover)})}})},filterInput:function(val,p){p=$.extend(true,{defaultSearch:"cn",groupOp:"OR",searchAll:false,beforeSearch:null,afterSearch:null},p||{});return this.each(function(){var $t=this;if(!$t.grid){return}var nm,sop,ruleGroup='{"groupOp":"'+p.groupOp+'","rules":[',gi=0,so;val+="";if(!$t.p.datatype==="local"){return}$.each($t.p.colModel,function(){nm=this.index||this.name;sop=this.searchoptions||{};so=p.defaultSearch?p.defaultSearch:(sop.sopt)?sop.sopt[0]:p.defaultSearch;this.search=this.search===false?false:true;if(this.search||p.searchAll){if(gi>0){ruleGroup+=","}ruleGroup+='{"field":"'+nm+'",';ruleGroup+='"op":"'+so+'",';ruleGroup+='"data":"'+val.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';gi++}});ruleGroup+="]}";$.extend($t.p.postData,{filters:ruleGroup});$.each(["searchField","searchString","searchOper"],function(i,n){if($t.p.postData.hasOwnProperty(n)){delete $t.p.postData[n]}});var bsr=$($t).triggerHandler("jqGridFilterInputBeforeSearch")==="stop"?true:false;if(!bsr&&$.isFunction(p.beforeSearch)){bsr=p.beforeSearch.call($t)}if(!bsr){$($t).jqGrid("setGridParam",{search:true}).trigger("reloadGrid",[{page:1}])}$($t).triggerHandler("jqGridFilterInputAfterSearch");if($.isFunction(p.afterSearch)){p.afterSearch.call($t)}})}});var rp_ge={};$.jgrid.extend({editGridRow:function(rowid,p){var regional=$.jgrid.getRegional(this[0],"edit"),currstyle=this[0].p.styleUI,styles=$.jgrid.styleUI[currstyle].formedit,commonstyle=$.jgrid.styleUI[currstyle].common;p=$.extend(true,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true,overlayClass:commonstyle.overlay,removemodal:true,form:"edit",template:null,focusField:true},regional,p||{});rp_ge[$(this)[0].p.id]=p;return this.each(function(){var $t=this;if(!$t.grid||!rowid){return}$t.p.savedData={};var gID=$t.p.id,frmgr="FrmGrid_"+gID,frmtborg="TblGrid_"+gID,frmtb="#"+$.jgrid.jqID(frmtborg),frmtb2,IDs={themodal:"editmod"+gID,modalhead:"edithd"+gID,modalcontent:"editcnt"+gID,scrollelm:frmgr},showFrm=true,maxCols=1,maxRows=0,postdata,diff,frmoper,templ=typeof rp_ge[$t.p.id].template==="string"&&rp_ge[$t.p.id].template.length>0,errors=$.jgrid.getRegional(this,"errors");rp_ge[$t.p.id].styleUI=$t.p.styleUI||"jQueryUI";if($.jgrid.isMobile()){rp_ge[$t.p.id].resize=false}if(rowid==="new"){rowid="_empty";frmoper="add";p.caption=rp_ge[$t.p.id].addCaption}else{p.caption=rp_ge[$t.p.id].editCaption;frmoper="edit"}if(!p.recreateForm){if($($t).data("formProp")){$.extend(rp_ge[$(this)[0].p.id],$($t).data("formProp"))}}var closeovrl=true;if(p.checkOnUpdate&&p.jqModal&&!p.modal){closeovrl=false}function getFormData(){var a2={},i;$(frmtb).find(".FormElement").each(function(){var celm=$(".customelement",this);if(celm.length){var elem=celm[0],nm=$(elem).attr("name");$.each($t.p.colModel,function(){if(this.name===nm&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{postdata[nm]=this.editoptions.custom_value.call($t,$("#"+$.jgrid.jqID(nm),frmtb),"get");if(postdata[nm]===undefined){throw"e1"}}catch(e){if(e==="e1"){$.jgrid.info_dialog(errors.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.novalue,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}else{$.jgrid.info_dialog(errors.errcap,e.message,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}}return true}})}else{switch($(this).get(0).type){case"checkbox":if($(this).is(":checked")){postdata[this.name]=$(this).val()}else{var ofv=$(this).attr("offval");postdata[this.name]=ofv}break;case"select-one":postdata[this.name]=$(this).val();break;case"select-multiple":postdata[this.name]=$(this).val();postdata[this.name]=postdata[this.name]?postdata[this.name].join(","):"";break;case"password":case"text":case"textarea":case"button":postdata[this.name]=$(this).val();break;case"radio":if(a2.hasOwnProperty(this.name)){return true}else{a2[this.name]=($(this).attr("offval")===undefined)?"off":$(this).attr("offval")}break}if($t.p.autoencode){postdata[this.name]=$.jgrid.htmlEncode(postdata[this.name])}}});for(i in a2){if(a2.hasOwnProperty(i)){var val=$('input[name="'+i+'"]:checked',frmtb).val();postdata[i]=(val!==undefined)?val:a2[i];if($t.p.autoencode){postdata[i]=$.jgrid.htmlEncode(postdata[i])}}}return true}function createData(rowid,obj,tb,maxcols){var nm,hc,trdata,cnt=0,tmp,dc,elc,retpos=[],ind=false,tdtmpl="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",tmpl="",i,ffld;for(i=1;i<=maxcols;i++){tmpl+=tdtmpl}if(rowid!=="_empty"){ind=$(obj).jqGrid("getInd",rowid)}$(obj.p.colModel).each(function(i){nm=this.name;if(this.editrules&&this.editrules.edithidden===true){hc=false}else{hc=this.hidden===true?true:false}dc=hc?"style='display:none'":"";if(nm!=="cb"&&nm!=="subgrid"&&this.editable===true&&nm!=="rn"){if(ind===false){tmp=""}else{if(nm===obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$("td[role='gridcell']:eq("+i+")",obj.rows[ind]).text()}else{try{tmp=$.unformat.call(obj,$("td[role='gridcell']:eq("+i+")",obj.rows[ind]),{rowId:rowid,colModel:this},i)}catch(_){tmp=(this.edittype&&this.edittype==="textarea")?$("td[role='gridcell']:eq("+i+")",obj.rows[ind]).text():$("td[role='gridcell']:eq("+i+")",obj.rows[ind]).html()}if(!tmp||tmp==="&nbsp;"||tmp==="&#160;"||(tmp.length===1&&tmp.charCodeAt(0)===160)){tmp=""}}}var opt=$.extend({},this.editoptions||{},{id:nm,name:nm,rowId:rowid,oper:"edit"}),frmopt=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},this.formoptions||{}),rp=parseInt(frmopt.rowpos,10)||cnt+1,cp=parseInt((parseInt(frmopt.colpos,10)||1)*2,10);if(rowid==="_empty"&&opt.defaultValue){tmp=$.isFunction(opt.defaultValue)?opt.defaultValue.call($t):opt.defaultValue}if(!this.edittype){this.edittype="text"}if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp)}elc=$.jgrid.createEl.call($t,this.edittype,opt,tmp,false,$.extend({},$.jgrid.ajaxOptions,obj.p.ajaxSelectOptions||{}));if(this.edittype==="select"){tmp=$(elc).val();if($(elc).get(0).type==="select-multiple"&&tmp){tmp=tmp.join(",")}}if(this.edittype==="checkbox"){if($(elc).is(":checked")){tmp=$(elc).val()}else{tmp=$(elc).attr("offval")}}$(elc).addClass("FormElement");if($.inArray(this.edittype,["text","textarea","password","select"])>-1){$(elc).addClass(styles.inputClass)}ffld=true;if(templ){var ftmplfld=$(frm).find("#"+nm);if(ftmplfld.length){ftmplfld.replaceWith(elc)}else{ffld=false}}else{trdata=$(tb).find("tr[rowpos="+rp+"]");if(frmopt.rowabove){var newdata=$("<tr><td class='contentinfo' colspan='"+(maxcols*2)+"'>"+frmopt.rowcontent+"</td></tr>");$(tb).append(newdata);newdata[0].rp=rp}if(trdata.length===0){trdata=$("<tr "+dc+" rowpos='"+rp+"'></tr>").addClass("FormData").attr("id","tr_"+nm);$(trdata).append(tmpl);$(tb).append(trdata);trdata[0].rp=rp}$("td:eq("+(cp-2)+")",trdata[0]).html("<label for='"+nm+"'>"+(frmopt.label===undefined?obj.p.colNames[i]:frmopt.label)+"</label>");$("td:eq("+(cp-1)+")",trdata[0]).append(frmopt.elmprefix).append(elc).append(frmopt.elmsuffix)}if((rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate)&&ffld){$t.p.savedData[nm]=tmp}if(this.edittype==="custom"&&$.isFunction(opt.custom_value)){opt.custom_value.call($t,$("#"+nm,frmgr),"set",tmp)}$.jgrid.bindEv.call($t,elc,opt);retpos[cnt]=i;cnt++}});if(cnt>0){var idrow;if(templ){idrow="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+obj.p.id+"_id' value='"+rowid+"'/>";$(frm).append(idrow)}else{idrow=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(maxcols*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+obj.p.id+"_id' value='"+rowid+"'/></td></tr>");idrow[0].rp=cnt+999;$(tb).append(idrow)}if(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){$t.p.savedData[obj.p.id+"_id"]=rowid}}return retpos}function fillData(rowid,obj,fmid){var nm,cnt=0,tmp,fld,opt,vl,vlc;if(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){$t.p.savedData={};$t.p.savedData[obj.p.id+"_id"]=rowid}var cm=obj.p.colModel;if(rowid==="_empty"){$(cm).each(function(){nm=this.name;opt=$.extend({},this.editoptions||{});fld=$("#"+$.jgrid.jqID(nm),fmid);if(fld&&fld.length&&fld[0]!==null){vl="";if(this.edittype==="custom"&&$.isFunction(opt.custom_value)){opt.custom_value.call($t,$("#"+nm,fmid),"set",vl)}else{if(opt.defaultValue){vl=$.isFunction(opt.defaultValue)?opt.defaultValue.call($t):opt.defaultValue;if(fld[0].type==="checkbox"){vlc=vl.toLowerCase();if(vlc.search(/(false|f|0|no|n|off|undefined)/i)<0&&vlc!==""){fld[0].checked=true;fld[0].defaultChecked=true;fld[0].value=vl}else{fld[0].checked=false;fld[0].defaultChecked=false}}else{fld.val(vl)}}else{if(fld[0].type==="checkbox"){fld[0].checked=false;fld[0].defaultChecked=false;vl=$(fld).attr("offval")}else{if(fld[0].type&&fld[0].type.substr(0,6)==="select"){fld[0].selectedIndex=0}else{fld.val(vl)}}}}if(rp_ge[$t.p.id].checkOnSubmit===true||rp_ge[$t.p.id].checkOnUpdate){$t.p.savedData[nm]=vl}}});$("#id_g",fmid).val(rowid);return}var tre=$(obj).jqGrid("getInd",rowid,true);if(!tre){return}$('td[role="gridcell"]',tre).each(function(i){nm=cm[i].name;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"&&cm[i].editable===true){if(nm===obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$(this).text()}else{try{tmp=$.unformat.call(obj,$(this),{rowId:rowid,colModel:cm[i]},i)}catch(_){tmp=cm[i].edittype==="textarea"?$(this).text():$(this).html()}}if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp)}if(rp_ge[$t.p.id].checkOnSubmit===true||rp_ge[$t.p.id].checkOnUpdate){$t.p.savedData[nm]=tmp}nm=$.jgrid.jqID(nm);switch(cm[i].edittype){case"password":case"text":case"button":case"image":case"textarea":if(tmp==="&nbsp;"||tmp==="&#160;"||(tmp.length===1&&tmp.charCodeAt(0)===160)){tmp=""}$("#"+nm,fmid).val(tmp);break;case"select":var opv=tmp.split(",");opv=$.map(opv,function(n){return $.trim(n)});$("#"+nm+" option",fmid).each(function(){if(!cm[i].editoptions.multiple&&($.trim(tmp)===$.trim($(this).text())||opv[0]===$.trim($(this).text())||opv[0]===$.trim($(this).val()))){this.selected=true}else{if(cm[i].editoptions.multiple){if($.inArray($.trim($(this).text()),opv)>-1||$.inArray($.trim($(this).val()),opv)>-1){this.selected=true}else{this.selected=false}}else{this.selected=false}}});if(rp_ge[$t.p.id].checkOnSubmit===true||rp_ge[$t.p.id].checkOnUpdate){tmp=$("#"+nm,fmid).val();if(cm[i].editoptions.multiple){tmp=tmp.join(",")}$t.p.savedData[nm]=tmp}break;case"checkbox":tmp=String(tmp);if(cm[i].editoptions&&cm[i].editoptions.value){var cb=cm[i].editoptions.value.split(":");if(cb[0]===tmp){$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]({checked:true,defaultChecked:true})}else{$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]({checked:false,defaultChecked:false})}}else{tmp=tmp.toLowerCase();if(tmp.search(/(false|f|0|no|n|off|undefined)/i)<0&&tmp!==""){$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]("checked",true);$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]("defaultChecked",true)}else{$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]("checked",false);$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]("defaultChecked",false)}}if(rp_ge[$t.p.id].checkOnSubmit===true||rp_ge[$t.p.id].checkOnUpdate){if($("#"+nm,fmid).is(":checked")){tmp=$("#"+nm,fmid).val()}else{tmp=$("#"+nm,fmid).attr("offval")}$t.p.savedData[nm]=tmp}break;case"custom":try{if(cm[i].editoptions&&$.isFunction(cm[i].editoptions.custom_value)){cm[i].editoptions.custom_value.call($t,$("#"+nm,fmid),"set",tmp)}else{throw"e1"}}catch(e){if(e==="e1"){$.jgrid.info_dialog(errors.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.nodefined,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}else{$.jgrid.info_dialog(errors.errcap,e.message,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}}break}cnt++}});if(cnt>0){$("#id_g",frmtb).val(rowid);if(rp_ge[$t.p.id].checkOnSubmit===true||rp_ge[$t.p.id].checkOnUpdate){$t.p.savedData[obj.p.id+"_id"]=rowid}}}function setNulls(){$.each($t.p.colModel,function(i,n){if(n.editoptions&&n.editoptions.NullIfEmpty===true){if(postdata.hasOwnProperty(n.name)&&postdata[n.name]===""){postdata[n.name]="null"}}})}function postIt(){var copydata,ret=[true,"",""],onCS={},opers=$t.p.prmNames,idname,oper,key,selr,i,url;var retvals=$($t).triggerHandler("jqGridAddEditBeforeCheckValues",[$(frmgr),frmoper]);if(retvals&&typeof retvals==="object"){postdata=retvals}if($.isFunction(rp_ge[$t.p.id].beforeCheckValues)){retvals=rp_ge[$t.p.id].beforeCheckValues.call($t,postdata,$(frmgr),frmoper);if(retvals&&typeof retvals==="object"){postdata=retvals}}for(key in postdata){if(postdata.hasOwnProperty(key)){ret=$.jgrid.checkValues.call($t,postdata[key],key);if(ret[0]===false){break}}}setNulls();if(ret[0]){onCS=$($t).triggerHandler("jqGridAddEditClickSubmit",[rp_ge[$t.p.id],postdata,frmoper]);if(onCS===undefined&&$.isFunction(rp_ge[$t.p.id].onclickSubmit)){onCS=rp_ge[$t.p.id].onclickSubmit.call($t,rp_ge[$t.p.id],postdata,frmoper)||{}}ret=$($t).triggerHandler("jqGridAddEditBeforeSubmit",[postdata,$(frmgr),frmoper]);if(ret===undefined){ret=[true,"",""]}if(ret[0]&&$.isFunction(rp_ge[$t.p.id].beforeSubmit)){ret=rp_ge[$t.p.id].beforeSubmit.call($t,postdata,$(frmgr),frmoper)}}if(ret[0]&&!rp_ge[$t.p.id].processing){rp_ge[$t.p.id].processing=true;$("#sData",frmtb+"_2").addClass(commonstyle.active);url=rp_ge[$t.p.id].url||$($t).jqGrid("getGridParam","editurl");oper=opers.oper;idname=url==="clientArray"?$t.p.keyName:opers.id;postdata[oper]=($.trim(postdata[$t.p.id+"_id"])==="_empty")?opers.addoper:opers.editoper;if(postdata[oper]!==opers.addoper){postdata[idname]=postdata[$t.p.id+"_id"]}else{if(postdata[idname]===undefined){postdata[idname]=postdata[$t.p.id+"_id"]}}delete postdata[$t.p.id+"_id"];postdata=$.extend(postdata,rp_ge[$t.p.id].editData,onCS);if($t.p.treeGrid===true){if(postdata[oper]===opers.addoper){selr=$($t).jqGrid("getGridParam","selrow");var tr_par_id=$t.p.treeGridModel==="adjacency"?$t.p.treeReader.parent_id_field:"parent_id";postdata[tr_par_id]=selr}for(i in $t.p.treeReader){if($t.p.treeReader.hasOwnProperty(i)){var itm=$t.p.treeReader[i];if(postdata.hasOwnProperty(itm)){if(postdata[oper]===opers.addoper&&i==="parent_id_field"){continue}delete postdata[itm]}}}}postdata[idname]=$.jgrid.stripPref($t.p.idPrefix,postdata[idname]);var ajaxOptions=$.extend({url:url,type:rp_ge[$t.p.id].mtype,data:$.isFunction(rp_ge[$t.p.id].serializeEditData)?rp_ge[$t.p.id].serializeEditData.call($t,postdata):postdata,complete:function(data,status){var key;$("#sData",frmtb+"_2").removeClass(commonstyle.active);postdata[idname]=$t.p.idPrefix+postdata[idname];if(data.status>=300&&data.status!==304){ret[0]=false;ret[1]=$($t).triggerHandler("jqGridAddEditErrorTextFormat",[data,frmoper]);if($.isFunction(rp_ge[$t.p.id].errorTextFormat)){ret[1]=rp_ge[$t.p.id].errorTextFormat.call($t,data,frmoper)}else{ret[1]=status+" Status: '"+data.statusText+"'. Error code: "+data.status}}else{ret=$($t).triggerHandler("jqGridAddEditAfterSubmit",[data,postdata,frmoper]);if(ret===undefined){ret=[true,"",""]}if(ret[0]&&$.isFunction(rp_ge[$t.p.id].afterSubmit)){ret=rp_ge[$t.p.id].afterSubmit.call($t,data,postdata,frmoper)}}if(ret[0]===false){$(".FormError",frmgr).html(ret[1]);$(".FormError",frmgr).show()}else{if($t.p.autoencode){$.each(postdata,function(n,v){postdata[n]=$.jgrid.htmlDecode(v)})}if(postdata[oper]===opers.addoper){if(!ret[2]){ret[2]=$.jgrid.randId()}if(postdata[idname]==null||postdata[idname]==="_empty"){postdata[idname]=ret[2]}else{ret[2]=postdata[idname]}if(rp_ge[$t.p.id].reloadAfterSubmit){$($t).trigger("reloadGrid")}else{if($t.p.treeGrid===true){$($t).jqGrid("addChildNode",ret[2],selr,postdata)}else{$($t).jqGrid("addRowData",ret[2],postdata,p.addedrow)}}if(rp_ge[$t.p.id].closeAfterAdd){if($t.p.treeGrid!==true){$($t).jqGrid("setSelection",ret[2])}$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}else{if(rp_ge[$t.p.id].clearAfterAdd){fillData("_empty",$t,frmgr)}}}else{if(rp_ge[$t.p.id].reloadAfterSubmit){$($t).trigger("reloadGrid");if(!rp_ge[$t.p.id].closeAfterEdit){setTimeout(function(){$($t).jqGrid("setSelection",postdata[idname])},1000)}}else{if($t.p.treeGrid===true){$($t).jqGrid("setTreeRow",postdata[idname],postdata)}else{$($t).jqGrid("setRowData",postdata[idname],postdata)}}if(rp_ge[$t.p.id].closeAfterEdit){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}}if($.isFunction(rp_ge[$t.p.id].afterComplete)){copydata=data;setTimeout(function(){$($t).triggerHandler("jqGridAddEditAfterComplete",[copydata,postdata,$(frmgr),frmoper]);rp_ge[$t.p.id].afterComplete.call($t,copydata,postdata,$(frmgr),frmoper);copydata=null},500)}if(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){$(frmgr).data("disabled",false);if($t.p.savedData[$t.p.id+"_id"]!=="_empty"){for(key in $t.p.savedData){if($t.p.savedData.hasOwnProperty(key)&&postdata[key]){$t.p.savedData[key]=postdata[key]}}}}}rp_ge[$t.p.id].processing=false;try{$(":input:visible",frmgr)[0].focus()}catch(e){}}},$.jgrid.ajaxOptions,rp_ge[$t.p.id].ajaxEditOptions);if(!ajaxOptions.url&&!rp_ge[$t.p.id].useDataProxy){if($.isFunction($t.p.dataProxy)){rp_ge[$t.p.id].useDataProxy=true}else{ret[0]=false;ret[1]+=" "+errors.nourl}}if(ret[0]){if(rp_ge[$t.p.id].useDataProxy){var dpret=$t.p.dataProxy.call($t,ajaxOptions,"set_"+$t.p.id);if(dpret===undefined){dpret=[true,""]}if(dpret[0]===false){ret[0]=false;ret[1]=dpret[1]||"Error deleting the selected row!"}else{if(ajaxOptions.data.oper===opers.addoper&&rp_ge[$t.p.id].closeAfterAdd){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}if(ajaxOptions.data.oper===opers.editoper&&rp_ge[$t.p.id].closeAfterEdit){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}}}else{if(ajaxOptions.url==="clientArray"){rp_ge[$t.p.id].reloadAfterSubmit=false;postdata=ajaxOptions.data;ajaxOptions.complete({status:200,statusText:""},"")}else{$.ajax(ajaxOptions)}}}}if(ret[0]===false){$(".FormError",frmgr).html(ret[1]);$(".FormError",frmgr).show()}}function compareData(nObj,oObj){var ret=false,key;ret=!($.isPlainObject(nObj)&&$.isPlainObject(oObj)&&Object.getOwnPropertyNames(nObj).length===Object.getOwnPropertyNames(oObj).length);if(!ret){for(key in oObj){if(oObj.hasOwnProperty(key)){if(nObj.hasOwnProperty(key)){if(nObj[key]!==oObj[key]){ret=true;break}}else{ret=true;break}}}}return ret}function checkUpdates(){var stat=true;$(".FormError",frmgr).hide();if(rp_ge[$t.p.id].checkOnUpdate){postdata={};getFormData();diff=compareData(postdata,$t.p.savedData);if(diff){$(frmgr).data("disabled",true);$(".confirm","#"+IDs.themodal).show();stat=false}}return stat}function restoreInline(){var i;if(rowid!=="_empty"&&$t.p.savedRow!==undefined&&$t.p.savedRow.length>0&&$.isFunction($.fn.jqGrid.restoreRow)){for(i=0;i<$t.p.savedRow.length;i++){if($t.p.savedRow[i].id===rowid){$($t).jqGrid("restoreRow",rowid);break}}}}function updateNav(cr,posarr){var totr=posarr[1].length-1;if(cr===0){$("#pData",frmtb2).addClass(commonstyle.disabled)}else{if(posarr[1][cr-1]!==undefined&&$("#"+$.jgrid.jqID(posarr[1][cr-1])).hasClass(commonstyle.disabled)){$("#pData",frmtb2).addClass(commonstyle.disabled)}else{$("#pData",frmtb2).removeClass(commonstyle.disabled)}}if(cr===totr){$("#nData",frmtb2).addClass(commonstyle.disabled)}else{if(posarr[1][cr+1]!==undefined&&$("#"+$.jgrid.jqID(posarr[1][cr+1])).hasClass(commonstyle.disabled)){$("#nData",frmtb2).addClass(commonstyle.disabled)}else{$("#nData",frmtb2).removeClass(commonstyle.disabled)}}}function getCurrPos(){var rowsInGrid=$($t).jqGrid("getDataIDs"),selrow=$("#id_g",frmtb).val(),pos=$.inArray(selrow,rowsInGrid);return[pos,rowsInGrid]}function parseTemplate(template){var tmpl="";if(typeof template==="string"){tmpl=template.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(m,i){return'<span id="'+i+'" ></span>'})}return tmpl}function syncSavedData(){if(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){var a1=[],a2={};a1=$.map($t.p.savedData,function(v,i){return i});$(".FormElement",frm).each(function(){if(a1.indexOf(this.name)===-1){var tv=$(this).val(),tt=$(this).get(0).type;if(tt==="checkbox"){if(!$(this).is(":checked")){tv=$(this).attr("offval")}}else{if(tt==="select-multiple"){tv=tv.join(",")}else{if(tt==="radio"){if(a2.hasOwnProperty(this.name)){return true}else{a2[this.name]=($(this).attr("offval")===undefined)?"off":$(this).attr("offval")}}}}$t.p.savedData[this.name]=tv}});for(var i in a2){if(a2.hasOwnProperty(i)){var val=$('input[name="'+i+'"]:checked',frm).val();$t.p.savedData[i]=(val!==undefined)?val:a2[i]}}}}var dh=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",dw=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",frm=$("<form name='FormPost' id='"+frmgr+"' class='FormGrid' onSubmit='return false;' style='width:"+dw+";height:"+dh+";'></form>").data("disabled",false),tbl;if(templ){tbl=parseTemplate(rp_ge[$(this)[0].p.id].template);frmtb2=frmtb}else{tbl=$("<table id='"+frmtborg+"' class='EditTable ui-common-table'><tbody></tbody></table>");frmtb2=frmtb+"_2"}frmgr="#"+$.jgrid.jqID(frmgr);$(frm).append("<div class='FormError "+commonstyle.error+"' style='display:none;'></div>");$(frm).append("<div class='tinfo topinfo'>"+rp_ge[$t.p.id].topinfo+"</div>");$($t.p.colModel).each(function(){var fmto=this.formoptions;maxCols=Math.max(maxCols,fmto?fmto.colpos||0:0);maxRows=Math.max(maxRows,fmto?fmto.rowpos||0:0)});$(frm).append(tbl);showFrm=$($t).triggerHandler("jqGridAddEditBeforeInitData",[frm,frmoper]);if(showFrm===undefined){showFrm=true}if(showFrm&&$.isFunction(rp_ge[$t.p.id].beforeInitData)){showFrm=rp_ge[$t.p.id].beforeInitData.call($t,frm,frmoper)}if(showFrm===false){return}restoreInline();createData(rowid,$t,tbl,maxCols);var rtlb=$t.p.direction==="rtl"?true:false,bp=rtlb?"nData":"pData",bn=rtlb?"pData":"nData";var bP="<a id='"+bp+"' class='fm-button "+commonstyle.button+"'><span class='"+commonstyle.icon_base+" "+styles.icon_prev+"'></span></a>",bN="<a id='"+bn+"' class='fm-button "+commonstyle.button+"'><span class='"+commonstyle.icon_base+" "+styles.icon_next+"'></span></a>",bS="<a id='sData' class='fm-button "+commonstyle.button+"'>"+p.bSubmit+"</a>",bC="<a id='cData' class='fm-button "+commonstyle.button+"'>"+p.bCancel+"</a>";var bt="<table style='height:auto' class='EditTable ui-common-table' id='"+frmtborg+"_2'><tbody><tr><td colspan='2'><hr class='"+commonstyle.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(rtlb?bN+bP:bP+bN)+"</td><td class='EditButton'>"+bS+bC+"</td></tr>";bt+="</tbody></table>";if(maxRows>0){var sd=[];$.each($(tbl)[0].rows,function(i,r){sd[i]=r});sd.sort(function(a,b){if(a.rp>b.rp){return 1}if(a.rp<b.rp){return -1}return 0});$.each(sd,function(index,row){$("tbody",tbl).append(row)})}p.gbox="#gbox_"+$.jgrid.jqID(gID);var cle=false;if(p.closeOnEscape===true){p.closeOnEscape=false;cle=true}var tms;if(templ){$(frm).find("#pData").replaceWith(bP);$(frm).find("#nData").replaceWith(bN);$(frm).find("#sData").replaceWith(bS);$(frm).find("#cData").replaceWith(bC);tms=$("<div id="+frmtborg+"></div>").append(frm)}else{tms=$("<div></div>").append(frm).append(bt)}$(frm).append("<div class='binfo topinfo bottominfo'>"+rp_ge[$t.p.id].bottominfo+"</div>");$.jgrid.createModal(IDs,tms,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0]);if(rtlb){$("#pData, #nData",frmtb+"_2").css("float","right");$(".EditButton",frmtb+"_2").css("text-align","left")}if(rp_ge[$t.p.id].topinfo){$(".tinfo",frmgr).show()}if(rp_ge[$t.p.id].bottominfo){$(".binfo",frmgr).show()}tms=null;bt=null;$("#"+$.jgrid.jqID(IDs.themodal)).keydown(function(e){var wkey=e.target;if($(frmgr).data("disabled")===true){return false}if(rp_ge[$t.p.id].savekey[0]===true&&e.which===rp_ge[$t.p.id].savekey[1]){if(wkey.tagName!=="TEXTAREA"){$("#sData",frmtb+"_2").trigger("click");return false}}if(e.which===27){if(!checkUpdates()){return false}if(cle){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:p.gbox,jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}return false}if(rp_ge[$t.p.id].navkeys[0]===true){if($("#id_g",frmtb).val()==="_empty"){return true}if(e.which===rp_ge[$t.p.id].navkeys[1]){$("#pData",frmtb2).trigger("click");return false}if(e.which===rp_ge[$t.p.id].navkeys[2]){$("#nData",frmtb2).trigger("click");return false}}});if(p.checkOnUpdate){$("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(IDs.themodal)).removeClass("jqmClose");$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(IDs.themodal)).unbind("click").click(function(){if(!checkUpdates()){return false}$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form});return false})}p.saveicon=$.extend([true,"left",styles.icon_save],p.saveicon);p.closeicon=$.extend([true,"left",styles.icon_close],p.closeicon);if(p.saveicon[0]===true){$("#sData",frmtb2).addClass(p.saveicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+commonstyle.icon_base+" "+p.saveicon[2]+"'></span>")}if(p.closeicon[0]===true){$("#cData",frmtb2).addClass(p.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+commonstyle.icon_base+" "+p.closeicon[2]+"'></span>")}if(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){bS="<a id='sNew' class='fm-button "+commonstyle.button+"' style='z-index:1002'>"+p.bYes+"</a>";bN="<a id='nNew' class='fm-button "+commonstyle.button+"' style='z-index:1002;margin-left:5px'>"+p.bNo+"</a>";bC="<a id='cNew' class='fm-button "+commonstyle.button+"' style='z-index:1002;margin-left:5px;'>"+p.bExit+"</a>";var zI=p.zIndex||999;zI++;$("<div class='"+p.overlayClass+" jqgrid-overlay confirm' style='z-index:"+zI+";display:none;'>&#160;</div><div class='confirm ui-jqconfirm "+commonstyle.content+"' style='z-index:"+(zI+1)+"'>"+p.saveData+"<br/><br/>"+bS+bN+bC+"</div>").insertAfter(frmgr);$("#sNew","#"+$.jgrid.jqID(IDs.themodal)).click(function(){postIt();$(frmgr).data("disabled",false);$(".confirm","#"+$.jgrid.jqID(IDs.themodal)).hide();return false});$("#nNew","#"+$.jgrid.jqID(IDs.themodal)).click(function(){$(".confirm","#"+$.jgrid.jqID(IDs.themodal)).hide();$(frmgr).data("disabled",false);setTimeout(function(){$(":input:visible",frmgr)[0].focus()},0);return false});$("#cNew","#"+$.jgrid.jqID(IDs.themodal)).click(function(){$(".confirm","#"+$.jgrid.jqID(IDs.themodal)).hide();$(frmgr).data("disabled",false);$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form});return false})}$($t).triggerHandler("jqGridAddEditInitializeForm",[$(frmgr),frmoper]);if($.isFunction(rp_ge[$t.p.id].onInitializeForm)){rp_ge[$t.p.id].onInitializeForm.call($t,$(frmgr),frmoper)}if(rowid==="_empty"||!rp_ge[$t.p.id].viewPagerButtons){$("#pData,#nData",frmtb2).hide()}else{$("#pData,#nData",frmtb2).show()}$($t).triggerHandler("jqGridAddEditBeforeShowForm",[$(frmgr),frmoper]);if($.isFunction(rp_ge[$t.p.id].beforeShowForm)){rp_ge[$t.p.id].beforeShowForm.call($t,$(frmgr),frmoper)}syncSavedData();$("#"+$.jgrid.jqID(IDs.themodal)).data("onClose",rp_ge[$t.p.id].onClose);$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,overlay:p.overlay,modal:p.modal,overlayClass:p.overlayClass,focusField:p.focusField,onHide:function(h){var fh=$("#editmod"+gID)[0].style.height,fw=$("#editmod"+gID)[0].style.width;if(fh.indexOf("px")>-1){fh=parseFloat(fh)}if(fw.indexOf("px")>-1){fw=parseFloat(fw)}$($t).data("formProp",{top:parseFloat($(h.w).css("top")),left:parseFloat($(h.w).css("left")),width:fw,height:fh,dataheight:$(frmgr).height(),datawidth:$(frmgr).width()});h.w.remove();if(h.o){h.o.remove()}}});if(!closeovrl){$("."+$.jgrid.jqID(p.overlayClass)).click(function(){if(!checkUpdates()){return false}$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form});return false})}$(".fm-button","#"+$.jgrid.jqID(IDs.themodal)).hover(function(){$(this).addClass(commonstyle.hover)},function(){$(this).removeClass(commonstyle.hover)});$("#sData",frmtb2).click(function(){postdata={};$(".FormError",frmgr).hide();getFormData();if(postdata[$t.p.id+"_id"]==="_empty"){postIt()}else{if(p.checkOnSubmit===true){diff=compareData(postdata,$t.p.savedData);if(diff){$(frmgr).data("disabled",true);$(".confirm","#"+$.jgrid.jqID(IDs.themodal)).show()}else{postIt()}}else{postIt()}}return false});$("#cData",frmtb2).click(function(){if(!checkUpdates()){return false}$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form});return false});$("#nData",frmtb2).click(function(){if(!checkUpdates()){return false}$(".FormError",frmgr).hide();var npos=getCurrPos();npos[0]=parseInt(npos[0],10);if(npos[0]!==-1&&npos[1][npos[0]+1]){$($t).triggerHandler("jqGridAddEditClickPgButtons",["next",$(frmgr),npos[1][npos[0]]]);var nposret;if($.isFunction(p.onclickPgButtons)){nposret=p.onclickPgButtons.call($t,"next",$(frmgr),npos[1][npos[0]]);if(nposret!==undefined&&nposret===false){return false}}if($("#"+$.jgrid.jqID(npos[1][npos[0]+1])).hasClass(commonstyle.disabled)){return false}fillData(npos[1][npos[0]+1],$t,frmgr);$($t).jqGrid("setSelection",npos[1][npos[0]+1]);$($t).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$(frmgr),npos[1][npos[0]]]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons.call($t,"next",$(frmgr),npos[1][npos[0]+1])}syncSavedData();updateNav(npos[0]+1,npos)}return false});$("#pData",frmtb2).click(function(){if(!checkUpdates()){return false}$(".FormError",frmgr).hide();var ppos=getCurrPos();if(ppos[0]!==-1&&ppos[1][ppos[0]-1]){$($t).triggerHandler("jqGridAddEditClickPgButtons",["prev",$(frmgr),ppos[1][ppos[0]]]);var pposret;if($.isFunction(p.onclickPgButtons)){pposret=p.onclickPgButtons.call($t,"prev",$(frmgr),ppos[1][ppos[0]]);if(pposret!==undefined&&pposret===false){return false}}if($("#"+$.jgrid.jqID(ppos[1][ppos[0]-1])).hasClass(commonstyle.disabled)){return false}fillData(ppos[1][ppos[0]-1],$t,frmgr);$($t).jqGrid("setSelection",ppos[1][ppos[0]-1]);$($t).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$(frmgr),ppos[1][ppos[0]]]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons.call($t,"prev",$(frmgr),ppos[1][ppos[0]-1])}syncSavedData();updateNav(ppos[0]-1,ppos)}return false});$($t).triggerHandler("jqGridAddEditAfterShowForm",[$(frmgr),frmoper]);if($.isFunction(rp_ge[$t.p.id].afterShowForm)){rp_ge[$t.p.id].afterShowForm.call($t,$(frmgr),frmoper)}var posInit=getCurrPos();updateNav(posInit[0],posInit)})},viewGridRow:function(rowid,p){var regional=$.jgrid.getRegional(this[0],"view"),currstyle=this[0].p.styleUI,styles=$.jgrid.styleUI[currstyle].formedit,commonstyle=$.jgrid.styleUI[currstyle].common;p=$.extend(true,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,jqModal:true,closeOnEscape:false,labelswidth:"30%",closeicon:[],navkeys:[false,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:true,recreateForm:false,removemodal:true,form:"view"},regional,p||{});rp_ge[$(this)[0].p.id]=p;return this.each(function(){var $t=this;if(!$t.grid||!rowid){return}var gID=$t.p.id,frmgr="ViewGrid_"+$.jgrid.jqID(gID),frmtb="ViewTbl_"+$.jgrid.jqID(gID),frmgr_id="ViewGrid_"+gID,frmtb_id="ViewTbl_"+gID,IDs={themodal:"viewmod"+gID,modalhead:"viewhd"+gID,modalcontent:"viewcnt"+gID,scrollelm:frmgr},onBeforeInit=$.isFunction(rp_ge[$t.p.id].beforeInitData)?rp_ge[$t.p.id].beforeInitData:false,showFrm=true,maxCols=1,maxRows=0;rp_ge[$t.p.id].styleUI=$t.p.styleUI||"jQueryUI";if(!p.recreateForm){if($($t).data("viewProp")){$.extend(rp_ge[$(this)[0].p.id],$($t).data("viewProp"))}}function focusaref(){if(rp_ge[$t.p.id].closeOnEscape===true||rp_ge[$t.p.id].navkeys[0]===true){setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(IDs.modalhead)).attr("tabindex","-1").focus()},0)}}function createData(rowid,obj,tb,maxcols){var nm,hc,trdata,cnt=0,tmp,dc,retpos=[],ind=false,i,tdtmpl="<td class='CaptionTD form-view-label "+commonstyle.content+"' width='"+p.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset "+commonstyle.content+"'>&#160;</td>",tmpl="",tdtmpl2="<td class='CaptionTD form-view-label "+commonstyle.content+"'>&#160;</td><td class='DataTD form-view-data "+commonstyle.content+"'>&#160;</td>",fmtnum=["integer","number","currency"],max1=0,max2=0,maxw,setme,viewfld;for(i=1;i<=maxcols;i++){tmpl+=i===1?tdtmpl:tdtmpl2}$(obj.p.colModel).each(function(){if(this.editrules&&this.editrules.edithidden===true){hc=false}else{hc=this.hidden===true?true:false}if(!hc&&this.align==="right"){if(this.formatter&&$.inArray(this.formatter,fmtnum)!==-1){max1=Math.max(max1,parseInt(this.width,10))}else{max2=Math.max(max2,parseInt(this.width,10))}}});maxw=max1!==0?max1:max2!==0?max2:0;ind=$(obj).jqGrid("getInd",rowid);$(obj.p.colModel).each(function(i){nm=this.name;setme=false;if(this.editrules&&this.editrules.edithidden===true){hc=false}else{hc=this.hidden===true?true:false}dc=hc?"style='display:none'":"";viewfld=(typeof this.viewable!=="boolean")?true:this.viewable;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"&&viewfld){if(ind===false){tmp=""}else{if(nm===obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$("td:eq("+i+")",obj.rows[ind]).text()}else{tmp=$("td:eq("+i+")",obj.rows[ind]).html()}}setme=this.align==="right"&&maxw!==0?true:false;var frmopt=$.extend({},{rowabove:false,rowcontent:""},this.formoptions||{}),rp=parseInt(frmopt.rowpos,10)||cnt+1,cp=parseInt((parseInt(frmopt.colpos,10)||1)*2,10);if(frmopt.rowabove){var newdata=$("<tr><td class='contentinfo' colspan='"+(maxcols*2)+"'>"+frmopt.rowcontent+"</td></tr>");$(tb).append(newdata);newdata[0].rp=rp}trdata=$(tb).find("tr[rowpos="+rp+"]");if(trdata.length===0){trdata=$("<tr "+dc+" rowpos='"+rp+"'></tr>").addClass("FormData").attr("id","trv_"+nm);$(trdata).append(tmpl);$(tb).append(trdata);trdata[0].rp=rp}$("td:eq("+(cp-2)+")",trdata[0]).html("<b>"+(frmopt.label===undefined?obj.p.colNames[i]:frmopt.label)+"</b>");$("td:eq("+(cp-1)+")",trdata[0]).append("<span>"+tmp+"</span>").attr("id","v_"+nm);if(setme){$("td:eq("+(cp-1)+") span",trdata[0]).css({"text-align":"right",width:maxw+"px"})}retpos[cnt]=i;cnt++}});if(cnt>0){var idrow=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(maxcols*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+rowid+"'/></td></tr>");idrow[0].rp=cnt+99;$(tb).append(idrow)}return retpos}function fillData(rowid,obj){var nm,hc,cnt=0,tmp,trv;trv=$(obj).jqGrid("getInd",rowid,true);if(!trv){return}$("td",trv).each(function(i){nm=obj.p.colModel[i].name;if(obj.p.colModel[i].editrules&&obj.p.colModel[i].editrules.edithidden===true){hc=false}else{hc=obj.p.colModel[i].hidden===true?true:false}if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if(nm===obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$(this).text()}else{tmp=$(this).html()}nm=$.jgrid.jqID("v_"+nm);$("#"+nm+" span","#"+frmtb).html(tmp);if(hc){$("#"+nm,"#"+frmtb).parents("tr:first").hide()}cnt++}});if(cnt>0){$("#id_g","#"+frmtb).val(rowid)}}function updateNav(cr,posarr){var totr=posarr[1].length-1;if(cr===0){$("#pData","#"+frmtb+"_2").addClass(commonstyle.disabled)}else{if(posarr[1][cr-1]!==undefined&&$("#"+$.jgrid.jqID(posarr[1][cr-1])).hasClass(commonstyle.disabled)){$("#pData",frmtb+"_2").addClass(commonstyle.disabled)}else{$("#pData","#"+frmtb+"_2").removeClass(commonstyle.disabled)}}if(cr===totr){$("#nData","#"+frmtb+"_2").addClass(commonstyle.disabled)}else{if(posarr[1][cr+1]!==undefined&&$("#"+$.jgrid.jqID(posarr[1][cr+1])).hasClass(commonstyle.disabled)){$("#nData",frmtb+"_2").addClass(commonstyle.disabled)}else{$("#nData","#"+frmtb+"_2").removeClass(commonstyle.disabled)}}}function getCurrPos(){var rowsInGrid=$($t).jqGrid("getDataIDs"),selrow=$("#id_g","#"+frmtb).val(),pos=$.inArray(selrow,rowsInGrid);return[pos,rowsInGrid]}var dh=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",dw=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",frm=$("<form name='FormPost' id='"+frmgr_id+"' class='FormGrid' style='width:"+dw+";height:"+dh+";'></form>"),tbl=$("<table id='"+frmtb_id+"' class='EditTable ViewTable'><tbody></tbody></table>");$($t.p.colModel).each(function(){var fmto=this.formoptions;maxCols=Math.max(maxCols,fmto?fmto.colpos||0:0);maxRows=Math.max(maxRows,fmto?fmto.rowpos||0:0)});$(frm).append(tbl);if(onBeforeInit){showFrm=onBeforeInit.call($t,frm);if(showFrm===undefined){showFrm=true}}if(showFrm===false){return}createData(rowid,$t,tbl,maxCols);var rtlb=$t.p.direction==="rtl"?true:false,bp=rtlb?"nData":"pData",bn=rtlb?"pData":"nData",bP="<a id='"+bp+"' class='fm-button "+commonstyle.button+"'><span class='"+commonstyle.icon_base+" "+styles.icon_prev+"'></span></a>",bN="<a id='"+bn+"' class='fm-button "+commonstyle.button+"'><span class='"+commonstyle.icon_base+" "+styles.icon_next+"'></span></a>",bC="<a id='cData' class='fm-button "+commonstyle.button+"'>"+p.bClose+"</a>";if(maxRows>0){var sd=[];$.each($(tbl)[0].rows,function(i,r){sd[i]=r});sd.sort(function(a,b){if(a.rp>b.rp){return 1}if(a.rp<b.rp){return -1}return 0});$.each(sd,function(index,row){$("tbody",tbl).append(row)})}p.gbox="#gbox_"+$.jgrid.jqID(gID);var bt=$("<div></div>").append(frm).append("<table border='0' class='EditTable' id='"+frmtb+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+p.labelswidth+"'>"+(rtlb?bN+bP:bP+bN)+"</td><td class='EditButton'>"+bC+"</td></tr></tbody></table>");$.jgrid.createModal(IDs,bt,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID($t.p.id),$("#gview_"+$.jgrid.jqID($t.p.id))[0]);if(rtlb){$("#pData, #nData","#"+frmtb+"_2").css("float","right");$(".EditButton","#"+frmtb+"_2").css("text-align","left")}if(!p.viewPagerButtons){$("#pData, #nData","#"+frmtb+"_2").hide()}bt=null;$("#"+IDs.themodal).keydown(function(e){if(e.which===27){if(rp_ge[$t.p.id].closeOnEscape){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:p.gbox,jqm:p.jqModal,onClose:p.onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}return false}if(p.navkeys[0]===true){if(e.which===p.navkeys[1]){$("#pData","#"+frmtb+"_2").trigger("click");return false}if(e.which===p.navkeys[2]){$("#nData","#"+frmtb+"_2").trigger("click");return false}}});p.closeicon=$.extend([true,"left",styles.icon_close],p.closeicon);if(p.closeicon[0]===true){$("#cData","#"+frmtb+"_2").addClass(p.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+commonstyle.icon_base+" "+p.closeicon[2]+"'></span>")}if($.isFunction(p.beforeShowForm)){p.beforeShowForm.call($t,$("#"+frmgr))}$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,overlay:p.overlay,modal:p.modal,onHide:function(h){$($t).data("viewProp",{top:parseFloat($(h.w).css("top")),left:parseFloat($(h.w).css("left")),width:$(h.w).width(),height:$(h.w).height(),dataheight:$("#"+frmgr).height(),datawidth:$("#"+frmgr).width()});h.w.remove();if(h.o){h.o.remove()}}});$(".fm-button:not(."+commonstyle.disabled+")","#"+frmtb+"_2").hover(function(){$(this).addClass(commonstyle.hover)},function(){$(this).removeClass(commonstyle.hover)});focusaref();$("#cData","#"+frmtb+"_2").click(function(){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:p.onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form});return false});$("#nData","#"+frmtb+"_2").click(function(){$("#FormError","#"+frmtb).hide();var npos=getCurrPos();npos[0]=parseInt(npos[0],10);if(npos[0]!==-1&&npos[1][npos[0]+1]){if($.isFunction(p.onclickPgButtons)){p.onclickPgButtons.call($t,"next",$("#"+frmgr),npos[1][npos[0]])}fillData(npos[1][npos[0]+1],$t);$($t).jqGrid("setSelection",npos[1][npos[0]+1]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons.call($t,"next",$("#"+frmgr),npos[1][npos[0]+1])}updateNav(npos[0]+1,npos)}focusaref();return false});$("#pData","#"+frmtb+"_2").click(function(){$("#FormError","#"+frmtb).hide();var ppos=getCurrPos();if(ppos[0]!==-1&&ppos[1][ppos[0]-1]){if($.isFunction(p.onclickPgButtons)){p.onclickPgButtons.call($t,"prev",$("#"+frmgr),ppos[1][ppos[0]])}fillData(ppos[1][ppos[0]-1],$t);$($t).jqGrid("setSelection",ppos[1][ppos[0]-1]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons.call($t,"prev",$("#"+frmgr),ppos[1][ppos[0]-1])}updateNav(ppos[0]-1,ppos)}focusaref();return false});var posInit=getCurrPos();updateNav(posInit[0],posInit)})},delGridRow:function(rowids,p){var regional=$.jgrid.getRegional(this[0],"del"),currstyle=this[0].p.styleUI,styles=$.jgrid.styleUI[currstyle].formedit,commonstyle=$.jgrid.styleUI[currstyle].common;p=$.extend(true,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},regional,p||{});rp_ge[$(this)[0].p.id]=p;return this.each(function(){var $t=this;if(!$t.grid){return}if(!rowids){return}var onBeforeShow=$.isFunction(rp_ge[$t.p.id].beforeShowForm),onAfterShow=$.isFunction(rp_ge[$t.p.id].afterShowForm),onBeforeInit=$.isFunction(rp_ge[$t.p.id].beforeInitData)?rp_ge[$t.p.id].beforeInitData:false,gID=$t.p.id,onCS={},showFrm=true,dtbl="DelTbl_"+$.jgrid.jqID(gID),postd,idname,opers,oper,dtbl_id="DelTbl_"+gID,IDs={themodal:"delmod"+gID,modalhead:"delhd"+gID,modalcontent:"delcnt"+gID,scrollelm:dtbl};rp_ge[$t.p.id].styleUI=$t.p.styleUI||"jQueryUI";if($.isArray(rowids)){rowids=rowids.join()}if($("#"+$.jgrid.jqID(IDs.themodal))[0]!==undefined){if(onBeforeInit){showFrm=onBeforeInit.call($t,$("#"+dtbl));if(showFrm===undefined){showFrm=true}}if(showFrm===false){return}$("#DelData>td","#"+dtbl).text(rowids);$("#DelError","#"+dtbl).hide();if(rp_ge[$t.p.id].processing===true){rp_ge[$t.p.id].processing=false;$("#dData","#"+dtbl).removeClass(commonstyle.active)}if(onBeforeShow){rp_ge[$t.p.id].beforeShowForm.call($t,$("#"+dtbl))}$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:rp_ge[$t.p.id].jqModal,jqM:false,overlay:rp_ge[$t.p.id].overlay,modal:rp_ge[$t.p.id].modal});if(onAfterShow){rp_ge[$t.p.id].afterShowForm.call($t,$("#"+dtbl))}}else{var dh=isNaN(rp_ge[$t.p.id].dataheight)?rp_ge[$t.p.id].dataheight:rp_ge[$t.p.id].dataheight+"px",dw=isNaN(p.datawidth)?p.datawidth:p.datawidth+"px",tbl="<div id='"+dtbl_id+"' class='formdata' style='width:"+dw+";overflow:auto;position:relative;height:"+dh+";'>";tbl+="<table class='DelTable'><tbody>";tbl+="<tr id='DelError' style='display:none'><td class='"+commonstyle.error+"'></td></tr>";tbl+="<tr id='DelData' style='display:none'><td >"+rowids+"</td></tr>";tbl+='<tr><td class="delmsg" style="white-space:pre;">'+rp_ge[$t.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>";tbl+="</tbody></table></div>";var bS="<a id='dData' class='fm-button "+commonstyle.button+"'>"+p.bSubmit+"</a>",bC="<a id='eData' class='fm-button "+commonstyle.button+"'>"+p.bCancel+"</a>";tbl+="<table class='EditTable ui-common-table' id='"+dtbl+"_2'><tbody><tr><td><hr class='"+commonstyle.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+bS+"&#160;"+bC+"</td></tr></tbody></table>";p.gbox="#gbox_"+$.jgrid.jqID(gID);$.jgrid.createModal(IDs,tbl,rp_ge[$t.p.id],"#gview_"+$.jgrid.jqID($t.p.id),$("#gview_"+$.jgrid.jqID($t.p.id))[0]);if(onBeforeInit){showFrm=onBeforeInit.call($t,$(tbl));if(showFrm===undefined){showFrm=true}}if(showFrm===false){return}$(".fm-button","#"+dtbl+"_2").hover(function(){$(this).addClass(commonstyle.hover)},function(){$(this).removeClass(commonstyle.hover)});p.delicon=$.extend([true,"left",styles.icon_del],rp_ge[$t.p.id].delicon);p.cancelicon=$.extend([true,"left",styles.icon_cancel],rp_ge[$t.p.id].cancelicon);if(p.delicon[0]===true){$("#dData","#"+dtbl+"_2").addClass(p.delicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+commonstyle.icon_base+" "+p.delicon[2]+"'></span>")}if(p.cancelicon[0]===true){$("#eData","#"+dtbl+"_2").addClass(p.cancelicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+commonstyle.icon_base+" "+p.cancelicon[2]+"'></span>")}$("#dData","#"+dtbl+"_2").click(function(){var ret=[true,""],pk,postdata=$("#DelData>td","#"+dtbl).text();onCS={};if($.isFunction(rp_ge[$t.p.id].onclickSubmit)){onCS=rp_ge[$t.p.id].onclickSubmit.call($t,rp_ge[$t.p.id],postdata)||{}}if($.isFunction(rp_ge[$t.p.id].beforeSubmit)){ret=rp_ge[$t.p.id].beforeSubmit.call($t,postdata)}if(ret[0]&&!rp_ge[$t.p.id].processing){rp_ge[$t.p.id].processing=true;opers=$t.p.prmNames;postd=$.extend({},rp_ge[$t.p.id].delData,onCS);oper=opers.oper;postd[oper]=opers.deloper;idname=opers.id;postdata=String(postdata).split(",");if(!postdata.length){return false}for(pk in postdata){if(postdata.hasOwnProperty(pk)){postdata[pk]=$.jgrid.stripPref($t.p.idPrefix,postdata[pk])}}postd[idname]=postdata.join();$(this).addClass(commonstyle.active);var ajaxOptions=$.extend({url:rp_ge[$t.p.id].url||$($t).jqGrid("getGridParam","editurl"),type:rp_ge[$t.p.id].mtype,data:$.isFunction(rp_ge[$t.p.id].serializeDelData)?rp_ge[$t.p.id].serializeDelData.call($t,postd):postd,complete:function(data,status){var i;$("#dData","#"+dtbl+"_2").removeClass(commonstyle.active);if(data.status>=300&&data.status!==304){ret[0]=false;if($.isFunction(rp_ge[$t.p.id].errorTextFormat)){ret[1]=rp_ge[$t.p.id].errorTextFormat.call($t,data)}else{ret[1]=status+" Status: '"+data.statusText+"'. Error code: "+data.status}}else{if($.isFunction(rp_ge[$t.p.id].afterSubmit)){ret=rp_ge[$t.p.id].afterSubmit.call($t,data,postd)}}if(ret[0]===false){$("#DelError>td","#"+dtbl).html(ret[1]);$("#DelError","#"+dtbl).show()}else{if(rp_ge[$t.p.id].reloadAfterSubmit&&$t.p.datatype!=="local"){$($t).trigger("reloadGrid")}else{if($t.p.treeGrid===true){try{$($t).jqGrid("delTreeNode",$t.p.idPrefix+postdata[0])}catch(e){}}else{for(i=0;i<postdata.length;i++){$($t).jqGrid("delRowData",$t.p.idPrefix+postdata[i])}}$t.p.selrow=null;$t.p.selarrrow=[]}if($.isFunction(rp_ge[$t.p.id].afterComplete)){setTimeout(function(){rp_ge[$t.p.id].afterComplete.call($t,data,postdata)},500)}}rp_ge[$t.p.id].processing=false;if(ret[0]){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose})}}},$.jgrid.ajaxOptions,rp_ge[$t.p.id].ajaxDelOptions);if(!ajaxOptions.url&&!rp_ge[$t.p.id].useDataProxy){if($.isFunction($t.p.dataProxy)){rp_ge[$t.p.id].useDataProxy=true}else{ret[0]=false;ret[1]+=" "+$.jgrid.getRegional($t,"errors.nourl")}}if(ret[0]){if(rp_ge[$t.p.id].useDataProxy){var dpret=$t.p.dataProxy.call($t,ajaxOptions,"del_"+$t.p.id);if(dpret===undefined){dpret=[true,""]}if(dpret[0]===false){ret[0]=false;ret[1]=dpret[1]||"Error deleting the selected row!"}else{$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose})}}else{if(ajaxOptions.url==="clientArray"){postd=ajaxOptions.data;ajaxOptions.complete({status:200,statusText:""},"")}else{$.ajax(ajaxOptions)}}}}if(ret[0]===false){$("#DelError>td","#"+dtbl).html(ret[1]);$("#DelError","#"+dtbl).show()}return false});$("#eData","#"+dtbl+"_2").click(function(){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:rp_ge[$t.p.id].jqModal,onClose:rp_ge[$t.p.id].onClose});return false});if(onBeforeShow){rp_ge[$t.p.id].beforeShowForm.call($t,$("#"+dtbl))}$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:rp_ge[$t.p.id].jqModal,overlay:rp_ge[$t.p.id].overlay,modal:rp_ge[$t.p.id].modal});if(onAfterShow){rp_ge[$t.p.id].afterShowForm.call($t,$("#"+dtbl))}}if(rp_ge[$t.p.id].closeOnEscape===true){setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(IDs.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(elem,p,pEdit,pAdd,pDel,pSearch,pView){var regional=$.jgrid.getRegional(this[0],"nav"),currstyle=this[0].p.styleUI,styles=$.jgrid.styleUI[currstyle].navigator,commonstyle=$.jgrid.styleUI[currstyle].common;p=$.extend({edit:true,editicon:styles.icon_edit_nav,add:true,addicon:styles.icon_add_nav,del:true,delicon:styles.icon_del_nav,search:true,searchicon:styles.icon_search_nav,refresh:true,refreshicon:styles.icon_refresh_nav,refreshstate:"firstpage",view:false,viewicon:styles.icon_view_nav,position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:false,navButtonText:""},regional,p||{});return this.each(function(){if(this.p.navGrid){return}var alertIDs={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},$t=this,twd,tdw,o;if(!$t.grid||typeof elem!=="string"){return}if(!$($t).data("navGrid")){$($t).data("navGrid",p)}o=$($t).data("navGrid");if($t.p.force_regional){o=$.extend(o,regional)}if($("#"+alertIDs.themodal)[0]===undefined){if(!o.alerttop&&!o.alertleft){if(window.innerWidth!==undefined){o.alertleft=window.innerWidth;o.alerttop=window.innerHeight}else{if(document.documentElement!==undefined&&document.documentElement.clientWidth!==undefined&&document.documentElement.clientWidth!==0){o.alertleft=document.documentElement.clientWidth;o.alerttop=document.documentElement.clientHeight}else{o.alertleft=1024;o.alerttop=768}}o.alertleft=o.alertleft/2-parseInt(o.alertwidth,10)/2;o.alerttop=o.alerttop/2-25}$.jgrid.createModal(alertIDs,"<div>"+o.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqModal:true,drag:true,resize:true,caption:o.alertcap,top:o.alerttop,left:o.alertleft,width:o.alertwidth,height:o.alertheight,closeOnEscape:o.closeOnEscape,zIndex:o.alertzIndex,styleUI:$t.p.styleUI},"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0],true)}var clone=1,i,onHoverIn=function(){if(!$(this).hasClass(commonstyle.disabled)){$(this).addClass(commonstyle.hover)}},onHoverOut=function(){$(this).removeClass(commonstyle.hover)};if(o.cloneToTop&&$t.p.toppager){clone=2}for(i=0;i<clone;i++){var tbd,navtbl=$("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),sep="<td class='ui-pg-button "+commonstyle.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>",pgid,elemids;if(i===0){pgid=elem;elemids=$t.p.id;if(pgid===$t.p.toppager){elemids+="_top";clone=1}}else{pgid=$t.p.toppager;elemids=$t.p.id+"_top"}if($t.p.direction==="rtl"){$(navtbl).attr("dir","rtl").css("float","right")}pAdd=pAdd||{};if(o.add){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.addicon+"'></span>"+o.addtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.addtitle||"",id:pAdd.id||"add_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(o.addfunc)){o.addfunc.call($t)}else{$($t).jqGrid("editGridRow","new",pAdd)}}return false}).hover(onHoverIn,onHoverOut);tbd=null}pEdit=pEdit||{};if(o.edit){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.editicon+"'></span>"+o.edittext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.edittitle||"",id:pEdit.id||"edit_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){var sr=$t.p.selrow;if(sr){if($.isFunction(o.editfunc)){o.editfunc.call($t,sr)}else{$($t).jqGrid("editGridRow",sr,pEdit)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}}return false}).hover(onHoverIn,onHoverOut);tbd=null}pView=pView||{};if(o.view){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.viewicon+"'></span>"+o.viewtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.viewtitle||"",id:pView.id||"view_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){var sr=$t.p.selrow;if(sr){if($.isFunction(o.viewfunc)){o.viewfunc.call($t,sr)}else{$($t).jqGrid("viewGridRow",sr,pView)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}}return false}).hover(onHoverIn,onHoverOut);tbd=null}pDel=pDel||{};if(o.del){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.delicon+"'></span>"+o.deltext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.deltitle||"",id:pDel.id||"del_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){var dr;if($t.p.multiselect){dr=$t.p.selarrrow;if(dr.length===0){dr=null}}else{dr=$t.p.selrow}if(dr){if($.isFunction(o.delfunc)){o.delfunc.call($t,dr)}else{$($t).jqGrid("delGridRow",dr,pDel)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}}return false}).hover(onHoverIn,onHoverOut);tbd=null}if(o.add||o.edit||o.del||o.view){$("tr",navtbl).append(sep)}pSearch=pSearch||{};if(o.search){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.searchicon+"'></span>"+o.searchtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.searchtitle||"",id:pSearch.id||"search_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(o.searchfunc)){o.searchfunc.call($t,pSearch)}else{$($t).jqGrid("searchGrid",pSearch)}}return false}).hover(onHoverIn,onHoverOut);if(pSearch.showOnLoad&&pSearch.showOnLoad===true){$(tbd,navtbl).click()}tbd=null}if(o.refresh){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.refreshicon+"'></span>"+o.refreshtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.refreshtitle||"",id:"refresh_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(o.beforeRefresh)){o.beforeRefresh.call($t)}$t.p.search=false;$t.p.resetsearch=true;try{if(o.refreshstate!=="currentfilter"){var gID=$t.p.id;$t.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(gID)).jqFilter("resetFilter")}catch(ef){}if($.isFunction($t.clearToolbar)){$t.clearToolbar.call($t,false)}}}catch(e){}switch(o.refreshstate){case"firstpage":$($t).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$($t).trigger("reloadGrid",[{current:true}]);break}if($.isFunction(o.afterRefresh)){o.afterRefresh.call($t)}}return false}).hover(onHoverIn,onHoverOut);tbd=null}tdw=$(".ui-jqgrid").css("font-size")||"11px";$("body").append("<div id='testpg2' class='ui-jqgrid "+$.jgrid.styleUI[currstyle].base.entrieBox+"' style='font-size:"+tdw+";visibility:hidden;' ></div>");twd=$(navtbl).clone().appendTo("#testpg2").width();$("#testpg2").remove();if($t.p._nvtd){if(o.dropmenu){navtbl=null;$($t).jqGrid("_buildNavMenu",pgid,elemids,p,pEdit,pAdd,pDel,pSearch,pView)}else{if(twd>$t.p._nvtd[0]){if($t.p.responsive){navtbl=null;$($t).jqGrid("_buildNavMenu",pgid,elemids,p,pEdit,pAdd,pDel,pSearch,pView)}else{$(pgid+"_"+o.position,pgid).append(navtbl).width(twd)}$t.p._nvtd[0]=twd}else{$(pgid+"_"+o.position,pgid).append(navtbl)}}$t.p._nvtd[1]=twd}$t.p.navGrid=true}if($t.p.storeNavOptions){$t.p.navOptions=o;$t.p.editOptions=pEdit;$t.p.addOptions=pAdd;$t.p.delOptions=pDel;$t.p.searchOptions=pSearch;$t.p.viewOptions=pView;$t.p.navButtons=[]}})},navButtonAdd:function(elem,p){var currstyle=this[0].p.styleUI,styles=$.jgrid.styleUI[currstyle].navigator;p=$.extend({caption:"newButton",title:"",buttonicon:styles.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:false},p||{});return this.each(function(){if(!this.grid){return}if(typeof elem==="string"&&elem.indexOf("#")!==0){elem="#"+$.jgrid.jqID(elem)}var findnav=$(".navtable",elem)[0],$t=this,disabled=$.jgrid.styleUI[currstyle].common.disabled,hover=$.jgrid.styleUI[currstyle].common.hover,cornerall=$.jgrid.styleUI[currstyle].common.cornerall,iconbase=$.jgrid.styleUI[currstyle].common.icon_base;if($t.p.storeNavOptions&&!p.internal){$t.p.navButtons.push([elem,p])}if(findnav){if(p.id&&$("#"+$.jgrid.jqID(p.id),findnav)[0]!==undefined){return}var tbd=$("<td></td>");if(p.buttonicon.toString().toUpperCase()==="NONE"){$(tbd).addClass("ui-pg-button "+cornerall).append("<div class='ui-pg-div'>"+p.caption+"</div>")}else{$(tbd).addClass(" "+cornerall).append("<div class='"+p.btnbase+"' "+p.props+"><i class='"+iconbase+" "+p.buttonicon+"'></i> "+p.caption+"</div>")}if(p.id){$(tbd).attr("id",p.id)}if(p.position==="first"){if(findnav.rows[0].cells.length===0){$("tr",findnav).append(tbd)}else{$("tr td:eq(0)",findnav).before(tbd)}}else{$("tr",findnav).append(tbd)}$(tbd,findnav).attr("title",p.title||"").click(function(e){if(typeof p.props=="undefined"){if(!$(this).hasClass(disabled)){if($.isFunction(p.onClickButton)){p.onClickButton.call($t,e)}}return false}}).hover(function(){if(!$(this).hasClass(disabled)){$(this).addClass(hover)}},function(){$(this).removeClass(hover)})}else{findnav=$(".dropdownmenu",elem)[0];if(findnav){var id=$(findnav).val(),eid=p.id||$.jgrid.randId(),item=$('<li class="ui-menu-item" role="presentation"><a class="'+cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.caption||p.title)+"</a></li>");if(id){if(p.position==="first"){$("#"+id).prepend(item)}else{$("#"+id).append(item)}$(item).on("click",function(e){if(!$(this).hasClass(disabled)){$("#"+id).hide();if($.isFunction(p.onClickButton)){p.onClickButton.call($t,e)}}return false}).find("a").hover(function(){if(!$(this).hasClass(disabled)){$(this).addClass(hover)}},function(){$(this).removeClass(hover)})}}}})},navSeparatorAdd:function(elem,p){var currstyle=this[0].p.styleUI,commonstyle=$.jgrid.styleUI[currstyle].common;p=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},p||{});return this.each(function(){if(!this.grid){return}if(typeof elem==="string"&&elem.indexOf("#")!==0){elem="#"+$.jgrid.jqID(elem)}var findnav=$(".navtable",elem)[0],sep,id;if(this.p.storeNavOptions){this.p.navButtons.push([elem,p])}if(findnav){sep="<td class='ui-pg-button "+commonstyle.disabled+"' style='width:4px;'><span class='"+p.sepclass+"'></span>"+p.sepcontent+"</td>";if(p.position==="first"){if(findnav.rows[0].cells.length===0){$("tr",findnav).append(sep)}else{$("tr td:eq(0)",findnav).before(sep)}}else{$("tr",findnav).append(sep)}}else{findnav=$(".dropdownmenu",elem)[0];sep="<li class='ui-menu-item "+commonstyle.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>";if(findnav){id=$(findnav).val();if(id){if(p.position==="first"){$("#"+id).prepend(sep)}else{$("#"+id).append(sep)}}}}})},_buildNavMenu:function(elem,elemids,p,pEdit,pAdd,pDel,pSearch,pView){return this.each(function(){var $t=this,regional=$.jgrid.getRegional($t,"nav"),currstyle=$t.p.styleUI,styles=$.jgrid.styleUI[currstyle].navigator,classes=$.jgrid.styleUI[currstyle].filter,commonstyle=$.jgrid.styleUI[currstyle].common,mid="form_menu_"+$.jgrid.randId(),bt=p.navButtonText?p.navButtonText:regional.selectcaption||"Actions",act="<button class='dropdownmenu "+commonstyle.button+"' value='"+mid+"'>"+bt+"</button>";$(elem+"_"+p.position,elem).append(act);var alertIDs={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},_buildMenu=function(){var fs=$(".ui-jqgrid-view").css("font-size")||"11px",eid,itm,str=$('<ul id="'+mid+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+fs+'"></ul>');if(p.add){pAdd=pAdd||{};eid=pAdd.id||"add_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.addtext||p.addtitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(p.addfunc)){p.addfunc.call($t)}else{$($t).jqGrid("editGridRow","new",pAdd)}$(str).hide()}return false});$(str).append(itm)}if(p.edit){pEdit=pEdit||{};eid=pEdit.id||"edit_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.edittext||p.edittitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){var sr=$t.p.selrow;if(sr){if($.isFunction(p.editfunc)){p.editfunc.call($t,sr)}else{$($t).jqGrid("editGridRow",sr,pEdit)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}$(str).hide()}return false});$(str).append(itm)}if(p.view){pView=pView||{};eid=pView.id||"view_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.viewtext||p.viewtitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){var sr=$t.p.selrow;if(sr){if($.isFunction(p.editfunc)){p.viewfunc.call($t,sr)}else{$($t).jqGrid("viewGridRow",sr,pView)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}$(str).hide()}return false});$(str).append(itm)}if(p.del){pDel=pDel||{};eid=pDel.id||"del_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.deltext||p.deltitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){var dr;if($t.p.multiselect){dr=$t.p.selarrrow;if(dr.length===0){dr=null}}else{dr=$t.p.selrow}if(dr){if($.isFunction(p.delfunc)){p.delfunc.call($t,dr)}else{$($t).jqGrid("delGridRow",dr,pDel)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}$(str).hide()}return false});$(str).append(itm)}if(p.add||p.edit||p.del||p.view){$(str).append("<li class='ui-menu-item "+commonstyle.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>")}if(p.search){pSearch=pSearch||{};eid=pSearch.id||"search_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.searchtext||p.searchtitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(p.searchfunc)){p.searchfunc.call($t,pSearch)}else{$($t).jqGrid("searchGrid",pSearch)}$(str).hide()}return false});$(str).append(itm);if(pSearch.showOnLoad&&pSearch.showOnLoad===true){$(itm).click()}}if(p.refresh){eid=pSearch.id||"search_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.refreshtext||p.refreshtitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(p.beforeRefresh)){p.beforeRefresh.call($t)}$t.p.search=false;$t.p.resetsearch=true;try{if(p.refreshstate!=="currentfilter"){var gID=$t.p.id;$t.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(gID)).jqFilter("resetFilter")}catch(ef){}if($.isFunction($t.clearToolbar)){$t.clearToolbar.call($t,false)}}}catch(e){}switch(p.refreshstate){case"firstpage":$($t).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$($t).trigger("reloadGrid",[{current:true}]);break}if($.isFunction(p.afterRefresh)){p.afterRefresh.call($t)}$(str).hide()}return false});$(str).append(itm)}$(str).hide();$("body").append(str);$("#"+mid).addClass("ui-menu "+classes.menu_widget);$("#"+mid+" > li > a").hover(function(){$(this).addClass(commonstyle.hover)},function(){$(this).removeClass(commonstyle.hover)})};_buildMenu();$(".dropdownmenu",elem+"_"+p.position).on("click",function(e){var offset=$(this).offset(),left=(offset.left),top=parseInt(offset.top),bid=$(this).val();$("#"+bid).show().css({top:top-($("#"+bid).height()+10)+"px",left:left+"px"});e.stopPropagation()});$("body").on("click",function(e){if(!$(e.target).hasClass("dropdownmenu")){$("#"+mid).hide()}})})},GridToForm:function(rowid,formid){return this.each(function(){var $t=this,i;if(!$t.grid){return}var rowdata=$($t).jqGrid("getRowData",rowid);if(rowdata){for(i in rowdata){if(rowdata.hasOwnProperty(i)){if($("[name="+$.jgrid.jqID(i)+"]",formid).is("input:radio")||$("[name="+$.jgrid.jqID(i)+"]",formid).is("input:checkbox")){$("[name="+$.jgrid.jqID(i)+"]",formid).each(function(){if($(this).val()==rowdata[i]){$(this)[$t.p.useProp?"prop":"attr"]("checked",true)}else{$(this)[$t.p.useProp?"prop":"attr"]("checked",false)}})}else{$("[name="+$.jgrid.jqID(i)+"]",formid).val(rowdata[i])}}}}})},FormToGrid:function(rowid,formid,mode,position){return this.each(function(){var $t=this;if(!$t.grid){return}if(!mode){mode="set"}if(!position){position="first"}var fields=$(formid).serializeArray();var griddata={};$.each(fields,function(i,field){griddata[field.name]=field.value});if(mode==="add"){$($t).jqGrid("addRowData",rowid,griddata,position)}else{if(mode==="set"){$($t).jqGrid("setRowData",rowid,griddata)}}})}});$.jgrid.extend({groupingSetup:function(){return this.each(function(){var $t=this,i,j,cml,cm=$t.p.colModel,grp=$t.p.groupingView,classes=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].grouping;if(grp!==null&&((typeof grp==="object")||$.isFunction(grp))){if(!grp.plusicon){grp.plusicon=classes.icon_plus}if(!grp.minusicon){grp.minusicon=classes.icon_minus}if(!grp.groupField.length){$t.p.grouping=false}else{if(grp.visibiltyOnNextGrouping===undefined){grp.visibiltyOnNextGrouping=[]}grp.lastvalues=[];if(!grp._locgr){grp.groups=[]}grp.counters=[];for(i=0;i<grp.groupField.length;i++){if(!grp.groupOrder[i]){grp.groupOrder[i]="asc"}if(!grp.groupText[i]){grp.groupText[i]="{0}"}if(typeof grp.groupColumnShow[i]!=="boolean"){grp.groupColumnShow[i]=true}if(typeof grp.groupSummary[i]!=="boolean"){grp.groupSummary[i]=false}if(!grp.groupSummaryPos[i]){grp.groupSummaryPos[i]="footer"}if(grp.groupColumnShow[i]===true){grp.visibiltyOnNextGrouping[i]=true;$($t).jqGrid("showCol",grp.groupField[i])}else{grp.visibiltyOnNextGrouping[i]=$("#"+$.jgrid.jqID($t.p.id+"_"+grp.groupField[i])).is(":visible");$($t).jqGrid("hideCol",grp.groupField[i])}}grp.summary=[];if(grp.hideFirstGroupCol){if($.isArray(grp.formatDisplayField)&&!$.isFunction(grp.formatDisplayField[0])){grp.formatDisplayField[0]=function(v){return v}}}for(j=0,cml=cm.length;j<cml;j++){if(grp.hideFirstGroupCol){if(!cm[j].hidden&&grp.groupField[0]===cm[j].name){cm[j].formatter=function(){return""}}}if(cm[j].summaryType){if(cm[j].summaryDivider){grp.summary.push({nm:cm[j].name,st:cm[j].summaryType,v:"",sd:cm[j].summaryDivider,vd:"",sr:cm[j].summaryRound,srt:cm[j].summaryRoundType||"round"})}else{grp.summary.push({nm:cm[j].name,st:cm[j].summaryType,v:"",sr:cm[j].summaryRound,srt:cm[j].summaryRoundType||"round"})}}}}}else{$t.p.grouping=false}})},groupingPrepare:function(record,irow){this.each(function(){var grp=this.p.groupingView,$t=this,i,sumGroups=function(){if($.isFunction(this.st)){this.v=this.st.call($t,this.v,this.nm,record)}else{this.v=$($t).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,record);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=$($t).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,record)}}},grlen=grp.groupField.length,fieldName,v,displayName,displayValue,changed=0;for(i=0;i<grlen;i++){fieldName=grp.groupField[i];displayName=grp.displayField[i];v=record[fieldName];displayValue=displayName==null?null:record[displayName];if(displayValue==null){displayValue=v}if(v!==undefined){if(irow===0){grp.groups.push({idx:i,dataIndex:fieldName,value:v,displayValue:displayValue,startRow:irow,cnt:1,summary:[]});grp.lastvalues[i]=v;grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(true,[],grp.summary)};$.each(grp.counters[i].summary,sumGroups);grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}else{if(typeof v!=="object"&&($.isArray(grp.isInTheSameGroup)&&$.isFunction(grp.isInTheSameGroup[i])?!grp.isInTheSameGroup[i].call($t,grp.lastvalues[i],v,i,grp):grp.lastvalues[i]!==v)){grp.groups.push({idx:i,dataIndex:fieldName,value:v,displayValue:displayValue,startRow:irow,cnt:1,summary:[]});grp.lastvalues[i]=v;changed=1;grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(true,[],grp.summary)};$.each(grp.counters[i].summary,sumGroups);grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}else{if(changed===1){grp.groups.push({idx:i,dataIndex:fieldName,value:v,displayValue:displayValue,startRow:irow,cnt:1,summary:[]});grp.lastvalues[i]=v;grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(true,[],grp.summary)};$.each(grp.counters[i].summary,sumGroups);grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}else{grp.counters[i].cnt+=1;grp.groups[grp.counters[i].pos].cnt=grp.counters[i].cnt;$.each(grp.counters[i].summary,sumGroups);grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}}}}}});return this},groupingToggle:function(hid){this.each(function(){var $t=this,grp=$t.p.groupingView,strpos=hid.split("_"),num=parseInt(strpos[strpos.length-2],10);strpos.splice(strpos.length-2,2);var uid=strpos.join("_"),minus=grp.minusicon,plus=grp.plusicon,tar=$("#"+$.jgrid.jqID(hid)),r=tar.length?tar[0].nextSibling:null,tarspan=$("#"+$.jgrid.jqID(hid)+" span.tree-wrap-"+$t.p.direction),getGroupingLevelFromClass=function(className){var nums=$.map(className.split(" "),function(item){if(item.substring(0,uid.length+1)===uid+"_"){return parseInt(item.substring(uid.length+1),10)}});return nums.length>0?nums[0]:undefined},itemGroupingLevel,showData,collapsed=false,skip=false,frz=$t.p.frozenColumns?$t.p.id+"_frozen":false,tar2=frz?$("#"+$.jgrid.jqID(hid),"#"+$.jgrid.jqID(frz)):false,r2=(tar2&&tar2.length)?tar2[0].nextSibling:null;if(tarspan.hasClass(minus)){if(r){while(r){itemGroupingLevel=getGroupingLevelFromClass(r.className);if(itemGroupingLevel!==undefined&&itemGroupingLevel<=num){break}$(r).hide();r=r.nextSibling;if(frz){$(r2).hide();r2=r2.nextSibling}}}tarspan.removeClass(minus).addClass(plus);collapsed=true}else{if(r){showData=undefined;while(r){itemGroupingLevel=getGroupingLevelFromClass(r.className);if(showData===undefined){showData=itemGroupingLevel===undefined}skip=$(r).hasClass("ui-subgrid")&&$(r).hasClass("ui-sg-collapsed");if(itemGroupingLevel!==undefined){if(itemGroupingLevel<=num){break}if(itemGroupingLevel===num+1){if(!skip){$(r).show().find(">td>span.tree-wrap-"+$t.p.direction).removeClass(minus).addClass(plus);if(frz){$(r2).show().find(">td>span.tree-wrap-"+$t.p.direction).removeClass(minus).addClass(plus)}}}}else{if(showData){if(!skip){$(r).show();if(frz){$(r2).show()}}}}r=r.nextSibling;if(frz){r2=r2.nextSibling}}}tarspan.removeClass(plus).addClass(minus)}$($t).triggerHandler("jqGridGroupingClickGroup",[hid,collapsed]);if($.isFunction($t.p.onClickGroup)){$t.p.onClickGroup.call($t,hid,collapsed)}});return false},groupingRender:function(grdata,colspans,page,rn){return this.each(function(){var $t=this,grp=$t.p.groupingView,str="",icon="",hid,clid,pmrtl=grp.groupCollapse?grp.plusicon:grp.minusicon,gv,cp=[],len=grp.groupField.length,common=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].common;pmrtl=pmrtl+" tree-wrap-"+$t.p.direction;$.each($t.p.colModel,function(i,n){var ii;for(ii=0;ii<len;ii++){if(grp.groupField[ii]===n.name){cp[ii]=i;break}}});var toEnd=0;function findGroupIdx(ind,offset,grp){var ret=false,i;if(offset===0){ret=grp[ind]}else{var id=grp[ind].idx;if(id===0){ret=grp[ind]}else{for(i=ind;i>=0;i--){if(grp[i].idx===id-offset){ret=grp[i];break}}}}return ret}function buildSummaryTd(i,ik,grp,foffset){var fdata=findGroupIdx(i,ik,grp),cm=$t.p.colModel,vv,grlen=fdata.cnt,str="",k;for(k=foffset;k<colspans;k++){var tmpdata="<td "+$t.formatCol(k,1,"")+">&#160;</td>",tplfld="{0}";$.each(fdata.summary,function(){if(this.nm===cm[k].name){if(cm[k].summaryTpl){tplfld=cm[k].summaryTpl}if(typeof this.st==="string"&&this.st.toLowerCase()==="avg"){if(this.sd&&this.vd){this.v=(this.v/this.vd)}else{if(this.v&&grlen>0){this.v=(this.v/grlen)}}}try{this.groupCount=fdata.cnt;this.groupIndex=fdata.dataIndex;this.groupValue=fdata.value;vv=$t.formatter("",this.v,k,this)}catch(ef){vv=this.v}tmpdata="<td "+$t.formatCol(k,1,"")+">"+$.jgrid.template(tplfld,vv)+"</td>";return false}});str+=tmpdata}return str}var sumreverse=$.makeArray(grp.groupSummary),mul;sumreverse.reverse();mul=$t.p.multiselect?' colspan="2"':"";$.each(grp.groups,function(i,n){if(grp._locgr){if(!(n.startRow+n.cnt>(page-1)*rn&&n.startRow<page*rn)){return true}}toEnd++;clid=$t.p.id+"ghead_"+n.idx;hid=clid+"_"+i;icon="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+common.icon_base+" "+pmrtl+"' onclick=\"jQuery('#"+$.jgrid.jqID($t.p.id)+"').jqGrid('groupingToggle','"+hid+"');return false;\"></span>";try{if($.isArray(grp.formatDisplayField)&&$.isFunction(grp.formatDisplayField[n.idx])){n.displayValue=grp.formatDisplayField[n.idx].call($t,n.displayValue,n.value,$t.p.colModel[cp[n.idx]],n.idx,grp);gv=n.displayValue}else{gv=$t.formatter(hid,n.displayValue,cp[n.idx],n.value)}}catch(egv){gv=n.displayValue}var grpTextStr="";if($.isFunction(grp.groupText[n.idx])){grpTextStr=grp.groupText[n.idx].call($t,gv,n.cnt,n.summary)}else{grpTextStr=$.jgrid.template(grp.groupText[n.idx],gv,n.cnt,n.summary)}if(!(typeof grpTextStr==="string"||typeof grpTextStr==="number")){grpTextStr=gv}if(grp.groupSummaryPos[n.idx]==="header"){str+='<tr id="'+hid+'"'+(grp.groupCollapse&&n.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+common.content+" jqgroup ui-row-"+$t.p.direction+" "+clid+'"><td style="padding-left:'+(n.idx*12)+'px;"'+mul+">"+icon+grpTextStr+"</td>";str+=buildSummaryTd(i,0,grp.groups,grp.groupColumnShow[n.idx]===false?(mul===""?2:3):((mul==="")?1:2));str+="</tr>"}else{str+='<tr id="'+hid+'"'+(grp.groupCollapse&&n.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+common.content+" jqgroup ui-row-"+$t.p.direction+" "+clid+'"><td style="padding-left:'+(n.idx*12)+'px;" colspan="'+(grp.groupColumnShow[n.idx]===false?colspans-1:colspans)+'">'+icon+grpTextStr+"</td></tr>"}var leaf=len-1===n.idx;if(leaf){var gg=grp.groups[i+1],kk,ik,offset=0,sgr=n.startRow,end=gg!==undefined?gg.startRow:grp.groups[i].startRow+grp.groups[i].cnt;if(grp._locgr){offset=(page-1)*rn;if(offset>n.startRow){sgr=offset}}for(kk=sgr;kk<end;kk++){if(!grdata[kk-offset]){break}str+=grdata[kk-offset].join("")}if(grp.groupSummaryPos[n.idx]!=="header"){var jj;if(gg!==undefined){for(jj=0;jj<grp.groupField.length;jj++){if(gg.dataIndex===grp.groupField[jj]){break}}toEnd=grp.groupField.length-jj}for(ik=0;ik<toEnd;ik++){if(!sumreverse[ik]){continue}var hhdr="";if(grp.groupCollapse&&!grp.showSummaryOnHide){hhdr=' style="display:none;"'}str+="<tr"+hhdr+' jqfootlevel="'+(n.idx-ik)+'" role="row" class="'+common.content+" jqfoot ui-row-"+$t.p.direction+'">';str+=buildSummaryTd(i,ik,grp.groups,0);str+="</tr>"}toEnd=jj}}});$("#"+$.jgrid.jqID($t.p.id)+" tbody:first").append(str);str=null})},groupingGroupBy:function(name,options){return this.each(function(){var $t=this;if(typeof name==="string"){name=[name]}var grp=$t.p.groupingView;$t.p.grouping=true;grp._locgr=false;if(grp.visibiltyOnNextGrouping===undefined){grp.visibiltyOnNextGrouping=[]}var i;for(i=0;i<grp.groupField.length;i++){if(!grp.groupColumnShow[i]&&grp.visibiltyOnNextGrouping[i]){$($t).jqGrid("showCol",grp.groupField[i])}}for(i=0;i<name.length;i++){grp.visibiltyOnNextGrouping[i]=$("#"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID(name[i])).is(":visible")}$t.p.groupingView=$.extend($t.p.groupingView,options||{});grp.groupField=name;$($t).trigger("reloadGrid")})},groupingRemove:function(current){return this.each(function(){var $t=this;if(current===undefined){current=true}$t.p.grouping=false;if(current===true){var grp=$t.p.groupingView,i;for(i=0;i<grp.groupField.length;i++){if(!grp.groupColumnShow[i]&&grp.visibiltyOnNextGrouping[i]){$($t).jqGrid("showCol",grp.groupField)}}$("tr.jqgroup, tr.jqfoot","#"+$.jgrid.jqID($t.p.id)+" tbody:first").remove();$("tr.jqgrow:hidden","#"+$.jgrid.jqID($t.p.id)+" tbody:first").show()}else{$($t).trigger("reloadGrid")}})},groupingCalculations:{handler:function(fn,v,field,round,roundType,rc){var funcs={sum:function(){return parseFloat(v||0)+parseFloat((rc[field]||0))},min:function(){if(v===""){return parseFloat(rc[field]||0)}return Math.min(parseFloat(v),parseFloat(rc[field]||0))},max:function(){if(v===""){return parseFloat(rc[field]||0)}return Math.max(parseFloat(v),parseFloat(rc[field]||0))},count:function(){if(v===""){v=0}if(rc.hasOwnProperty(field)){return v+1}return 0},avg:function(){return funcs.sum()}};if(!funcs[fn]){throw ("jqGrid Grouping No such method: "+fn)}var res=funcs[fn]();if(round!=null){if(roundType==="fixed"){res=res.toFixed(round)}else{var mul=Math.pow(10,round);res=Math.round(res*mul)/mul}}return res}},setGroupHeaders:function(o){o=$.extend({useColSpanStyle:false,groupHeaders:[]},o||{});return this.each(function(){var ts=this,i,cmi,skip=0,$tr,$colHeader,th,$th,thStyle,iCol,cghi,numberOfColumns,titleText,cVisibleColumns,className,colModel=ts.p.colModel,cml=colModel.length,ths=ts.grid.headers,$htable=$("table.ui-jqgrid-htable",ts.grid.hDiv),$trLabels=$htable.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),$thead=$htable.children("thead"),$theadInTable,$firstHeaderRow=$htable.find(".jqg-first-row-header"),base=$.jgrid.styleUI[(ts.p.styleUI||"jQueryUI")].base;if(!ts.p.groupHeader){ts.p.groupHeader=[]}ts.p.groupHeader.push(o);if($firstHeaderRow[0]===undefined){$firstHeaderRow=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto")}else{$firstHeaderRow.empty()}var $firstRow,inColumnHeader=function(text,columnHeaders){var length=columnHeaders.length,i;for(i=0;i<length;i++){if(columnHeaders[i].startColumnName===text){return i}}return -1};$(ts).prepend($thead);$tr=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(i=0;i<cml;i++){th=ths[i].el;$th=$(th);cmi=colModel[i];thStyle={height:"0px",width:ths[i].width+"px",display:(cmi.hidden?"none":"")};$("<th>",{role:"gridcell"}).css(thStyle).addClass("ui-first-th-"+ts.p.direction).appendTo($firstHeaderRow);th.style.width="";iCol=inColumnHeader(cmi.name,o.groupHeaders);if(iCol>=0){cghi=o.groupHeaders[iCol];numberOfColumns=cghi.numberOfColumns;titleText=cghi.titleText;className=cghi.className||"";for(cVisibleColumns=0,iCol=0;iCol<numberOfColumns&&(i+iCol<cml);iCol++){if(!colModel[i+iCol].hidden){cVisibleColumns++}}$colHeader=$("<th>").attr({role:"columnheader"}).addClass(base.headerBox+" ui-th-column-header ui-th-"+ts.p.direction+" "+className).html(titleText);if(cVisibleColumns>0){$colHeader.attr("colspan",String(cVisibleColumns))}if(ts.p.headertitles){$colHeader.attr("title",$colHeader.text())}if(cVisibleColumns===0){$colHeader.hide()}$th.before($colHeader);$tr.append(th);skip=numberOfColumns-1}else{if(skip===0){if(o.useColSpanStyle){$th.attr("rowspan","2")}else{$("<th>",{role:"columnheader"}).addClass(base.headerBox+" ui-th-column-header ui-th-"+ts.p.direction).css({display:cmi.hidden?"none":""}).insertBefore($th);$tr.append(th)}}else{$tr.append(th);skip--}}}$theadInTable=$(ts).children("thead");$theadInTable.prepend($firstHeaderRow);$tr.insertAfter($trLabels);$htable.append($theadInTable);if(o.useColSpanStyle){$htable.find("span.ui-jqgrid-resize").each(function(){var $parent=$(this).parent();if($parent.is(":visible")){this.style.cssText="height: "+$parent.height()+"px !important; cursor: col-resize;"}});$htable.find("div.ui-jqgrid-sortable").each(function(){var $ts=$(this),$parent=$ts.parent();if($parent.is(":visible")&&$parent.is(":has(span.ui-jqgrid-resize)")){$ts.css("top",($parent.height()-$ts.outerHeight())/2-4+"px")}})}$firstRow=$theadInTable.find("tr.jqg-first-row-header");$(ts).bind("jqGridResizeStop.setGroupHeaders",function(e,nw,idx){$firstRow.find("th").eq(idx)[0].style.width=nw+"px"})})},destroyGroupHeader:function(nullHeader){if(nullHeader===undefined){nullHeader=true}return this.each(function(){var $t=this,$tr,i,l,headers,$th,$resizing,grid=$t.grid,thead=$("table.ui-jqgrid-htable thead",grid.hDiv),cm=$t.p.colModel,hc;if(!grid){return}$(this).unbind(".setGroupHeaders");$tr=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels");headers=grid.headers;for(i=0,l=headers.length;i<l;i++){hc=cm[i].hidden?"none":"";$th=$(headers[i].el).width(headers[i].width).css("display",hc);try{$th.removeAttr("rowSpan")}catch(rs){$th.attr("rowSpan",1)}$tr.append($th);$resizing=$th.children("span.ui-jqgrid-resize");if($resizing.length>0){$resizing[0].style.height=""}$th.children("div")[0].style.top=""}$(thead).children("tr.ui-jqgrid-labels").remove();$(thead).prepend($tr);if(nullHeader===true){$($t).jqGrid("setGridParam",{groupHeader:null})}})}});$.jgrid=$.jgrid||{};$.extend($.jgrid,{saveState:function(jqGridId,o){o=$.extend({useStorage:true,storageType:"localStorage",beforeSetItem:null,compression:false,compressionModule:"LZString",compressionMethod:"compressToUTF16",debug:false},o||{});if(!jqGridId){return}var gridstate="",data="",ret,$t=$("#"+jqGridId)[0],tmp;if(!$t.grid){return}tmp=$($t).data("inlineNav");if(tmp&&$t.p.inlineNav){$($t).jqGrid("setGridParam",{_iN:tmp})}tmp=$($t).data("filterToolbar");if(tmp&&$t.p.filterToolbar){$($t).jqGrid("setGridParam",{_fT:tmp})}gridstate=$($t).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:""});data=$($t.grid.bDiv).find(".ui-jqgrid-btable tbody:first").html();var firstrow=data.indexOf("</tr>");data=data.slice(firstrow+5);if($.isFunction(o.beforeSetItem)){ret=o.beforeSetItem.call($t,gridstate);if(ret!=null){gridstate=ret}}if(o.debug){$("#gbox_tree").prepend('<a id="link_save" target="_blank" download="jqGrid_dump.txt">Click to save Dump Data</a>');var temp=[],file,properties={},url;temp.push("Grid Options\n");temp.push(gridstate);temp.push("\n");temp.push("GridData\n");temp.push(data);properties.type="plain/text;charset=utf-8";try{file=new File(temp,"jqGrid_dump.txt",properties)}catch(e){file=new Blob(temp,properties)}url=URL.createObjectURL(file);$("#link_save").attr("href",url).bind("click",function(){$(this).remove()})}if(o.compression){if(o.compressionModule){try{ret=window[o.compressionModule][o.compressionMethod](gridstate);if(ret!=null){gridstate=ret;data=window[o.compressionModule][o.compressionMethod](data)}}catch(e){}}}if(o.useStorage&&$.jgrid.isLocalStorage()){try{window[o.storageType].setItem("jqGrid"+$t.p.id,gridstate);window[o.storageType].setItem("jqGrid"+$t.p.id+"_data",data)}catch(e){if(e.code===22){alert("Local storage limit is over!")}}}return gridstate},loadState:function(jqGridId,gridstring,o){o=$.extend({useStorage:true,storageType:"localStorage",clearAfterLoad:false,beforeSetGrid:null,afterSetGrid:null,decompression:false,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16"},o||{});if(!jqGridId){return}var ret,tmp,$t=$("#"+jqGridId)[0],data,iN,fT;if(o.useStorage){try{gridstring=window[o.storageType].getItem("jqGrid"+$t.id);data=window[o.storageType].getItem("jqGrid"+$t.id+"_data")}catch(e){}}if(!gridstring){return}if(o.decompression){if(o.decompressionModule){try{ret=window[o.decompressionModule][o.decompressionMethod](gridstring);if(ret!=null){gridstring=ret;data=window[o.decompressionModule][o.decompressionMethod](data)}}catch(e){}}}ret=jqGridUtils.parse(gridstring);if(ret&&$.type(ret)==="object"){if($t.grid){$.jgrid.gridUnload(jqGridId)}if($.isFunction(o.beforeSetGrid)){tmp=o.beforeSetGrid(ret);if(tmp&&$.type(tmp)==="object"){ret=tmp}}var retfunc=function(param){var p;p=param;return p},prm={reccount:ret.reccount,records:ret.records,lastpage:ret.lastpage,shrinkToFit:retfunc(ret.shrinkToFit),data:retfunc(ret.data),datatype:retfunc(ret.datatype),grouping:retfunc(ret.grouping)};ret.shrinkToFit=false;ret.data=[];ret.datatype="local";ret.grouping=false;if(ret.inlineNav){iN=retfunc(ret._iN);ret._iN=null;delete ret._iN}if(ret.filterToolbar){fT=retfunc(ret._fT);ret._fT=null;delete ret._fT}var grid=$("#"+jqGridId).jqGrid(ret);grid.append(data);grid.jqGrid("setGridParam",prm);if(ret.storeNavOptions&&ret.navGrid){grid[0].p.navGrid=false;grid.jqGrid("navGrid",ret.pager,ret.navOptions,ret.editOptions,ret.addOptions,ret.delOptions,ret.searchOptions,ret.viewOptions);if(ret.navButtons&&ret.navButtons.length){for(var b=0;b<ret.navButtons.length;b++){if("sepclass" in ret.navButtons[b][1]){grid.jqGrid("navSeparatorAdd",ret.navButtons[b][0],ret.navButtons[b][1])}else{grid.jqGrid("navButtonAdd",ret.navButtons[b][0],ret.navButtons[b][1])}}}}grid[0].refreshIndex();if(ret.subGrid){var ms=ret.multiselect===1?1:0,rn=ret.rownumbers===true?1:0;grid.jqGrid("addSubGrid",ms+rn)}if(ret.treeGrid){var i=1,len=grid[0].rows.length,expCol=ret.expColInd,isLeaf=ret.treeReader.leaf_field,expanded=ret.treeReader.expanded_field;while(i<len){$(grid[0].rows[i].cells[expCol]).find("div.treeclick").bind("click",function(e){var target=e.target||e.srcElement,ind2=$.jgrid.stripPref(ret.idPrefix,$(target,grid[0].rows).closest("tr.jqgrow")[0].id),pos=grid[0].p._index[ind2];if(!grid[0].p.data[pos][isLeaf]){if(grid[0].p.data[pos][expanded]){grid.jqGrid("collapseRow",grid[0].p.data[pos]);grid.jqGrid("collapseNode",grid[0].p.data[pos])}else{grid.jqGrid("expandRow",grid[0].p.data[pos]);grid.jqGrid("expandNode",grid[0].p.data[pos])}}return false});if(ret.ExpandColClick===true){$(grid[0].rows[i].cells[expCol]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(e){var target=e.target||e.srcElement,ind2=$.jgrid.stripPref(ret.idPrefix,$(target,grid[0].rows).closest("tr.jqgrow")[0].id),pos=grid[0].p._index[ind2];if(!grid[0].p.data[pos][isLeaf]){if(grid[0].p.data[pos][expanded]){grid.jqGrid("collapseRow",grid[0].p.data[pos]);grid.jqGrid("collapseNode",grid[0].p.data[pos])}else{grid.jqGrid("expandRow",grid[0].p.data[pos]);grid.jqGrid("expandNode",grid[0].p.data[pos])}}grid.jqGrid("setSelection",ind2);return false})}i++}}if(ret.inlineNav&&iN){grid.jqGrid("setGridParam",{inlineNav:false});grid.jqGrid("inlineNav",ret.pager,iN)}if(ret.filterToolbar&&fT){grid.jqGrid("setGridParam",{filterToolbar:false});fT.restoreFromFilters=true;grid.jqGrid("filterToolbar",fT)}if(ret.frozenColumns){grid.jqGrid("setFrozenColumns")}grid[0].updatepager(true,true);if($.isFunction(o.afterSetGrid)){o.afterSetGrid(grid)}if(o.clearAfterLoad){window[o.storageType].removeItem("jqGrid"+$t.id);window[o.storageType].removeItem("jqGrid"+$t.id+"_data")}}else{alert("can not convert to object")}},isGridInStorage:function(jqGridId,options){var o={storageType:"localStorage"};o=$.extend(o,options||{});var ret,gridstring,data;try{gridstring=window[o.storageType].getItem("jqGrid"+jqGridId);data=window[o.storageType].getItem("jqGrid"+jqGridId+"_data");ret=gridstring!=null&&data!=null&&typeof gridstring==="string"&&typeof data==="string"}catch(e){ret=false}return ret},setRegional:function(jqGridId,options){var o={storageType:"sessionStorage"};o=$.extend(o,options||{});if(!o.regional){return}$.jgrid.saveState(jqGridId,o);o.beforeSetGrid=function(params){params.regional=o.regional;params.force_regional=true;return params};$.jgrid.loadState(jqGridId,null,o);var grid=$("#"+jqGridId)[0],model=$(grid).jqGrid("getGridParam","colModel"),i=-1,nav=$.jgrid.getRegional(grid,"nav");$.each(model,function(k){if(this.formatter&&this.formatter==="actions"){i=k;return false}});if(i!==-1&&nav){$("#"+jqGridId+" tbody tr").each(function(){var td=this.cells[i];$(td).find(".ui-inline-edit").attr("title",nav.edittitle);$(td).find(".ui-inline-del").attr("title",nav.deltitle);$(td).find(".ui-inline-save").attr("title",nav.savetitle);$(td).find(".ui-inline-cancel").attr("title",nav.canceltitle)})}try{window[o.storageType].removeItem("jqGrid"+grid.id);window[o.storageType].removeItem("jqGrid"+grid.id+"_data")}catch(e){}},jqGridImport:function(jqGridId,o){o=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},o||{});var $t=(jqGridId.indexOf("#")===0?"":"#")+$.jgrid.jqID(jqGridId);var xmlConvert=function(xml,o){var cnfg=$(o.xmlGrid.config,xml)[0];var xmldata=$(o.xmlGrid.data,xml)[0],jstr,jstr1,key;if(jqGridUtils.xmlToJSON){jstr=jqGridUtils.xmlToJSON(cnfg);for(key in jstr){if(jstr.hasOwnProperty(key)){jstr1=jstr[key]}}if(xmldata){var svdatatype=jstr.grid.datatype;jstr.grid.datatype="xmlstring";jstr.grid.datastr=xml;$($t).jqGrid(jstr1).jqGrid("setGridParam",{datatype:svdatatype})}else{setTimeout(function(){$($t).jqGrid(jstr1)},0)}}else{alert("xml2json or parse are not present")}};var jsonConvert=function(jsonstr,o){if(jsonstr&&typeof jsonstr==="string"){var json=jqGridUtils.parse(jsonstr);var gprm=json[o.jsonGrid.config];var jdata=json[o.jsonGrid.data];if(jdata){var svdatatype=gprm.datatype;gprm.datatype="jsonstring";gprm.datastr=jdata;$($t).jqGrid(gprm).jqGrid("setGridParam",{datatype:svdatatype})}else{$($t).jqGrid(gprm)}}};switch(o.imptype){case"xml":$.ajax($.extend({url:o.impurl,type:o.mtype,data:o.impData,dataType:"xml",complete:function(xml,stat){if(stat==="success"){xmlConvert(xml.responseXML,o);$($t).triggerHandler("jqGridImportComplete",[xml,o]);if($.isFunction(o.importComplete)){o.importComplete(xml)}}xml=null}},o.ajaxOptions));break;case"xmlstring":if(o.impstring&&typeof o.impstring==="string"){var xmld=$.parseXML(o.impstring);if(xmld){xmlConvert(xmld,o);$($t).triggerHandler("jqGridImportComplete",[xmld,o]);if($.isFunction(o.importComplete)){o.importComplete(xmld)}}}break;case"json":$.ajax($.extend({url:o.impurl,type:o.mtype,data:o.impData,dataType:"json",complete:function(json){try{jsonConvert(json.responseText,o);$($t).triggerHandler("jqGridImportComplete",[json,o]);if($.isFunction(o.importComplete)){o.importComplete(json)}}catch(ee){}json=null}},o.ajaxOptions));break;case"jsonstring":if(o.impstring&&typeof o.impstring==="string"){jsonConvert(o.impstring,o);$($t).triggerHandler("jqGridImportComplete",[o.impstring,o]);if($.isFunction(o.importComplete)){o.importComplete(o.impstring)}}break}}});$.jgrid.extend({jqGridExport:function(o){o=$.extend({exptype:"xmlstring",root:"grid",ident:"\t",addOptions:{}},o||{});var ret=null;this.each(function(){if(!this.grid){return}var key,gprm=$.extend(true,{},$(this).jqGrid("getGridParam"),o.addOptions);if(gprm.rownumbers){gprm.colNames.splice(0,1);gprm.colModel.splice(0,1)}if(gprm.multiselect){gprm.colNames.splice(0,1);gprm.colModel.splice(0,1)}if(gprm.subGrid){gprm.colNames.splice(0,1);gprm.colModel.splice(0,1)}gprm.knv=null;switch(o.exptype){case"xmlstring":ret="<"+o.root+">"+jqGridUtils.jsonToXML(gprm,{xmlDecl:""})+"</"+o.root+">";break;case"jsonstring":ret=jqGridUtils.stringify(gprm);if(o.root){ret="{"+o.root+":"+ret+"}"}break}});return ret},excelExport:function(o){o=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",beforeExport:null,exporthidden:false,exportgrouping:false,exportOptions:{}},o||{});return this.each(function(){if(!this.grid){return}var url;if(o.exptype==="remote"){var pdata=$.extend({},this.p.postData),expg;pdata[o.oper]=o.tag;if($.isFunction(o.beforeExport)){var result=o.beforeExport.call(this,pdata);if($.isPlainObject(result)){pdata=result}}if(o.exporthidden){var cm=this.p.colModel,i,len=cm.length,newm=[];for(i=0;i<len;i++){if(cm[i].hidden===undefined){cm[i].hidden=false}newm.push({name:cm[i].name,hidden:cm[i].hidden})}var newm1=JSON.stringify(newm);if(typeof newm1==="string"){pdata.colModel=newm1}}if(o.exportgrouping){expg=JSON.stringify(this.p.groupingView);if(typeof expg==="string"){pdata.groupingView=expg}}var params=jQuery.param(pdata);if(o.url.indexOf("?")!==-1){url=o.url+"&"+params}else{url=o.url+"?"+params}window.location=url}})}});$.jgrid.inlineEdit=$.jgrid.inlineEdit||{};$.jgrid.extend({editRow:function(rowid,keys,oneditfunc,successfunc,url,extraparam,aftersavefunc,errorfunc,afterrestorefunc){var o={},args=$.makeArray(arguments).slice(1);if($.type(args[0])==="object"){o=args[0]}else{if(keys!==undefined){o.keys=keys}if($.isFunction(oneditfunc)){o.oneditfunc=oneditfunc}if($.isFunction(successfunc)){o.successfunc=successfunc}if(url!==undefined){o.url=url}if(extraparam!==undefined){o.extraparam=extraparam}if($.isFunction(aftersavefunc)){o.aftersavefunc=aftersavefunc}if($.isFunction(errorfunc)){o.errorfunc=errorfunc}if($.isFunction(afterrestorefunc)){o.afterrestorefunc=afterrestorefunc}}o=$.extend(true,{keys:false,keyevent:"keydown",oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,mtype:"POST",focusField:true},$.jgrid.inlineEdit,o);return this.each(function(){var $t=this,nm,tmp,editable,cnt=0,focus=null,svr={},ind,cm,bfer,inpclass=$(this).jqGrid("getStyleUI",$t.p.styleUI+".inlinedit","inputClass",true);if(!$t.grid){return}ind=$($t).jqGrid("getInd",rowid,true);if(ind===false){return}bfer=$.isFunction(o.beforeEditRow)?o.beforeEditRow.call($t,o,rowid):undefined;if(bfer===undefined){bfer=true}if(!bfer){return}editable=$(ind).attr("editable")||"0";if(editable==="0"&&!$(ind).hasClass("not-editable-row")){cm=$t.p.colModel;$('td[role="gridcell"]',ind).each(function(i){nm=cm[i].name;var treeg=$t.p.treeGrid===true&&nm===$t.p.ExpandColumn;if(treeg){tmp=$("span:first",this).html()}else{try{tmp=$.unformat.call($t,this,{rowId:rowid,colModel:cm[i]},i)}catch(_){tmp=(cm[i].edittype&&cm[i].edittype==="textarea")?$(this).text():$(this).html()}}if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp)}svr[nm]=tmp;if(cm[i].editable===true){if(focus===null){focus=i}if(treeg){$("span:first",this).html("")}else{$(this).html("")}var opt=$.extend({},cm[i].editoptions||{},{id:rowid+"_"+nm,name:nm,rowId:rowid,oper:"edit"});if(!cm[i].edittype){cm[i].edittype="text"}if(tmp==="&nbsp;"||tmp==="&#160;"||(tmp.length===1&&tmp.charCodeAt(0)===160)){tmp=""}var elc=$.jgrid.createEl.call($t,cm[i].edittype,opt,tmp,true,$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));$(elc).addClass("editable inline-edit-cell");if($.inArray(cm[i].edittype,["text","textarea","password","select"])>-1){$(elc).addClass(inpclass)}if(treeg){$("span:first",this).append(elc)}else{$(this).append(elc)}$.jgrid.bindEv.call($t,elc,opt);if(cm[i].edittype==="select"&&cm[i].editoptions!==undefined&&cm[i].editoptions.multiple===true&&cm[i].editoptions.dataUrl===undefined&&$.jgrid.msie){$(elc).width($(elc).width())}cnt++}}});if(cnt>0){svr.id=rowid;$t.p.savedRow.push(svr);$(ind).attr("editable","1");if(o.focusField){if(typeof o.focusField==="number"&&parseInt(o.focusField,10)<=cm.length){focus=o.focusField}setTimeout(function(){var fe=$("td:eq("+focus+") :input:visible",ind).not(":disabled");if(fe.length>0){fe.focus()}},0)}if(o.keys===true){$(ind).bind(o.keyevent,function(e){if(e.keyCode===27){$($t).jqGrid("restoreRow",rowid,o.afterrestorefunc);if($t.p.inlineNav){try{$($t).jqGrid("showAddEditButtons")}catch(eer1){}}return false}if(e.keyCode===13){var ta=e.target;if(ta.tagName==="TEXTAREA"){return true}if($($t).jqGrid("saveRow",rowid,o)){if($t.p.inlineNav){try{$($t).jqGrid("showAddEditButtons")}catch(eer2){}}}return false}})}$($t).triggerHandler("jqGridInlineEditRow",[rowid,o]);if($.isFunction(o.oneditfunc)){o.oneditfunc.call($t,rowid)}}}})},saveRow:function(rowid,successfunc,url,extraparam,aftersavefunc,errorfunc,afterrestorefunc){var args=$.makeArray(arguments).slice(1),o={},$t=this[0];if($.type(args[0])==="object"){o=args[0]}else{if($.isFunction(successfunc)){o.successfunc=successfunc}if(url!==undefined){o.url=url}if(extraparam!==undefined){o.extraparam=extraparam}if($.isFunction(aftersavefunc)){o.aftersavefunc=aftersavefunc}if($.isFunction(errorfunc)){o.errorfunc=errorfunc}if($.isFunction(afterrestorefunc)){o.afterrestorefunc=afterrestorefunc}}o=$.extend(true,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,mtype:"POST",saveui:"enable",savetext:$.jgrid.getRegional($t,"defaults.savetext")},$.jgrid.inlineEdit,o);var success=false,nm,tmp={},tmp2={},tmp3={},editable,fr,cv,ind,nullIfEmpty=false,error=$.trim($($t).jqGrid("getStyleUI",$t.p.styleUI+".common","error",true));if(!$t.grid){return success}ind=$($t).jqGrid("getInd",rowid,true);if(ind===false){return success}var errors=$.jgrid.getRegional($t,"errors"),edit=$.jgrid.getRegional($t,"edit"),bfsr=$.isFunction(o.beforeSaveRow)?o.beforeSaveRow.call($t,o,rowid):undefined;if(bfsr===undefined){bfsr=true}if(!bfsr){return}editable=$(ind).attr("editable");o.url=o.url||$t.p.editurl;if(editable==="1"){var cm;$('td[role="gridcell"]',ind).each(function(i){cm=$t.p.colModel[i];nm=cm.name;if(nm!=="cb"&&nm!=="subgrid"&&cm.editable===true&&nm!=="rn"&&!$(this).hasClass("not-editable-cell")){switch(cm.edittype){case"checkbox":var cbv=["Yes","No"];if(cm.editoptions){cbv=cm.editoptions.value.split(":")}tmp[nm]=$("input",this).is(":checked")?cbv[0]:cbv[1];break;case"text":case"password":case"textarea":case"button":tmp[nm]=$("input, textarea",this).val();break;case"select":if(!cm.editoptions.multiple){tmp[nm]=$("select option:selected",this).val();tmp2[nm]=$("select option:selected",this).text()}else{var sel=$("select",this),selectedText=[];tmp[nm]=$(sel).val();if(tmp[nm]){tmp[nm]=tmp[nm].join(",")}else{tmp[nm]=""}$("select option:selected",this).each(function(i,selected){selectedText[i]=$(selected).text()});tmp2[nm]=selectedText.join(",")}if(cm.formatter&&cm.formatter==="select"){tmp2={}}break;case"custom":try{if(cm.editoptions&&$.isFunction(cm.editoptions.custom_value)){tmp[nm]=cm.editoptions.custom_value.call($t,$(".customelement",this),"get");if(tmp[nm]===undefined){throw"e2"}}else{throw"e1"}}catch(e){if(e==="e1"){$.jgrid.info_dialog(errors.errcap,"function 'custom_value' "+edit.msg.nodefined,edit.bClose,{styleUI:$t.p.styleUI})}else{$.jgrid.info_dialog(errors.errcap,e.message,edit.bClose,{styleUI:$t.p.styleUI})}}break}cv=$.jgrid.checkValues.call($t,tmp[nm],i);if(cv[0]===false){return false}if($t.p.autoencode){tmp[nm]=$.jgrid.htmlEncode(tmp[nm])}if(o.url!=="clientArray"&&cm.editoptions&&cm.editoptions.NullIfEmpty===true){if(tmp[nm]===""){tmp3[nm]="null";nullIfEmpty=true}}}});if(cv[0]===false){try{var tr=$($t).jqGrid("getGridRowById",rowid),positions=$.jgrid.findPos(tr);$.jgrid.info_dialog(errors.errcap,cv[1],edit.bClose,{left:positions[0],top:positions[1]+$(tr).outerHeight(),styleUI:$t.p.styleUI})}catch(e){alert(cv[1])}return success}var idname,opers=$t.p.prmNames,oldRowId=rowid;if($t.p.keyName===false){idname=opers.id}else{idname=$t.p.keyName}if(tmp){tmp[opers.oper]=opers.editoper;if(tmp[idname]===undefined||tmp[idname]===""){tmp[idname]=rowid}else{if(ind.id!==$t.p.idPrefix+tmp[idname]){var oldid=$.jgrid.stripPref($t.p.idPrefix,rowid);if($t.p._index[oldid]!==undefined){$t.p._index[tmp[idname]]=$t.p._index[oldid];delete $t.p._index[oldid]}rowid=$t.p.idPrefix+tmp[idname];$(ind).attr("id",rowid);if($t.p.selrow===oldRowId){$t.p.selrow=rowid}if($.isArray($t.p.selarrrow)){var i=$.inArray(oldRowId,$t.p.selarrrow);if(i>=0){$t.p.selarrrow[i]=rowid}}if($t.p.multiselect){var newCboxId="jqg_"+$t.p.id+"_"+rowid;$("input.cbox",ind).attr("id",newCboxId).attr("name",newCboxId)}}}if($t.p.inlineData===undefined){$t.p.inlineData={}}tmp=$.extend({},tmp,$t.p.inlineData,o.extraparam)}if(o.url==="clientArray"){tmp=$.extend({},tmp,tmp2);if($t.p.autoencode){$.each(tmp,function(n,v){tmp[n]=$.jgrid.htmlDecode(v)})}var k,resp=$($t).jqGrid("setRowData",rowid,tmp);$(ind).attr("editable","0");for(k=0;k<$t.p.savedRow.length;k++){if(String($t.p.savedRow[k].id)===String(oldRowId)){fr=k;break}}if(fr>=0){$t.p.savedRow.splice(fr,1)}$($t).triggerHandler("jqGridInlineAfterSaveRow",[rowid,resp,tmp,o]);if($.isFunction(o.aftersavefunc)){o.aftersavefunc.call($t,rowid,resp,tmp,o)}success=true;$(ind).removeClass("jqgrid-new-row").unbind("keydown")}else{$($t).jqGrid("progressBar",{method:"show",loadtype:o.saveui,htmlcontent:o.savetext});tmp3=$.extend({},tmp,tmp3);tmp3[idname]=$.jgrid.stripPref($t.p.idPrefix,tmp3[idname]);$.ajax($.extend({url:o.url,data:$.isFunction($t.p.serializeRowData)?$t.p.serializeRowData.call($t,tmp3):tmp3,type:o.mtype,async:false,complete:function(res,stat){$($t).jqGrid("progressBar",{method:"hide",loadtype:o.saveui,htmlcontent:o.savetext});if(stat==="success"){var ret=true,sucret,k;sucret=$($t).triggerHandler("jqGridInlineSuccessSaveRow",[res,rowid,o]);if(!$.isArray(sucret)){sucret=[true,tmp3]}if(sucret[0]&&$.isFunction(o.successfunc)){sucret=o.successfunc.call($t,res)}if($.isArray(sucret)){ret=sucret[0];tmp=sucret[1]||tmp}else{ret=sucret}if(ret===true){if($t.p.autoencode){$.each(tmp,function(n,v){tmp[n]=$.jgrid.htmlDecode(v)})}if(nullIfEmpty){$.each(tmp,function(n){if(tmp[n]==="null"){tmp[n]=""}})}tmp=$.extend({},tmp,tmp2);$($t).jqGrid("setRowData",rowid,tmp);$(ind).attr("editable","0");for(k=0;k<$t.p.savedRow.length;k++){if(String($t.p.savedRow[k].id)===String(rowid)){fr=k;break}}if(fr>=0){$t.p.savedRow.splice(fr,1)}$($t).triggerHandler("jqGridInlineAfterSaveRow",[rowid,res,tmp,o]);if($.isFunction(o.aftersavefunc)){o.aftersavefunc.call($t,rowid,res,tmp,o)}success=true;$(ind).removeClass("jqgrid-new-row").unbind("keydown")}else{$($t).triggerHandler("jqGridInlineErrorSaveRow",[rowid,res,stat,null,o]);if($.isFunction(o.errorfunc)){o.errorfunc.call($t,rowid,res,stat,null)}if(o.restoreAfterError===true){$($t).jqGrid("restoreRow",rowid,o.afterrestorefunc)}}}},error:function(res,stat,err){$("#lui_"+$.jgrid.jqID($t.p.id)).hide();$($t).triggerHandler("jqGridInlineErrorSaveRow",[rowid,res,stat,err,o]);if($.isFunction(o.errorfunc)){o.errorfunc.call($t,rowid,res,stat,err)}else{var rT=res.responseText||res.statusText;try{$.jgrid.info_dialog(errors.errcap,'<div class="'+error+'">'+rT+"</div>",edit.bClose,{buttonalign:"right",styleUI:$t.p.styleUI})}catch(e){alert(rT)}}if(o.restoreAfterError===true){$($t).jqGrid("restoreRow",rowid,o.afterrestorefunc)}}},$.jgrid.ajaxOptions,$t.p.ajaxRowOptions||{}))}}return success},restoreRow:function(rowid,afterrestorefunc){var args=$.makeArray(arguments).slice(1),o={};if($.type(args[0])==="object"){o=args[0]}else{if($.isFunction(afterrestorefunc)){o.afterrestorefunc=afterrestorefunc}}o=$.extend(true,{},$.jgrid.inlineEdit,o);return this.each(function(){var $t=this,fr=-1,ind,ares={},k;if(!$t.grid){return}ind=$($t).jqGrid("getInd",rowid,true);if(ind===false){return}var bfcr=$.isFunction(o.beforeCancelRow)?o.beforeCancelRow.call($t,o,rowid):undefined;if(bfcr===undefined){bfcr=true}if(!bfcr){return}for(k=0;k<$t.p.savedRow.length;k++){if(String($t.p.savedRow[k].id)===String(rowid)){fr=k;break}}if(fr>=0){if($.isFunction($.fn.datepicker)){try{$("input.hasDatepicker","#"+$.jgrid.jqID(ind.id)).datepicker("hide")}catch(e){}}$.each($t.p.colModel,function(){if(this.editable===true&&$t.p.savedRow[fr].hasOwnProperty(this.name)){ares[this.name]=$t.p.savedRow[fr][this.name]}});$($t).jqGrid("setRowData",rowid,ares);$(ind).attr("editable","0").unbind("keydown");$t.p.savedRow.splice(fr,1);if($("#"+$.jgrid.jqID(rowid),"#"+$.jgrid.jqID($t.p.id)).hasClass("jqgrid-new-row")){setTimeout(function(){$($t).jqGrid("delRowData",rowid);$($t).jqGrid("showAddEditButtons")},0)}}$($t).triggerHandler("jqGridInlineAfterRestoreRow",[rowid]);if($.isFunction(o.afterrestorefunc)){o.afterrestorefunc.call($t,rowid)}})},addRow:function(p){p=$.extend(true,{rowID:null,initdata:{},position:"first",useDefValues:true,useFormatter:false,addRowParams:{extraparam:{}}},p||{});return this.each(function(){if(!this.grid){return}var $t=this;var bfar=$.isFunction(p.beforeAddRow)?p.beforeAddRow.call($t,p.addRowParams):undefined;if(bfar===undefined){bfar=true}if(!bfar){return}p.rowID=$.isFunction(p.rowID)?p.rowID.call($t,p):((p.rowID!=null)?p.rowID:$.jgrid.randId());if(p.useDefValues===true){$($t.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var opt=this.editoptions.defaultValue,tmp=$.isFunction(opt)?opt.call($t):opt;p.initdata[this.name]=tmp}})}$($t).jqGrid("addRowData",p.rowID,p.initdata,p.position);p.rowID=$t.p.idPrefix+p.rowID;$("#"+$.jgrid.jqID(p.rowID),"#"+$.jgrid.jqID($t.p.id)).addClass("jqgrid-new-row");if(p.useFormatter){$("#"+$.jgrid.jqID(p.rowID)+" .ui-inline-edit","#"+$.jgrid.jqID($t.p.id)).click()}else{var opers=$t.p.prmNames,oper=opers.oper;p.addRowParams.extraparam[oper]=opers.addoper;$($t).jqGrid("editRow",p.rowID,p.addRowParams);$($t).jqGrid("setSelection",p.rowID)}})},inlineNav:function(elem,o){var $t=this[0],regional=$.jgrid.getRegional($t,"nav"),icons=$.jgrid.styleUI[$t.p.styleUI].inlinedit;o=$.extend(true,{edit:true,editicon:icons.icon_edit_nav,add:true,addicon:icons.icon_add_nav,save:true,saveicon:icons.icon_save_nav,cancel:true,cancelicon:icons.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:true},regional,o||{});return this.each(function(){if(!this.grid||this.p.inlineNav){return}var gID=$.jgrid.jqID($t.p.id),disabled=$.trim($($t).jqGrid("getStyleUI",$t.p.styleUI+".common","disabled",true));if(!$t.p.navGrid){$($t).jqGrid("navGrid",elem,{refresh:false,edit:false,add:false,del:false,search:false,view:false})}if(!$($t).data("inlineNav")){$($t).data("inlineNav",o)}if($t.p.force_regional){o=$.extend(o,regional)}$t.p.inlineNav=true;if(o.addParams.useFormatter===true){var cm=$t.p.colModel,i;for(i=0;i<cm.length;i++){if(cm[i].formatter&&cm[i].formatter==="actions"){if(cm[i].formatoptions){var defaults={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},ap=$.extend(defaults,cm[i].formatoptions);o.addParams.addRowParams={keys:ap.keys,oneditfunc:ap.onEdit,successfunc:ap.onSuccess,url:ap.url,extraparam:ap.extraparam,aftersavefunc:ap.afterSave,errorfunc:ap.onError,afterrestorefunc:ap.afterRestore}}break}}}if(o.add){$($t).jqGrid("navButtonAdd",elem,{caption:o.addtext,title:o.addtitle,buttonicon:o.addicon,id:$t.p.id+"_iladd",internal:true,onClickButton:function(){$($t).jqGrid("addRow",o.addParams);if(!o.addParams.useFormatter){$("#"+gID+"_ilsave").removeClass(disabled);$("#"+gID+"_ilcancel").removeClass(disabled);$("#"+gID+"_iladd").addClass(disabled);$("#"+gID+"_iledit").addClass(disabled)}}})}if(o.edit){$($t).jqGrid("navButtonAdd",elem,{caption:o.edittext,title:o.edittitle,buttonicon:o.editicon,id:$t.p.id+"_iledit",internal:true,onClickButton:function(){var sr=$($t).jqGrid("getGridParam","selrow");if(sr){$($t).jqGrid("editRow",sr,o.editParams);$("#"+gID+"_ilsave").removeClass(disabled);$("#"+gID+"_ilcancel").removeClass(disabled);$("#"+gID+"_iladd").addClass(disabled);$("#"+gID+"_iledit").addClass(disabled)}else{$.jgrid.viewModal("#alertmod_"+gID,{gbox:"#gbox_"+gID,jqm:true});$("#jqg_alrt").focus()}}})}if(o.save){$($t).jqGrid("navButtonAdd",elem,{caption:o.savetext||"",title:o.savetitle||"Save row",buttonicon:o.saveicon,id:$t.p.id+"_ilsave",internal:true,onClickButton:function(){var sr=$t.p.savedRow[0].id;if(sr){var opers=$t.p.prmNames,oper=opers.oper,tmpParams=o.editParams;if($("#"+$.jgrid.jqID(sr),"#"+gID).hasClass("jqgrid-new-row")){o.addParams.addRowParams.extraparam[oper]=opers.addoper;tmpParams=o.addParams.addRowParams}else{if(!o.editParams.extraparam){o.editParams.extraparam={}}o.editParams.extraparam[oper]=opers.editoper}if($($t).jqGrid("saveRow",sr,tmpParams)){$($t).jqGrid("showAddEditButtons")}}else{$.jgrid.viewModal("#alertmod_"+gID,{gbox:"#gbox_"+gID,jqm:true});$("#jqg_alrt").focus()}}});$("#"+gID+"_ilsave").addClass(disabled)}if(o.cancel){$($t).jqGrid("navButtonAdd",elem,{caption:o.canceltext||"",title:o.canceltitle||"Cancel row editing",buttonicon:o.cancelicon,id:$t.p.id+"_ilcancel",internal:true,onClickButton:function(){var sr=$t.p.savedRow[0].id,cancelPrm=o.editParams;if(sr){if($("#"+$.jgrid.jqID(sr),"#"+gID).hasClass("jqgrid-new-row")){cancelPrm=o.addParams.addRowParams}$($t).jqGrid("restoreRow",sr,cancelPrm);$($t).jqGrid("showAddEditButtons")}else{$.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+gID,jqm:true});$("#jqg_alrt").focus()}}});$("#"+gID+"_ilcancel").addClass(disabled)}if(o.restoreAfterSelect===true){$($t).bind("jqGridBeforeSelectRow.inlineNav",function(event,id){if($t.p.savedRow.length>0&&$t.p.inlineNav===true&&(id!==$t.p.selrow&&$t.p.selrow!==null)){if($t.p.selrow===o.addParams.rowID){$($t).jqGrid("delRowData",$t.p.selrow)}else{$($t).jqGrid("restoreRow",$t.p.selrow,o.editParams)}$($t).jqGrid("showAddEditButtons")}})}})},showAddEditButtons:function(){return this.each(function(){if(!this.grid){return}var gID=$.jgrid.jqID(this.p.id),disabled=$.trim($(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",true));$("#"+gID+"_ilsave").addClass(disabled);$("#"+gID+"_ilcancel").addClass(disabled);$("#"+gID+"_iladd").removeClass(disabled);$("#"+gID+"_iledit").removeClass(disabled)})}});if($.jgrid.msie&&$.jgrid.msiever()===8){$.expr[":"].hidden=function(elem){return elem.offsetWidth===0||elem.offsetHeight===0||elem.style.display==="none"}}$.jgrid._multiselect=false;if($.ui){if($.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(item,selected){var ret=setSelected.call(this,item,selected);if(selected&&this.selectedList){var elt=this.element;this.selectedList.find("li").each(function(){if($(this).data("optionLink")){$(this).data("optionLink").remove().appendTo(elt)}})}return ret}}if($.ui.multiselect.prototype.destroy){$.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();if($.Widget===undefined){$.widget.prototype.destroy.apply(this,arguments)}else{$.Widget.prototype.destroy.apply(this,arguments)}}}$.jgrid._multiselect=true}}$.jgrid.extend({sortableColumns:function(tblrow){return this.each(function(){var ts=this,tid=$.jgrid.jqID(ts.p.id);function start(){ts.p.disableClick=true}var sortable_opts={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+tid+"_cb,#jqgh_"+tid+"_rn,#jqgh_"+tid+"_subgrid),:hidden)",placeholder:{element:function(item){var el=$(document.createElement(item[0].nodeName)).addClass(item[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return el},update:function(self,p){p.height(self.currentItem.innerHeight()-parseInt(self.currentItem.css("paddingTop")||0,10)-parseInt(self.currentItem.css("paddingBottom")||0,10));p.width(self.currentItem.innerWidth()-parseInt(self.currentItem.css("paddingLeft")||0,10)-parseInt(self.currentItem.css("paddingRight")||0,10))}},update:function(event,ui){var p=$(ui.item).parent(),th=$(">th",p),colModel=ts.p.colModel,cmMap={},tid=ts.p.id+"_";$.each(colModel,function(i){cmMap[this.name]=i});var permutation=[];th.each(function(){var id=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(tid,"");if(cmMap.hasOwnProperty(id)){permutation.push(cmMap[id])}});$(ts).jqGrid("remapColumns",permutation,true,true);if($.isFunction(ts.p.sortable.update)){ts.p.sortable.update(permutation)}setTimeout(function(){ts.p.disableClick=false},50)}};if(ts.p.sortable.options){$.extend(sortable_opts,ts.p.sortable.options)}else{if($.isFunction(ts.p.sortable)){ts.p.sortable={update:ts.p.sortable}}}if(sortable_opts.start){var s=sortable_opts.start;sortable_opts.start=function(e,ui){start();s.call(this,e,ui)}}else{sortable_opts.start=start}if(ts.p.sortable.exclude){sortable_opts.items+=":not("+ts.p.sortable.exclude+")"}var $e=tblrow.sortable(sortable_opts),dataObj=$e.data("sortable")||$e.data("uiSortable");if(dataObj!=null){dataObj.data("sortable").floating=true}})},columnChooser:function(opts){var self=this,selector,select,colMap={},fixedCols=[],dopts,mopts,$dialogContent,multiselectData,listHeight,colModel=self.jqGrid("getGridParam","colModel"),colNames=self.jqGrid("getGridParam","colNames"),getMultiselectWidgetData=function($elem){return($.ui.multiselect.prototype&&$elem.data($.ui.multiselect.prototype.widgetFullName||$.ui.multiselect.prototype.widgetName))||$elem.data("ui-multiselect")||$elem.data("multiselect")},regional=$.jgrid.getRegional(this[0],"col");if($("#colchooser_"+$.jgrid.jqID(self[0].p.id)).length){return}selector=$('<div id="colchooser_'+self[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>');select=$("select",selector);function insert(perm,i,v){var a,b;if(i>=0){a=perm.slice();b=a.splice(i,Math.max(perm.length-i,i));if(i>perm.length){i=perm.length}a[i]=v;return a.concat(b)}return perm}function call(fn,obj){if(!fn){return}if(typeof fn==="string"){if($.fn[fn]){$.fn[fn].apply(obj,$.makeArray(arguments).slice(2))}}else{if($.isFunction(fn)){fn.apply(obj,$.makeArray(arguments).slice(2))}}}opts=$.extend({width:400,height:240,classname:null,done:function(perm){if(perm){self.jqGrid("remapColumns",perm,true)}},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(options){var buttons={};buttons[options.bSubmit]=function(){options.apply_perm();options.cleanup(false)};buttons[options.bCancel]=function(){options.cleanup(true)};return $.extend(true,{buttons:buttons,close:function(){options.cleanup(true)},modal:options.modal||false,resizable:options.resizable||true,width:options.width+70,resize:function(){var widgetData=getMultiselectWidgetData(select),$thisDialogContent=widgetData.container.closest(".ui-dialog-content");if($thisDialogContent.length>0&&typeof $thisDialogContent[0].style==="object"){$thisDialogContent[0].style.width=""}else{$thisDialogContent.css("width","")}widgetData.selectedList.height(Math.max(widgetData.selectedContainer.height()-widgetData.selectedActions.outerHeight()-1,1));widgetData.availableList.height(Math.max(widgetData.availableContainer.height()-widgetData.availableActions.outerHeight()-1,1))}},options.dialog_opts||{})},apply_perm:function(){var perm=[];$("option",select).each(function(){if($(this).is(":selected")){self.jqGrid("showCol",colModel[this.value].name)}else{self.jqGrid("hideCol",colModel[this.value].name)}});$("option[selected]",select).each(function(){perm.push(parseInt(this.value,10))});$.each(perm,function(){delete colMap[colModel[parseInt(this,10)].name]});$.each(colMap,function(){var ti=parseInt(this,10);perm=insert(perm,ti,ti)});if(opts.done){opts.done.call(self,perm)}self.jqGrid("setGridWidth",self[0].p.width,self[0].p.shrinkToFit)},cleanup:function(calldone){call(opts.dlog,selector,"destroy");call(opts.msel,select,"destroy");selector.remove();if(calldone&&opts.done){opts.done.call(self)}},msel_opts:{}},regional,opts||{});if($.ui){if($.ui.multiselect&&$.ui.multiselect.defaults){if(!$.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}opts.msel_opts=$.extend($.ui.multiselect.defaults,opts.msel_opts)}}if(opts.caption){selector.attr("title",opts.caption)}if(opts.classname){selector.addClass(opts.classname);select.addClass(opts.classname)}if(opts.width){$(">div",selector).css({width:opts.width,margin:"0 auto"});select.css("width",opts.width)}if(opts.height){$(">div",selector).css("height",opts.height);select.css("height",opts.height-10)}select.empty();$.each(colModel,function(i){colMap[this.name]=i;if(this.hidedlg){if(!this.hidden){fixedCols.push(i)}return}select.append("<option value='"+i+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(colNames[i])+"</option>")});dopts=$.isFunction(opts.dlog_opts)?opts.dlog_opts.call(self,opts):opts.dlog_opts;call(opts.dlog,selector,dopts);mopts=$.isFunction(opts.msel_opts)?opts.msel_opts.call(self,opts):opts.msel_opts;call(opts.msel,select,mopts);$dialogContent=$("#colchooser_"+$.jgrid.jqID(self[0].p.id));$dialogContent.css({margin:"auto"});$dialogContent.find(">div").css({width:"100%",height:"100%",margin:"auto"});multiselectData=getMultiselectWidgetData(select);multiselectData.container.css({width:"100%",height:"100%",margin:"auto"});multiselectData.selectedContainer.css({width:multiselectData.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});multiselectData.availableContainer.css({width:(100-multiselectData.options.dividerLocation*100)+"%",height:"100%",margin:"auto",boxSizing:"border-box"});multiselectData.selectedList.css("height","auto");multiselectData.availableList.css("height","auto");listHeight=Math.max(multiselectData.selectedList.height(),multiselectData.availableList.height());listHeight=Math.min(listHeight,$(window).height());multiselectData.selectedList.css("height",listHeight);multiselectData.availableList.css("height",listHeight)},sortableRows:function(opts){return this.each(function(){var $t=this;if(!$t.grid){return}if($t.p.treeGrid){return}if($.fn.sortable){opts=$.extend({cursor:"move",axis:"y",items:" > .jqgrow"},opts||{});if(opts.start&&$.isFunction(opts.start)){opts._start_=opts.start;delete opts.start}else{opts._start_=false}if(opts.update&&$.isFunction(opts.update)){opts._update_=opts.update;delete opts.update}else{opts._update_=false}opts.start=function(ev,ui){$(ui.item).css("border-width","0");$("td",ui.item).each(function(i){this.style.width=$t.grid.cols[i].style.width});if($t.p.subGrid){var subgid=$(ui.item).attr("id");try{$($t).jqGrid("collapseSubGridRow",subgid)}catch(e){}}if(opts._start_){opts._start_.apply(this,[ev,ui])}};opts.update=function(ev,ui){$(ui.item).css("border-width","");if($t.p.rownumbers===true){$("td.jqgrid-rownum",$t.rows).each(function(i){$(this).html(i+1+(parseInt($t.p.page,10)-1)*parseInt($t.p.rowNum,10))})}if(opts._update_){opts._update_.apply(this,[ev,ui])}};$("tbody:first",$t).sortable(opts);$("tbody:first > .jqgrow",$t).disableSelection()}})},gridDnD:function(opts){return this.each(function(){var $t=this,i,cn;if(!$t.grid){return}if($t.p.treeGrid){return}if(!$.fn.draggable||!$.fn.droppable){return}function updateDnD(){var datadnd=$.data($t,"dnd");$("tr.jqgrow:not(.ui-draggable)",$t).draggable($.isFunction(datadnd.drag)?datadnd.drag.call($($t),datadnd):datadnd.drag)}var appender="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if($("#jqgrid_dnd")[0]===undefined){$("body").append(appender)}if(typeof opts==="string"&&opts==="updateDnD"&&$t.p.jqgdnd===true){updateDnD();return}opts=$.extend({drag:function(opts){return $.extend({start:function(ev,ui){var i,subgid;if($t.p.subGrid){subgid=$(ui.helper).attr("id");try{$($t).jqGrid("collapseSubGridRow",subgid)}catch(e){}}for(i=0;i<$.data($t,"dnd").connectWith.length;i++){if($($.data($t,"dnd").connectWith[i]).jqGrid("getGridParam","reccount")===0){$($.data($t,"dnd").connectWith[i]).jqGrid("addRowData","jqg_empty_row",{})}}ui.helper.addClass("ui-state-highlight");$("td",ui.helper).each(function(i){this.style.width=$t.grid.headers[i].width+"px"});if(opts.onstart&&$.isFunction(opts.onstart)){opts.onstart.call($($t),ev,ui)}},stop:function(ev,ui){var i,ids;if(ui.helper.dropped&&!opts.dragcopy){ids=$(ui.helper).attr("id");if(ids===undefined){ids=$(this).attr("id")}$($t).jqGrid("delRowData",ids)}for(i=0;i<$.data($t,"dnd").connectWith.length;i++){$($.data($t,"dnd").connectWith[i]).jqGrid("delRowData","jqg_empty_row")}if(opts.onstop&&$.isFunction(opts.onstop)){opts.onstop.call($($t),ev,ui)}}},opts.drag_opts||{})},drop:function(opts){return $.extend({accept:function(d){if(!$(d).hasClass("jqgrow")){return d}var tid=$(d).closest("table.ui-jqgrid-btable");if(tid.length>0&&$.data(tid[0],"dnd")!==undefined){var cn=$.data(tid[0],"dnd").connectWith;return $.inArray("#"+$.jgrid.jqID(this.id),cn)!==-1?true:false}return false},drop:function(ev,ui){if(!$(ui.draggable).hasClass("jqgrow")){return}var accept=$(ui.draggable).attr("id");var getdata=ui.draggable.parent().parent().jqGrid("getRowData",accept);if(!opts.dropbyname){var j=0,tmpdata={},nm,key;var dropmodel=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(key in getdata){if(getdata.hasOwnProperty(key)){nm=dropmodel[j].name;if(!(nm==="cb"||nm==="rn"||nm==="subgrid")){if(getdata.hasOwnProperty(key)&&dropmodel[j]){tmpdata[nm]=getdata[key]}}j++}}getdata=tmpdata}catch(e){}}ui.helper.dropped=true;if(opts.beforedrop&&$.isFunction(opts.beforedrop)){var datatoinsert=opts.beforedrop.call(this,ev,ui,getdata,$("#"+$.jgrid.jqID($t.p.id)),$(this));if(datatoinsert!==undefined&&datatoinsert!==null&&typeof datatoinsert==="object"){getdata=datatoinsert}}if(ui.helper.dropped){var grid;if(opts.autoid){if($.isFunction(opts.autoid)){grid=opts.autoid.call(this,getdata)}else{grid=Math.ceil(Math.random()*1000);grid=opts.autoidprefix+grid}}$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",grid,getdata,opts.droppos)}if(opts.ondrop&&$.isFunction(opts.ondrop)){opts.ondrop.call(this,ev,ui,getdata)}}},opts.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:false,dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},opts||{});if(!opts.connectWith){return}opts.connectWith=opts.connectWith.split(",");opts.connectWith=$.map(opts.connectWith,function(n){return $.trim(n)});$.data($t,"dnd",opts);if($t.p.reccount!==0&&!$t.p.jqgdnd){updateDnD()}$t.p.jqgdnd=true;for(i=0;i<opts.connectWith.length;i++){cn=opts.connectWith[i];$(cn).droppable($.isFunction(opts.drop)?opts.drop.call($($t),opts):opts.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id),req;if(!$t.grid||!$.fn.resizable){return}opts=$.extend({},opts||{});if(opts.alsoResize){opts._alsoResize_=opts.alsoResize;delete opts.alsoResize}else{opts._alsoResize_=false}if(opts.stop&&$.isFunction(opts.stop)){opts._stop_=opts.stop;delete opts.stop}else{opts._stop_=false}opts.stop=function(ev,ui){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()});$($t).jqGrid("setGridWidth",ui.size.width,opts.shrinkToFit);if(opts._stop_){opts._stop_.call($t,ev,ui)}if($t.p.caption){$("#gbox_"+gID).css({height:"auto"})}if($t.p.frozenColumns){if(req){clearTimeout(req)}req=setTimeout(function(){if(req){clearTimeout(req)}$("#"+gID).jqGrid("destroyFrozenColumns");$("#"+gID).jqGrid("setFrozenColumns")})}};if(opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else{opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID)}delete opts._alsoResize_;$("#gbox_"+gID).resizable(opts)})}});function _pivotfilter(fn,context){var i,value,result=[],length;if(!this||typeof fn!=="function"||(fn instanceof RegExp)){throw new TypeError()}length=this.length;for(i=0;i<length;i++){if(this.hasOwnProperty(i)){value=this[i];if(fn.call(context,value,i,this)){result.push(value);break}}}return result}$.assocArraySize=function(obj){var size=0,key;for(key in obj){if(obj.hasOwnProperty(key)){size++}}return size};$.jgrid.extend({pivotSetup:function(data,options){var columns=[],pivotrows=[],summaries=[],member=[],labels=[],groupOptions={grouping:true,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},headers=[],o=$.extend({rowTotals:false,rowTotalsText:"Total",colTotals:false,groupSummary:true,groupSummaryPos:"header",frozenStaticCols:false},options||{});this.each(function(){var row,rowindex,i,rowlen=data.length,xlen,ylen,aggrlen,tmp,newObj,r=0;function find(ar,fun,extra){var res;res=_pivotfilter.call(ar,fun,extra);return res.length>0?res[0]:null}function findGroup(item,index){var j=0,ret=true,i;for(i in item){if(item.hasOwnProperty(i)){if(item[i]!=this[j]){ret=false;break}j++;if(j>=this.length){break}}}if(ret){rowindex=index}return ret}function calculation(oper,v,field,rc,_cnt){var ret;switch(oper){case"sum":ret=parseFloat(v||0)+parseFloat((rc[field]||0));break;case"count":if(v===""||v==null){v=0}if(rc.hasOwnProperty(field)){ret=v+1}else{ret=0}break;case"min":if(v===""||v==null){ret=parseFloat(rc[field]||0)}else{ret=Math.min(parseFloat(v),parseFloat(rc[field]||0))}break;case"max":if(v===""||v==null){ret=parseFloat(rc[field]||0)}else{ret=Math.max(parseFloat(v),parseFloat(rc[field]||0))}break;case"avg":ret=(parseFloat(v||0)*(_cnt-1)+parseFloat(rc[field]||0))/_cnt;break}return ret}function agregateFunc(row,aggr,value,curr){var arrln=aggr.length,i,label,j,jv,mainval="",swapvals=[];if($.isArray(value)){jv=value.length;swapvals=value}else{jv=1;swapvals[0]=value}member=[];labels=[];member.root=0;if(!!!curr._count){curr._count=1}else{curr._count++}for(j=0;j<jv;j++){var tmpmember=[],vl;for(i=0;i<arrln;i++){if(value==null){label=$.trim(aggr[i].member)+"_"+aggr[i].aggregator;vl=label;swapvals[0]=aggr[i].label||(aggr[i].aggregator+" "+$.trim(aggr[i].member))}else{vl=value[j].replace(/\s+/g,"");try{label=(arrln===1?mainval+vl:mainval+vl+"_"+aggr[i].aggregator+"_"+String(i))}catch(e){}swapvals[j]=value[j]}label=!isNaN(parseInt(label,10))?label+" ":label;curr[label]=tmpmember[label]=calculation(aggr[i].aggregator,curr[label],aggr[i].member,row,curr._count)}mainval+=value[j].replace(/\s+/g,"");member[label]=tmpmember;labels[label]=swapvals[j]}return curr}if(o.rowTotals&&o.yDimension.length>0){var dn=o.yDimension[0].dataName;o.yDimension.splice(0,0,{dataName:dn});o.yDimension[0].converter=function(){return"_r_Totals"}}xlen=$.isArray(o.xDimension)?o.xDimension.length:0;ylen=o.yDimension.length;aggrlen=$.isArray(o.aggregates)?o.aggregates.length:0;if(xlen===0||aggrlen===0){throw ("xDimension or aggregates optiona are not set!")}var colc;for(i=0;i<xlen;i++){colc={name:o.xDimension[i].dataName,frozen:o.frozenStaticCols};if(o.xDimension[i].isGroupField==null){o.xDimension[i].isGroupField=true}colc=$.extend(true,colc,o.xDimension[i]);columns.push(colc)}var groupfields=xlen-1,tree={};while(r<rowlen){row=data[r];var xValue=[];var yValue=[];tmp={};i=0;do{xValue[i]=$.trim(row[o.xDimension[i].dataName]);tmp[o.xDimension[i].dataName]=xValue[i];i++}while(i<xlen);var k=0;rowindex=-1;newObj=find(pivotrows,findGroup,xValue);if(!newObj){k=0;if(ylen>=1){for(k=0;k<ylen;k++){yValue[k]=$.trim(row[o.yDimension[k].dataName]);if(o.yDimension[k].converter&&$.isFunction(o.yDimension[k].converter)){yValue[k]=o.yDimension[k].converter.call(this,yValue[k],xValue,yValue)}}tmp=agregateFunc(row,o.aggregates,yValue,tmp)}else{if(ylen===0){tmp=agregateFunc(row,o.aggregates,null,tmp)}}pivotrows.push(tmp)}else{if(rowindex>=0){k=0;if(ylen>=1){for(k=0;k<ylen;k++){yValue[k]=$.trim(row[o.yDimension[k].dataName]);if(o.yDimension[k].converter&&$.isFunction(o.yDimension[k].converter)){yValue[k]=o.yDimension[k].converter.call(this,yValue[k],xValue,yValue)}}newObj=agregateFunc(row,o.aggregates,yValue,newObj)}else{if(ylen===0){newObj=agregateFunc(row,o.aggregates,null,newObj)}}pivotrows[rowindex]=newObj}}var kj=0,current=null,existing=null,kk;for(kk in member){if(member.hasOwnProperty(kk)){if(kj===0){if(!tree.children||tree.children===undefined){tree={text:kk,level:0,children:[],label:kk}}current=tree.children}else{existing=null;for(i=0;i<current.length;i++){if(current[i].text===kk){existing=current[i];break}}if(existing){current=existing.children}else{current.push({children:[],text:kk,level:kj,fields:member[kk],label:labels[kk]});current=current[current.length-1].children}}kj++}}r++}var lastval=[],initColLen=columns.length,swaplen=initColLen;if(ylen>0){headers[ylen-1]={useColSpanStyle:false,groupHeaders:[]}}function list(items){var l,j,key,k,col;for(key in items){if(items.hasOwnProperty(key)){if(typeof items[key]!=="object"){if(key==="level"){if(lastval[items.level]===undefined){lastval[items.level]="";if(items.level>0&&items.text.indexOf("_r_Totals")===-1){headers[items.level-1]={useColSpanStyle:false,groupHeaders:[]}}}if(lastval[items.level]!==items.text&&items.children.length&&items.text.indexOf("_r_Totals")===-1){if(items.level>0){headers[items.level-1].groupHeaders.push({titleText:items.label,numberOfColumns:0});var collen=headers[items.level-1].groupHeaders.length-1,colpos=collen===0?swaplen:initColLen;if(items.level-1===(o.rowTotals?1:0)){if(collen>0){var l1=0;for(var kk=0;kk<collen;kk++){l1+=headers[items.level-1].groupHeaders[kk].numberOfColumns}if(l1){colpos=l1+xlen}}}if(columns[colpos]){headers[items.level-1].groupHeaders[collen].startColumnName=columns[colpos].name;headers[items.level-1].groupHeaders[collen].numberOfColumns=columns.length-colpos}initColLen=columns.length}}lastval[items.level]=items.text}if(items.level===ylen&&key==="level"&&ylen>0){if(aggrlen>1){var ll=1;for(l in items.fields){if(items.fields.hasOwnProperty(l)){if(ll===1){headers[ylen-1].groupHeaders.push({startColumnName:l,numberOfColumns:1,titleText:items.label||items.text})}ll++}}headers[ylen-1].groupHeaders[headers[ylen-1].groupHeaders.length-1].numberOfColumns=ll-1}else{headers.splice(ylen-1,1)}}}if(items[key]!=null&&typeof items[key]==="object"){list(items[key])}if(key==="level"){if(items.level>0&&(items.level===(ylen===0?items.level:ylen)||lastval[items.level].indexOf("_r_Totals")!==-1)){j=0;for(l in items.fields){if(items.fields.hasOwnProperty(l)){col={};for(k in o.aggregates[j]){if(o.aggregates[j].hasOwnProperty(k)){switch(k){case"member":case"label":case"aggregator":break;default:col[k]=o.aggregates[j][k]}}}if(aggrlen>1){col.name=l;col.label=o.aggregates[j].label||items.label}else{col.name=items.text;col.label=items.text==="_r_Totals"?o.rowTotalsText:items.label}columns.push(col);j++}}}}}}}list(tree);var nm;if(o.colTotals){var plen=pivotrows.length;while(plen--){for(i=xlen;i<columns.length;i++){nm=columns[i].name;if(!summaries[nm]){summaries[nm]=parseFloat(pivotrows[plen][nm]||0)}else{summaries[nm]+=parseFloat(pivotrows[plen][nm]||0)}}}}if(groupfields>0){for(i=0;i<groupfields;i++){if(columns[i].isGroupField){groupOptions.groupingView.groupField.push(columns[i].name);groupOptions.groupingView.groupSummary.push(o.groupSummary);groupOptions.groupingView.groupSummaryPos.push(o.groupSummaryPos)}}}else{groupOptions.grouping=false}groupOptions.sortname=columns[groupfields].name;groupOptions.groupingView.hideFirstGroupCol=true});return{colModel:columns,rows:pivotrows,groupOptions:groupOptions,groupHeaders:headers,summary:summaries}},jqPivot:function(data,pivotOpt,gridOpt,ajaxOpt){return this.each(function(){var $t=this;function pivot(data){var pivotGrid=jQuery($t).jqGrid("pivotSetup",data,pivotOpt),footerrow=$.assocArraySize(pivotGrid.summary)>0?true:false,query=$.jgrid.from.call($t,pivotGrid.rows),i,so,st,len;if(pivotOpt.ignoreCase){query=query.ignoreCase()}for(i=0;i<pivotGrid.groupOptions.groupingView.groupField.length;i++){so=pivotOpt.xDimension[i].sortorder?pivotOpt.xDimension[i].sortorder:"asc";st=pivotOpt.xDimension[i].sorttype?pivotOpt.xDimension[i].sorttype:"text";query.orderBy(pivotGrid.groupOptions.groupingView.groupField[i],so,st,"",st)}len=pivotOpt.xDimension.length;if(pivotGrid.groupOptions.sortname&&len){so=pivotOpt.xDimension[len-1].sortorder?pivotOpt.xDimension[len-1].sortorder:"asc";st=pivotOpt.xDimension[len-1].sorttype?pivotOpt.xDimension[len-1].sorttype:"text";query.orderBy(pivotGrid.groupOptions.sortname,so,st,"",st)}jQuery($t).jqGrid($.extend(true,{datastr:$.extend(query.select(),footerrow?{userdata:pivotGrid.summary}:{}),datatype:"jsonstring",footerrow:footerrow,userDataOnFooter:footerrow,colModel:pivotGrid.colModel,viewrecords:true,sortname:pivotOpt.xDimension[0].dataName},pivotGrid.groupOptions,gridOpt||{}));var gHead=pivotGrid.groupHeaders;if(gHead.length){for(i=0;i<gHead.length;i++){if(gHead[i]&&gHead[i].groupHeaders.length){jQuery($t).jqGrid("setGroupHeaders",gHead[i])}}}if(pivotOpt.frozenStaticCols){jQuery($t).jqGrid("setFrozenColumns")}}if(typeof data==="string"){$.ajax($.extend({url:data,dataType:"json",success:function(response){pivot($.jgrid.getAccessor(response,ajaxOpt&&ajaxOpt.reader?ajaxOpt.reader:"rows"))}},ajaxOpt||{}))}else{pivot(data)}})}});$.jgrid.extend({setSubGrid:function(){return this.each(function(){var $t=this,cm,i,classes=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].subgrid,suboptions={plusicon:classes.icon_plus,minusicon:classes.icon_minus,openicon:classes.icon_open,expandOnLoad:false,delayOnLoad:50,selectOnExpand:false,selectOnCollapse:false,reloadOnExpand:true};$t.p.subGridOptions=$.extend(suboptions,$t.p.subGridOptions||{});$t.p.colNames.unshift("");$t.p.colModel.unshift({name:"subgrid",width:$.jgrid.cell_width?$t.p.subGridWidth+$t.p.cellLayout:$t.p.subGridWidth,sortable:false,resizable:false,hidedlg:true,search:false,fixed:true});cm=$t.p.subGridModel;if(cm[0]){cm[0].align=$.extend([],cm[0].align||[]);for(i=0;i<cm[0].name.length;i++){cm[0].align[i]=cm[0].align[i]||"left"}}})},addSubGridCell:function(pos,iRow){var prp="",ic,sid,icb;this.each(function(){prp=this.formatCol(pos,iRow);sid=this.p.id;ic=this.p.subGridOptions.plusicon;icb=$.jgrid.styleUI[(this.p.styleUI||"jQueryUI")].common});return'<td role="gridcell" aria-describedby="'+sid+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+prp+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+icb.icon_base+" "+ic+"'></span></a></td>"},addSubGrid:function(pos,sind){return this.each(function(){var ts=this;if(!ts.grid){return}var base=$.jgrid.styleUI[(ts.p.styleUI||"jQueryUI")].base,common=$.jgrid.styleUI[(ts.p.styleUI||"jQueryUI")].common;var subGridCell=function(trdiv,cell,pos){var tddiv=$("<td align='"+ts.p.subGridModel[0].align[pos]+"'></td>").html(cell);$(trdiv).append(tddiv)};var subGridXml=function(sjxml,sbid){var tddiv,i,sgmap,dummy=$("<table class='"+base.rowTable+" ui-common-table'><tbody></tbody></table>"),trdiv=$("<tr></tr>");for(i=0;i<ts.p.subGridModel[0].name.length;i++){tddiv=$("<th class='"+base.headerBox+" ui-th-subgrid ui-th-column ui-th-"+ts.p.direction+"'></th>");$(tddiv).html(ts.p.subGridModel[0].name[i]);$(tddiv).width(ts.p.subGridModel[0].width[i]);$(trdiv).append(tddiv)}$(dummy).append(trdiv);if(sjxml){sgmap=ts.p.xmlReader.subgrid;$(sgmap.root+" "+sgmap.row,sjxml).each(function(){trdiv=$("<tr class='"+common.content+" ui-subtblcell'></tr>");if(sgmap.repeatitems===true){$(sgmap.cell,this).each(function(i){subGridCell(trdiv,$(this).text()||"&#160;",i)})}else{var f=ts.p.subGridModel[0].mapping||ts.p.subGridModel[0].name;if(f){for(i=0;i<f.length;i++){subGridCell(trdiv,$(f[i],this).text()||"&#160;",i)}}}$(dummy).append(trdiv)})}var pID=$("table:first",ts.grid.bDiv).attr("id")+"_";$("#"+$.jgrid.jqID(pID+sbid)).append(dummy);ts.grid.hDiv.loading=false;$("#load_"+$.jgrid.jqID(ts.p.id)).hide();return false};var subGridJson=function(sjxml,sbid){var tddiv,result,i,cur,sgmap,j,dummy=$("<table class='"+base.rowTable+" ui-common-table'><tbody></tbody></table>"),trdiv=$("<tr></tr>");for(i=0;i<ts.p.subGridModel[0].name.length;i++){tddiv=$("<th class='"+base.headerBox+" ui-th-subgrid ui-th-column ui-th-"+ts.p.direction+"'></th>");$(tddiv).html(ts.p.subGridModel[0].name[i]);$(tddiv).width(ts.p.subGridModel[0].width[i]);$(trdiv).append(tddiv)}$(dummy).append(trdiv);if(sjxml){sgmap=ts.p.jsonReader.subgrid;result=$.jgrid.getAccessor(sjxml,sgmap.root);if(result!==undefined){for(i=0;i<result.length;i++){cur=result[i];trdiv=$("<tr class='"+common.content+" ui-subtblcell'></tr>");if(sgmap.repeatitems===true){if(sgmap.cell){cur=cur[sgmap.cell]}for(j=0;j<cur.length;j++){subGridCell(trdiv,cur[j]||"&#160;",j)}}else{var f=ts.p.subGridModel[0].mapping||ts.p.subGridModel[0].name;if(f.length){for(j=0;j<f.length;j++){subGridCell(trdiv,cur[f[j]]||"&#160;",j)}}}$(dummy).append(trdiv)}}}var pID=$("table:first",ts.grid.bDiv).attr("id")+"_";$("#"+$.jgrid.jqID(pID+sbid)).append(dummy);ts.grid.hDiv.loading=false;$("#load_"+$.jgrid.jqID(ts.p.id)).hide();return false};var populatesubgrid=function(rd){var sid,dp,i,j;sid=$(rd).attr("id");dp={nd_:(new Date().getTime())};dp[ts.p.prmNames.subgridid]=sid;if(!ts.p.subGridModel[0]){return false}if(ts.p.subGridModel[0].params){for(j=0;j<ts.p.subGridModel[0].params.length;j++){for(i=0;i<ts.p.colModel.length;i++){if(ts.p.colModel[i].name===ts.p.subGridModel[0].params[j]){dp[ts.p.colModel[i].name]=$("td:eq("+i+")",rd).text().replace(/\&#160\;/ig,"")}}}}if(!ts.grid.hDiv.loading){ts.grid.hDiv.loading=true;$("#load_"+$.jgrid.jqID(ts.p.id)).show();if(!ts.p.subgridtype){ts.p.subgridtype=ts.p.datatype}if($.isFunction(ts.p.subgridtype)){ts.p.subgridtype.call(ts,dp)}else{ts.p.subgridtype=ts.p.subgridtype.toLowerCase()}switch(ts.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:ts.p.mtype,url:$.isFunction(ts.p.subGridUrl)?ts.p.subGridUrl.call(ts,dp):ts.p.subGridUrl,dataType:ts.p.subgridtype,data:$.isFunction(ts.p.serializeSubGridData)?ts.p.serializeSubGridData.call(ts,dp):dp,complete:function(sxml){if(ts.p.subgridtype==="xml"){subGridXml(sxml.responseXML,sid)}else{subGridJson($.jgrid.parse(sxml.responseText),sid)}sxml=null}},$.jgrid.ajaxOptions,ts.p.ajaxSubgridOptions||{}));break}}return false};var _id,pID,atd,nhc=0,bfsc,$r;$.each(ts.p.colModel,function(){if(this.hidden===true||this.name==="rn"||this.name==="cb"){nhc++}});var len=ts.rows.length,i=1,hsret,ishsg=$.isFunction(ts.p.isHasSubGrid);if(sind!==undefined&&sind>0){i=sind;len=sind+1}while(i<len){if($(ts.rows[i]).hasClass("jqgrow")){if(ts.p.scroll){$(ts.rows[i].cells[pos]).unbind("click")}hsret=null;if(ishsg){var hsret=ts.p.isHasSubGrid.call(ts,ts.rows[i].id)}if(hsret===false){ts.rows[i].cells[pos].innerHTML=""}else{$(ts.rows[i].cells[pos]).bind("click",function(){var tr=$(this).parent("tr")[0];pID=ts.p.id;_id=tr.id;$r=$("#"+pID+"_"+_id+"_expandedContent");if($(this).hasClass("sgcollapsed")){bfsc=$(ts).triggerHandler("jqGridSubGridBeforeExpand",[pID+"_"+_id,_id]);bfsc=(bfsc===false||bfsc==="stop")?false:true;if(bfsc&&$.isFunction(ts.p.subGridBeforeExpand)){bfsc=ts.p.subGridBeforeExpand.call(ts,pID+"_"+_id,_id)}if(bfsc===false){return false}if(ts.p.subGridOptions.reloadOnExpand===true||(ts.p.subGridOptions.reloadOnExpand===false&&!$r.hasClass("ui-subgrid"))){atd=pos>=1?"<td colspan='"+pos+"'>&#160;</td>":"";$(tr).after("<tr role='row' id='"+pID+"_"+_id+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+atd+"<td class='"+common.content+" subgrid-cell'><span class='"+common.icon_base+" "+ts.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(ts.p.colNames.length-1-nhc,10)+"' class='"+common.content+" subgrid-data'><div id="+pID+"_"+_id+" class='tablediv'></div></td></tr>");$(ts).triggerHandler("jqGridSubGridRowExpanded",[pID+"_"+_id,_id]);if($.isFunction(ts.p.subGridRowExpanded)){ts.p.subGridRowExpanded.call(ts,pID+"_"+_id,_id)}else{populatesubgrid(tr)}}else{$r.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded")}$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+common.icon_base+" "+ts.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");if(ts.p.subGridOptions.selectOnExpand){$(ts).jqGrid("setSelection",_id)}}else{if($(this).hasClass("sgexpanded")){bfsc=$(ts).triggerHandler("jqGridSubGridRowColapsed",[pID+"_"+_id,_id]);bfsc=(bfsc===false||bfsc==="stop")?false:true;if(bfsc&&$.isFunction(ts.p.subGridRowColapsed)){bfsc=ts.p.subGridRowColapsed.call(ts,pID+"_"+_id,_id)}if(bfsc===false){return false}if(ts.p.subGridOptions.reloadOnExpand===true){$r.remove(".ui-subgrid")}else{if($r.hasClass("ui-subgrid")){$r.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded")}}$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+common.icon_base+" "+ts.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");if(ts.p.subGridOptions.selectOnCollapse){$(ts).jqGrid("setSelection",_id)}}}return false})}}i++}if(ts.p.subGridOptions.expandOnLoad===true){$(ts.rows).filter(".jqgrow").each(function(index,row){$(row.cells[0]).click()})}ts.subGridXml=function(xml,sid){subGridXml(xml,sid)};ts.subGridJson=function(json,sid){subGridJson(json,sid)}})},expandSubGridRow:function(rowid){return this.each(function(){var $t=this;if(!$t.grid&&!rowid){return}if($t.p.subGrid===true){var rc=$(this).jqGrid("getInd",rowid,true);if(rc){var sgc=$("td.sgcollapsed",rc)[0];if(sgc){$(sgc).trigger("click")}}}})},collapseSubGridRow:function(rowid){return this.each(function(){var $t=this;if(!$t.grid&&!rowid){return}if($t.p.subGrid===true){var rc=$(this).jqGrid("getInd",rowid,true);if(rc){var sgc=$("td.sgexpanded",rc)[0];if(sgc){$(sgc).trigger("click")}}}})},toggleSubGridRow:function(rowid){return this.each(function(){var $t=this;if(!$t.grid&&!rowid){return}if($t.p.subGrid===true){var rc=$(this).jqGrid("getInd",rowid,true);if(rc){var sgc=$("td.sgcollapsed",rc)[0];if(sgc){$(sgc).trigger("click")}else{sgc=$("td.sgexpanded",rc)[0];if(sgc){$(sgc).trigger("click")}}}}})}});$.jgrid.extend({setTreeNode:function(i,len){return this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return}var expCol=$t.p.expColInd,expanded=$t.p.treeReader.expanded_field,isLeaf=$t.p.treeReader.leaf_field,level=$t.p.treeReader.level_field,icon=$t.p.treeReader.icon_field,loaded=$t.p.treeReader.loaded,lft,rgt,curLevel,ident,lftpos,twrap,ldat,lf,common=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].common,index=i;$($t).triggerHandler("jqGridBeforeSetTreeNode",[index,len]);if($.isFunction($t.p.beforeSetTreeNode)){$t.p.beforeSetTreeNode.call($t,index,len)}while(i<len){var ind=$.jgrid.stripPref($t.p.idPrefix,$t.rows[i].id),dind=$t.p._index[ind],expan;ldat=$t.p.data[dind];if($t.p.treeGridModel==="nested"){if(!ldat[isLeaf]){lft=parseInt(ldat[$t.p.treeReader.left_field],10);rgt=parseInt(ldat[$t.p.treeReader.right_field],10);ldat[isLeaf]=(rgt===lft+1)?"true":"false";$t.rows[i].cells[$t.p._treeleafpos].innerHTML=ldat[isLeaf]}}curLevel=parseInt(ldat[level],10);if($t.p.tree_root_level===0){ident=curLevel+1;lftpos=curLevel}else{ident=curLevel;lftpos=curLevel-1}twrap="<div class='tree-wrap tree-wrap-"+$t.p.direction+"' style='width:"+(ident*18)+"px;'>";twrap+="<div style='"+($t.p.direction==="rtl"?"right:":"left:")+(lftpos*18)+"px;' class='"+common.icon_base+" ";if(ldat[loaded]!==undefined){if(ldat[loaded]==="true"||ldat[loaded]===true){ldat[loaded]=true}else{ldat[loaded]=false}}if(ldat[isLeaf]==="true"||ldat[isLeaf]===true){twrap+=((ldat[icon]!==undefined&&ldat[icon]!=="")?ldat[icon]:$t.p.treeIcons.leaf)+" tree-leaf treeclick";ldat[isLeaf]=true;lf="leaf"}else{ldat[isLeaf]=false;lf=""}ldat[expanded]=((ldat[expanded]==="true"||ldat[expanded]===true)?true:false)&&(ldat[loaded]||ldat[loaded]===undefined);if(ldat[expanded]===false){twrap+=((ldat[isLeaf]===true)?"'":$t.p.treeIcons.plus+" tree-plus treeclick'")}else{twrap+=((ldat[isLeaf]===true)?"'":$t.p.treeIcons.minus+" tree-minus treeclick'")}twrap+="></div></div>";$($t.rows[i].cells[expCol]).wrapInner("<span class='cell-wrapper"+lf+"'></span>").prepend(twrap);if(curLevel!==parseInt($t.p.tree_root_level,10)){expan=$($t).jqGrid("isVisibleNode",ldat);if(!expan){$($t.rows[i]).css("display","none")}}$($t.rows[i].cells[expCol]).find("div.treeclick").bind("click",function(e){var target=e.target||e.srcElement,ind2=$.jgrid.stripPref($t.p.idPrefix,$(target,$t.rows).closest("tr.jqgrow")[0].id),pos=$t.p._index[ind2];if(!$t.p.data[pos][isLeaf]){if($t.p.data[pos][expanded]){$($t).jqGrid("collapseRow",$t.p.data[pos]);$($t).jqGrid("collapseNode",$t.p.data[pos])}else{$($t).jqGrid("expandRow",$t.p.data[pos]);$($t).jqGrid("expandNode",$t.p.data[pos])}}return false});if($t.p.ExpandColClick===true){$($t.rows[i].cells[expCol]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(e){var target=e.target||e.srcElement,ind2=$.jgrid.stripPref($t.p.idPrefix,$(target,$t.rows).closest("tr.jqgrow")[0].id),pos=$t.p._index[ind2];if(!$t.p.data[pos][isLeaf]){if($t.p.data[pos][expanded]){$($t).jqGrid("collapseRow",$t.p.data[pos]);$($t).jqGrid("collapseNode",$t.p.data[pos])}else{$($t).jqGrid("expandRow",$t.p.data[pos]);$($t).jqGrid("expandNode",$t.p.data[pos])}}$($t).jqGrid("setSelection",ind2);return false})}i++}$($t).triggerHandler("jqGridAfterSetTreeNode",[index,len]);if($.isFunction($t.p.afterSetTreeNode)){$t.p.afterSetTreeNode.call($t,index,len)}})},setTreeGrid:function(){return this.each(function(){var $t=this,i=0,pico,ecol=false,nm,key,tkey,dupcols=[],classes=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].treegrid;if(!$t.p.treeGrid){return}if(!$t.p.treedatatype){$.extend($t.p,{treedatatype:$t.p.datatype})}if($t.p.loadonce){$t.p.treedatatype="local"}$t.p.subGrid=false;$t.p.altRows=false;$t.p.pgbuttons=false;$t.p.pginput=false;$t.p.gridview=true;if($t.p.rowTotal===null){$t.p.rowNum=10000}$t.p.multiselect=false;$t.p.rowList=[];$t.p.expColInd=0;pico=classes.icon_plus;if($t.p.styleUI==="jQueryUI"){pico+=($t.p.direction==="rtl"?"w":"e")}$t.p.treeIcons=$.extend({plus:pico,minus:classes.icon_minus,leaf:classes.icon_leaf},$t.p.treeIcons||{});if($t.p.treeGridModel==="nested"){$t.p.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},$t.p.treeReader)}else{if($t.p.treeGridModel==="adjacency"){$t.p.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},$t.p.treeReader)}}for(key in $t.p.colModel){if($t.p.colModel.hasOwnProperty(key)){nm=$t.p.colModel[key].name;if(nm===$t.p.ExpandColumn&&!ecol){ecol=true;$t.p.expColInd=i}i++;for(tkey in $t.p.treeReader){if($t.p.treeReader.hasOwnProperty(tkey)&&$t.p.treeReader[tkey]===nm){dupcols.push(nm)}}}}$.each($t.p.treeReader,function(j,n){if(n&&$.inArray(n,dupcols)===-1){if(j==="leaf_field"){$t.p._treeleafpos=i}i++;$t.p.colNames.push(n);$t.p.colModel.push({name:n,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})})},expandRow:function(record){this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return}var childern=$($t).jqGrid("getNodeChildren",record),expanded=$t.p.treeReader.expanded_field,rowid=record[$t.p.localReader.id];var ret=$.isFunction($t.p.beforeExpandTreeGridRow)?$t.p.beforeExpandTreeGridRow.call($t,rowid,record,childern):true;if(ret===false){return}$(childern).each(function(){var id=$t.p.idPrefix+$.jgrid.getAccessor(this,$t.p.localReader.id);$($($t).jqGrid("getGridRowById",id)).css("display","");if(this[expanded]){$($t).jqGrid("expandRow",this)}});if($.isFunction($t.p.afterExpandTreeGridRow)){$t.p.afterExpandTreeGridRow.call($t,rowid,record,childern)}})},collapseRow:function(record){this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return}var childern=$($t).jqGrid("getNodeChildren",record),expanded=$t.p.treeReader.expanded_field,rowid=record[$t.p.localReader.id];var ret=$.isFunction($t.p.beforeCollapseTreeGridRow)?$t.p.beforeCollapseTreeGridRow.call($t,rowid,record,childern):true;if(ret===false){return}$(childern).each(function(){var id=$t.p.idPrefix+$.jgrid.getAccessor(this,$t.p.localReader.id);$($($t).jqGrid("getGridRowById",id)).css("display","none");if(this[expanded]){$($t).jqGrid("collapseRow",this)}});if($.isFunction($t.p.afterCollapseTreeGridRow)){$t.p.afterCollapseTreeGridRow.call($t,rowid,record,childern)}})},getRootNodes:function(currentview){var result=[];this.each(function(){var $t=this,level,parent_id,view;if(!$t.grid||!$t.p.treeGrid){return}if(typeof currentview!=="boolean"){currentview=false}if(currentview){view=$($t).jqGrid("getRowData",null,true)}else{view=$t.p.data}switch($t.p.treeGridModel){case"nested":level=$t.p.treeReader.level_field;$(view).each(function(){if(parseInt(this[level],10)===parseInt($t.p.tree_root_level,10)){if(currentview){result.push($t.p.data[$t.p._index[this[$t.p.keyName]]])}else{result.push(this)}}});break;case"adjacency":parent_id=$t.p.treeReader.parent_id_field;$(view).each(function(){if(this[parent_id]===null||String(this[parent_id]).toLowerCase()==="null"){if(currentview){result.push($t.p.data[$t.p._index[this[$t.p.keyName]]])}else{result.push(this)}}});break}});return result},getNodeDepth:function(rc){var ret=null;this.each(function(){if(!this.grid||!this.p.treeGrid){return}var $t=this;switch($t.p.treeGridModel){case"nested":var level=$t.p.treeReader.level_field;ret=parseInt(rc[level],10)-parseInt($t.p.tree_root_level,10);break;case"adjacency":ret=$($t).jqGrid("getNodeAncestors",rc).length;break}});return ret},getNodeParent:function(rc){var result=null;this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return}switch($t.p.treeGridModel){case"nested":var lftc=$t.p.treeReader.left_field,rgtc=$t.p.treeReader.right_field,levelc=$t.p.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(this.p.data).each(function(){if(parseInt(this[levelc],10)===level-1&&parseInt(this[lftc],10)<lft&&parseInt(this[rgtc],10)>rgt){result=this;return false}});break;case"adjacency":var parent_id=$t.p.treeReader.parent_id_field,dtid=$t.p.localReader.id,ind=rc[dtid],pos=$t.p._index[ind];while(pos--){if($t.p.data[pos][dtid]===$.jgrid.stripPref($t.p.idPrefix,rc[parent_id])){result=$t.p.data[pos];break}}break}});return result},getNodeChildren:function(rc,currentview){var result=[];this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return}var i,len=currentview?this.rows.length:this.p.data.length,row;switch($t.p.treeGridModel){case"nested":var lftc=$t.p.treeReader.left_field,rgtc=$t.p.treeReader.right_field,levelc=$t.p.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);for(i=0;i<len;i++){row=currentview?$t.p.data[$t.p._index[this.rows[i].id]]:$t.p.data[i];if(row&&parseInt(row[levelc],10)===level+1&&parseInt(row[lftc],10)>lft&&parseInt(row[rgtc],10)<rgt){result.push(row)}}break;case"adjacency":var parent_id=$t.p.treeReader.parent_id_field,dtid=$t.p.localReader.id;for(i=0;i<len;i++){row=currentview?$t.p.data[$t.p._index[this.rows[i].id]]:$t.p.data[i];if(row&&String(row[parent_id])===$.jgrid.stripPref($t.p.idPrefix,rc[dtid])){result.push(row)}}break}});return result},getFullTreeNode:function(rc,expand){var result=[];this.each(function(){var $t=this,len,expanded=$t.p.treeReader.expanded_field;if(!$t.grid||!$t.p.treeGrid){return}if(expand==null||typeof expand!=="boolean"){expand=false}switch($t.p.treeGridModel){case"nested":var lftc=$t.p.treeReader.left_field,rgtc=$t.p.treeReader.right_field,levelc=$t.p.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(this.p.data).each(function(){if(parseInt(this[levelc],10)>=level&&parseInt(this[lftc],10)>=lft&&parseInt(this[lftc],10)<=rgt){if(expand){this[expanded]=true}result.push(this)}});break;case"adjacency":if(rc){result.push(rc);var parent_id=$t.p.treeReader.parent_id_field,dtid=$t.p.localReader.id;$(this.p.data).each(function(i){len=result.length;for(i=0;i<len;i++){if($.jgrid.stripPref($t.p.idPrefix,result[i][dtid])===this[parent_id]){if(expand){this[expanded]=true}result.push(this);break}}})}break}});return result},getNodeAncestors:function(rc,reverse,expanded){var ancestors=[];if(reverse===undefined){reverse=false}this.each(function(){if(!this.grid||!this.p.treeGrid){return}if(expanded===undefined){expanded=false}else{expanded=this.p.treeReader.expanded_field}var parent=$(this).jqGrid("getNodeParent",rc);while(parent){if(expanded){try{parent[expanded]=true}catch(etn){}}if(reverse){ancestors.unshift(parent)}else{ancestors.push(parent)}parent=$(this).jqGrid("getNodeParent",parent)}});return ancestors},isVisibleNode:function(rc){var result=true;this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return}var ancestors=$($t).jqGrid("getNodeAncestors",rc),expanded=$t.p.treeReader.expanded_field;$(ancestors).each(function(){result=result&&this[expanded];if(!result){return false}})});return result},isNodeLoaded:function(rc){var result;this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return}var isLeaf=$t.p.treeReader.leaf_field,loaded=$t.p.treeReader.loaded;if(rc!==undefined){if(rc[loaded]!==undefined){result=rc[loaded]}else{if(rc[isLeaf]||$($t).jqGrid("getNodeChildren",rc).length>0){result=true}else{result=false}}}else{result=false}});return result},setLeaf:function(rc,state,collapsed){return this.each(function(){var id=$.jgrid.getAccessor(rc,this.p.localReader.id),rc1=$("#"+id,this.grid.bDiv)[0],isLeaf=this.p.treeReader.leaf_field;try{var dr=this.p._index[id];if(dr!=null){this.p.data[dr][isLeaf]=state;console.log(this.p.data[dr])}}catch(E){}if(state===true){$("div.treeclick",rc1).removeClass(this.p.treeIcons.minus+" tree-minus "+this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.leaf+" tree-leaf")}else{if(state===false){var ico=this.p.treeIcons.minus+" tree-minus";if(collapsed){ico=this.p.treeIcons.plus+" tree-plus"}$("div.treeclick",rc1).removeClass(this.p.treeIcons.leaf+" tree-leaf").addClass(ico)}}})},reloadNode:function(rc,reloadcurrent){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var rid=this.p.localReader.id,currselection=this.p.selrow;$(this).jqGrid("delChildren",rc[rid]);if(reloadcurrent===undefined){reloadcurrent=false}if(!reloadcurrent){if(!jQuery._data(this,"events").jqGridAfterSetTreeNode){$(this).bind("jqGridAfterSetTreeNode.reloadNode",function(){var isLeaf=this.p.treeReader.leaf_field;if(this.p.reloadnode){var rc=this.p.reloadnode,chld=$(this).jqGrid("getNodeChildren",rc);if(rc[isLeaf]&&chld.length){$(this).jqGrid("setLeaf",rc,false)}else{if(!rc[isLeaf]&&chld.length===0){$(this).jqGrid("setLeaf",rc,true)}}}this.p.reloadnode=false})}}var expanded=this.p.treeReader.expanded_field,parent=this.p.treeReader.parent_id_field,loaded=this.p.treeReader.loaded,level=this.p.treeReader.level_field,isLeaf=this.p.treeReader.leaf_field,lft=this.p.treeReader.left_field,rgt=this.p.treeReader.right_field;var id=$.jgrid.getAccessor(rc,this.p.localReader.id),rc1=$("#"+id,this.grid.bDiv)[0];rc[expanded]=true;if(!rc[isLeaf]){$("div.treeclick",rc1).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")}this.p.treeANode=rc1.rowIndex;this.p.datatype=this.p.treedatatype;this.p.reloadnode=rc;if(reloadcurrent){this.p.treeANode=rc1.rowIndex>0?rc1.rowIndex-1:1;$(this).jqGrid("delRowData",id)}if(this.p.treeGridModel==="nested"){$(this).jqGrid("setGridParam",{postData:{nodeid:id,n_left:rc[lft],n_right:rc[rgt],n_level:rc[level]}})}else{$(this).jqGrid("setGridParam",{postData:{nodeid:id,parentid:rc[parent],n_level:rc[level]}})}$(this).trigger("reloadGrid");rc[loaded]=true;if(this.p.treeGridModel==="nested"){$(this).jqGrid("setGridParam",{selrow:currselection,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}})}else{$(this).jqGrid("setGridParam",{selrow:currselection,postData:{nodeid:"",parentid:"",n_level:""}})}})},expandNode:function(rc){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var expanded=this.p.treeReader.expanded_field,parent=this.p.treeReader.parent_id_field,loaded=this.p.treeReader.loaded,level=this.p.treeReader.level_field,lft=this.p.treeReader.left_field,rgt=this.p.treeReader.right_field;if(!rc[expanded]){var id=$.jgrid.getAccessor(rc,this.p.localReader.id),rc1=$("#"+this.p.idPrefix+$.jgrid.jqID(id),this.grid.bDiv)[0],position=this.p._index[id],ret=$.isFunction(this.p.beforeExpandTreeGridNode)?this.p.beforeExpandTreeGridNode.call(this,id,rc):true;if(ret===false){return}if($(this).jqGrid("isNodeLoaded",this.p.data[position])){rc[expanded]=true;$("div.treeclick",rc1).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")}else{if(!this.grid.hDiv.loading){rc[expanded]=true;$("div.treeclick",rc1).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=rc1.rowIndex;this.p.datatype=this.p.treedatatype;if(this.p.treeGridModel==="nested"){$(this).jqGrid("setGridParam",{postData:{nodeid:id,n_left:rc[lft],n_right:rc[rgt],n_level:rc[level]}})}else{$(this).jqGrid("setGridParam",{postData:{nodeid:id,parentid:rc[parent],n_level:rc[level]}})}$(this).trigger("reloadGrid");rc[loaded]=true;if(this.p.treeGridModel==="nested"){$(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}})}else{$(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})}}}if($.isFunction(this.p.afterExpandTreeGridNode)){this.p.afterExpandTreeGridNode.call(this,id,rc)}}})},collapseNode:function(rc){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var expanded=this.p.treeReader.expanded_field;if(rc[expanded]){var id=$.jgrid.getAccessor(rc,this.p.localReader.id),ret=$.isFunction(this.p.beforeCollapseTreeGridNode)?this.p.beforeCollapseTreeGridNode.call(this,id,rc):true,rc1=$("#"+this.p.idPrefix+$.jgrid.jqID(id),this.grid.bDiv)[0];rc[expanded]=false;if(ret===false){return}$("div.treeclick",rc1).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus");if($.isFunction(this.p.afterCollapseTreeGridNode)){this.p.afterCollapseTreeGridNode.call(this,id,rc)}}})},SortTree:function(sortname,newDir,st,datefmt){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var i,len,rec,records=[],$t=this,query,roots,rt=$(this).jqGrid("getRootNodes",$t.p.search);query=$.jgrid.from.call(this,rt);query.orderBy(sortname,newDir,st,datefmt);roots=query.select();for(i=0,len=roots.length;i<len;i++){rec=roots[i];records.push(rec);$(this).jqGrid("collectChildrenSortTree",records,rec,sortname,newDir,st,datefmt)}$.each(records,function(index){var id=$.jgrid.getAccessor(this,$t.p.localReader.id);$("#"+$.jgrid.jqID($t.p.id)+" tbody tr:eq("+index+")").after($("tr#"+$.jgrid.jqID(id),$t.grid.bDiv))});query=null;roots=null;records=null})},searchTree:function(recs){var i=recs.length||0,ancestors=[],lid,roots=[],result=[],tid,alen,rlen,j,k;this.each(function(){if(!this.grid||!this.p.treeGrid){return}if(i){lid=this.p.localReader.id;while(i--){ancestors=$(this).jqGrid("getNodeAncestors",recs[i],true,true);ancestors.push(recs[i]);tid=ancestors[0][lid];if($.inArray(tid,roots)!==-1){for(j=0,alen=ancestors.length;j<alen;j++){var found=false;for(k=0,rlen=result.length;k<rlen;k++){if(ancestors[j][lid]===result[k][lid]){found=true;break}}if(!found){result.push(ancestors[j])}}continue}else{roots.push(tid)}result=result.concat(ancestors)}}});return result},collectChildrenSortTree:function(records,rec,sortname,newDir,st,datefmt){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var i,len,child,ch,query,children;ch=$(this).jqGrid("getNodeChildren",rec,this.p.search);query=$.jgrid.from.call(this,ch);query.orderBy(sortname,newDir,st,datefmt);children=query.select();for(i=0,len=children.length;i<len;i++){child=children[i];records.push(child);$(this).jqGrid("collectChildrenSortTree",records,child,sortname,newDir,st,datefmt)}})},setTreeRow:function(rowid,data){var success=false;this.each(function(){var t=this;if(!t.grid||!t.p.treeGrid){return}success=$(t).jqGrid("setRowData",rowid,data)});return success},delTreeNode:function(rowid){return this.each(function(){var $t=this,rid=$t.p.localReader.id,i,left=$t.p.treeReader.left_field,right=$t.p.treeReader.right_field,myright,width,res,key;if(!$t.grid||!$t.p.treeGrid){return}var rc=$t.p._index[rowid];if(rc!==undefined){myright=parseInt($t.p.data[rc][right],10);width=myright-parseInt($t.p.data[rc][left],10)+1;var dr=$($t).jqGrid("getFullTreeNode",$t.p.data[rc]);if(dr.length>0){for(i=0;i<dr.length;i++){$($t).jqGrid("delRowData",dr[i][rid])}}if($t.p.treeGridModel==="nested"){res=$.jgrid.from.call($t,$t.p.data).greater(left,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=parseInt(res[key][left],10)-width}}}res=$.jgrid.from.call($t,$t.p.data).greater(right,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][right]=parseInt(res[key][right],10)-width}}}}}})},delChildren:function(rowid){return this.each(function(){var $t=this,rid=$t.p.localReader.id,left=$t.p.treeReader.left_field,right=$t.p.treeReader.right_field,myright,width,res,key;if(!$t.grid||!$t.p.treeGrid){return}var rc=$t.p._index[rowid];if(rc!==undefined){myright=parseInt($t.p.data[rc][right],10);width=myright-parseInt($t.p.data[rc][left],10)+1;var dr=$($t).jqGrid("getFullTreeNode",$t.p.data[rc]);if(dr.length>0){for(var i=0;i<dr.length;i++){if(dr[i][rid]!==rowid){$($t).jqGrid("delRowData",dr[i][rid])}}}if($t.p.treeGridModel==="nested"){res=$.jgrid.from($t.p.data).greater(left,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=parseInt(res[key][left],10)-width}}}res=$.jgrid.from($t.p.data).greater(right,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][right]=parseInt(res[key][right],10)-width}}}}}})},addChildNode:function(nodeid,parentid,data,expandData){var $t=this[0];if(data){var expanded=$t.p.treeReader.expanded_field,isLeaf=$t.p.treeReader.leaf_field,level=$t.p.treeReader.level_field,parent=$t.p.treeReader.parent_id_field,left=$t.p.treeReader.left_field,right=$t.p.treeReader.right_field,loaded=$t.p.treeReader.loaded,method,parentindex,parentdata,parentlevel,i,len,max=0,rowind=parentid,leaf,maxright;if(expandData===undefined){expandData=false}if(nodeid==null){i=$t.p.data.length-1;if(i>=0){while(i>=0){max=Math.max(max,parseInt($t.p.data[i][$t.p.localReader.id],10));i--}}nodeid=max+1}var prow=$($t).jqGrid("getInd",parentid);leaf=false;if(parentid===undefined||parentid===null||parentid===""){parentid=null;rowind=null;method="last";parentlevel=$t.p.tree_root_level;i=$t.p.data.length+1}else{method="after";parentindex=$t.p._index[parentid];parentdata=$t.p.data[parentindex];parentid=parentdata[$t.p.localReader.id];parentlevel=parseInt(parentdata[level],10)+1;var childs=$($t).jqGrid("getFullTreeNode",parentdata);if(childs.length){i=childs[childs.length-1][$t.p.localReader.id];rowind=i;i=$($t).jqGrid("getInd",rowind)+1}else{i=$($t).jqGrid("getInd",parentid)+1}if(parentdata[isLeaf]){leaf=true;parentdata[expanded]=true;$($t.rows[prow]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass($t.p.treeIcons.leaf+" tree-leaf").addClass($t.p.treeIcons.minus+" tree-minus");$t.p.data[parentindex][isLeaf]=false;parentdata[loaded]=true}}len=i+1;if(data[expanded]===undefined){data[expanded]=false}if(data[loaded]===undefined){data[loaded]=false}data[level]=parentlevel;if(data[isLeaf]===undefined){data[isLeaf]=true}if($t.p.treeGridModel==="adjacency"){data[parent]=parentid}if($t.p.treeGridModel==="nested"){var query,res,key;if(parentid!==null){maxright=parseInt(parentdata[right],10);query=$.jgrid.from.call($t,$t.p.data);query=query.greaterOrEquals(right,maxright,{stype:"integer"});res=query.select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=res[key][left]>maxright?parseInt(res[key][left],10)+2:res[key][left];res[key][right]=res[key][right]>=maxright?parseInt(res[key][right],10)+2:res[key][right]}}}data[left]=maxright;data[right]=maxright+1}else{maxright=parseInt($($t).jqGrid("getCol",right,false,"max"),10);res=$.jgrid.from.call($t,$t.p.data).greater(left,maxright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=parseInt(res[key][left],10)+2}}}res=$.jgrid.from.call($t,$t.p.data).greater(right,maxright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][right]=parseInt(res[key][right],10)+2}}}data[left]=maxright+1;data[right]=maxright+2}}if(parentid===null||$($t).jqGrid("isNodeLoaded",parentdata)||leaf){$($t).jqGrid("addRowData",nodeid,data,method,rowind);$($t).jqGrid("setTreeNode",i,len)}if(parentdata&&!parentdata[expanded]&&expandData){$($t.rows[prow]).find("div.treeclick").click()}}}});$.fn.jqDrag=function(h){return i(this,h,"d")};$.fn.jqResize=function(h,ar){return i(this,h,"r",ar)};$.jqDnR={dnr:{},e:0,drag:function(v){if(M.k=="d"){E.css({left:M.X+v.pageX-M.pX,top:M.Y+v.pageY-M.pY})}else{E.css({width:Math.max(v.pageX-M.pX+M.W,0),height:Math.max(v.pageY-M.pY+M.H,0)});if(M1){E1.css({width:Math.max(v.pageX-M1.pX+M1.W,0),height:Math.max(v.pageY-M1.pY+M1.H,0)})}}return false},stop:function(){$(document).unbind("mousemove",J.drag).unbind("mouseup",J.stop)}};var J=$.jqDnR,M=J.dnr,E=J.e,E1,M1,i=function(e,h,k,aR){return e.each(function(){h=(h)?$(h,e):e;h.bind("mousedown",{e:e,k:k},function(v){var d=v.data,p={};E=d.e;E1=aR?$(aR):false;if(E.css("position")!="relative"){try{E.position(p)}catch(e){}}M={X:p.left||f("left")||0,Y:p.top||f("top")||0,W:f("width")||E[0].scrollWidth||0,H:f("height")||E[0].scrollHeight||0,pX:v.pageX,pY:v.pageY,k:d.k};if(E1&&d.k!="d"){M1={X:p.left||f1("left")||0,Y:p.top||f1("top")||0,W:E1[0].offsetWidth||f1("width")||0,H:E1[0].offsetHeight||f1("height")||0,pX:v.pageX,pY:v.pageY,k:d.k}}else{M1=false}if($("input.hasDatepicker",E[0])[0]){try{$("input.hasDatepicker",E[0]).datepicker("hide")}catch(dpe){}}$(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop);return false})})},f=function(k){return parseInt(E.css(k),10)||false},f1=function(k){return parseInt(E1.css(k),10)||false};$.fn.tinyDraggable=function(options){var settings=$.extend({handle:0,exclude:0},options);return this.each(function(){var dx,dy,el=$(this),handle=settings.handle?$(settings.handle,el):el;handle.on({mousedown:function(e){if(settings.exclude&&~$.inArray(e.target,$(settings.exclude,el))){return}e.preventDefault();var os=el.offset();dx=e.pageX-os.left,dy=e.pageY-os.top;$(document).on("mousemove.drag",function(e){el.offset({top:e.pageY-dy,left:e.pageX-dx})})},mouseup:function(e){$(document).off("mousemove.drag")}})})};$.fn.jqm=function(o){var p={overlay:50,closeoverlay:true,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:F,ajaxText:"",target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){if(this._jqm){return H[this._jqm].c=$.extend({},H[this._jqm].c,o)}s++;this._jqm=s;H[s]={c:$.extend(p,$.jqm.params,o),a:F,w:$(this).addClass("jqmID"+s),s:s};if(p.trigger){$(this).jqmAddTrigger(p.trigger)}})};$.fn.jqmAddClose=function(e){return hs(this,e,"jqmHide")};$.fn.jqmAddTrigger=function(e){return hs(this,e,"jqmShow")};$.fn.jqmShow=function(t){return this.each(function(){$.jqm.open(this._jqm,t)})};$.fn.jqmHide=function(t){return this.each(function(){$.jqm.close(this._jqm,t)})};$.jqm={hash:{},open:function(s,t){var h=H[s],c=h.c,cc="."+c.closeClass,z=(parseInt(h.w.css("z-index")));z=(z>0)?z:3000;var o=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":z-1,opacity:c.overlay/100});if(h.a){return F}h.t=t;h.a=true;h.w.css("z-index",z);if(c.modal){if(!A[0]){setTimeout(function(){new L("bind")},1)}A.push(s)}else{if(c.overlay>0){if(c.closeoverlay){h.w.jqmAddClose(o)}}else{o=F}}h.o=(o)?o.addClass(c.overlayClass).prependTo("body"):F;if(c.ajax){var r=c.target||h.w,u=c.ajax;r=(typeof r==="string")?$(r,h.w):$(r);u=(u.substr(0,1)==="@")?$(t).attr(u.substring(1)):u;r.html(c.ajaxText).load(u,function(){if(c.onLoad){c.onLoad.call(this,h)}if(cc){h.w.jqmAddClose($(cc,h.w))}e(h)})}else{if(cc){h.w.jqmAddClose($(cc,h.w))}}if(c.toTop&&h.o){h.w.before('<span id="jqmP'+h.w[0]._jqm+'"></span>').insertAfter(h.o)}(c.onShow)?c.onShow(h):h.w.show();e(h);return F},close:function(s){var h=H[s];if(!h.a){return F}h.a=F;if(A[0]){A.pop();if(!A[0]){new L("unbind")}}if(h.c.toTop&&h.o){$("#jqmP"+h.w[0]._jqm).after(h.w).remove()}if(h.c.onHide){h.c.onHide(h)}else{h.w.hide();if(h.o){h.o.remove()}}return F},params:{}};var s=0,H=$.jqm.hash,A=[],F=false,e=function(h){if(h.c.focusField===undefined){h.c.focusField=0}if(h.c.focusField>=0){f(h)}},f=function(h){try{$(":input:visible",h.w)[parseInt(h.c.focusField,10)].focus()}catch(_){}},L=function(t){$(document)[t]("keypress",m)[t]("keydown",m)[t]("mousedown",m)},m=function(e){var h=H[A[A.length-1]],r=(!$(e.target).parents(".jqmID"+h.s)[0]);if(r){$(".jqmID"+h.s).each(function(){var $self=$(this),offset=$self.offset();if(offset.top<=e.pageY&&e.pageY<=offset.top+$self.height()&&offset.left<=e.pageX&&e.pageX<=offset.left+$self.width()){r=false;return false}});f(h)}return !r},hs=function(w,t,c){return w.each(function(){var s=this._jqm;$(t).each(function(){if(!this[c]){this[c]=[];$(this).click(function(){for(var i in {jqmShow:1,jqmHide:1}){for(var s in this[i]){if(H[this[i][s]]){H[this[i][s]].w[i](this)}}}return F})}this[c].push(s)})})};$.fmatter={};$.extend($.fmatter,{isBoolean:function(o){return typeof o==="boolean"},isObject:function(o){return(o&&(typeof o==="object"||$.isFunction(o)))||false},isString:function(o){return typeof o==="string"},isNumber:function(o){return typeof o==="number"&&isFinite(o)},isValue:function(o){return(this.isObject(o)||this.isString(o)||this.isNumber(o)||this.isBoolean(o))},isEmpty:function(o){if(!this.isString(o)&&this.isValue(o)){return false}if(!this.isValue(o)){return true}o=$.trim(o).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return o===""}});$.fn.fmatter=function(formatType,cellval,opts,rwd,act){var v=cellval;opts=$.extend({},$.jgrid.getRegional(this,"formatter"),opts);try{v=$.fn.fmatter[formatType].call(this,cellval,opts,rwd,act)}catch(fe){}return v};$.fmatter.util={NumberFormat:function(nData,opts){if(!$.fmatter.isNumber(nData)){nData*=1}if($.fmatter.isNumber(nData)){var bNegative=(nData<0);var sOutput=String(nData);var sDecimalSeparator=opts.decimalSeparator||".";var nDotIndex;if($.fmatter.isNumber(opts.decimalPlaces)){var nDecimalPlaces=opts.decimalPlaces;var nDecimal=Math.pow(10,nDecimalPlaces);sOutput=String(Math.round(nData*nDecimal)/nDecimal);nDotIndex=sOutput.lastIndexOf(".");if(nDecimalPlaces>0){if(nDotIndex<0){sOutput+=sDecimalSeparator;nDotIndex=sOutput.length-1}else{if(sDecimalSeparator!=="."){sOutput=sOutput.replace(".",sDecimalSeparator)}}while((sOutput.length-1-nDotIndex)<nDecimalPlaces){sOutput+="0"}}}if(opts.thousandsSeparator){var sThousandsSeparator=opts.thousandsSeparator;nDotIndex=sOutput.lastIndexOf(sDecimalSeparator);nDotIndex=(nDotIndex>-1)?nDotIndex:sOutput.length;var sNewOutput=sOutput.substring(nDotIndex);var nCount=-1,i;for(i=nDotIndex;i>0;i--){nCount++;if((nCount%3===0)&&(i!==nDotIndex)&&(!bNegative||(i>1))){sNewOutput=sThousandsSeparator+sNewOutput}sNewOutput=sOutput.charAt(i-1)+sNewOutput}sOutput=sNewOutput}sOutput=(opts.prefix)?opts.prefix+sOutput:sOutput;sOutput=(opts.suffix)?sOutput+opts.suffix:sOutput;return sOutput}return nData}};$.fn.fmatter.defaultFormat=function(cellval,opts){return($.fmatter.isValue(cellval)&&cellval!=="")?cellval:opts.defaultValue||"&#160;"};$.fn.fmatter.email=function(cellval,opts){if(!$.fmatter.isEmpty(cellval)){return'<a href="mailto:'+cellval+'">'+cellval+"</a>"}return $.fn.fmatter.defaultFormat(cellval,opts)};$.fn.fmatter.checkbox=function(cval,opts){var op=$.extend({},opts.checkbox),ds;if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if(op.disabled===true){ds='disabled="disabled"'}else{ds=""}if($.fmatter.isEmpty(cval)||cval===undefined){cval=$.fn.fmatter.defaultFormat(cval,op)}cval=String(cval);cval=(cval+"").toLowerCase();var bchk=cval.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+bchk+' value="'+cval+'" offval="no" '+ds+"/>"};$.fn.fmatter.link=function(cellval,opts){var op={target:opts.target};var target="";if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if(op.target){target="target="+op.target}if(!$.fmatter.isEmpty(cellval)){return"<a "+target+' href="'+cellval+'">'+cellval+"</a>"}return $.fn.fmatter.defaultFormat(cellval,opts)};$.fn.fmatter.showlink=function(cellval,opts){var op={baseLinkUrl:opts.baseLinkUrl,showAction:opts.showAction,addParam:opts.addParam||"",target:opts.target,idName:opts.idName},target="",idUrl;if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if(op.target){target="target="+op.target}idUrl=op.baseLinkUrl+op.showAction+"?"+op.idName+"="+opts.rowId+op.addParam;if($.fmatter.isString(cellval)||$.fmatter.isNumber(cellval)){return"<a "+target+' href="'+idUrl+'">'+cellval+"</a>"}return $.fn.fmatter.defaultFormat(cellval,opts)};$.fn.fmatter.integer=function(cellval,opts){var op=$.extend({},opts.integer);if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if($.fmatter.isEmpty(cellval)){return op.defaultValue}return $.fmatter.util.NumberFormat(cellval,op)};$.fn.fmatter.number=function(cellval,opts){var op=$.extend({},opts.number);if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if($.fmatter.isEmpty(cellval)){return op.defaultValue}return $.fmatter.util.NumberFormat(cellval,op)};$.fn.fmatter.currency=function(cellval,opts){var op=$.extend({},opts.currency);if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if($.fmatter.isEmpty(cellval)){return op.defaultValue}return $.fmatter.util.NumberFormat(cellval,op)};$.fn.fmatter.date=function(cellval,opts,rwd,act){var op=$.extend({},opts.date);if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if(!op.reformatAfterEdit&&act==="edit"){return $.fn.fmatter.defaultFormat(cellval,opts)}if(!$.fmatter.isEmpty(cellval)){return $.jgrid.parseDate.call(this,op.srcformat,cellval,op.newformat,op)}return $.fn.fmatter.defaultFormat(cellval,opts)};$.fn.fmatter.select=function(cellval,opts){cellval=String(cellval);var oSelect=false,ret=[],sep,delim;if(opts.colModel.formatoptions!==undefined){oSelect=opts.colModel.formatoptions.value;sep=opts.colModel.formatoptions.separator===undefined?":":opts.colModel.formatoptions.separator;delim=opts.colModel.formatoptions.delimiter===undefined?";":opts.colModel.formatoptions.delimiter}else{if(opts.colModel.editoptions!==undefined){oSelect=opts.colModel.editoptions.value;sep=opts.colModel.editoptions.separator===undefined?":":opts.colModel.editoptions.separator;delim=opts.colModel.editoptions.delimiter===undefined?";":opts.colModel.editoptions.delimiter}}if(oSelect){var msl=(opts.colModel.editoptions!=null&&opts.colModel.editoptions.multiple===true)===true?true:false,scell=[],sv;if(msl){scell=cellval.split(",");scell=$.map(scell,function(n){return $.trim(n)})}if($.fmatter.isString(oSelect)){var so=oSelect.split(delim),j=0,i;for(i=0;i<so.length;i++){sv=so[i].split(sep);if(sv.length>2){sv[1]=$.map(sv,function(n,i){if(i>0){return n}}).join(sep)}if(msl){if($.inArray(sv[0],scell)>-1){ret[j]=sv[1];j++}}else{if($.trim(sv[0])===$.trim(cellval)){ret[0]=sv[1];break}}}}else{if($.fmatter.isObject(oSelect)){if(msl){ret=$.map(scell,function(n){return oSelect[n]})}else{ret[0]=oSelect[cellval]||""}}}}cellval=ret.join(", ");return cellval===""?$.fn.fmatter.defaultFormat(cellval,opts):cellval};$.fn.fmatter.rowactions=function(act){var $tr=$(this).closest("tr.jqgrow"),rid=$tr.attr("id"),$id=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),$grid=$("#"+$id),$t=$grid[0],p=$t.p,cm=p.colModel[$.jgrid.getCellIndex(this)],$actionsDiv=cm.frozen?$("tr#"+rid+" td:eq("+$.jgrid.getCellIndex(this)+") > div",$grid):$(this).parent(),op={extraparam:{}},saverow=function(rowid,res){if($.isFunction(op.afterSave)){op.afterSave.call($t,rowid,res)}$actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show();$actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide()},restorerow=function(rowid){if($.isFunction(op.afterRestore)){op.afterRestore.call($t,rowid)}$actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show();$actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide()};if(cm.formatoptions!==undefined){op=$.extend(op,cm.formatoptions)}if(p.editOptions!==undefined){op.editOptions=p.editOptions}if(p.delOptions!==undefined){op.delOptions=p.delOptions}if($tr.hasClass("jqgrid-new-row")){op.extraparam[p.prmNames.oper]=p.prmNames.addoper}var actop={keys:op.keys,oneditfunc:op.onEdit,successfunc:op.onSuccess,url:op.url,extraparam:op.extraparam,aftersavefunc:saverow,errorfunc:op.onError,afterrestorefunc:restorerow,restoreAfterError:op.restoreAfterError,mtype:op.mtype};switch(act){case"edit":$grid.jqGrid("editRow",rid,actop);$actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").hide();$actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").show();$grid.triggerHandler("jqGridAfterGridComplete");break;case"save":if($grid.jqGrid("saveRow",rid,actop)){$actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show();$actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide();$grid.triggerHandler("jqGridAfterGridComplete")}break;case"cancel":$grid.jqGrid("restoreRow",rid,restorerow);$actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show();$actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide();$grid.triggerHandler("jqGridAfterGridComplete");break;case"del":$grid.jqGrid("delGridRow",rid,op.delOptions);break;case"formedit":$grid.jqGrid("setSelection",rid);$grid.jqGrid("editGridRow",rid,op.editOptions);break}};$.fn.fmatter.actions=function(cellval,opts){var op={keys:false,editbutton:true,delbutton:true,editformbutton:false},rowid=opts.rowId,str="",ocl,nav=$.jgrid.getRegional(this,"nav"),classes=$.jgrid.styleUI[(opts.styleUI||"jQueryUI")].fmatter,common=$.jgrid.styleUI[(opts.styleUI||"jQueryUI")].common;if(opts.colModel.formatoptions!==undefined){op=$.extend(op,opts.colModel.formatoptions)}if(rowid===undefined||$.fmatter.isEmpty(rowid)){return""}var hover="onmouseover=jQuery(this).addClass('"+common.hover+"'); onmouseout=jQuery(this).removeClass('"+common.hover+"');  ";if(op.editformbutton){ocl="id='jEditButton_"+rowid+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+hover;str+="<div title='"+nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+ocl+"><span class='"+common.icon_base+" "+classes.icon_edit+"'></span></div>"}else{if(op.editbutton){ocl="id='jEditButton_"+rowid+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+hover;str+="<div title='"+nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+ocl+"><span class='"+common.icon_base+" "+classes.icon_edit+"'></span></div>"}}if(op.delbutton){ocl="id='jDeleteButton_"+rowid+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+hover;str+="<div title='"+nav.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' "+ocl+"><span class='"+common.icon_base+" "+classes.icon_del+"'></span></div>"}ocl="id='jSaveButton_"+rowid+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+hover;str+="<div title='"+nav.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+ocl+"><span class='"+common.icon_base+" "+classes.icon_save+"'></span></div>";ocl="id='jCancelButton_"+rowid+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+hover;str+="<div title='"+nav.canceltitle+"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' "+ocl+"><span class='"+common.icon_base+" "+classes.icon_cancel+"'></span></div>";return"<div style='margin-left:8px;'>"+str+"</div>"};$.unformat=function(cellval,options,pos,cnt){var ret,formatType=options.colModel.formatter,op=options.colModel.formatoptions||{},sep,re=/([\.\*\_\'\(\)\{\}\+\?\\])/g,unformatFunc=options.colModel.unformat||($.fn.fmatter[formatType]&&$.fn.fmatter[formatType].unformat);if(unformatFunc!==undefined&&$.isFunction(unformatFunc)){ret=unformatFunc.call(this,$(cellval).text(),options,cellval)}else{if(formatType!==undefined&&$.fmatter.isString(formatType)){var opts=$.jgrid.getRegional(this,"formatter")||{},stripTag;switch(formatType){case"integer":op=$.extend({},opts.integer,op);sep=op.thousandsSeparator.replace(re,"\\$1");stripTag=new RegExp(sep,"g");ret=$(cellval).text().replace(stripTag,"");break;case"number":op=$.extend({},opts.number,op);sep=op.thousandsSeparator.replace(re,"\\$1");stripTag=new RegExp(sep,"g");ret=$(cellval).text().replace(stripTag,"").replace(op.decimalSeparator,".");break;case"currency":op=$.extend({},opts.currency,op);sep=op.thousandsSeparator.replace(re,"\\$1");stripTag=new RegExp(sep,"g");ret=$(cellval).text();if(op.prefix&&op.prefix.length){ret=ret.substr(op.prefix.length)}if(op.suffix&&op.suffix.length){ret=ret.substr(0,ret.length-op.suffix.length)}ret=ret.replace(stripTag,"").replace(op.decimalSeparator,".");break;case"checkbox":var cbv=(options.colModel.editoptions)?options.colModel.editoptions.value.split(":"):["Yes","No"];ret=$("input",cellval).is(":checked")?cbv[0]:cbv[1];break;case"select":ret=$.unformat.select(cellval,options,pos,cnt);break;case"actions":return"";default:ret=$(cellval).text()}}}return ret!==undefined?ret:cnt===true?$(cellval).text():$.jgrid.htmlDecode($(cellval).html())};$.unformat.select=function(cellval,options,pos,cnt){var ret=[];var cell=$(cellval).text();if(cnt===true){return cell}var op=$.extend({},options.colModel.formatoptions!==undefined?options.colModel.formatoptions:options.colModel.editoptions),sep=op.separator===undefined?":":op.separator,delim=op.delimiter===undefined?";":op.delimiter;if(op.value){var oSelect=op.value,msl=op.multiple===true?true:false,scell=[],sv;if(msl){scell=cell.split(",");scell=$.map(scell,function(n){return $.trim(n)})}if($.fmatter.isString(oSelect)){var so=oSelect.split(delim),j=0,i;for(i=0;i<so.length;i++){sv=so[i].split(sep);if(sv.length>2){sv[1]=$.map(sv,function(n,i){if(i>0){return n}}).join(sep)}if(msl){if($.inArray($.trim(sv[1]),scell)>-1){ret[j]=sv[0];j++}}else{if($.trim(sv[1])===$.trim(cell)){ret[0]=sv[0];break}}}}else{if($.fmatter.isObject(oSelect)||$.isArray(oSelect)){if(!msl){scell[0]=cell}ret=$.map(scell,function(n){var rv;$.each(oSelect,function(i,val){if(val===n){rv=i;return false}});if(rv!==undefined){return rv}})}}return ret.join(", ")}return cell||""};$.unformat.date=function(cellval,opts){var op=$.jgrid.getRegional(this,"formatter.date")||{};if(opts.formatoptions!==undefined){op=$.extend({},op,opts.formatoptions)}if(!$.fmatter.isEmpty(cellval)){return $.jgrid.parseDate.call(this,op.newformat,cellval,op.srcformat,op)}return $.fn.fmatter.defaultFormat(cellval,opts)};var dragging,placeholders=$();$.fn.html5sortable=function(options){var method=String(options);options=$.extend({connectWith:false},options);return this.each(function(){if(/^enable|disable|destroy$/.test(method)){var items=$(this).children($(this).data("items")).attr("draggable",method==="enable");if(method==="destroy"){items.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}return}var isHandle,index,items=$(this).children(options.items);var placeholder=$("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":"div")+' class="sortable-placeholder '+options.placeholderClass+'">').html("&nbsp;");items.find(options.handle).mousedown(function(){isHandle=true}).mouseup(function(){isHandle=false});$(this).data("items",options.items);placeholders=placeholders.add(placeholder);if(options.connectWith){$(options.connectWith).add(this).data("connectWith",options.connectWith)}items.attr("draggable","true").on("dragstart.h5s",function(e){if(options.handle&&!isHandle){return false}isHandle=false;var dt=e.originalEvent.dataTransfer;dt.effectAllowed="move";dt.setData("Text","dummy");index=(dragging=$(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){if(!dragging){return}dragging.removeClass("sortable-dragging").show();placeholders.detach();if(index!==dragging.index()){dragging.parent().trigger("sortupdate",{item:dragging,startindex:index,endindex:dragging.index()})}dragging=null}).not("a[href], img").on("selectstart.h5s",function(){this.dragDrop&&this.dragDrop();return false}).end().add([this,placeholder]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){if(!items.is(dragging)&&options.connectWith!==$(dragging).parent().data("connectWith")){return true}if(e.type==="drop"){e.stopPropagation();placeholders.filter(":visible").after(dragging);dragging.trigger("dragend.h5s");return false}e.preventDefault();e.originalEvent.dataTransfer.dropEffect="move";if(items.is(this)){if(options.forcePlaceholderSize){placeholder.height(dragging.outerHeight())}dragging.hide();$(this)[placeholder.index()<$(this).index()?"after":"before"](placeholder);placeholders.not(placeholder).detach()}else{if(!placeholders.is(this)&&!$(this).children(options.items).length){placeholders.detach();$(this).append(placeholder)}}return false})})};window.jqGridUtils={stringify:function(obj){return JSON.stringify(obj,function(key,value){return(typeof value==="function")?value.toString():value})},parse:function(str){return JSON.parse(str,function(key,value){if(typeof value==="string"&&value.indexOf("function")!==-1){var sv=value.split(" ");if(sv[0].trim()==="function"&&value.trim().slice(-1)==="}"){return eval("("+value+")")}else{return value}}return value})},encode:function(text){return String(text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(tree,options){var o=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:true},options||{}),that=this,scalarToxml=function(name,text){if(name==="#text"){return(o.encode?that.encode(text):text)}else{if(typeof(text)==="function"){return"<"+name+"><![CDATA["+text+"]]></"+name+">\n"}}if(text===""){return"<"+name+">__EMPTY_STRING_</"+name+">\n"}else{return"<"+name+">"+(o.encode?that.encode(text):text)+"</"+name+">\n"}},arrayToxml=function(name,array){var out=[];for(var i=0;i<array.length;i++){var val=array[i];if(typeof(val)==="undefined"||val==null){out[out.length]="<"+name+" />"}else{if(typeof(val)==="object"&&val.constructor==Array){out[out.length]=arrayToxml(name,val)}else{if(typeof(val)==="object"){out[out.length]=hashToxml(name,val)}else{out[out.length]=scalarToxml(name,val)}}}}if(!out.length){out[0]="<"+name+">__EMPTY_ARRAY_</"+name+">\n"}return out.join("")},hashToxml=function(name,tree){var elem=[];var attr=[];for(var key in tree){if(!tree.hasOwnProperty(key)){continue}var val=tree[key];if(key.charAt(0)!==o.attr_prefix){if(val==null){elem[elem.length]="<"+key+" />"}else{if(typeof(val)==="object"&&val.constructor===Array){elem[elem.length]=arrayToxml(key,val)}else{if(typeof(val)==="object"){elem[elem.length]=hashToxml(key,val)}else{elem[elem.length]=scalarToxml(key,val)}}}}else{attr[attr.length]=" "+(key.substring(1))+'="'+(o.encode?that.encode(val):val)+'"'}}var jattr=attr.join("");var jelem=elem.join("");if(name==null){}else{if(elem.length>0){if(jelem.match(/\n/)){jelem="<"+name+jattr+">\n"+jelem+"</"+name+">\n"}else{jelem="<"+name+jattr+">"+jelem+"</"+name+">\n"}}else{jelem="<"+name+jattr+" />\n"}}return jelem};var xml=hashToxml(null,tree);return o.xmlDecl+xml},xmlToJSON:function(root,options){var o=$.extend({force_array:[],attr_prefix:"-"},options||{});if(!root){return}var __force_array={};if(o.force_array){for(var i=0;i<o.force_array.length;i++){__force_array[o.force_array[i]]=1}}if(typeof root==="string"){root=$.parseXML(root)}if(root.documentElement){root=root.documentElement}var addNode=function(hash,key,cnts,val){if(typeof val==="string"){if(val.indexOf("function")!==-1){val=eval("("+val+")")}else{switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=false;break;case"true":val=true;break}}}if(__force_array[key]){if(cnts===1){hash[key]=[]}hash[key][hash[key].length]=val}else{if(cnts===1){hash[key]=val}else{if(cnts===2){hash[key]=[hash[key],val]}else{hash[key][hash[key].length]=val}}}},parseElement=function(elem){if(elem.nodeType===7){return}if(elem.nodeType===3||elem.nodeType===4){var bool=elem.nodeValue.match(/[^\x00-\x20]/);if(bool==null){return}return elem.nodeValue}var retval,cnt={},i,key,val;if(elem.attributes&&elem.attributes.length){retval={};for(i=0;i<elem.attributes.length;i++){key=elem.attributes[i].nodeName;if(typeof(key)!=="string"){continue}val=elem.attributes[i].nodeValue;if(!val){continue}key=o.attr_prefix+key;if(typeof(cnt[key])==="undefined"){cnt[key]=0}cnt[key]++;addNode(retval,key,cnt[key],val)}}if(elem.childNodes&&elem.childNodes.length){var textonly=true;if(retval){textonly=false}for(i=0;i<elem.childNodes.length&&textonly;i++){var ntype=elem.childNodes[i].nodeType;if(ntype===3||ntype===4){continue}textonly=false}if(textonly){if(!retval){retval=""}for(i=0;i<elem.childNodes.length;i++){retval+=elem.childNodes[i].nodeValue}}else{if(!retval){retval={}}for(i=0;i<elem.childNodes.length;i++){key=elem.childNodes[i].nodeName;if(typeof(key)!=="string"){continue}val=parseElement(elem.childNodes[i]);if(!val){continue}if(typeof(cnt[key])==="undefined"){cnt[key]=0}cnt[key]++;addNode(retval,key,cnt[key],val)}}}return retval};var json=parseElement(root);if(__force_array[root.nodeName]){json=[json]}if(root.nodeType!==11){var tmp={};tmp[root.nodeName]=json;json=tmp}return json}}}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","../grid.base"],a)}else{a(jQuery)}}(function(a){a.jgrid=a.jgrid||{};if(!a.jgrid.hasOwnProperty("regional")){a.jgrid.regional=[]}a.jgrid.regional.cn={defaults:{recordtext:"{0} - {1}\u3000共 {2} 条",emptyrecords:"无数据显示",loadtext:"读取中...",savetext:"Saving...",pgtext:" {0} 共 {1} 页",pgfirst:"第一页",pglast:"最后一页",pgnext:"下一页",pgprev:"上一页",pgrecs:"每页显示数量",showhide:"Toggle Expand Collapse Grid",pagerCaption:"Grid::Page Settings",pageText:"Page:",recordPage:"每页显示数量",nomorerecs:"No more records...",scrollPullup:"Pull up to load more...",scrollPulldown:"Pull down to refresh...",scrollRefresh:"Release to refresh..."},search:{caption:"搜索...",Find:"查找",Reset:"重置",odata:[{oper:"eq",text:"等于\u3000\u3000"},{oper:"ne",text:"不等\u3000\u3000"},{oper:"lt",text:"小于\u3000\u3000"},{oper:"le",text:"小于等于"},{oper:"gt",text:"大于\u3000\u3000"},{oper:"ge",text:"大于等于"},{oper:"bw",text:"开始于"},{oper:"bn",text:"不开始于"},{oper:"in",text:"属于\u3000\u3000"},{oper:"ni",text:"不属于"},{oper:"ew",text:"结束于"},{oper:"en",text:"不结束于"},{oper:"cn",text:"包含\u3000\u3000"},{oper:"nc",text:"不包含"},{oper:"nu",text:"不存在"},{oper:"nn",text:"存在"},{oper:"bt",text:"between"}],groupOps:[{op:"AND",text:"所有"},{op:"OR",text:"任一"}],operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"添加记录",editCaption:"编辑记录",bSubmit:"提交",bCancel:"取消",bClose:"关闭",saveData:"数据已改变，是否保存？",bYes:"是",bNo:"否",bExit:"取消",msg:{required:"此字段必需",number:"请输入有效数字",minValue:"输值必须大于等于 ",maxValue:"输值必须小于等于 ",email:"这不是有效的e-mail地址",integer:"请输入有效整数",date:"请输入有效时间",url:"无效网址。前缀必须为 ('http://' 或 'https://')",nodefined:" 未定义！",novalue:" 需要返回值！",customarray:"自定义函数需要返回数组！",customfcheck:"必须有自定义函数!"}},view:{caption:"查看记录",bClose:"关闭"},del:{caption:"删除",msg:"删除所选记录？",bSubmit:"删除",bCancel:"取消"},nav:{edittext:"",edittitle:"编辑所选记录",addtext:"",addtitle:"添加新记录",deltext:"",deltitle:"删除所选记录",searchtext:"",searchtitle:"查找",refreshtext:"",refreshtitle:"刷新表格",alertcap:"注意",alerttext:"请选择记录",viewtext:"",viewtitle:"查看所选记录",savetext:"",savetitle:"Save row",canceltext:"",canceltitle:"Cancel row editing",selectcaption:"Actions..."},col:{caption:"选择列",bSubmit:"确定",bCancel:"取消"},errors:{errcap:"错误",nourl:"没有设置url",norecords:"没有要处理的记录",model:"colNames 和 colModel 长度不等！"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["日","一","二","三","四","五","六","星期日","星期一","星期二","星期三","星期四","星期五","星期六",],monthNames:["一","二","三","四","五","六","七","八","九","十","十一","十二","一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],AmPm:["am","pm","上午","下午"],S:function(b){return b<11||b>13?["st","nd","rd","th"][Math.min((b-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"Y-m-d",parseRe:/[#%\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:false,userLocalTime:false},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:true},idName:"id"},colmenu:{sortasc:"Sort Ascending",sortdesc:"Sort Descending",columns:"Columns",filter:"Filter",grouping:"Group By",ungrouping:"Ungroup",searchTitle:"Get items with value that:",freeze:"Freeze",unfreeze:"Unfreeze",reorder:"Move to reorder"}}}));