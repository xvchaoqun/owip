(function(b,c){if(typeof define==="function"&&define.amd){define(c)}else{if(typeof exports==="object"){module.exports=c()}else{b.NProgress=c()}}})(this,function(){var f={};f.version="0.2.0";var c=f.settings={minimum:0.08,easing:"linear",positionUsing:"",speed:200,trickle:true,trickleSpeed:200,showSpinner:true,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};f.configure=function(n){var o,p;for(o in n){p=n[o];if(p!==undefined&&n.hasOwnProperty(o)){c[o]=p}}return this};f.status=null;f.set=function(t){var o=f.isStarted();t=h(t,c.minimum,1);f.status=(t===1?null:t);var p=f.render(!o),q=p.querySelector(c.barSelector),r=c.speed,s=c.easing;p.offsetWidth;j(function(n){if(c.positionUsing===""){c.positionUsing=f.getPositioningCSS()}i(q,b(t,r,s));if(t===1){i(p,{transition:"none",opacity:1});p.offsetWidth;setTimeout(function(){i(p,{transition:"all "+r+"ms linear",opacity:0});setTimeout(function(){f.remove();n()},r)},r)}else{setTimeout(n,r)}});return this};f.isStarted=function(){return typeof f.status==="number"};f.start=function(){if(!f.status){f.set(0)}var n=function(){setTimeout(function(){if(!f.status){return}f.trickle();n()},c.trickleSpeed)};if(c.trickle){n()}return this};f.done=function(n){if(!n&&!f.status){return this}return f.inc(0.3+0.5*Math.random()).set(1)};f.inc=function(o){var p=f.status;if(!p){return f.start()}else{if(p>1){return}else{if(typeof o!=="number"){if(p>=0&&p<0.2){o=0.1}else{if(p>=0.2&&p<0.5){o=0.04}else{if(p>=0.5&&p<0.8){o=0.02}else{if(p>=0.8&&p<0.99){o=0.005}else{o=0}}}}}p=h(p+o,0,0.994);return f.set(p)}}};f.trickle=function(){return f.inc()};(function(){var n=0,o=0;f.promise=function(p){if(!p||p.state()==="resolved"){return this}if(o===0){f.start()}n++;o++;p.always(function(){o--;if(o===0){n=0;f.done()}else{f.set((n-o)/n)}});return this}})();f.render=function(n){if(f.isRendered()){return document.getElementById("nprogress")}k(document.documentElement,"nprogress-busy");var o=document.createElement("div");o.id="nprogress";o.innerHTML=c.template;var r=o.querySelector(c.barSelector),p=n?"-100":d(f.status||0),q=document.querySelector(c.parent),s;i(r,{transition:"all 0 linear",transform:"translate3d("+p+"%,0,0)"});if(!c.showSpinner){s=o.querySelector(c.spinnerSelector);s&&l(s)}if(q!=document.body){k(q,"nprogress-custom-parent")}q.appendChild(o);return o};f.remove=function(){m(document.documentElement,"nprogress-busy");m(document.querySelector(c.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&l(n)};f.isRendered=function(){return !!document.getElementById("nprogress")};f.getPositioningCSS=function(){var n=document.body.style;var o=("WebkitTransform" in n)?"Webkit":("MozTransform" in n)?"Moz":("msTransform" in n)?"ms":("OTransform" in n)?"O":"";if(o+"Perspective" in n){return"translate3d"}else{if(o+"Transform" in n){return"translate"}else{return"margin"}}};function h(q,p,o){if(q<p){return p}if(q>o){return o}return q}function d(o){return(-1+o)*100}function b(r,p,q){var o;if(c.positionUsing==="translate3d"){o={transform:"translate3d("+d(r)+"%,0,0)"}}else{if(c.positionUsing==="translate"){o={transform:"translate("+d(r)+"%,0)"}}else{o={"margin-left":d(r)+"%"}}}o.transition="all "+p+"ms "+q;return o}var j=(function(){var o=[];function n(){var p=o.shift();if(p){p(n)}}return function(p){o.push(p);if(o.length==1){n()}}})();var i=(function(){var n=["Webkit","O","Moz","ms"],s={};function p(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(u,v){return v.toUpperCase()})}function r(t){var v=document.body.style;if(t in v){return t}var u=n.length,x=t.charAt(0).toUpperCase()+t.slice(1),w;while(u--){w=n[u]+x;if(w in v){return w}}return t}function q(t){t=p(t);return s[t]||(s[t]=r(t))}function o(t,v,u){v=q(v);t.style[v]=u}return function(v,u){var t=arguments,x,w;if(t.length==2){for(x in u){w=u[x];if(w!==undefined&&u.hasOwnProperty(x)){o(v,x,w)}}}else{o(v,t[1],t[2])}}})();function g(o,n){var p=typeof o=="string"?o:e(o);return p.indexOf(" "+n+" ")>=0}function k(o,n){var q=e(o),p=q+n;if(g(q,n)){return}o.className=p.substring(1)}function m(o,n){var q=e(o),p;if(!g(o,n)){return}p=q.replace(" "+n+" "," ");o.className=p.substring(1,p.length-1)}function e(n){return(" "+(n&&n.className||"")+" ").replace(/\s+/gi," ")}function l(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return f});(function(b){b(["jquery"],function(c){return(function(){var p;var e;var y=0;var d={error:"error",info:"info",success:"success",warning:"warning"};var w={clear:n,remove:x,error:r,getContainer:t,info:v,options:{},subscribe:i,success:g,version:"2.1.2",warning:q};var h;return w;function r(A,B,z){return m({type:d.error,iconClass:k().iconClasses.error,message:A,optionsOverride:z,title:B})}function t(z,A){if(!z){z=k()}p=c("#"+z.containerId);if(p.length){return p}if(A){p=f(z)}return p}function v(A,B,z){return m({type:d.info,iconClass:k().iconClasses.info,message:A,optionsOverride:z,title:B})}function i(z){e=z}function g(A,B,z){return m({type:d.success,iconClass:k().iconClasses.success,message:A,optionsOverride:z,title:B})}function q(A,B,z){return m({type:d.warning,iconClass:k().iconClasses.warning,message:A,optionsOverride:z,title:B})}function n(z,B){var A=k();if(!p){t(A)}if(!u(z,A,B)){o(A)}}function x(z){var A=k();if(!p){t(A)}if(z&&c(":focus",z).length===0){l(z);return}if(p.children().length){p.remove()}}function o(z){var B=p.children();for(var A=B.length-1;A>=0;A--){u(c(B[A]),z)}}function u(z,A,B){var C=B&&B.force?B.force:false;if(z&&(C||c(":focus",z).length===0)){z[A.hideMethod]({duration:A.hideDuration,easing:A.hideEasing,complete:function(){l(z)}});return true}return false}function f(z){p=c("<div/>").attr("id",z.containerId).addClass(z.positionClass).attr("aria-live","polite").attr("role","alert");p.appendTo(c(z.target));return p}function j(){return{tapToDismiss:true,toastClass:"toast",containerId:"toast-container",debug:false,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:undefined,hideMethod:"fadeOut",hideDuration:1000,hideEasing:"swing",onHidden:undefined,closeMethod:false,closeDuration:false,closeEasing:false,extendedTimeOut:1000,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5000,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:false,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:true,preventDuplicates:false,progressBar:false}}function s(z){if(!e){return}e(z)}function m(X){var K=k();var B=X.iconClass||K.iconClass;if(typeof(X.optionsOverride)!=="undefined"){K=c.extend(K,X.optionsOverride);B=X.optionsOverride.iconClass||B}if(N(K,X)){return}y++;p=t(K,true);var Y=null;var I=c("<div/>");var R=c("<div/>");var W=c("<div/>");var P=c("<div/>");var z=c(K.closeHtml);var U={intervalId:null,hideEta:null,maxHideTime:null};var C={toastId:y,state:"visible",startTime:new Date(),options:K,map:X};L();D();H();s(C);if(K.debug&&console){console.log(C)}return I;function T(Z){if(Z==null){Z=""}return new String(Z).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function L(){G();Q();F();V();M();S()}function H(){I.hover(J,E);if(!K.onclick&&K.tapToDismiss){I.click(A)}if(K.closeButton&&z){z.click(function(Z){if(Z.stopPropagation){Z.stopPropagation()}else{if(Z.cancelBubble!==undefined&&Z.cancelBubble!==true){Z.cancelBubble=true}}A(true)})}if(K.onclick){I.click(function(Z){K.onclick(Z);A()})}}function D(){I.hide();I[K.showMethod]({duration:K.showDuration,easing:K.showEasing,complete:K.onShown});if(K.timeOut>0){Y=setTimeout(A,K.timeOut);U.maxHideTime=parseFloat(K.timeOut);U.hideEta=new Date().getTime()+U.maxHideTime;if(K.progressBar){U.intervalId=setInterval(O,10)}}}function G(){if(X.iconClass){I.addClass(K.toastClass).addClass(B)}}function S(){if(K.newestOnTop){p.prepend(I)}else{p.append(I)}}function Q(){if(X.title){R.append(!K.escapeHtml?X.title:T(X.title)).addClass(K.titleClass);I.append(R)}}function F(){if(X.message){W.append(!K.escapeHtml?X.message:T(X.message)).addClass(K.messageClass);I.append(W)}}function V(){if(K.closeButton){z.addClass("toast-close-button").attr("role","button");I.prepend(z)}}function M(){if(K.progressBar){P.addClass("toast-progress");I.prepend(P)}}function N(Z,aa){if(Z.preventDuplicates){if(aa.message===h){return true}else{h=aa.message}}return false}function A(Z){var ac=Z&&K.closeMethod!==false?K.closeMethod:K.hideMethod;var aa=Z&&K.closeDuration!==false?K.closeDuration:K.hideDuration;var ab=Z&&K.closeEasing!==false?K.closeEasing:K.hideEasing;if(c(":focus",I).length&&!Z){return}clearTimeout(U.intervalId);return I[ac]({duration:aa,easing:ab,complete:function(){l(I);if(K.onHidden&&C.state!=="hidden"){K.onHidden()}C.state="hidden";C.endTime=new Date();s(C)}})}function E(){if(K.timeOut>0||K.extendedTimeOut>0){Y=setTimeout(A,K.extendedTimeOut);U.maxHideTime=parseFloat(K.extendedTimeOut);U.hideEta=new Date().getTime()+U.maxHideTime}}function J(){clearTimeout(Y);U.hideEta=0;I.stop(true,true)[K.showMethod]({duration:K.showDuration,easing:K.showEasing})}function O(){var Z=((U.hideEta-(new Date().getTime()))/U.maxHideTime)*100;P.width(Z+"%")}}function k(){return c.extend({},j(),w.options)}function l(z){if(!p){p=t()}if(z.is(":visible")){return}z.remove();z=null;if(p.children().length===0){p.remove();h=undefined}}})()})}(typeof define==="function"&&define.amd?define:function(c,b){if(typeof module!=="undefined"&&module.exports){module.exports=b(require("jquery"))}else{window.toastr=b(window.jQuery)}}));(function(c,b,d){(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{if(jQuery&&!jQuery.fn.qtip){e(jQuery)}}}(function(av){var T=true,I=false,ag=null,ab="x",aa="y",N="width",aA="height",p="top",e="left",aw="bottom",m="right",K="center",v="flip",Z="flipinvert",q="shift",A,aC,am,j,aJ={},r="qtip",G="data-hasqtip",ad="data-qtip-id",al=["ui-widget","ui-tooltip"],z="."+r,ae="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),E=r+"-fixed",R=r+"-default",P=r+"-focus",aI=r+"-hover",V=r+"-disabled",aH="_replacedByqTip",H="oldtitle",aG,t={ie:(function(){var C,X;for(C=4,X=b.createElement("div");(X.innerHTML="<!--[if gt IE "+C+"]><i></i><![endif]-->")&&X.getElementsByTagName("i")[0];C+=1){}return C>4?C:NaN})(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||I};function ay(Y,X,aK,C){this.id=aK;this.target=Y;this.tooltip=ag;this.elements={target:Y};this._id=r+"-"+aK;this.timers={img:{}};this.options=X;this.plugins={};this.cache={event:{},target:av(),disabled:I,attr:C,onTooltip:I,lastClass:""};this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=I}aC=ay.prototype;aC._when=function(C){return av.when.apply(av,C)};aC.render=function(aL){if(this.rendered||this.destroyed){return this}var aO=this,aQ=this.options,X=this.cache,C=this.elements,aN=aQ.content.text,aK=aQ.content.title,Y=aQ.content.button,aM=aQ.position,aP=[];av.attr(this.target[0],"aria-describedby",this._id);X.posClass=this._createPosClass((this.position={my:aM.my,at:aM.at}).my);this.tooltip=C.tooltip=av("<div/>",{id:this._id,"class":[r,R,aQ.style.classes,X.posClass].join(" "),width:aQ.style.width||"",height:aQ.style.height||"",tracking:aM.target==="mouse"&&aM.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":I,"aria-describedby":this._id+"-content","aria-hidden":T}).toggleClass(V,this.disabled).attr(ad,this.id).data(r,this).appendTo(aM.container).append(C.content=av("<div />",{"class":r+"-content",id:this._id+"-content","aria-atomic":T}));this.rendered=-1;this.positioning=T;if(aK){this._createTitle();if(!av.isFunction(aK)){aP.push(this._updateTitle(aK,I))}}if(Y){this._createButton()}if(!av.isFunction(aN)){aP.push(this._updateContent(aN,I))}this.rendered=T;this._setWidget();av.each(aJ,function(aS){var aR;if(this.initialize==="render"&&(aR=this(aO))){aO.plugins[aS]=aR}});this._unassignEvents();this._assignEvents();this._when(aP).then(function(){aO._trigger("render");aO.positioning=I;if(!aO.hiddenDuringWait&&(aQ.show.ready||aL)){aO.toggle(T,X.event,I)}aO.hiddenDuringWait=I});A.api[this.id]=this;return this};aC.destroy=function(C){if(this.destroyed){return this.target}function X(){if(this.destroyed){return}this.destroyed=T;var Y=this.target,aK=Y.attr(H),aL;if(this.rendered){this.tooltip.stop(1,0).find("*").remove().end().remove()}av.each(this.plugins,function(){this.destroy&&this.destroy()});for(aL in this.timers){if(this.timers.hasOwnProperty(aL)){clearTimeout(this.timers[aL])}}Y.removeData(r).removeAttr(ad).removeAttr(G).removeAttr("aria-describedby");if(this.options.suppress&&aK){Y.attr("title",aK).removeAttr(H)}this._unassignEvents();this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=ag;delete A.api[this.id]}if((C!==T||this.triggering==="hide")&&this.rendered){this.tooltip.one("tooltiphidden",av.proxy(X,this));!this.triggering&&this.hide()}else{X.call(this)}return this.target};function B(C){return C===ag||av.type(C)!=="object"}function S(C){return !(av.isFunction(C)||C&&C.attr||C.length||av.type(C)==="object"&&(C.jquery||C.then))}function w(Y){var X,aL,aK,C;if(B(Y)){return I}if(B(Y.metadata)){Y.metadata={type:Y.metadata}}if("content" in Y){X=Y.content;if(B(X)||X.jquery||X.done){aL=S(X)?I:X;X=Y.content={text:aL}}else{aL=X.text}if("ajax" in X){aK=X.ajax;C=aK&&aK.once!==I;delete X.ajax;X.text=function(aO,aN){var aP=aL||av(this).attr(aN.options.content.attr)||"Loading...",aM=av.ajax(av.extend({},aK,{context:aN})).then(aK.success,ag,aK.error).then(function(aQ){if(aQ&&C){aN.set("content.text",aQ)}return aQ},function(aS,aQ,aR){if(aN.destroyed||aS.status===0){return}aN.set("content.text",aQ+": "+aR)});return !C?(aN.set("content.text",aP),aM):aP}}if("title" in X){if(av.isPlainObject(X.title)){X.button=X.title.button;X.title=X.title.text}if(S(X.title||I)){X.title=I}}}if("position" in Y&&B(Y.position)){Y.position={my:Y.position,at:Y.position}}if("show" in Y&&B(Y.show)){Y.show=Y.show.jquery?{target:Y.show}:Y.show===T?{ready:T}:{event:Y.show}}if("hide" in Y&&B(Y.hide)){Y.hide=Y.hide.jquery?{target:Y.hide}:{event:Y.hide}}if("style" in Y&&B(Y.style)){Y.style={classes:Y.style}}av.each(aJ,function(){this.sanitize&&this.sanitize(Y)});return Y}j=aC.checks={builtin:{"^id$":function(aK,aL,C,Y){var aM=C===T?A.nextid:C,X=r+"-"+aM;if(aM!==I&&aM.length>0&&!av("#"+X).length){this._id=X;if(this.rendered){this.tooltip[0].id=this._id;this.elements.content[0].id=this._id+"-content";this.elements.title[0].id=this._id+"-title"}}else{aK[aL]=Y}},"^prerender":function(X,Y,C){C&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(X,Y,C){this._updateContent(C)},"^content.attr$":function(Y,aK,C,X){if(this.options.content.text===this.target.attr(X)){this._updateContent(this.target.attr(C))}},"^content.title$":function(X,Y,C){if(!C){return this._removeTitle()}C&&!this.elements.title&&this._createTitle();this._updateTitle(C)},"^content.button$":function(X,Y,C){this._updateButton(C)},"^content.title.(text|button)$":function(X,Y,C){this.set("content."+Y,C)},"^position.(my|at)$":function(X,Y,C){if("string"===typeof C){this.position[Y]=X[Y]=new am(C,Y==="at")}},"^position.container$":function(X,Y,C){this.rendered&&this.tooltip.appendTo(C)},"^show.ready$":function(X,Y,C){C&&(!this.rendered&&this.render(T)||this.toggle(T))},"^style.classes$":function(Y,aK,C,X){this.rendered&&this.tooltip.removeClass(X).addClass(C)},"^style.(width|height)":function(X,Y,C){this.rendered&&this.tooltip.css(Y,C)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(X,Y,C){this.rendered&&this.tooltip.toggleClass(R,!!C)},"^events.(render|show|move|hide|focus|blur)$":function(X,Y,C){this.rendered&&this.tooltip[(av.isFunction(C)?"":"un")+"bind"]("tooltip"+Y,C)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(!this.rendered){return}var C=this.options.position;this.tooltip.attr("tracking",C.target==="mouse"&&C.adjust.mouse);this._unassignEvents();this._assignEvents()}}};function ao(C,aK){var X=0,aM,Y=C,aL=aK.split(".");while(Y=Y[aL[X++]]){if(X<aL.length){aM=Y}}return[aM||C,aL.pop()]}aC.get=function(X){if(this.destroyed){return this}var Y=ao(this.options,X.toLowerCase()),C=Y[0][Y[1]];return C.precedance?C.string():C};function ac(aK,X){var Y,aL,C;for(Y in this.checks){if(!this.checks.hasOwnProperty(Y)){continue}for(aL in this.checks[Y]){if(!this.checks[Y].hasOwnProperty(aL)){continue}if(C=(new RegExp(aL,"i")).exec(aK)){X.push(C);if(Y==="builtin"||this.plugins[Y]){this.checks[Y][aL].apply(this.plugins[Y]||this,X)}}}}}var y=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,s=/^prerender|show\.ready/i;aC.set=function(aK,aL){if(this.destroyed){return this}var aM=this.rendered,C=I,Y=this.options,X;if("string"===typeof aK){X=aK;aK={};aK[X]=aL}else{aK=av.extend({},aK)}av.each(aK,function(aO,aQ){if(aM&&s.test(aO)){delete aK[aO];return}var aP=ao(Y,aO.toLowerCase()),aN;aN=aP[0][aP[1]];aP[0][aP[1]]=aQ&&aQ.nodeType?av(aQ):aQ;C=y.test(aO)||C;aK[aO]=[aP[0],aP[1],aQ,aN]});w(Y);this.positioning=T;av.each(aK,av.proxy(ac,this));this.positioning=I;if(this.rendered&&this.tooltip[0].offsetWidth>0&&C){this.reposition(Y.position.target==="mouse"?ag:this.cache.event)}return this};aC._update=function(aK,Y){var X=this,C=this.cache;if(!this.rendered||!aK){return I}if(av.isFunction(aK)){aK=aK.call(this.elements.target,C.event,this)||""}if(av.isFunction(aK.then)){C.waiting=T;return aK.then(function(aL){C.waiting=I;return X._update(aL,Y)},ag,function(aL){return X._update(aL,Y)})}if(aK===I||!aK&&aK!==""){return I}if(aK.jquery&&aK.length>0){Y.empty().append(aK.css({display:"block",visibility:"visible"}))}else{Y.html(aK)}return this._waitForContent(Y).then(function(aL){if(X.rendered&&X.tooltip[0].offsetWidth>0){X.reposition(C.event,!aL.length)}})};aC._waitForContent=function(X){var C=this.cache;C.waiting=T;return(av.fn.imagesLoaded?X.imagesLoaded():new av.Deferred().resolve([])).done(function(){C.waiting=I}).promise()};aC._updateContent=function(X,C){this._update(X,this.elements.content,C)};aC._updateTitle=function(X,C){if(this._update(X,this.elements.title,C)===I){this._removeTitle(I)}};aC._createTitle=function(){var C=this.elements,X=this._id+"-title";if(C.titlebar){this._removeTitle()}C.titlebar=av("<div />",{"class":r+"-titlebar "+(this.options.style.widget?aE("header"):"")}).append(C.title=av("<div />",{id:X,"class":r+"-title","aria-atomic":T})).insertBefore(C.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(Y){av(this).toggleClass("ui-state-active ui-state-focus",Y.type.substr(-4)==="down")}).delegate(".qtip-close","mouseover mouseout",function(Y){av(this).toggleClass("ui-state-hover",Y.type==="mouseover")});if(this.options.content.button){this._createButton()}};aC._removeTitle=function(C){var X=this.elements;if(X.title){X.titlebar.remove();X.titlebar=X.title=X.button=ag;if(C!==I){this.reposition()}}};aC._createPosClass=function(C){return r+"-pos-"+(C||this.options.position.my).abbrev()};aC.reposition=function(a1,aY){if(!this.rendered||this.positioning||this.destroyed){return this}this.positioning=T;var aX=this.cache,aM=this.tooltip,a4=this.options.position,a6=a4.target,aV=a4.my,aW=a4.at,a3=a4.viewport,aT=a4.container,a0=a4.adjust,X=a0.method.split(" "),a2=aM.outerWidth(I),aZ=aM.outerHeight(I),aO=0,aP=0,Y=aM.css("position"),a5={left:0,top:0},C=aM[0].offsetWidth>0,aU=a1&&a1.type==="scroll",aL=av(c),a7=aT[0].ownerDocument,aS=this.mouse,aR,aN,aK,aQ;if(av.isArray(a6)&&a6.length===2){aW={x:e,y:p};a5={left:a6[0],top:a6[1]}}else{if(a6==="mouse"){aW={x:e,y:p};if((!a0.mouse||this.options.hide.distance)&&aX.origin&&aX.origin.pageX){a1=aX.origin}else{if(!a1||a1&&(a1.type==="resize"||a1.type==="scroll")){a1=aX.event}else{if(aS&&aS.pageX){a1=aS}}}if(Y!=="static"){a5=aT.offset()}if(a7.body.offsetWidth!==(c.innerWidth||a7.documentElement.clientWidth)){aN=av(b.body).offset()}a5={left:a1.pageX-a5.left+(aN&&aN.left||0),top:a1.pageY-a5.top+(aN&&aN.top||0)};if(a0.mouse&&aU&&aS){a5.left-=(aS.scrollX||0)-aL.scrollLeft();a5.top-=(aS.scrollY||0)-aL.scrollTop()}}else{if(a6==="event"){if(a1&&a1.target&&a1.type!=="scroll"&&a1.type!=="resize"){aX.target=av(a1.target)}else{if(!a1.target){aX.target=this.elements.target}}}else{if(a6!=="event"){aX.target=av(a6.jquery?a6:this.elements.target)}}a6=aX.target;a6=av(a6).eq(0);if(a6.length===0){return this}else{if(a6[0]===b||a6[0]===c){aO=t.iOS?c.innerWidth:a6.width();aP=t.iOS?c.innerHeight:a6.height();if(a6[0]===c){a5={top:(a3||a6).scrollTop(),left:(a3||a6).scrollLeft()}}}else{if(aJ.imagemap&&a6.is("area")){aR=aJ.imagemap(this,a6,aW,aJ.viewport?X:I)}else{if(aJ.svg&&a6&&a6[0].ownerSVGElement){aR=aJ.svg(this,a6,aW,aJ.viewport?X:I)}else{aO=a6.outerWidth(I);aP=a6.outerHeight(I);a5=a6.offset()}}}}if(aR){aO=aR.width;aP=aR.height;aN=aR.offset;a5=aR.position}a5=this.reposition.offset(a6,a5,aT);if(t.iOS>3.1&&t.iOS<4.1||t.iOS>=4.3&&t.iOS<4.33||!t.iOS&&Y==="fixed"){a5.left-=aL.scrollLeft();a5.top-=aL.scrollTop()}if(!aR||aR&&aR.adjustable!==I){a5.left+=aW.x===m?aO:aW.x===K?aO/2:0;a5.top+=aW.y===aw?aP:aW.y===K?aP/2:0}}}a5.left+=a0.x+(aV.x===m?-a2:aV.x===K?-a2/2:0);a5.top+=a0.y+(aV.y===aw?-aZ:aV.y===K?-aZ/2:0);if(aJ.viewport){aK=a5.adjusted=aJ.viewport(this,a5,a4,aO,aP,a2,aZ);if(aN&&aK.left){a5.left+=aN.left}if(aN&&aK.top){a5.top+=aN.top}if(aK.my){this.position.my=aK.my}}else{a5.adjusted={left:0,top:0}}if(aX.posClass!==(aQ=this._createPosClass(this.position.my))){aX.posClass=aQ;aM.removeClass(aX.posClass).addClass(aQ)}if(!this._trigger("move",[a5,a3.elem||a3],a1)){return this}delete a5.adjusted;if(aY===I||!C||isNaN(a5.left)||isNaN(a5.top)||a6==="mouse"||!av.isFunction(a4.effect)){aM.css(a5)}else{if(av.isFunction(a4.effect)){a4.effect.call(aM,this,av.extend({},a5));aM.queue(function(a8){av(this).css({opacity:"",height:""});if(t.ie){this.style.removeAttribute("filter")}a8()})}}this.positioning=I;return this};aC.reposition.offset=function(aK,aO,X){if(!X[0]){return aO}var aR=av(aK[0].ownerDocument),aN=!!t.ie&&b.compatMode!=="CSS1Compat",aQ=X[0],Y,aM,C,aL;function aP(aT,aS){aO.left+=aS*aT.scrollLeft();aO.top+=aS*aT.scrollTop()}do{if((aM=av.css(aQ,"position"))!=="static"){if(aM==="fixed"){C=aQ.getBoundingClientRect();aP(aR,-1)}else{C=av(aQ).position();C.left+=parseFloat(av.css(aQ,"borderLeftWidth"))||0;C.top+=parseFloat(av.css(aQ,"borderTopWidth"))||0}aO.left-=C.left+(parseFloat(av.css(aQ,"marginLeft"))||0);aO.top-=C.top+(parseFloat(av.css(aQ,"marginTop"))||0);if(!Y&&(aL=av.css(aQ,"overflow"))!=="hidden"&&aL!=="visible"){Y=av(aQ)}}}while(aQ=aQ.offsetParent);if(Y&&(Y[0]!==aR[0]||aN)){aP(Y,1)}return aO};var ai=(am=aC.reposition.Corner=function(X,C){X=(""+X).replace(/([A-Z])/," $1").replace(/middle/gi,K).toLowerCase();this.x=(X.match(/left|right/i)||X.match(/center/)||["inherit"])[0].toLowerCase();this.y=(X.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.forceY=!!C;var Y=X.charAt(0);this.precedance=Y==="t"||Y==="b"?aa:ab}).prototype;ai.invert=function(X,C){this[X]=this[X]===e?m:this[X]===m?e:C||this[X]};ai.string=function(Y){var X=this.x,aK=this.y;var C=X!==aK?X==="center"||aK!=="center"&&(this.precedance===aa||this.forceY)?[aK,X]:[X,aK]:[X];return Y!==false?C.join(" "):C};ai.abbrev=function(){var C=this.string(false);return C[0].charAt(0)+(C[1]&&C[1].charAt(0)||"")};ai.clone=function(){return new am(this.string(),this.forceY)};aC.toggle=function(aL,aM){var X=this.cache,aW=this.options,aV=this.tooltip;if(aM){if((/over|enter/).test(aM.type)&&X.event&&(/out|leave/).test(X.event.type)&&aW.show.target.add(aM.target).length===aW.show.target.length&&aV.has(aM.relatedTarget).length){return this}X.event=av.event.fix(aM)}this.waiting&&!aL&&(this.hiddenDuringWait=T);if(!this.rendered){return aL?this.render(1):this}else{if(this.destroyed||this.disabled){return this}}var aT=aL?"show":"hide",C=this.options[aT],aU=this.options.position,aR=this.options.content,aO=this.tooltip.css("width"),aP=this.tooltip.is(":visible"),aN=aL||C.target.length===1,aQ=!aM||C.target.length<2||X.target[0]===aM.target,aS,aK,Y;if((typeof aL).search("boolean|number")){aL=!aP}aS=!aV.is(":animated")&&aP===aL&&aQ;aK=!aS?!!this._trigger(aT,[90]):ag;if(this.destroyed){return this}if(aK!==I&&aL){this.focus(aM)}if(!aK||aS){return this}av.attr(aV[0],"aria-hidden",!!!aL);if(aL){this.mouse&&(X.origin=av.event.fix(this.mouse));if(av.isFunction(aR.text)){this._updateContent(aR.text,I)}if(av.isFunction(aR.title)){this._updateTitle(aR.title,I)}if(!aG&&aU.target==="mouse"&&aU.adjust.mouse){av(b).bind("mousemove."+r,this._storeMouse);aG=T}if(!aO){aV.css("width",aV.outerWidth(I))}this.reposition(aM,arguments[2]);if(!aO){aV.css("width","")}if(!!C.solo){(typeof C.solo==="string"?av(C.solo):av(z,C.solo)).not(aV).not(C.target).qtip("hide",new av.Event("tooltipsolo"))}}else{clearTimeout(this.timers.show);delete X.origin;if(aG&&!av(z+'[tracking="true"]:visible',C.solo).not(aV).length){av(b).unbind("mousemove."+r);aG=I}this.blur(aM)}Y=av.proxy(function(){if(aL){if(t.ie){aV[0].style.removeAttribute("filter")}aV.css("overflow","");if("string"===typeof C.autofocus){av(this.options.show.autofocus,aV).focus()}this.options.show.target.trigger("qtip-"+this.id+"-inactive")}else{aV.css({display:"",visibility:"",opacity:"",left:"",top:""})}this._trigger(aL?"visible":"hidden")},this);if(C.effect===I||aN===I){aV[aT]();Y()}else{if(av.isFunction(C.effect)){aV.stop(1,1);C.effect.call(aV,this);aV.queue("fx",function(aX){Y();aX()})}else{aV.fadeTo(90,aL?1:0,Y)}}if(aL){C.target.trigger("qtip-"+this.id+"-inactive")}return this};aC.show=function(C){return this.toggle(T,C)};aC.hide=function(C){return this.toggle(I,C)};aC.focus=function(Y){if(!this.rendered||this.destroyed){return this}var aL=av(z),aK=this.tooltip,X=parseInt(aK[0].style.zIndex,10),C=A.zindex+aL.length;if(!aK.hasClass(P)){if(this._trigger("focus",[C],Y)){if(X!==C){aL.each(function(){if(this.style.zIndex>X){this.style.zIndex=this.style.zIndex-1}});aL.filter("."+P).qtip("blur",Y)}aK.addClass(P)[0].style.zIndex=C}}return this};aC.blur=function(C){if(!this.rendered||this.destroyed){return this}this.tooltip.removeClass(P);this._trigger("blur",[this.tooltip.css("zIndex")],C);return this};aC.disable=function(C){if(this.destroyed){return this}if(C==="toggle"){C=!(this.rendered?this.tooltip.hasClass(V):this.disabled)}else{if("boolean"!==typeof C){C=T}}if(this.rendered){this.tooltip.toggleClass(V,C).attr("aria-disabled",C)}this.disabled=!!C;return this};aC.enable=function(){return this.disable(I)};aC._createButton=function(){var X=this,aL=this.elements,aK=aL.tooltip,Y=this.options.content.button,C=typeof Y==="string",aM=C?Y:"Close tooltip";if(aL.button){aL.button.remove()}if(Y.jquery){aL.button=Y}else{aL.button=av("<a />",{"class":"qtip-close "+(this.options.style.widget?"":r+"-icon"),title:aM,"aria-label":aM}).prepend(av("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"}))}aL.button.appendTo(aL.titlebar||aK).attr("role","button").click(function(aN){if(!aK.hasClass(V)){X.hide(aN)}return I})};aC._updateButton=function(C){if(!this.rendered){return I}var X=this.elements.button;if(C){this._createButton()}else{X.remove()}};function aE(C){return al.concat("").join(C?"-"+C+" ":" ")}aC._setWidget=function(){var C=this.options.style.widget,aK=this.elements,Y=aK.tooltip,X=Y.hasClass(V);Y.removeClass(V);V=C?"ui-state-disabled":"qtip-disabled";Y.toggleClass(V,X);Y.toggleClass("ui-helper-reset "+aE(),C).toggleClass(R,this.options.style.def&&!C);if(aK.content){aK.content.toggleClass(aE("content"),C)}if(aK.titlebar){aK.titlebar.toggleClass(aE("header"),C)}if(aK.button){aK.button.toggleClass(r+"-icon",!C)}};function f(X,C){if(C>0){return setTimeout(av.proxy(X,this),C)}else{X.call(this)}}function M(C){if(this.tooltip.hasClass(V)){return}clearTimeout(this.timers.show);clearTimeout(this.timers.hide);this.timers.show=f.call(this,function(){this.toggle(T,C)},this.options.show.delay)}function i(aK){if(this.tooltip.hasClass(V)||this.destroyed){return}var X=av(aK.relatedTarget),C=X.closest(z)[0]===this.tooltip[0],Y=X[0]===this.options.show.target[0];clearTimeout(this.timers.show);clearTimeout(this.timers.hide);if(this!==X[0]&&(this.options.position.target==="mouse"&&C)||this.options.hide.fixed&&((/mouse(out|leave|move)/).test(aK.type)&&(C||Y))){try{aK.preventDefault();aK.stopImmediatePropagation()}catch(aL){}return}this.timers.hide=f.call(this,function(){this.toggle(I,aK)},this.options.hide.delay,this)}function k(C){if(this.tooltip.hasClass(V)||!this.options.hide.inactive){return}clearTimeout(this.timers.inactive);this.timers.inactive=f.call(this,function(){this.hide(C)},this.options.hide.inactive)}function aj(C){if(this.rendered&&this.tooltip[0].offsetWidth>0){this.reposition(C)}}aC._storeMouse=function(C){(this.mouse=av.event.fix(C)).type="mousemove";return this};aC._bind=function(C,Y,aM,aL,X){if(!C||!aM||!Y.length){return}var aK="."+this._id+(aL?"-"+aL:"");av(C).bind((Y.split?Y:Y.join(aK+" "))+aK,av.proxy(aM,X||this));return this};aC._unbind=function(C,X){C&&av(C).unbind("."+this._id+(X?"-"+X:""));return this};function ar(C,X,Y){av(b.body).delegate(C,(X.split?X:X.join("."+r+" "))+"."+r,function(){var aK=A.api[av.attr(this,ad)];aK&&!aK.disabled&&Y.apply(aK,arguments)})}aC._trigger=function(X,C,Y){var aK=new av.Event("tooltip"+X);aK.originalEvent=Y&&av.extend({},Y)||this.cache.event||ag;this.triggering=X;this.tooltip.trigger(aK,[this].concat(C||[]));this.triggering=I;return !aK.isDefaultPrevented()};aC._bindEvents=function(X,aO,Y,aL,aK,C){var aN=Y.filter(aL).add(aL.filter(Y)),aM=[];if(aN.length){av.each(aO,function(aQ,aR){var aP=av.inArray(aR,X);aP>-1&&aM.push(X.splice(aP,1)[0])});if(aM.length){this._bind(aN,aM,function(aP){var aQ=this.rendered?this.tooltip[0].offsetWidth>0:false;(aQ?C:aK).call(this,aP)});Y=Y.not(aN);aL=aL.not(aN)}}this._bind(Y,X,aK);this._bind(aL,aO,C)};aC._assignInitialEvents=function(aL){var X=this.options,aK=X.show.target,Y=X.hide.target,C=X.show.event?av.trim(""+X.show.event).split(" "):[],aN=X.hide.event?av.trim(""+X.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(true)},"destroy");if(/mouse(over|enter)/i.test(X.show.event)&&!/mouse(out|leave)/i.test(X.hide.event)){aN.push("mouseleave")}this._bind(aK,"mousemove",function(aO){this._storeMouse(aO);this.cache.onTarget=T});function aM(aO){if(this.disabled||this.destroyed){return I}this.cache.event=aO&&av.event.fix(aO);this.cache.target=aO&&av(aO.target);clearTimeout(this.timers.show);this.timers.show=f.call(this,function(){this.render(typeof aO==="object"||X.show.ready)},X.prerender?0:X.show.delay)}this._bindEvents(C,aN,aK,Y,aM,function(){if(!this.timers){return I}clearTimeout(this.timers.show)});if(X.show.ready||X.prerender){aM.call(this,aL)}};aC._assignEvents=function(){var aQ=this,aS=this.options,aO=aS.position,aR=this.tooltip,aK=aS.show.target,aN=aS.hide.target,aL=aO.container,X=aO.viewport,Y=av(b),aM=av(c),C=aS.show.event?av.trim(""+aS.show.event).split(" "):[],aP=aS.hide.event?av.trim(""+aS.hide.event).split(" "):[];av.each(aS.events,function(aT,aU){aQ._bind(aR,aT==="toggle"?["tooltipshow","tooltiphide"]:["tooltip"+aT],aU,null,aR)});if(/mouse(out|leave)/i.test(aS.hide.event)&&aS.hide.leave==="window"){this._bind(Y,["mouseout","blur"],function(aT){if(!/select|option/.test(aT.target.nodeName)&&!aT.relatedTarget){this.hide(aT)}})}if(aS.hide.fixed){aN=aN.add(aR.addClass(E))}else{if(/mouse(over|enter)/i.test(aS.show.event)){this._bind(aN,"mouseleave",function(){clearTimeout(this.timers.show)})}}if((""+aS.hide.event).indexOf("unfocus")>-1){this._bind(aL.closest("html"),["mousedown","touchstart"],function(aW){var aV=av(aW.target),aU=this.rendered&&!this.tooltip.hasClass(V)&&this.tooltip[0].offsetWidth>0,aT=aV.parents(z).filter(this.tooltip[0]).length>0;if(aV[0]!==this.target[0]&&aV[0]!==this.tooltip[0]&&!aT&&!this.target.has(aV[0]).length&&aU){this.hide(aW)}})}if("number"===typeof aS.hide.inactive){this._bind(aK,"qtip-"+this.id+"-inactive",k,"inactive");this._bind(aN.add(aR),A.inactiveEvents,k)}this._bindEvents(C,aP,aK,aN,M,i);this._bind(aK.add(aR),"mousemove",function(aW){if("number"===typeof aS.hide.distance){var aV=this.cache.origin||{},aU=this.options.hide.distance,aT=Math.abs;if(aT(aW.pageX-aV.pageX)>=aU||aT(aW.pageY-aV.pageY)>=aU){this.hide(aW)}}this._storeMouse(aW)});if(aO.target==="mouse"){if(aO.adjust.mouse){if(aS.hide.event){this._bind(aK,["mouseenter","mouseleave"],function(aT){if(!this.cache){return I}this.cache.onTarget=aT.type==="mouseenter"})}this._bind(Y,"mousemove",function(aT){if(this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(V)&&this.tooltip[0].offsetWidth>0){this.reposition(aT)}})}}if(aO.adjust.resize||X.length){this._bind(av.event.special.resize?X:aM,"resize",aj)}if(aO.adjust.scroll){this._bind(aM.add(aO.container),"scroll",aj)}};aC._unassignEvents=function(){var X=this.options,Y=X.show.target,aK=X.hide.target,C=av.grep([this.elements.target[0],this.rendered&&this.tooltip[0],X.position.container[0],X.position.viewport[0],X.position.container.closest("html")[0],c,b],function(aL){return typeof aL==="object"});if(Y&&Y.toArray){C=C.concat(Y.toArray())}if(aK&&aK.toArray){C=C.concat(aK.toArray())}this._unbind(C)._unbind(C,"destroy")._unbind(C,"inactive")};av(function(){ar(z,["mouseenter","mouseleave"],function(X){var aK=X.type==="mouseenter",Y=av(X.currentTarget),aL=av(X.relatedTarget||X.target),C=this.options;if(aK){this.focus(X);Y.hasClass(E)&&!Y.hasClass(V)&&clearTimeout(this.timers.hide)}else{if(C.position.target==="mouse"&&C.position.adjust.mouse&&C.hide.event&&C.show.target&&!aL.closest(C.show.target[0]).length){this.hide(X)}}Y.toggleClass(aI,aK)});ar("["+ad+"]",ae,k)});function ah(aK,X,C){var aL,aU,aP,Y,aS,aM=av(b.body),aR=aK[0]===b?aM:aK,aQ=aK.metadata?aK.metadata(C.metadata):ag,aT=C.metadata.type==="html5"&&aQ?aQ[C.metadata.name]:ag,aN=aK.data(C.metadata.name||"qtipopts");try{aN=typeof aN==="string"?av.parseJSON(aN):aN}catch(aO){}Y=av.extend(T,{},A.defaults,C,typeof aN==="object"?w(aN):ag,w(aT||aQ));aU=Y.position;Y.id=X;if("boolean"===typeof Y.content.text){aP=aK.attr(Y.content.attr);if(Y.content.attr!==I&&aP){Y.content.text=aP}else{return I}}if(!aU.container.length){aU.container=aM}if(aU.target===I){aU.target=aR}if(Y.show.target===I){Y.show.target=aR}if(Y.show.solo===T){Y.show.solo=aU.container.closest("body")}if(Y.hide.target===I){Y.hide.target=aR}if(Y.position.viewport===T){Y.position.viewport=aU.container}aU.container=aU.container.eq(0);aU.at=new am(aU.at,T);aU.my=new am(aU.my);if(aK.data(r)){if(Y.overwrite){aK.qtip("destroy",true)}else{if(Y.overwrite===I){return I}}}aK.attr(G,X);if(Y.suppress&&(aS=aK.attr("title"))){aK.removeAttr("title").attr(H,aS).attr("title","")}aL=new ay(aK,Y,X,!!aP);aK.data(r,aL);return aL}A=av.fn.qtip=function(X,aM,aN){var aO=(""+X).toLowerCase(),aL=ag,C=av.makeArray(arguments).slice(1),aK=C[C.length-1],Y=this[0]?av.data(this[0],r):ag;if(!arguments.length&&Y||aO==="api"){return Y}else{if("string"===typeof X){this.each(function(){var aP=av.data(this,r);if(!aP){return T}if(aK&&aK.timeStamp){aP.cache.event=aK}if(aM&&(aO==="option"||aO==="options")){if(aN!==d||av.isPlainObject(aM)){aP.set(aM,aN)}else{aL=aP.get(aM);return I}}else{if(aP[aO]){aP[aO].apply(aP,C)}}});return aL!==ag?aL:this}else{if("object"===typeof X||!arguments.length){Y=w(av.extend(T,{},X));return this.each(function(aP){var aQ,aR;aR=av.isArray(Y.id)?Y.id[aP]:Y.id;aR=!aR||aR===I||aR.length<1||A.api[aR]?A.nextid++:aR;aQ=ah(av(this),aR,Y);if(aQ===I){return T}else{A.api[aR]=aQ}av.each(aJ,function(){if(this.initialize==="initialize"){this(aQ)}});aQ._assignInitialEvents(aK)})}}}};av.qtip=ay;A.api={};av.each({attr:function(C,aL){if(this.length){var X=this[0],aK="title",Y=av.data(X,"qtip");if(C===aK&&Y&&Y.options&&"object"===typeof Y&&"object"===typeof Y.options&&Y.options.suppress){if(arguments.length<2){return av.attr(X,H)}if(Y&&Y.options.content.attr===aK&&Y.cache.attr){Y.set("content.text",aL)}return this.attr(H,aL)}}return av.fn["attr"+aH].apply(this,arguments)},clone:function(X){var C=av.fn["clone"+aH].apply(this,arguments);if(!X){C.filter("["+H+"]").attr("title",function(){return av.attr(this,H)}).removeAttr(H)}return C}},function(X,Y){if(!Y||av.fn[X+aH]){return T}var C=av.fn[X+aH]=av.fn[X];av.fn[X]=function(){return Y.apply(this,arguments)||C.apply(this,arguments)}});if(!av.ui){av["cleanData"+aH]=av.cleanData;av.cleanData=function(C){for(var X=0,Y;(Y=av(C[X])).length;X++){if(Y.attr(G)){try{Y.triggerHandler("removeqtip")}catch(aK){}}}av["cleanData"+aH].apply(this,arguments)}}A.version="3.0.3";A.nextid=0;A.inactiveEvents=ae;A.zindex=15000;A.defaults={prerender:I,id:I,overwrite:T,suppress:T,content:{text:T,attr:"title",title:I,button:I},position:{my:"top left",at:"bottom right",target:I,container:I,viewport:I,adjust:{x:0,y:0,mouse:T,scroll:T,resize:T,method:"flipinvert flipinvert"},effect:function(C,X){av(this).animate(X,{duration:200,queue:I})}},show:{target:I,event:"mouseenter",effect:T,delay:90,solo:I,ready:I,autofocus:I},hide:{target:I,event:"mouseleave",effect:T,delay:0,fixed:I,inactive:I,leave:"window",distance:I},style:{classes:"",widget:I,width:I,height:I,def:T},events:{render:ag,move:ag,show:ag,hide:ag,toggle:ag,visible:ag,hidden:ag,focus:ag,blur:ag}};var l,aB,O,x,aD,Q="margin",az="border",au="color",ap="background-color",ak="transparent",at=" !important",ax=!!b.createElement("canvas").getContext,g=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i;function W(C){return C.charAt(0).toUpperCase()+C.slice(1)}var F={},J=["Webkit","O","Moz","ms"];function o(aK,aN){var C=aN.charAt(0).toUpperCase()+aN.slice(1),Y=(aN+" "+J.join(C+" ")+C).split(" "),aM,aL,X=0;if(F[aN]){return aK.css(F[aN])}while(aM=Y[X++]){if((aL=aK.css(aM))!==d){F[aN]=aM;return aL}}}function L(C,X){return Math.ceil(parseFloat(o(C,X)))}if(!ax){aB=function(C,Y,X){return"<qtipvml:"+C+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(Y||"")+' style="behavior: url(#default#VML); '+(X||"")+'" />'}}else{x=c.devicePixelRatio||1;aD=(function(){var C=b.createElement("canvas").getContext("2d");return C.backingStorePixelRatio||C.webkitBackingStorePixelRatio||C.mozBackingStorePixelRatio||C.msBackingStorePixelRatio||C.oBackingStorePixelRatio||1})();O=x/aD}function aq(X,C){this._ns="tip";this.options=C;this.offset=C.offset;this.size=[C.width,C.height];this.qtip=X;this.init(X)}av.extend(aq.prototype,{init:function(Y){var C,X;X=this.element=Y.elements.tip=av("<div />",{"class":r+"-tip"}).prependTo(Y.tooltip);if(ax){C=av("<canvas />").appendTo(this.element)[0].getContext("2d");C.lineJoin="miter";C.miterLimit=100000;C.save()}else{C=aB("shape",'coordorigin="0,0"',"position:absolute;");this.element.html(C+C);Y._bind(av("*",X).add(X),["click","mousedown"],function(aK){aK.stopPropagation()},this._ns)}Y._bind(Y.tooltip,"tooltipmove",this.reposition,this._ns,this);this.create()},_swapDimensions:function(){this.size[0]=this.options.height;this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width;this.size[1]=this.options.height},_useTitle:function(C){var X=this.qtip.elements.titlebar;return X&&(C.y===p||C.y===K&&this.element.position().top+this.size[1]/2+this.options.offset<X.outerHeight(T))},_parseCorner:function(C){var X=this.qtip.options.position.my;if(C===I||X===I){C=I}else{if(C===T){C=new am(X.string())}else{if(!C.string){C=new am(C);C.fixed=T}}}return C},_parseWidth:function(Y,X,C){var aK=this.qtip.elements,aL=az+W(X)+"Width";return(C?L(C,aL):L(aK.content,aL)||L(this._useTitle(Y)&&aK.titlebar||aK.content,aL)||L(aK.tooltip,aL))||0},_parseRadius:function(C){var X=this.qtip.elements,Y=az+W(C.y)+W(C.x)+"Radius";return t.ie<9?0:L(this._useTitle(C)&&X.titlebar||X.content,Y)||L(X.tooltip,Y)||0},_invalidColour:function(C,aK,X){var Y=C.css(aK);return !Y||X&&Y===C.css(X)||g.test(Y)?I:Y},_parseColours:function(aL){var aN=this.qtip.elements,aM=this.element.css("cssText",""),aK=az+W(aL[aL.precedance])+W(au),X=this._useTitle(aL)&&aN.titlebar||aN.content,Y=this._invalidColour,C=[];C[0]=Y(aM,ap)||Y(X,ap)||Y(aN.content,ap)||Y(aN.tooltip,ap)||aM.css(ap);C[1]=Y(aM,aK,au)||Y(X,aK,au)||Y(aN.content,aK,au)||Y(aN.tooltip,aK,au)||aN.tooltip.css(aK);av("*",aM).add(aM).css("cssText",ap+":"+ak+at+";"+az+":0"+at+";");return C},_calculateSize:function(aQ){var aO=aQ.precedance===aa,X=this.options.width,aR=this.options.height,aN=aQ.abbrev()==="c",C=(aO?X:aR)*(aN?0.5:1),aK=Math.pow,aS=Math.round,aP,aM,aT,Y=Math.sqrt(aK(C,2)+aK(aR,2)),aL=[this.border/C*Y,this.border/aR*Y];aL[2]=Math.sqrt(aK(aL[0],2)-aK(this.border,2));aL[3]=Math.sqrt(aK(aL[1],2)-aK(this.border,2));aP=Y+aL[2]+aL[3]+(aN?0:aL[0]);aM=aP/Y;aT=[aS(aM*X),aS(aM*aR)];return aO?aT:aT.reverse()},_calculateTip:function(aN,Y,aO){aO=aO||1;Y=Y||this.size;var aL=Y[0]*aO,X=Y[1]*aO,aK=Math.ceil(aL/2),aM=Math.ceil(X/2),C={br:[0,0,aL,X,aL,0],bl:[0,0,aL,0,0,X],tr:[0,X,aL,0,aL,X],tl:[0,0,0,X,aL,X],tc:[0,X,aK,0,aL,X],bc:[0,0,aL,0,aK,X],rc:[0,0,aL,aM,0,X],lc:[aL,0,aL,X,0,aM]};C.lt=C.br;C.rt=C.bl;C.lb=C.tr;C.rb=C.tl;return C[aN.abbrev()]},_drawCoords:function(C,X){C.beginPath();C.moveTo(X[0],X[1]);C.lineTo(X[2],X[3]);C.lineTo(X[4],X[5]);C.closePath()},create:function(){var C=this.corner=(ax||t.ie)&&this._parseCorner(this.options.corner);this.enabled=!!this.corner&&this.corner.abbrev()!=="c";if(this.enabled){this.qtip.cache.corner=C.clone();this.update()}this.element.toggle(this.enabled);return this.corner},update:function(aT,aP){if(!this.enabled){return this}var C=this.qtip.elements,aS=this.element,aW=aS.children(),aV=this.options,X=this.size,aX=aV.mimic,aU=Math.round,aN,Y,aK,aR,aO,aL,aQ,aM;if(!aT){aT=this.qtip.cache.corner||this.corner}if(aX===I){aX=aT}else{aX=new am(aX);aX.precedance=aT.precedance;if(aX.x==="inherit"){aX.x=aT.x}else{if(aX.y==="inherit"){aX.y=aT.y}else{if(aX.x===aX.y){aX[aT.precedance]=aT[aT.precedance]}}}}Y=aX.precedance;if(aT.precedance===ab){this._swapDimensions()}else{this._resetDimensions()}aN=this.color=this._parseColours(aT);if(aN[1]!==ak){aM=this.border=this._parseWidth(aT,aT[aT.precedance]);if(aV.border&&aM<1&&!g.test(aN[1])){aN[0]=aN[1]}this.border=aM=aV.border!==T?aV.border:aM}else{this.border=aM=0}aQ=this.size=this._calculateSize(aT);aS.css({width:aQ[0],height:aQ[1],lineHeight:aQ[1]+"px"});if(aT.precedance===aa){aL=[aU(aX.x===e?aM:aX.x===m?aQ[0]-X[0]-aM:(aQ[0]-X[0])/2),aU(aX.y===p?aQ[1]-X[1]:0)]}else{aL=[aU(aX.x===e?aQ[0]-X[0]:0),aU(aX.y===p?aM:aX.y===aw?aQ[1]-X[1]-aM:(aQ[1]-X[1])/2)]}if(ax){aK=aW[0].getContext("2d");aK.restore();aK.save();aK.clearRect(0,0,6000,6000);aR=this._calculateTip(aX,X,O);aO=this._calculateTip(aX,this.size,O);aW.attr(N,aQ[0]*O).attr(aA,aQ[1]*O);aW.css(N,aQ[0]).css(aA,aQ[1]);this._drawCoords(aK,aO);aK.fillStyle=aN[1];aK.fill();aK.translate(aL[0]*O,aL[1]*O);this._drawCoords(aK,aR);aK.fillStyle=aN[0];aK.fill()}else{aR=this._calculateTip(aX);aR="m"+aR[0]+","+aR[1]+" l"+aR[2]+","+aR[3]+" "+aR[4]+","+aR[5]+" xe";aL[2]=aM&&/^(r|b)/i.test(aT.string())?t.ie===8?2:1:0;aW.css({coordsize:aQ[0]+aM+" "+aQ[1]+aM,antialias:""+(aX.string().indexOf(K)>-1),left:aL[0]-aL[2]*Number(Y===ab),top:aL[1]-aL[2]*Number(Y===aa),width:aQ[0]+aM,height:aQ[1]+aM}).each(function(aY){var aZ=av(this);aZ[aZ.prop?"prop":"attr"]({coordsize:aQ[0]+aM+" "+aQ[1]+aM,path:aR,fillcolor:aN[0],filled:!!aY,stroked:!aY}).toggle(!!(aM||aY));!aY&&aZ.html(aB("stroke",'weight="'+aM*2+'px" color="'+aN[1]+'" miterlimit="1000" joinstyle="miter"'))})}c.opera&&setTimeout(function(){C.tip.css({display:"inline-block",visibility:"visible"})},1);if(aP!==I){this.calculate(aT,aQ)}},calculate:function(aN,aP){if(!this.enabled){return I}var aO=this,C=this.qtip.elements,aM=this.element,X=this.options.offset,aL={},Y,aK;aN=aN||this.corner;Y=aN.precedance;aP=aP||this._calculateSize(aN);aK=[aN.x,aN.y];if(Y===ab){aK.reverse()}av.each(aK,function(aT,aS){var aQ,aU,aR;if(aS===K){aQ=Y===aa?e:p;aL[aQ]="50%";aL[Q+"-"+aQ]=-Math.round(aP[Y===aa?0:1]/2)+X}else{aQ=aO._parseWidth(aN,aS,C.tooltip);aU=aO._parseWidth(aN,aS,C.content);aR=aO._parseRadius(aN);aL[aS]=Math.max(-aO.border,aT?aU:X+(aR>aQ?aR:-aQ))}});aL[aN[Y]]-=aP[Y===ab?0:1];aM.css({margin:"",top:"",bottom:"",left:"",right:""}).css(aL);return aL},reposition:function(Y,aQ,aT){if(!this.enabled){return}var X=aQ.cache,aV=this.corner.clone(),aU=aT.adjusted,C=aQ.options.position.adjust.method.split(" "),aK=C[0],aM=C[1]||C[0],aL={left:I,top:I,x:0,y:0},aO,aP={},aR;function aS(aZ,aW,a0,aX,aY){if(aZ===q&&aV.precedance===aW&&aU[aX]&&aV[a0]!==K){aV.precedance=aV.precedance===ab?aa:ab}else{if(aZ!==q&&aU[aX]){aV[aW]=aV[aW]===K?aU[aX]>0?aX:aY:aV[aW]===aX?aY:aX}}}function aN(aY,aW,aX){if(aV[aY]===K){aP[Q+"-"+aW]=aL[aY]=aO[Q+"-"+aW]-aU[aW]}else{aR=aO[aX]!==d?[aU[aW],-aO[aW]]:[-aU[aW],aO[aW]];if((aL[aY]=Math.max(aR[0],aR[1]))>aR[0]){aT[aW]-=aU[aW];aL[aW]=I}aP[aO[aX]!==d?aX:aW]=aL[aY]}}if(this.corner.fixed!==T){aS(aK,ab,aa,e,m);aS(aM,aa,ab,p,aw);if(aV.string()!==X.corner.string()||X.cornerTop!==aU.top||X.cornerLeft!==aU.left){this.update(aV,I)}}aO=this.calculate(aV);if(aO.right!==d){aO.left=-aO.right}if(aO.bottom!==d){aO.top=-aO.bottom}aO.user=this.offset;aL.left=aK===q&&!!aU.left;if(aL.left){aN(ab,e,m)}aL.top=aM===q&&!!aU.top;if(aL.top){aN(aa,p,aw)}this.element.css(aP).toggle(!(aL.x&&aL.y||aV.x===K&&aL.y||aV.y===K&&aL.x));aT.left-=aO.left.charAt?aO.user:aK!==q||aL.top||!aL.left&&!aL.top?aO.left+this.border:0;aT.top-=aO.top.charAt?aO.user:aM!==q||aL.left||!aL.left&&!aL.top?aO.top+this.border:0;X.cornerLeft=aU.left;X.cornerTop=aU.top;X.corner=aV.clone()},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns);if(this.qtip.elements.tip){this.qtip.elements.tip.find("*").remove().end().remove()}}});l=aJ.tip=function(C){return new aq(C,C.options.style.tip)};l.initialize="render";l.sanitize=function(C){if(C.style&&"tip" in C.style){var X=C.style.tip;if(typeof X!=="object"){X=C.style.tip={corner:X}}if(!(/string|boolean/i).test(typeof X.corner)){X.corner=T}}};j.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create();this.qtip.reposition()},"^style.tip.(height|width)$":function(C){this.size=[C.width,C.height];this.update();this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}};av.extend(T,A.defaults,{style:{tip:{corner:T,mimic:I,width:6,height:6,border:T,offset:0}}});var U,n,u="qtip-modal",an="."+u;n=function(){var C=this,aK={},aM,aL,Y;function aO(aR){if(av.expr[":"].focusable){return av.expr[":"].focusable}var aP=!isNaN(av.attr(aR,"tabindex")),aU=aR.nodeName&&aR.nodeName.toLowerCase(),aT,aS,aQ;if("area"===aU){aT=aR.parentNode;aS=aT.name;if(!aR.href||!aS||aT.nodeName.toLowerCase()!=="map"){return false}aQ=av("img[usemap=#"+aS+"]")[0];return !!aQ&&aQ.is(":visible")}return/input|select|textarea|button|object/.test(aU)?!aR.disabled:"a"===aU?aR.href||aP:aP}function X(aP){if(aK.length<1&&aP.length){aP.not("body").blur()}else{aK.first().focus()}}function aN(aQ){if(!Y.is(":visible")){return}var aS=av(aQ.target),aR=aM.tooltip,aP=aS.closest(z),aT;aT=aP.length<1?I:parseInt(aP[0].style.zIndex,10)>parseInt(aR[0].style.zIndex,10);if(!aT&&aS.closest(z)[0]!==aR[0]){X(aS)}}av.extend(C,{init:function(){Y=C.elem=av("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return I}}).hide();av(b.body).bind("focusin"+an,aN);av(b).bind("keydown"+an,function(aP){if(aM&&aM.options.show.modal.escape&&aP.keyCode===27){aM.hide(aP)}});Y.bind("click"+an,function(aP){if(aM&&aM.options.show.modal.blur){aM.hide(aP)}});return C},update:function(aP){aM=aP;if(aP.options.show.modal.stealfocus!==I){aK=aP.tooltip.find("*").filter(function(){return aO(this)})}else{aK=[]}},toggle:function(aT,aP,aR){var aV=aT.tooltip,aX=aT.options.show.modal,aW=aX.effect,aU=aP?"show":"hide",aQ=Y.is(":visible"),aS=av(an).filter(":visible:not(:animated)").not(aV);C.update(aT);if(aP&&aX.stealfocus!==I){X(av(":focus"))}Y.toggleClass("blurs",aX.blur);if(aP){Y.appendTo(b.body)}if(Y.is(":animated")&&aQ===aP&&aL!==I||!aP&&aS.length){return C}Y.stop(T,I);if(av.isFunction(aW)){aW.call(Y,aP)}else{if(aW===I){Y[aU]()}else{Y.fadeTo(parseInt(aR,10)||90,aP?1:0,function(){if(!aP){Y.hide()}})}}if(!aP){Y.queue(function(aY){Y.css({left:"",top:""});if(!av(an).length){Y.detach()}aY()})}aL=aP;if(aM.destroyed){aM=ag}return C}});C.init()};n=new n();function aF(X,C){this.options=C;this._ns="-modal";this.qtip=X;this.init(X)}av.extend(aF.prototype,{init:function(X){var C=X.tooltip;if(!this.options.on){return this}X.elements.overlay=n.elem;C.addClass(u).css("z-index",A.modal_zindex+av(an).length);X._bind(C,["tooltipshow","tooltiphide"],function(aL,aK,aN){var Y=aL.originalEvent;if(aL.target===C[0]){if(Y&&aL.type==="tooltiphide"&&/mouse(leave|enter)/.test(Y.type)&&av(Y.relatedTarget).closest(n.elem[0]).length){try{aL.preventDefault()}catch(aM){}}else{if(!Y||Y&&Y.type!=="tooltipsolo"){this.toggle(aL,aL.type==="tooltipshow",aN)}}}},this._ns,this);X._bind(C,"tooltipfocus",function(aM,aL){if(aM.isDefaultPrevented()||aM.target!==C[0]){return}var aN=av(an),aK=A.modal_zindex+aN.length,Y=parseInt(C[0].style.zIndex,10);n.elem[0].style.zIndex=aK-1;aN.each(function(){if(this.style.zIndex>Y){this.style.zIndex-=1}});aN.filter("."+P).qtip("blur",aM.originalEvent);C.addClass(P)[0].style.zIndex=aK;n.update(aL);try{aM.preventDefault()}catch(aO){}},this._ns,this);X._bind(C,"tooltiphide",function(Y){if(Y.target===C[0]){av(an).filter(":visible").not(C).last().qtip("focus",Y)}},this._ns,this)},toggle:function(C,X,Y){if(C&&C.isDefaultPrevented()){return this}n.toggle(this.qtip,!!X,Y)},destroy:function(){this.qtip.tooltip.removeClass(u);this.qtip._unbind(this.qtip.tooltip,this._ns);n.toggle(this.qtip,I);delete this.qtip.elements.overlay}});U=aJ.modal=function(C){return new aF(C,C.options.show.modal)};U.sanitize=function(C){if(C.show){if(typeof C.show.modal!=="object"){C.show.modal={on:!!C.show.modal}}else{if(typeof C.show.modal.on==="undefined"){C.show.modal.on=T}}}};A.modal_zindex=A.zindex-200;U.initialize="render";j.modal={"^show.modal.(on|blur)$":function(){this.destroy();this.init();this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}};av.extend(T,A.defaults,{show:{modal:{on:I,effect:T,blur:T,stealfocus:T,escape:T}}});aJ.viewport=function(aV,a7,a4,aN,aO,a1,a0){var a6=a4.target,aL=aV.elements.tooltip,aU=a4.my,aW=a4.at,aZ=a4.adjust,X=aZ.method.split(" "),aS=X[0],aQ=X[1]||X[0],a3=a4.viewport,aT=a4.container,aK={left:0,top:0},Y,aP,aM,a5,aY,C,aX,a2;if(!a3.jquery||a6[0]===c||a6[0]===b.body||aZ.method==="none"){return aK}aM=aT.offset()||aK;a5=aT.css("position")==="static";Y=aL.css("position")==="fixed";aY=a3[0]===c?a3.width():a3.outerWidth(I);C=a3[0]===c?a3.height():a3.outerHeight(I);aX={left:Y?0:a3.scrollLeft(),top:Y?0:a3.scrollTop()};a2=a3.offset()||aK;function aR(a9,a8,bb,bk,bg,be,bn,bp,bi){var bc=a7[bg],bj=aU[a9],bo=aW[a9],bq=bb===q,bf=bj===bg?bi:bj===be?-bi:-bi/2,bl=bo===bg?bp:bo===be?-bp:-bp/2,bm=aX[bg]+a2[bg]-(a5?0:aM[bg]),bd=bm-bc,ba=bc+bi-(bn===N?aY:C)-bm,bh=bf-(aU.precedance===a9||bj===aU[a8]?bl:0)-(bo===K?bp/2:0);if(bq){bh=(bj===bg?1:-1)*bf;a7[bg]+=bd>0?bd:ba>0?-ba:0;a7[bg]=Math.max(-aM[bg]+a2[bg],bc-bh,Math.min(Math.max(-aM[bg]+a2[bg]+(bn===N?aY:C),bc+bh),a7[bg],bj==="center"?bc-bf:1000000000))}else{bk*=bb===Z?2:0;if(bd>0&&(bj!==bg||ba>0)){a7[bg]-=bh+bk;aP.invert(a9,bg)}else{if(ba>0&&(bj!==be||bd>0)){a7[bg]-=(bj===K?-bh:bh)+bk;aP.invert(a9,be)}}if(a7[bg]<aX[bg]&&-a7[bg]>ba){a7[bg]=bc;aP=aU.clone()}}return a7[bg]-bc}if(aS!=="shift"||aQ!=="shift"){aP=aU.clone()}aK={left:aS!=="none"?aR(ab,aa,aS,aZ.x,e,m,N,aN,a1):0,top:aQ!=="none"?aR(aa,ab,aQ,aZ.y,p,aw,aA,aO,a0):0,my:aP};return aK};aJ.polys={polygon:function(X,aR){var aS={width:0,height:0,position:{top:10000000000,right:0,bottom:0,left:10000000000},adjustable:I},aM=0,aN,aQ=[],aP=1,aO=1,aL=0,Y=0,aK,C;aM=X.length;while(aM--){aN=[parseInt(X[--aM],10),parseInt(X[aM+1],10)];if(aN[0]>aS.position.right){aS.position.right=aN[0]}if(aN[0]<aS.position.left){aS.position.left=aN[0]}if(aN[1]>aS.position.bottom){aS.position.bottom=aN[1]}if(aN[1]<aS.position.top){aS.position.top=aN[1]}aQ.push(aN)}aK=aS.width=Math.abs(aS.position.right-aS.position.left);C=aS.height=Math.abs(aS.position.bottom-aS.position.top);if(aR.abbrev()==="c"){aS.position={left:aS.position.left+aS.width/2,top:aS.position.top+aS.height/2}}else{while(aK>0&&C>0&&aP>0&&aO>0){aK=Math.floor(aK/2);C=Math.floor(C/2);if(aR.x===e){aP=aK}else{if(aR.x===m){aP=aS.width-aK}else{aP+=Math.floor(aK/2)}}if(aR.y===p){aO=C}else{if(aR.y===aw){aO=aS.height-C}else{aO+=Math.floor(C/2)}}aM=aQ.length;while(aM--){if(aQ.length<2){break}aL=aQ[aM][0]-aS.position.left;Y=aQ[aM][1]-aS.position.top;if(aR.x===e&&aL>=aP||aR.x===m&&aL<=aP||aR.x===K&&(aL<aP||aL>aS.width-aP)||aR.y===p&&Y>=aO||aR.y===aw&&Y<=aO||aR.y===K&&(Y<aO||Y>aS.height-aO)){aQ.splice(aM,1)}}}aS.position={left:aQ[0][0],top:aQ[0][1]}}return aS},rect:function(X,C,aK,Y){return{width:Math.abs(aK-X),height:Math.abs(Y-C),position:{left:Math.min(X,aK),top:Math.min(C,Y)}}},_angles:{tc:3/2,tr:7/4,tl:5/4,bc:1/2,br:1/4,bl:3/4,rc:2,lc:1,c:0},ellipse:function(X,aO,aM,aL,aK){var aN=aJ.polys._angles[aK.abbrev()],Y=aN===0?0:aM*Math.cos(aN*Math.PI),C=aL*Math.sin(aN*Math.PI);return{width:aM*2-Math.abs(Y),height:aL*2-Math.abs(C),position:{left:X+Y,top:aO+C},adjustable:I}},circle:function(C,aK,Y,X){return aJ.polys.ellipse(C,aK,Y,Y,X)}};aJ.svg=function(aQ,aO,aT){var Y=aO[0],aR=av(Y.ownerSVGElement),aW=Y.ownerDocument,X=(parseInt(aO.css("stroke-width"),10)||0)/2,aS,C,aK,aP,aN,aL,aU,aV,aM;while(!Y.getBBox){Y=Y.parentNode}if(!Y.getBBox||!Y.parentNode){return I}switch(Y.nodeName){case"ellipse":case"circle":aV=aJ.polys.ellipse(Y.cx.baseVal.value,Y.cy.baseVal.value,(Y.rx||Y.r).baseVal.value+X,(Y.ry||Y.r).baseVal.value+X,aT);break;case"line":case"polygon":case"polyline":aU=Y.points||[{x:Y.x1.baseVal.value,y:Y.y1.baseVal.value},{x:Y.x2.baseVal.value,y:Y.y2.baseVal.value}];for(aV=[],aL=-1,aP=aU.numberOfItems||aU.length;++aL<aP;){aN=aU.getItem?aU.getItem(aL):aU[aL];aV.push.apply(aV,[aN.x,aN.y])}aV=aJ.polys.polygon(aV,aT);break;default:aV=Y.getBBox();aV={width:aV.width,height:aV.height,position:{left:aV.x,top:aV.y}};break}aM=aV.position;aR=aR[0];if(aR.createSVGPoint){C=Y.getScreenCTM();aU=aR.createSVGPoint();aU.x=aM.left;aU.y=aM.top;aK=aU.matrixTransform(C);aM.left=aK.x;aM.top=aK.y}if(aW!==b&&aQ.position.target!=="mouse"){aS=av((aW.defaultView||aW.parentWindow).frameElement).offset();if(aS){aM.left+=aS.left;aM.top+=aS.top}}aW=av(aW);aM.left+=aW.scrollLeft();aM.top+=aW.scrollTop();return aV};aJ.imagemap=function(aM,X,aQ){if(!X.jquery){X=av(X)}var aO=(X.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),Y=av('img[usemap="#'+X.parent("map").attr("name")+'"]'),aN=av.trim(X.attr("coords")),C=aN.replace(/,$/,"").split(","),aS,aP,aK,aR,aL;if(!Y.length){return I}if(aO==="polygon"){aR=aJ.polys.polygon(C,aQ)}else{if(aJ.polys[aO]){for(aK=-1,aL=C.length,aP=[];++aK<aL;){aP.push(parseInt(C[aK],10))}aR=aJ.polys[aO].apply(this,aP.concat(aQ))}else{return I}}aS=Y.offset();aS.left+=Math.ceil((Y.outerWidth(I)-Y.width())/2);aS.top+=Math.ceil((Y.outerHeight(I)-Y.height())/2);aR.position.left+=aS.left;aR.position.top+=aS.top;return aR};var D,af='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';function h(C){this._ns="ie6";this.qtip=C;this.init(C)}av.extend(h.prototype,{_scroll:function(){var C=this.qtip.elements.overlay;C&&(C[0].style.top=av(c).scrollTop()+"px")},init:function(X){var C=X.tooltip;if(av("select, object").length<1){this.bgiframe=X.elements.bgiframe=av(af).appendTo(C);X._bind(C,"tooltipmove",this.adjustBGIFrame,this._ns,this)}this.redrawContainer=av("<div/>",{id:r+"-rcontainer"}).appendTo(b.body);if(X.elements.overlay&&X.elements.overlay.addClass("qtipmodal-ie6fix")){X._bind(c,["scroll","resize"],this._scroll,this._ns,this);X._bind(C,["tooltipshow"],this._scroll,this._ns,this)}this.redraw()},adjustBGIFrame:function(){var aL=this.qtip.tooltip,Y={height:aL.outerHeight(I),width:aL.outerWidth(I)},X=this.qtip.plugins.tip,aK=this.qtip.elements.tip,C,aM;aM=parseInt(aL.css("borderLeftWidth"),10)||0;aM={left:-aM,top:-aM};if(X&&aK){C=X.corner.precedance==="x"?[N,e]:[aA,p];aM[C[1]]-=aK[C[0]]()}this.bgiframe.css(aM).css(Y)},redraw:function(){if(this.qtip.rendered<1||this.drawing){return this}var aN=this.qtip.tooltip,aM=this.qtip.options.style,X=this.qtip.options.position.container,aK,aL,C,Y;this.qtip.drawing=1;if(aM.height){aN.css(aA,aM.height)}if(aM.width){aN.css(N,aM.width)}else{aN.css(N,"").appendTo(this.redrawContainer);aL=aN.width();if(aL%2<1){aL+=1}C=aN.css("maxWidth")||"";Y=aN.css("minWidth")||"";aK=(C+Y).indexOf("%")>-1?X.width()/100:0;C=(C.indexOf("%")>-1?aK:1*parseInt(C,10))||aL;Y=(Y.indexOf("%")>-1?aK:1*parseInt(Y,10))||0;aL=C+Y?Math.min(Math.max(aL,Y),C):aL;aN.css(N,Math.round(aL)).appendTo(X)}this.drawing=0;return this},destroy:function(){this.bgiframe&&this.bgiframe.remove();this.qtip._unbind([c,this.qtip.tooltip],this._ns)}});D=aJ.ie6=function(C){return t.ie===6?new h(C):I};D.initialize="render";j.ie6={"^content|style$":function(){this.redraw()}}}))}(window,document));$.fn.qtip.zindex=20000;$.fn.qtip.defaults={prerender:false,id:false,overwrite:true,suppress:true,content:{text:true,attr:"title",text:false,button:false},position:{my:"bottom left",at:"top center",target:false,container:false,viewport:false,adjust:{x:0,y:0,mouse:true,resize:true,method:"flip flip"},effect:function(c,d,b){$(this).animate(d,{duration:200,queue:false})}},show:{target:false,effect:true,delay:90,solo:false,ready:false,modal:{on:false,effect:true,blur:true,escape:true}},hide:{target:false,event:"click",effect:true,delay:0,fixed:false,inactive:false,leave:"window",distance:false},style:{classes:"qtip-bootstrap",widget:false,width:false,height:false,tip:{corner:true,mimic:false,width:8,height:8,border:true,offset:0}},events:{render:null,move:null,show:null,hide:null,toggle:null,visible:null,hidden:null,focus:null,blur:null}};(function(b){b.fn.extend({tip:function(h){var g=b(this);var e=b.trim(g.data("tip"));var f=b.trim(g.data("my"));var c=b.trim(g.data("at"));var d={show:{ready:true,solo:true},hide:{event:false,inactive:2000}};if(e!=""){d.content=e}if(f!=""&&c!=""){d.position={my:f,at:c}}if(h!=undefined){d=b.extend(d,h)}b(this).qtip(d)}})})(jQuery);
/*!
 * jQuery Form Plugin
 * version: 4.2.2
 * Requires jQuery v1.7.2 or later
 * Project repository: https://github.com/jquery-form/form

 * Copyright 2017 Kevin Morris
 * Copyright 2006 M. Alsup

 * Dual licensed under the LGPL-2.1+ or MIT licenses
 * https://github.com/jquery-form/form#license

 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof module==="object"&&module.exports){module.exports=function(c,d){if(typeof d==="undefined"){if(typeof window!=="undefined"){d=require("jquery")}else{d=require("jquery")(c)}}b(d);return d}}else{b(jQuery)}}}(function(h){var g=/\r?\n/g;var d={};d.fileapi=h('<input type="file">').get(0).files!==undefined;d.formdata=(typeof window.FormData!=="undefined");var f=!!h.fn.prop;h.fn.attr2=function(){if(!f){return this.attr.apply(this,arguments)}var i=this.prop.apply(this,arguments);if((i&&i.jquery)||typeof i==="string"){return i}return this.attr.apply(this,arguments)};h.fn.ajaxSubmit=function(m,N,F,p){if(!this.length){e("ajaxSubmit: skipping submit process - no element selected");return this}var l,G,o,s=this;if(typeof m==="function"){m={success:m}}else{if(typeof m==="string"||(m===false&&arguments.length>0)){m={url:m,data:N,dataType:F};if(typeof p==="function"){m.success=p}}else{if(typeof m==="undefined"){m={}}}}l=m.method||m.type||this.attr2("method");G=m.url||this.attr2("action");o=(typeof G==="string")?h.trim(G):"";o=o||window.location.href||"";if(o){o=(o.match(/^([^#]+)/)||[])[1]}m=h.extend(true,{url:o,success:h.ajaxSettings.success,type:l||h.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},m);var x={};this.trigger("form-pre-serialize",[this,m,x]);if(x.veto){e("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(m.beforeSerialize&&m.beforeSerialize(this,m)===false){e("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var r=m.traditional;if(typeof r==="undefined"){r=h.ajaxSettings.traditional}var v=[];var J,K=this.formToArray(m.semantic,v,m.filtering);if(m.data){var I=h.isFunction(m.data)?m.data(K):m.data;m.extraData=I;J=h.param(I,r)}if(m.beforeSubmit&&m.beforeSubmit(K,this,m)===false){e("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[K,this,m,x]);if(x.veto){e("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var B=h.param(K,r);if(J){B=(B?(B+"&"+J):J)}if(m.type.toUpperCase()==="GET"){m.url+=(m.url.indexOf("?")>=0?"&":"?")+B;m.data=null}else{m.data=B}var M=[];if(m.resetForm){M.push(function(){s.resetForm()})}if(m.clearForm){M.push(function(){s.clearForm(m.includeHidden)})}if(!m.dataType&&m.target){var n=m.success||function(){};M.push(function(P,Q,O){var k=arguments,q=m.replaceTarget?"replaceWith":"html";h(m.target)[q](P).each(function(){n.apply(this,k)})})}else{if(m.success){if(h.isArray(m.success)){h.merge(M,m.success)}else{M.push(m.success)}}}m.success=function(Q,q,R){var P=m.context||this;for(var O=0,k=M.length;O<k;O++){M[O].apply(P,[Q,q,R||s,s])}};if(m.error){var C=m.error;m.error=function(P,k,q){var O=m.context||this;C.apply(O,[P,k,q,s])}}if(m.complete){var j=m.complete;m.complete=function(O,k){var q=m.context||this;j.apply(q,[O,k,s])}}var H=h("input[type=file]:enabled",this).filter(function(){return h(this).val()!==""});var t=H.length>0;var E="multipart/form-data";var A=(s.attr("enctype")===E||s.attr("encoding")===E);var z=d.fileapi&&d.formdata;e("fileAPI :"+z);var u=(t||A)&&!z;var y;if(m.iframe!==false&&(m.iframe||u)){if(m.closeKeepAlive){h.get(m.closeKeepAlive,function(){y=L(K)})}else{y=L(K)}}else{if((t||A)&&z){y=w(K)}else{y=h.ajax(m)}}s.removeData("jqxhr").data("jqxhr",y);for(var D=0;D<v.length;D++){v[D]=null}this.trigger("form-submit-notify",[this,m]);return this;function i(Q){var R=h.param(Q,m.traditional).split("&");var q=R.length;var k=[];var P,O;for(P=0;P<q;P++){R[P]=R[P].replace(/\+/g," ");O=R[P].split("=");k.push([decodeURIComponent(O[0]),decodeURIComponent(O[1])])}return k}function w(q){var k=new FormData();for(var O=0;O<q.length;O++){k.append(q[O].name,q[O].value)}if(m.extraData){var R=i(m.extraData);for(O=0;O<R.length;O++){if(R[O]){k.append(R[O][0],R[O][1])}}}m.data=null;var Q=h.extend(true,{},h.ajaxSettings,m,{contentType:false,processData:false,cache:false,type:l||"POST"});if(m.uploadProgress){Q.xhr=function(){var S=h.ajaxSettings.xhr();if(S.upload){S.upload.addEventListener("progress",function(W){var V=0;var T=W.loaded||W.position;var U=W.total;if(W.lengthComputable){V=Math.ceil(T/U*100)}m.uploadProgress(W,T,U,V)},false)}return S}}Q.data=null;var P=Q.beforeSend;Q.beforeSend=function(T,S){if(m.formData){S.data=m.formData}else{S.data=k}if(P){P.call(this,T,S)}};return h.ajax(Q)}function L(am){var R=s[0],Q,ai,ab,ak,ae,T,W,U,V,af,aj,aa;var aq=h.Deferred();aq.abort=function(ar){U.abort(ar)};if(am){for(ai=0;ai<v.length;ai++){Q=h(v[ai]);if(f){Q.prop("disabled",false)}else{Q.removeAttr("disabled")}}}ab=h.extend(true,{},h.ajaxSettings,m);ab.context=ab.context||ab;ae="jqFormIO"+new Date().getTime();var ao=R.ownerDocument;var ah=s.closest("body");if(ab.iframeTarget){T=h(ab.iframeTarget,ao);af=T.attr2("name");if(!af){T.attr2("name",ae)}else{ae=af}}else{T=h('<iframe name="'+ae+'" src="'+ab.iframeSrc+'" />',ao);T.css({position:"absolute",top:"-1000px",left:"-1000px"})}W=T[0];U={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(ar){var at=(ar==="timeout"?"timeout":"aborted");e("aborting upload... "+at);this.aborted=1;try{if(W.contentWindow.document.execCommand){W.contentWindow.document.execCommand("Stop")}}catch(au){}T.attr("src",ab.iframeSrc);U.error=at;if(ab.error){ab.error.call(ab.context,U,at,ar)}if(ak){h.event.trigger("ajaxError",[U,ab,at])}if(ab.complete){ab.complete.call(ab.context,U,at)}}};ak=ab.global;if(ak&&h.active++===0){h.event.trigger("ajaxStart")}if(ak){h.event.trigger("ajaxSend",[U,ab])}if(ab.beforeSend&&ab.beforeSend.call(ab.context,U,ab)===false){if(ab.global){h.active--}aq.reject();return aq}if(U.aborted){aq.reject();return aq}V=R.clk;if(V){af=V.name;if(af&&!V.disabled){ab.extraData=ab.extraData||{};ab.extraData[af]=V.value;if(V.type==="image"){ab.extraData[af+".x"]=R.clk_x;ab.extraData[af+".y"]=R.clk_y}}}var Z=1;var X=2;function Y(au){var at=null;try{if(au.contentWindow){at=au.contentWindow.document}}catch(ar){e("cannot get iframe.contentWindow document: "+ar)}if(at){return at}try{at=au.contentDocument?au.contentDocument:au.document}catch(ar){e("cannot get iframe.contentDocument: "+ar);at=au.document}return at}var P=h("meta[name=csrf-token]").attr("content");var O=h("meta[name=csrf-param]").attr("content");if(O&&P){ab.extraData=ab.extraData||{};ab.extraData[O]=P}function ag(){var aA=s.attr2("target"),aw=s.attr2("action"),au="multipart/form-data",ax=s.attr("enctype")||s.attr("encoding")||au;R.setAttribute("target",ae);if(!l||/post/i.test(l)){R.setAttribute("method","POST")}if(aw!==ab.url){R.setAttribute("action",ab.url)}if(!ab.skipEncodingOverride&&(!l||/post/i.test(l))){s.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(ab.timeout){aa=setTimeout(function(){aj=true;ad(Z)},ab.timeout)}function ay(){try{var aB=Y(W).readyState;e("state = "+aB);if(aB&&aB.toLowerCase()==="uninitialized"){setTimeout(ay,50)}}catch(aC){e("Server abort: ",aC," (",aC.name,")");ad(X);if(aa){clearTimeout(aa)}aa=undefined}}var az=[];try{if(ab.extraData){for(var at in ab.extraData){if(ab.extraData.hasOwnProperty(at)){if(h.isPlainObject(ab.extraData[at])&&ab.extraData[at].hasOwnProperty("name")&&ab.extraData[at].hasOwnProperty("value")){az.push(h('<input type="hidden" name="'+ab.extraData[at].name+'">',ao).val(ab.extraData[at].value).appendTo(R)[0])}else{az.push(h('<input type="hidden" name="'+at+'">',ao).val(ab.extraData[at]).appendTo(R)[0])}}}}if(!ab.iframeTarget){T.appendTo(ah)}if(W.attachEvent){W.attachEvent("onload",ad)}else{W.addEventListener("load",ad,false)}setTimeout(ay,15);try{R.submit()}catch(av){var ar=document.createElement("form").submit;ar.apply(R)}}finally{R.setAttribute("action",aw);R.setAttribute("enctype",ax);if(aA){R.setAttribute("target",aA)}else{s.removeAttr("target")}h(az).remove()}}if(ab.forceSync){ag()}else{setTimeout(ag,10)}var an,ap,al=50,S;function ad(ay){if(U.aborted||S){return}ap=Y(W);if(!ap){e("cannot access response document");ay=X}if(ay===Z&&U){U.abort("timeout");aq.reject(U,"timeout");return}if(ay===X&&U){U.abort("server abort");aq.reject(U,"error","server abort");return}if(!ap||ap.location.href===ab.iframeSrc){if(!aj){return}}if(W.detachEvent){W.detachEvent("onload",ad)}else{W.removeEventListener("load",ad,false)}var aw="success",aA;try{if(aj){throw"timeout"}var av=ab.dataType==="xml"||ap.XMLDocument||h.isXMLDoc(ap);e("isXml="+av);if(!av&&window.opera&&(ap.body===null||!ap.body.innerHTML)){if(--al){e("requeing onLoad callback, DOM not available");setTimeout(ad,250);return}}var aB=ap.body?ap.body:ap.documentElement;U.responseText=aB?aB.innerHTML:null;U.responseXML=ap.XMLDocument?ap.XMLDocument:ap;if(av){ab.dataType="xml"}U.getResponseHeader=function(aE){var aD={"content-type":ab.dataType};return aD[aE.toLowerCase()]};if(aB){U.status=Number(aB.getAttribute("status"))||U.status;U.statusText=aB.getAttribute("statusText")||U.statusText}var ar=(ab.dataType||"").toLowerCase();var az=/(json|script|text)/.test(ar);if(az||ab.textarea){var ax=ap.getElementsByTagName("textarea")[0];if(ax){U.responseText=ax.value;U.status=Number(ax.getAttribute("status"))||U.status;U.statusText=ax.getAttribute("statusText")||U.statusText}else{if(az){var at=ap.getElementsByTagName("pre")[0];var aC=ap.getElementsByTagName("body")[0];if(at){U.responseText=at.textContent?at.textContent:at.innerText}else{if(aC){U.responseText=aC.textContent?aC.textContent:aC.innerText}}}}}else{if(ar==="xml"&&!U.responseXML&&U.responseText){U.responseXML=ac(U.responseText)}}try{an=k(U,ar,ab)}catch(au){aw="parsererror";U.error=aA=(au||aw)}}catch(au){e("error caught: ",au);aw="error";U.error=aA=(au||aw)}if(U.aborted){e("upload aborted");aw=null}if(U.status){aw=((U.status>=200&&U.status<300)||U.status===304)?"success":"error"}if(aw==="success"){if(ab.success){ab.success.call(ab.context,an,"success",U)}aq.resolve(U.responseText,"success",U);if(ak){h.event.trigger("ajaxSuccess",[U,ab])}}else{if(aw){if(typeof aA==="undefined"){aA=U.statusText}if(ab.error){ab.error.call(ab.context,U,aw,aA)}aq.reject(U,"error",aA);if(ak){h.event.trigger("ajaxError",[U,ab,aA])}}}if(ak){h.event.trigger("ajaxComplete",[U,ab])}if(ak&&!--h.active){h.event.trigger("ajaxStop")}if(ab.complete){ab.complete.call(ab.context,U,aw)}S=true;if(ab.timeout){clearTimeout(aa)}setTimeout(function(){if(!ab.iframeTarget){T.remove()}else{T.attr("src",ab.iframeSrc)}U.responseXML=null},100)}var ac=h.parseXML||function(ar,at){if(window.ActiveXObject){at=new ActiveXObject("Microsoft.XMLDOM");at.async="false";at.loadXML(ar)}else{at=(new DOMParser()).parseFromString(ar,"text/xml")}return(at&&at.documentElement&&at.documentElement.nodeName!=="parsererror")?at:null};var q=h.parseJSON||function(ar){return window["eval"]("("+ar+")")};var k=function(ax,av,au){var at=ax.getResponseHeader("content-type")||"",ar=((av==="xml"||!av)&&at.indexOf("xml")>=0),aw=ar?ax.responseXML:ax.responseText;if(ar&&aw.documentElement.nodeName==="parsererror"){if(h.error){h.error("parsererror")}}if(au&&au.dataFilter){aw=au.dataFilter(aw,av)}if(typeof aw==="string"){if((av==="json"||!av)&&at.indexOf("json")>=0){aw=q(aw)}else{if((av==="script"||!av)&&at.indexOf("javascript")>=0){h.globalEval(aw)}}}return aw};return aq}};h.fn.ajaxForm=function(j,k,i,m){if(typeof j==="string"||(j===false&&arguments.length>0)){j={url:j,data:k,dataType:i};if(typeof m==="function"){j.success=m}}j=j||{};j.delegation=j.delegation&&h.isFunction(h.fn.on);if(!j.delegation&&this.length===0){var l={s:this.selector,c:this.context};if(!h.isReady&&l.s){e("DOM not ready, queuing ajaxForm");h(function(){h(l.s,l.c).ajaxForm(j)});return this}e("terminating; zero elements found by selector"+(h.isReady?"":" (DOM not ready)"));return this}if(j.delegation){h(document).off("submit.form-plugin",this.selector,c).off("click.form-plugin",this.selector,b).on("submit.form-plugin",this.selector,j,c).on("click.form-plugin",this.selector,j,b);return this}return this.ajaxFormUnbind().on("submit.form-plugin",j,c).on("click.form-plugin",j,b)};function c(j){var i=j.data;if(!j.isDefaultPrevented()){j.preventDefault();h(j.target).closest("form").ajaxSubmit(i)}}function b(m){var l=m.target;var j=h(l);if(!j.is("[type=submit],[type=image]")){var i=j.closest("[type=submit]");if(i.length===0){return}l=i[0]}var k=l.form;k.clk=l;if(l.type==="image"){if(typeof m.offsetX!=="undefined"){k.clk_x=m.offsetX;k.clk_y=m.offsetY}else{if(typeof h.fn.offset==="function"){var n=j.offset();k.clk_x=m.pageX-n.left;k.clk_y=m.pageY-n.top}else{k.clk_x=m.pageX-l.offsetLeft;k.clk_y=m.pageY-l.offsetTop}}}setTimeout(function(){k.clk=k.clk_x=k.clk_y=null},100)}h.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")};h.fn.formToArray=function(q,t,B){var C=[];if(this.length===0){return C}var m=this[0];var D=this.attr("id");var o=(q||typeof m.elements==="undefined")?m.getElementsByTagName("*"):m.elements;var A;if(o){o=h.makeArray(o)}if(D&&(q||/(Edge|Trident)\//.test(navigator.userAgent))){A=h(':input[form="'+D+'"]').get();if(A.length){o=(o||[]).concat(A)}}if(!o||!o.length){return C}if(h.isFunction(B)){o=h.map(o,B)}var z,x,w,s,l,y,u;for(z=0,y=o.length;z<y;z++){l=o[z];w=l.name;if(!w||l.disabled){continue}if(q&&m.clk&&l.type==="image"){if(m.clk===l){C.push({name:w,value:h(l).val(),type:l.type});C.push({name:w+".x",value:m.clk_x},{name:w+".y",value:m.clk_y})}continue}s=h.fieldValue(l,true);if(s&&s.constructor===Array){if(t){t.push(l)}for(x=0,u=s.length;x<u;x++){C.push({name:w,value:s[x]})}}else{if(d.fileapi&&l.type==="file"){if(t){t.push(l)}var p=l.files;if(p.length){for(x=0;x<p.length;x++){C.push({name:w,value:p[x],type:l.type})}}else{C.push({name:w,value:"",type:l.type})}}else{if(s!==null&&typeof s!=="undefined"){if(t){t.push(l)}C.push({name:w,value:s,type:l.type,required:l.required})}}}}if(!q&&m.clk){var k=h(m.clk),r=k[0];w=r.name;if(w&&!r.disabled&&r.type==="image"){C.push({name:w,value:k.val()});C.push({name:w+".x",value:m.clk_x},{name:w+".y",value:m.clk_y})}}return C};h.fn.formSerialize=function(i){return h.param(this.formToArray(i))};h.fn.fieldSerialize=function(j){var i=[];this.each(function(){var o=this.name;if(!o){return}var l=h.fieldValue(this,j);if(l&&l.constructor===Array){for(var m=0,k=l.length;m<k;m++){i.push({name:o,value:l[m]})}}else{if(l!==null&&typeof l!=="undefined"){i.push({name:this.name,value:l})}}});return h.param(i)};h.fn.fieldValue=function(o){for(var n=[],l=0,j=this.length;l<j;l++){var m=this[l];var k=h.fieldValue(m,o);if(k===null||typeof k==="undefined"||(k.constructor===Array&&!k.length)){continue}if(k.constructor===Array){h.merge(n,k)}else{n.push(k)}}return n};h.fieldValue=function(j,q){var l=j.name,x=j.type,y=j.tagName.toLowerCase();if(typeof q==="undefined"){q=true}if(q&&(!l||j.disabled||x==="reset"||x==="button"||(x==="checkbox"||x==="radio")&&!j.checked||(x==="submit"||x==="image")&&j.form&&j.form.clk!==j||y==="select"&&j.selectedIndex===-1)){return null}if(y==="select"){var r=j.selectedIndex;if(r<0){return null}var u=[],k=j.options;var o=(x==="select-one");var s=(o?r+1:k.length);for(var m=(o?r:0);m<s;m++){var p=k[m];if(p.selected&&!p.disabled){var w=p.value;if(!w){w=(p.attributes&&p.attributes.value&&!(p.attributes.value.specified))?p.text:p.value}if(o){return w}u.push(w)}}return u}return h(j).val().replace(g,"\r\n")};h.fn.clearForm=function(i){return this.each(function(){h("input,select,textarea",this).clearFields(i)})};h.fn.clearFields=h.fn.clearInputs=function(i){var j=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var l=this.type,k=this.tagName.toLowerCase();if(j.test(l)||k==="textarea"){this.value=""}else{if(l==="checkbox"||l==="radio"){this.checked=false}else{if(k==="select"){this.selectedIndex=-1}else{if(l==="file"){if(/MSIE/.test(navigator.userAgent)){h(this).replaceWith(h(this).clone(true))}else{h(this).val("")}}else{if(i){if((i===true&&/hidden/.test(l))||(typeof i==="string"&&h(this).is(i))){this.value=""}}}}}}})};h.fn.resetForm=function(){return this.each(function(){var k=h(this);var j=this.tagName.toLowerCase();switch(j){case"input":this.checked=this.defaultChecked;case"textarea":this.value=this.defaultValue;return true;case"option":case"optgroup":var i=k.parents("select");if(i.length&&i[0].multiple){if(j==="option"){this.selected=this.defaultSelected}else{k.find("option").resetForm()}}else{i.resetForm()}return true;case"select":k.find("option").each(function(n){this.selected=this.defaultSelected;if(this.defaultSelected&&!k[0].multiple){k[0].selectedIndex=n;return false}});return true;case"label":var l=h(k.attr("for"));var m=k.find("input,select,textarea");if(l[0]){m.unshift(l[0])}m.resetForm();return true;case"form":if(typeof this.reset==="function"||(typeof this.reset==="object"&&!this.reset.nodeType)){this.reset()}return true;default:k.find("form,input,label,select,textarea").resetForm();return true}})};h.fn.enable=function(i){if(typeof i==="undefined"){i=true}return this.each(function(){this.disabled=!i})};h.fn.selected=function(i){if(typeof i==="undefined"){i=true}return this.each(function(){var j=this.type;if(j==="checkbox"||j==="radio"){this.checked=i}else{if(this.tagName.toLowerCase()==="option"){var k=h(this).parent("select");if(i&&k[0]&&k[0].type==="select-one"){k.find("option").selected(false)}this.selected=i}}})};h.fn.ajaxSubmit.debug=false;function e(){if(!h.fn.ajaxSubmit.debug){return}var i="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(i)}else{if(window.opera&&window.opera.postError){window.opera.postError(i)}}}}));
/*! jQuery Dynatree Plugin - v1.2.5 - 2013-11-19
* http://dynatree.googlecode.com/
* Copyright (c) 2013 Martin Wendt; Licensed MIT, GPL */
function _log(f){if(_canLog){var c=Array.prototype.slice.apply(arguments,[1]),b=new Date,d=b.getHours()+":"+b.getMinutes()+":"+b.getSeconds()+"."+b.getMilliseconds();c[0]=d+" - "+c[0];try{switch(f){case"info":window.console.info.apply(window.console,c);break;case"warn":window.console.warn.apply(window.console,c);break;default:window.console.log.apply(window.console,c)}}catch(g){window.console?-2146827850===g.number&&window.console.log(c.join(", ")):_canLog=!1}}}function logMsg(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;(function($){function getDtNodeFromElement(e){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(e)}function noop(){}function offsetString(e){return 0===e?"":e>0?"+"+e:""+e}function _checkBrowser(){function e(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}var t,i;return t=e(navigator.userAgent),i={},t.browser&&(i[t.browser]=!0,i.version=t.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0),i}function versionCompare(e,t){var i,s,n,a=(""+e).split("."),r=(""+t).split("."),o=Math.min(a.length,r.length);for(n=0;o>n;n++){if(i=parseInt(a[n],10),s=parseInt(r[n],10),isNaN(i)&&(i=a[n]),isNaN(s)&&(s=r[n]),i!=s){return i>s?1:s>i?-1:0/0}}return a.length===r.length?0:a.length<r.length?-1:1}function _initDragAndDrop(e){var t=e.options.dnd||null;t&&(t.onDragStart||t.onDrop)&&_registerDnd(),t&&t.onDragStart&&e.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:t.revert!==!0?!1:function(e){if(logMsg("draggable.revert(), dropped=",e),"boolean"==typeof e){return !e}var t=$.ui.ddmanager&&$.ui.ddmanager.current&&$.ui.ddmanager.current.helper,i=t&&t.hasClass("dynatree-drop-reject");return i},scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(e){var t=$.ui.dynatree.getNode(e.target);return t?t.tree._onDragEvent("helper",t,null,e,null,null):"<div></div>"},start:function(e,t){var i=t.helper.data("dtSourceNode");return !!i}}),t&&t.onDrop&&e.$tree.droppable({addClasses:!1,tolerance:"pointer",greedy:!1})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},BROWSER=_checkBrowser(),jquerySupports={positionMyOfs:versionCompare($.ui.version,"1.9")>=0},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(e,t,i){this.parent=e,this.tree=t,"string"==typeof i&&(i={title:i}),i.key=null==i.key?"_"+t._nodeCount++:""+i.key,this.data=$.extend({},$.ui.dynatree.nodedatadefaults,i),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(e,t){var i,s=$.extend({},this.data);if(s.activate=this.tree.activeNode===this,s.focus=this.tree.focusNode===this,s.expand=this.bExpanded,s.select=this.bSelected,t&&t(s),e&&this.childList){s.children=[];for(var n=0,a=this.childList.length;a>n;n++){i=this.childList[n],i.isStatusNode()||s.children.push(i.toDict(!0,t))}}else{delete s.children}return s},fromDict:function(e){var t=e.children;return void 0===t?(this.data=$.extend(this.data,e),this.render(),void 0):(e=$.extend({},e),e.children=void 0,this.data=$.extend(this.data,e),this.removeChildren(),this.addChild(t),void 0)},_getInnerHtml:function(){var e,t=this.tree,i=t.options,s=t.cache,n=this.getLevel(),a=this.data,r="";i.minExpandLevel>n?n>1&&(r+=s.tagConnector):r+=this.hasChildren()!==!1?s.tagExpander:s.tagConnector,i.checkbox&&a.hideCheckbox!==!0&&!a.isStatusNode&&(r+=s.tagCheckbox),a.icon?(e="/"===a.icon.charAt(0)?a.icon:i.imagePath+a.icon,r+="<img src='"+e+"' alt='' />"):a.icon===!1||(r+=a.iconClass?"<span class=' "+a.iconClass+"'></span>":s.tagNodeIcon);var o="";if(i.onCustomRender&&(o=i.onCustomRender.call(t,this)||""),!o){var d=a.tooltip?' title="'+a.tooltip.replace(/\"/g,"&quot;")+'"':"",l=a.href||"#";o=i.noLink||a.noLink?'<span style="display:inline-block;" class="'+i.classNames.title+'"'+d+">"+a.title+"</span>":'<a href="'+l+'" class="'+i.classNames.title+'"'+d+">"+a.title+"</a>"}return r+=o},_fixOrder:function(){var e=this.childList;if(e&&this.ul){for(var t=this.ul.firstChild,i=0,s=e.length-1;s>i;i++){var n=e[i],a=t.dtnode;n!==a?(this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+n+" != "+a),this.ul.insertBefore(n.li,a.li)):t=t.nextSibling}}},render:function(e,t){var i=this.tree,s=this.parent,n=this.data,a=i.options,r=a.classNames,o=this.isLastSibling(),d=!1;if(s||this.ul){if(s){this.li||(d=!0,this.li=document.createElement("li"),this.li.dtnode=this,n.key&&a.generateIds&&(this.li.id=a.idPrefix+n.key),this.span=document.createElement("span"),this.span.className=r.title,this.li.appendChild(this.span),s.ul||(s.ul=document.createElement("ul"),s.ul.style.display="none",s.li.appendChild(s.ul)),s.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var l=[];l.push(r.node),n.isFolder&&l.push(r.folder),this.bExpanded&&l.push(r.expanded),this.hasChildren()!==!1&&l.push(r.hasChildren),n.isLazy&&null===this.childList&&l.push(r.lazy),o&&l.push(r.lastsib),this.bSelected&&l.push(r.selected),this.hasSubSel&&l.push(r.partsel),i.activeNode===this&&l.push(r.active),n.addClass&&l.push(n.addClass),l.push(r.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(n.isLazy&&null===this.childList?"d":"")+(o?"l":"")),l.push(r.combinedIconPrefix+(this.bExpanded?"e":"c")+(n.isFolder?"f":"")),this.span.className=l.join(" "),this.li.className=o?r.lastsib:"",d&&a.onCreate&&a.onCreate.call(i,this,this.span),a.onRender&&a.onRender.call(i,this,this.span)}}else{this.li=this.span=null,this.ul=document.createElement("ul"),this.ul.className=a.minExpandLevel>1?r.container+" "+r.noConnector:r.container}if((this.bExpanded||t===!0)&&this.childList){for(var h=0,c=this.childList.length;c>h;h++){this.childList[h].render(!1,t)}this._fixOrder()}if(this.ul){var u="none"===this.ul.style.display,p=!!this.bExpanded;if(e&&a.fx&&u===p){var f=a.fx.duration||200;$(this.ul).animate(a.fx,f)}else{this.ul.style.display=this.bExpanded||!s?"":"none"}}},getKeyPath:function(e){var t=[];return this.visitParents(function(e){e.parent&&t.unshift(e.data.key)},!e),"/"+t.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return void 0===this.hasChildren()?void 0:this.childList},hasChildren:function(){return this.data.isLazy?null===this.childList||void 0===this.childList?void 0:0===this.childList.length?!1:1===this.childList.length&&this.childList[0].isStatusNode()?void 0:!0:!!this.childList},isFirstSibling:function(){var e=this.parent;return !e||e.childList[0]===this},isLastSibling:function(){var e=this.parent;return !e||e.childList[e.childList.length-1]===this},isLoading:function(){return !!this._isLoading},getPrevSibling:function(){if(!this.parent){return null}for(var e=this.parent.childList,t=1,i=e.length;i>t;t++){if(e[t]===this){return e[t-1]}}return null},getNextSibling:function(){if(!this.parent){return null}for(var e=this.parent.childList,t=0,i=e.length-1;i>t;t++){if(e[t]===this){return e[t+1]}}return null},isStatusNode:function(){return this.data.isStatusNode===!0},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e){return !1}for(var t=this.parent;t;){if(t===e){return !0}t=t.parent}return !1},countChildren:function(){var e=this.childList;if(!e){return 0}for(var t=e.length,i=0,s=t;s>i;i++){var n=e[i];t+=n.countChildren()}return t},sortChildren:function(e,t){var i=this.childList;if(i){if(e=e||function(e,t){var i=e.data.title.toLowerCase(),s=t.data.title.toLowerCase();return i===s?0:i>s?1:-1},i.sort(e),t){for(var s=0,n=i.length;n>s;s++){i[s].childList&&i[s].sortChildren(e,"$norender$")}}"$norender$"!==t&&this.render()}},_setStatusNode:function(e){var t=this.childList?this.childList[0]:null;if(e){t?(e.isStatusNode=!0,e.key="_statusNode",t.data=e,t.render()):(e.isStatusNode=!0,e.key="_statusNode",t=this.addChild(e))}else{if(t&&t.isStatusNode()){try{this.ul&&(this.ul.removeChild(t.li),t.li=null)}catch(i){}1===this.childList.length?this.childList=[]:this.childList.shift()}}},setLazyNodeStatus:function(e,t){var i=t&&t.tooltip?t.tooltip:null,s=t&&t.info?" ("+t.info+")":"";switch(e){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+s,tooltip:i,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+s,tooltip:i,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+e+"'."}},_parentList:function(e,t){for(var i=[],s=t?this:this.parent;s;){(e||s.parent)&&i.unshift(s),s=s.parent}return i},getLevel:function(){for(var e=0,t=this.parent;t;){e++,t=t.parent}return e},_getTypeForOuterNodeEvent:function(e){var t=this.tree.options.classNames,i=e.target;if(0>i.className.indexOf(t.node)){return null}for(var s=e.pageX-i.offsetLeft,n=e.pageY-i.offsetTop,a=0,r=i.childNodes.length;r>a;a++){var o=i.childNodes[a],d=o.offsetLeft-i.offsetLeft,l=o.offsetTop-i.offsetTop,h=o.clientWidth,c=o.clientHeight;if(s>=d&&d+h>=s&&n>=l&&l+c>=n){if(o.className==t.title){return"title"}if(o.className==t.expander){return"expander"}if(o.className==t.checkbox){return"checkbox"}if(o.className==t.nodeIcon){return"icon"}}}return"prefix"},getEventTargetType:function(e){var t=e&&e.target?e.target.className:"",i=this.tree.options.classNames;return t.indexOf(i.title)>=0?"title":t.indexOf(i.expander)>=0?"expander":t.indexOf(i.checkbox)>=0?"checkbox":t.indexOf(i.nodeIcon)>=0?"icon":t.indexOf(i.empty)>=0||t.indexOf(i.vline)>=0||t.indexOf(i.connector)>=0?"prefix":t.indexOf(i.node)>=0?this._getTypeForOuterNodeEvent(e):null},isVisible:function(){for(var e=this._parentList(!0,!1),t=0,i=e.length;i>t;t++){if(!e[t].bExpanded){return !1}}return !0},makeVisible:function(){for(var e=this._parentList(!0,!1),t=0,i=e.length;i>t;t++){e[t]._expand(!0)}},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(e,t){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",e,t,this);var i=this.tree.options;if(!(this.data.isStatusNode||t&&i.onQueryActivate&&i.onQueryActivate.call(this.tree,e,this)===!1)){if(e){if(this.tree.activeNode){if(this.tree.activeNode===this){return}this.tree.activeNode.deactivate()}i.activeVisible&&this.makeVisible(),this.tree.activeNode=this,i.persist&&$.cookie(i.cookieId+"-active",this.data.key,i.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(i.classNames.active),t&&i.onActivate&&i.onActivate.call(this.tree,this)}else{if(this.tree.activeNode===this){if(i.onQueryActivate&&i.onQueryActivate.call(this.tree,!1,this)===!1){return}$(this.span).removeClass(i.classNames.active),i.persist&&$.cookie(i.cookieId+"-active","",i.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,t&&i.onDeactivate&&i.onDeactivate.call(this.tree,this)}}}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var e=!0,t=!1;if(this.data.isFolder){switch(this.tree.options.clickFolderMode){case 2:e=!1,t=!0;break;case 3:e=t=!0}}null===this.parent&&(t=!1),t&&(this.toggleExpand(),this.focus()),e&&this.activate()},_setSubSel:function(e){e?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var e;if(!this.hasChildren()){return e=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),e}var t,i,s=this.childList,n=!0,a=!0;for(t=0,i=s.length;i>t;t++){var r=s[t],o=r._updatePartSelectionState();o!==!1&&(a=!1),o!==!0&&(n=!1)}return e=n?!0:a?!1:void 0,this._setSubSel(void 0===e),this.bSelected=e===!0,e},_fixSelectionState:function(){var e,t,i;if(this.bSelected){for(this.visit(function(e){e.parent._setSubSel(!0),e.data.unselectable||e._select(!0,!1,!1)}),e=this.parent;e;){e._setSubSel(!0);var s=!0;for(t=0,i=e.childList.length;i>t;t++){var n=e.childList[t];if(!n.bSelected&&!n.data.isStatusNode&&!n.data.unselectable){s=!1;break}}s&&e._select(!0,!1,!1),e=e.parent}}else{for(this._setSubSel(!1),this.visit(function(e){e._setSubSel(!1),e._select(!1,!1,!1)}),e=this.parent;e;){e._select(!1,!1,!1);var a=!1;for(t=0,i=e.childList.length;i>t;t++){if(e.childList[t].bSelected||e.childList[t].hasSubSel){a=!0;break}}e._setSubSel(a),e=e.parent}}},_select:function(e,t,i){var s=this.tree.options;this.data.isStatusNode||this.bSelected!==e&&(t&&s.onQuerySelect&&s.onQuerySelect.call(this.tree,e,this)===!1||(1==s.selectMode&&e&&this.tree.visit(function(e){return e.bSelected?(e._select(!1,!1,!1),!1):void 0}),this.bSelected=e,e?(s.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(s.classNames.selected),i&&3===s.selectMode&&this._fixSelectionState(),t&&s.onSelect&&s.onSelect.call(this.tree,!0,this)):(s.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(s.classNames.selected),i&&3===s.selectMode&&this._fixSelectionState(),t&&s.onSelect&&s.onSelect.call(this.tree,!1,this))))},select:function(e){return this.data.unselectable?this.bSelected:this._select(e!==!1,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return !!this.data.isLazy},_loadContent:function(){try{var e=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===e.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(t){this.tree.logWarning("_loadContent: failed - %o",t),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+t})}},_expand:function(e,t){if(this.bExpanded===e){return this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",e,this),void 0}this.tree.logDebug("dtnode._expand(%o) - %o",e,this);var i=this.tree.options;if(!e&&this.getLevel()<i.minExpandLevel){return this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",e,this),void 0}if(!i.onQueryExpand||i.onQueryExpand.call(this.tree,e,this)!==!1){this.bExpanded=e,i.persist&&(e?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var s=!(this.data.isLazy&&null===this.childList||this._isLoading||t);if(this.render(s),this.bExpanded&&this.parent&&i.autoCollapse){for(var n=this._parentList(!1,!0),a=0,r=n.length;r>a;a++){n[a].collapseSiblings()}}return i.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),e&&this.data.isLazy&&null===this.childList&&!this._isLoading?(this._loadContent(),void 0):(i.onExpand&&i.onExpand.call(this.tree,e,this),void 0)}},isExpanded:function(){return this.bExpanded},expand:function(e){e=e!==!1,(this.childList||this.data.isLazy||!e)&&(null!==this.parent||e)&&this._expand(e)},scheduleAction:function(e,t){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var i=this;switch(e){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){i.tree.logDebug("setTimeout: trigger expand"),i.expand(!0)},t);break;case"activate":this.tree.timer=setTimeout(function(){i.tree.logDebug("setTimeout: trigger activate"),i.activate()},t);break;default:throw"Invalid mode "+e}this.tree.logDebug("setTimeout(%s, %s): %s",e,t,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent){for(var e=this.parent.childList,t=0,i=e.length;i>t;t++){e[t]!==this&&e[t].bExpanded&&e[t]._expand(!1)}}},_onClick:function(e){var t=this.getEventTargetType(e);if("expander"===t){this.toggleExpand(),this.focus()}else{if("checkbox"===t){this.toggleSelect(),this.focus()}else{this._userActivate();var i=this.span.getElementsByTagName("a");if(!i[0]){return !0}BROWSER.msie&&9>parseInt(BROWSER.version,10)||i[0].focus()}}e.preventDefault()},_onDblClick:function(){},_onKeydown:function(e){var t,i=!0;switch(e.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(t=this.getPrevSibling();t&&t.bExpanded&&t.childList;){t=t.childList[t.childList.length-1]}!t&&this.parent&&this.parent.parent&&(t=this.parent),t&&t.focus();break;case 40:if(this.bExpanded&&this.childList){t=this.childList[0]}else{for(var s=this._parentList(!1,!0),n=s.length-1;n>=0&&!(t=s[n].getNextSibling());n--){}}t&&t.focus();break;default:i=!1}i&&e.preventDefault()},_onKeypress:function(){},_onFocus:function(e){var t=this.tree.options;"blur"==e.type||"focusout"==e.type?(t.onBlur&&t.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(t.classNames.focused),this.tree.tnFocused=null,t.persist&&$.cookie(t.cookieId+"-focus","",t.cookie)):("focus"==e.type||"focusin"==e.type)&&(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(t.classNames.focused)),this.tree.tnFocused=this,t.onFocus&&t.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(t.classNames.focused),t.persist&&$.cookie(t.cookieId+"-focus",this.data.key,t.cookie))},visit:function(e,t){var i=!0;if(t===!0&&(i=e(this),i===!1||"skip"===i)){return i}if(this.childList){for(var s=0,n=this.childList.length;n>s&&(i=this.childList[s].visit(e,!0),i!==!1);s++){}}return i},visitParents:function(e,t){if(t&&e(this)===!1){return !1}for(var i=this.parent;i;){if(e(i)===!1){return !1}i=i.parent}return !0},remove:function(){if(this===this.tree.root){throw"Cannot remove system root"}return this.parent.removeChild(this)},removeChild:function(e){var t=this.childList;if(1===t.length){if(e!==t[0]){throw"removeChild: invalid child"}return this.removeChildren()}e===this.tree.activeNode&&e.deactivate(),this.tree.options.persist&&(e.bSelected&&this.tree.persistence.clearSelect(e.data.key),e.bExpanded&&this.tree.persistence.clearExpand(e.data.key)),e.removeChildren(!0),this.ul&&e.li&&this.ul.removeChild(e.li);for(var i=0,s=t.length;s>i;i++){if(t[i]===e){this.childList.splice(i,1);break}}},removeChildren:function(e,t){this.tree.logDebug("%s.removeChildren(%o)",this,e);var i=this.tree,s=this.childList;if(s){for(var n=0,a=s.length;a>n;n++){var r=s[n];r!==i.activeNode||t||r.deactivate(),this.tree.options.persist&&!t&&(r.bSelected&&this.tree.persistence.clearSelect(r.data.key),r.bExpanded&&this.tree.persistence.clearExpand(r.data.key)),r.removeChildren(!0,t),this.ul&&r.li&&$("li",$(this.ul)).remove()}this.childList=null}e||(this._isLoading=!1,this.render())},setTitle:function(e){this.fromDict({title:e})},reload:function(){throw"Use reloadChildren() instead"},reloadChildren:function(e){if(null===this.parent){throw"Use tree.reload() instead"}if(!this.data.isLazy){throw"node.reloadChildren() requires lazy nodes."}if(e){var t=this,i="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(i,function(s,n,a){if(t.tree.$tree.unbind(i),t.tree.logDebug("loaded %o, %o, %o",s,n,a),n!==t){throw"got invalid load event"}e.call(t.tree,n,a)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(e,t){var i=this.tree;if(i.logDebug("%s._loadKeyPath(%s)",this,e),""===e){throw"Key path must not be empty"}var s=e.split(i.options.keyPathSeparator);if(""===s[0]){throw"Key path must be relative (don't start with '/')"}var n=s.shift();if(this.childList){for(var a=0,r=this.childList.length;r>a;a++){var o=this.childList[a];if(o.data.key===n){if(0===s.length){t.call(i,o,"ok")}else{if(!o.data.isLazy||null!==o.childList&&void 0!==o.childList){t.call(i,o,"loaded"),o._loadKeyPath(s.join(i.options.keyPathSeparator),t)}else{i.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,e,o);var d=this;o.reloadChildren(function(n,a){a?(i.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",n,e,n),t.call(i,o,"loaded"),n._loadKeyPath(s.join(i.options.keyPathSeparator),t)):(i.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",d,e),t.call(i,o,"error"))})}}return}}}t.call(i,void 0,"notfound",n,0===s.length),i.logWarning("Node not found: "+n)},resetLazy:function(){if(null===this.parent){throw"Use tree.reload() instead"}if(!this.data.isLazy){throw"node.resetLazy() requires lazy nodes."}this.expand(!1),this.removeChildren()},_addChildNode:function(e,t){var i=this.tree,s=i.options,n=i.persistence;if(e.parent=this,null===this.childList?this.childList=[]:t||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(s.classNames.lastsib),t){var a=$.inArray(t,this.childList);if(0>a){throw"<beforeNode> must be a child of <this>"}this.childList.splice(a,0,e)}else{this.childList.push(e)}var r=i.isInitializing();if(s.persist&&n.cookiesFound&&r?(n.activeKey===e.data.key&&(i.activeNode=e),n.focusedKey===e.data.key&&(i.focusNode=e),e.bExpanded=$.inArray(e.data.key,n.expandedKeyList)>=0,e.bSelected=$.inArray(e.data.key,n.selectedKeyList)>=0):(e.data.activate&&(i.activeNode=e,s.persist&&(n.activeKey=e.data.key)),e.data.focus&&(i.focusNode=e,s.persist&&(n.focusedKey=e.data.key)),e.bExpanded=e.data.expand===!0,e.bExpanded&&s.persist&&n.addExpand(e.data.key),e.bSelected=e.data.select===!0,e.bSelected&&s.persist&&n.addSelect(e.data.key)),s.minExpandLevel>=e.getLevel()&&(this.bExpanded=!0),e.bSelected&&3==s.selectMode){for(var o=this;o;){o.hasSubSel||o._setSubSel(!0),o=o.parent}}return i.bEnableUpdate&&this.render(),e},addChild:function(e,t){if("string"==typeof e){throw"Invalid data type for "+e}if(e&&0!==e.length){if(e instanceof DynaTreeNode){return this._addChildNode(e,t)}e.length||(e=[e]);for(var i=this.tree.enableUpdate(!1),s=null,n=0,a=e.length;a>n;n++){var r=e[n],o=this._addChildNode(new DynaTreeNode(this,this.tree,r),t);s||(s=o),r.children&&o.addChild(r.children,null)}return this.tree.enableUpdate(i),s}},append:function(e){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(e,null)},appendAjax:function(e){var t=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),e.debugLazyDelay){var i=e.debugLazyDelay;return e.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+i),setTimeout(function(){t.appendAjax(e)},i),void 0}var s=e.success,n=e.error,a="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,r=$.extend({},this.tree.options.ajaxDefaults,e,{success:function(e,i){var n=t.tree.phase;t.tree.phase="init",r.postProcess?e=r.postProcess.call(this,e,this.dataType):e&&e.hasOwnProperty("d")&&(e="string"==typeof e.d?$.parseJSON(e.d):e.d),$.isArray(e)&&0===e.length||t.addChild(e,null),t.tree.phase="postInit",s&&s.call(r,t,e,i),t.tree.logDebug("trigger "+a),t.tree.$tree.trigger(a,[t,!0]),t.tree.phase=n,t.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(e)&&0===e.length&&(t.childList=[],t.render())},error:function(e,i,s){t.tree.logWarning("appendAjax failed:",i,":\n",e,"\n",s),n&&n.call(r,t,e,i,s),t.tree.$tree.trigger(a,[t,!1]),t.setLazyNodeStatus(DTNodeStatus_Error,{info:i,tooltip:""+s})}});$.ajax(r)},move:function(e,t){var i;if(this!==e){if(!this.parent){throw"Cannot move system root"}(void 0===t||"over"==t)&&(t="child");var s=this.parent,n="child"===t?e:e.parent;if(n.isDescendantOf(this)){throw"Cannot move a node to it's own descendant"}if(1==this.parent.childList.length){this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1}else{if(i=$.inArray(this,this.parent.childList),0>i){throw"Internal error"}this.parent.childList.splice(i,1)}if(this.parent.ul&&this.parent.ul.removeChild(this.li),this.parent=n,n.hasChildren()){switch(t){case"child":n.childList.push(this);break;case"before":if(i=$.inArray(e,n.childList),0>i){throw"Internal error"}n.childList.splice(i,0,this);break;case"after":if(i=$.inArray(e,n.childList),0>i){throw"Internal error"}n.childList.splice(i+1,0,this);break;default:throw"Invalid mode "+t}}else{n.childList=[this]}if(n.ul||(n.ul=document.createElement("ul"),n.ul.style.display="none",n.li.appendChild(n.ul)),this.li&&n.ul.appendChild(this.li),this.tree!==e.tree){throw this.visit(function(t){t.tree=e.tree},null,!0),"Not yet implemented."}s.isDescendantOf(n)||s.render(),n.isDescendantOf(s)||n.render()}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(e,t){var i=new DynaTreeStatus(e,t);return i.read(),i.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(e,t){void 0===e&&(e=$.ui.dynatree.prototype.options.cookieId),t=$.extend({},$.ui.dynatree.prototype.options.cookie,t),this.cookieId=e,this.cookieOpts=t,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var e=$.cookie(this.cookieId+"-active");this.activeKey=e||"",e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-focus"),this.focusedKey=e||"",e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=e?e.split(","):[],e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-select"),this.selectedKeyList=e?e.split(","):[],e&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(e){0>$.inArray(e,this.expandedKeyList)&&(this.expandedKeyList.push(e),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(e){var t=$.inArray(e,this.expandedKeyList);t>=0&&(this.expandedKeyList.splice(t,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(e){0>$.inArray(e,this.selectedKeyList)&&(this.selectedKeyList.push(e),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(e){var t=$.inArray(e,this.selectedKeyList);t>=0&&(this.selectedKeyList.splice(t,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return this.cookiesFound===!0},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();DynaTree.version="@@Version",DynaTree.prototype={initialize:function(e){this.phase="init",this.$widget=e,this.options=e.options,this.$tree=e.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(e){this.$widget;var t=this.options,i=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==t.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),1>t.minExpandLevel&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),t.minExpandLevel=1),t.classNames!==$.ui.dynatree.prototype.options.classNames&&(t.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,t.classNames)),t.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(t.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,t.ajaxDefaults)),t.dnd!==$.ui.dynatree.prototype.options.dnd&&(t.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,t.dnd)),t.imagePath||$("script").each(function(){var e=/.*dynatree[^\/]*\.js$/i;return this.src.search(e)>=0?(t.imagePath=this.src.indexOf("/")>=0?this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":"skin/",i.logDebug("Guessing imagePath from '%s': '%s'",this.src,t.imagePath),!1):void 0}),this.persistence=new DynaTreeStatus(t.cookieId,t.cookie),t.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+t.classNames.empty+"'></span>",tagVline:"<span class='"+t.classNames.vline+"'></span>",tagExpander:"<span class='"+t.classNames.expander+"'></span>",tagConnector:"<span class='"+t.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+t.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+t.classNames.checkbox+"'></span>",lastentry:void 0},(t.children||t.initAjax&&t.initAjax.url||t.initId)&&$(this.divTree).empty();var s=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var n=this.tnRoot,a=t.persist&&this.persistence.isReloading(),r=!1,o=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),t.children?n.addChild(t.children):t.initAjax&&t.initAjax.url?(r=!0,n.data.isLazy=!0,this._reloadAjax(e)):t.initId?this._createFromTag(n,$("#"+t.initId)):(this._createFromTag(n,s),s.remove()),this._checkConsistency(),r||3!=t.selectMode||n._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(o),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",t.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),r||(t.onPostInit&&t.onPostInit.call(this,a,!1),e&&e.call(this,"ok")),this.phase="idle"},_reloadAjax:function(e){var t=this.options;if(!t.initAjax||!t.initAjax.url){throw"tree.reload() requires 'initAjax' mode."}var i=this.persistence,s=$.extend({},t.initAjax);s.addActiveKey&&(s.data.activeKey=i.activeKey),s.addFocusedKey&&(s.data.focusedKey=i.focusedKey),s.addExpandedKeyList&&(s.data.expandedKeyList=i.expandedKeyList.join(",")),s.addSelectedKeyList&&(s.data.selectedKeyList=i.selectedKeyList.join(",")),s.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),s.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var n=i.isReloading();s.success=function(i){3==t.selectMode&&i.tree.tnRoot._updatePartSelectionState(),t.onPostInit&&t.onPostInit.call(i.tree,n,!1),e&&e.call(i.tree,"ok")},s.error=function(i,s,a,r){t.onPostInit&&t.onPostInit.call(i.tree,n,!0,s,a,r),e&&e.call(i.tree,"error",s,a,r)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(s)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(e){var t=this.tnRoot.toDict(!0);return e?t:t.children},serializeArray:function(e){for(var t=this.getSelectedNodes(e),i=this.$tree.attr("name")||this.$tree.attr("id"),s=[],n=0,a=t.length;a>n;n++){s.push({name:i,value:t[n].data.key})}return s},getPersistData:function(){return this.persistence.toDict()},logDebug:function(){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(e){this._load(e)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(e){var t=document.getElementById(this.options.idPrefix+e);if(t){return t.dtnode?t.dtnode:null}var i=null;return this.visit(function(t){return t.data.key===e?(i=t,!1):void 0},!0),i},getActiveNode:function(){return this.activeNode},reactivate:function(e){var t=this.activeNode;t&&(this.activeNode=null,t.activate(),e&&t.focus())},getSelectedNodes:function(e){var t=[];return this.tnRoot.visit(function(i){return i.bSelected&&(t.push(i),e===!0)?"skip":void 0}),t},activateKey:function(e){var t=null===e?null:this.getNodeByKey(e);return t?(t.focus(),t.activate(),t):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(e,t){var i=e.split(this.options.keyPathSeparator);return""===i[0]&&i.shift(),i[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),i.shift()),e=i.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(e,t)},selectKey:function(e,t){var i=this.getNodeByKey(e);return i?(i.select(t),i):null},enableUpdate:function(e){return this.bEnableUpdate==e?e:(this.bEnableUpdate=e,e&&this.redraw(),!e)},count:function(){return this.tnRoot.countChildren()},visit:function(e,t){return this.tnRoot.visit(e,t)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length){title=$liSpan.html()}else{if($liA.length){title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title")}else{title=$li.html();var iPos=title.search(/<ul/i);title=iPos>=0?$.trim(title.substring(0,iPos)):$.trim(title)}}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=""+$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(e,t,i,s,n){var a,r=e?$(e.span):null,o=$(t.span),d=0,l="center";if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1000}).prependTo($(this.divTree).parent())),"after"===s||"before"===s||"over"===s){switch(s){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),l="top";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),l="bottom";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),o.addClass("dynatree-drop-target"),d=8}a=jquerySupports.positionMyOfs?{my:"left"+offsetString(d)+" center",at:"left "+l,of:o}:{my:"left center",at:"left "+l,of:o,offset:""+d+" 0"},this.$dndMarker.show().position(a)}else{o.removeClass("dynatree-drop-target"),this.$dndMarker.hide()}"after"===s?o.addClass("dynatree-drop-after"):o.removeClass("dynatree-drop-after"),"before"===s?o.addClass("dynatree-drop-before"):o.removeClass("dynatree-drop-before"),n===!0?(r&&r.addClass("dynatree-drop-accept"),o.addClass("dynatree-drop-accept"),i.addClass("dynatree-drop-accept")):(r&&r.removeClass("dynatree-drop-accept"),o.removeClass("dynatree-drop-accept"),i.removeClass("dynatree-drop-accept")),n===!1?(r&&r.addClass("dynatree-drop-reject"),o.addClass("dynatree-drop-reject"),i.addClass("dynatree-drop-reject")):(r&&r.removeClass("dynatree-drop-reject"),o.removeClass("dynatree-drop-reject"),i.removeClass("dynatree-drop-reject"))},_onDragEvent:function(e,t,i,s,n,a){var r,o,d,l=this.options.dnd,h=null,c=$(t.span);switch(e){case"helper":var u=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(s.target).closest(".dynatree-title").clone());$("ul.dynatree-container",t.tree.divTree).append(u),u.data("dtSourceNode",t),h=u;break;case"start":t.isStatusNode()?h=!1:l.onDragStart&&(h=l.onDragStart(t)),h===!1?(this.logDebug("tree.onDragStart() cancelled"),n.helper.trigger("mouseup"),n.helper.hide()):c.addClass("dynatree-drag-source");break;case"enter":d=l.onDragEnter?l.onDragEnter(t,i,n,a):null,h=d?$.isArray(d)?{over:$.inArray("over",d)>=0,before:$.inArray("before",d)>=0,after:$.inArray("after",d)>=0}:{over:d===!0||"over"===d,before:d===!0||"before"===d,after:d===!0||"after"===d}:!1,n.helper.data("enterResponse",h);break;case"over":if(o=n.helper.data("enterResponse"),r=null,o===!1){}else{if("string"==typeof o){r=o}else{var p=c.offset(),f={x:s.pageX-p.left,y:s.pageY-p.top},g={x:f.x/c.width(),y:f.y/c.height()};o.after&&g.y>0.75?r="after":!o.over&&o.after&&g.y>0.5?r="after":o.before&&0.25>=g.y?r="before":!o.over&&o.before&&0.5>=g.y?r="before":o.over&&(r="over"),l.preventVoidMoves&&(t===i?r=null:"before"===r&&i&&t===i.getNextSibling()?r=null:"after"===r&&i&&t===i.getPrevSibling()?r=null:"over"===r&&i&&i.parent===t&&i.isLastSibling()&&(r=null)),n.helper.data("hitMode",r)}}"over"===r&&l.autoExpandMS&&t.hasChildren()!==!1&&!t.bExpanded&&t.scheduleAction("expand",l.autoExpandMS),r&&l.onDragOver&&(h=l.onDragOver(t,i,r,n,a),("over"===h||"before"===h||"after"===h)&&(r=h)),this._setDndStatus(i,t,n.helper,r,h!==!1&&null!==r);break;case"drop":var y=n.helper.hasClass("dynatree-drop-reject");r=n.helper.data("hitMode"),r&&l.onDrop&&!y&&l.onDrop(t,i,r,n,a);break;case"leave":t.scheduleAction("cancel"),n.helper.data("enterResponse",null),n.helper.data("hitMode",null),this._setDndStatus(i,t,n.helper,"out",void 0),l.onDragLeave&&l.onDragLeave(t,i,n,a);break;case"stop":c.removeClass("dynatree-drag-source"),l.onDragStop&&l.onDragStop(t);break;default:throw"Unsupported drag event: "+e}return h},cancelDrag:function(){var e=$.ui.ddmanager.current;e&&e.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){return 0>versionCompare($.ui.version,"1.8")?(this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create()):(this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality."),void 0)},_create:function(){var e=this.options;e.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree",this.element.get(0),this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function e(e){e=$.event.fix(e||window.event);var t=$.ui.dynatree.getNode(e.target);return t?t._onFocus(e):!1}this.unbind();var t="click.dynatree dblclick.dynatree";this.options.keyboard&&(t+=" keypress.dynatree keydown.dynatree"),this.element.bind(t,function(e){var t=$.ui.dynatree.getNode(e.target);if(!t){return !0}var i=t.tree,s=i.options;i.logDebug("event(%s): dtnode: %s",e.type,t);var n=i.phase;i.phase="userEvent";try{switch(e.type){case"click":return s.onClick&&s.onClick.call(i,t,e)===!1?!1:t._onClick(e);case"dblclick":return s.onDblClick&&s.onDblClick.call(i,t,e)===!1?!1:t._onDblClick(e);case"keydown":return s.onKeydown&&s.onKeydown.call(i,t,e)===!1?!1:t._onKeydown(e);case"keypress":return s.onKeypress&&s.onKeypress.call(i,t,e)===!1?!1:t._onKeypress(e)}}catch(a){i.logWarning("bind(%o): dtnode: %o, error: %o",e,t,a)}finally{i.phase=n}});var i=this.tree.divTree;i.addEventListener?(i.addEventListener("focus",e,!0),i.addEventListener("blur",e,!0)):i.onfocusin=i.onfocusout=e},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),0>versionCompare($.ui.version,"1.8")&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.extend($.ui.dynatree,{version:"1.2.5",buildType:"release",_DynaTreeClass:DynaTree,_DynaTreeNodeClass:DynaTreeNode,getNode:function(e){if(e instanceof DynaTreeNode){return e}for(void 0!==e.selector&&(e=e[0]);e;){if(e.dtnode){return e.dtnode}e=e.parentNode}return null},getPersistData:DynaTreeStatus._getTreePersistData}),$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,revert:!1,autoExpandMS:1000,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:void 0},0>versionCompare($.ui.version,"1.8")&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(e,t){var i=$(this).data("ui-draggable")||$(this).data("draggable"),s=t.helper.data("dtSourceNode")||null;return s?(i.offset.click.top=-2,i.offset.click.left=16,s.tree._onDragEvent("start",s,null,e,t,i)):void 0},drag:function(e,t){var i=$(this).data("ui-draggable")||$(this).data("draggable"),s=t.helper.data("dtSourceNode")||null,n=t.helper.data("dtTargetNode")||null,a=$.ui.dynatree.getNode(e.target);if(e.target&&!a){var r=$(e.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(r){return}}t.helper.data("dtTargetNode",a),n&&n!==a&&n.tree._onDragEvent("leave",n,s,e,t,i),a&&a.tree.options.dnd.onDrop&&(a===n?a.tree._onDragEvent("over",a,s,e,t,i):a.tree._onDragEvent("enter",a,s,e,t,i))},stop:function(e,t){var i=$(this).data("ui-draggable")||$(this).data("draggable"),s=t.helper.data("dtSourceNode")||null,n=t.helper.data("dtTargetNode")||null,a=e.type,r="mouseup"==a&&1==e.which;logMsg("draggable-connectToDynatree.stop: targetNode(from event): %s, dtTargetNode: %s",n,t.helper.data("dtTargetNode")),r||logMsg("Drag was cancelled"),n&&(r&&n.tree._onDragEvent("drop",n,s,e,t,i),n.tree._onDragEvent("leave",n,s,e,t,i)),s&&s.tree._onDragEvent("stop",s,null,e,t,i)}}),didRegisterDnd=!0)}})(jQuery);
/*! jQuery Validation Plugin - v1.13.0 - 7/1/2014
 * http://jqueryvalidation.org/
 * Copyright (c) 2014 Jrn Zaefferer; Licensed MIT */
!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)}(function(e){e.extend(e.fn,{validate:function(g){if(!this.length){return void (g&&g.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."))}var h=e.data(this[0],"validator");return h?h:(this.attr("novalidate","novalidate"),h=new e.validator(g,this[0]),e.data(this[0],"validator",h),h.settings.onsubmit&&(this.validateDelegate(":submit","click",function(c){h.settings.submitHandler&&(h.submitButton=c.target),e(c.target).hasClass("cancel")&&(h.cancelSubmit=!0),void 0!==e(c.target).attr("formnovalidate")&&(h.cancelSubmit=!0)}),this.submit(function(c){function i(){var b;return h.settings.submitHandler?(h.submitButton&&(b=e("<input type='hidden'/>").attr("name",h.submitButton.name).val(e(h.submitButton).val()).appendTo(h.currentForm)),h.settings.submitHandler.call(h,h.currentForm,c),h.submitButton&&b.remove(),!1):!0}return h.settings.debug&&c.preventDefault(),h.cancelSubmit?(h.cancelSubmit=!1,i()):h.form()?h.pendingRequest?(h.formSubmitted=!0,!1):i():(h.focusInvalid(),!1)})),h)},valid:function(){var g,h;return e(this[0]).is("form")?g=this.validate().form():(g=!0,h=e(this[0].form).validate(),this.each(function(){g=h.element(this)&&g})),g},removeAttrs:function(g){var i={},h=this;return e.each(g.split(/\s/),function(j,c){i[c]=h.attr(c),h.removeAttr(c)}),i},rules:function(s,r){var q,p,o,n,m,l,k=this[0];if(s){switch(q=e.data(k.form,"validator").settings,p=q.rules,o=e.validator.staticRules(k),s){case"add":e.extend(o,e.validator.normalizeRule(r)),delete o.messages,p[k.name]=o,r.messages&&(q.messages[k.name]=e.extend(q.messages[k.name],r.messages));break;case"remove":return r?(l={},e.each(r.split(/\s/),function(g,h){l[h]=o[h],delete o[h],"required"===h&&e(k).removeAttr("aria-required")}),l):(delete p[k.name],o)}}return n=e.validator.normalizeRules(e.extend({},e.validator.classRules(k),e.validator.attributeRules(k),e.validator.dataRules(k),e.validator.staticRules(k)),k),n.required&&(m=n.required,delete n.required,n=e.extend({required:m},n),e(k).attr("aria-required","true")),n.remote&&(m=n.remote,delete n.remote,n=e.extend(n,{remote:m})),n}}),e.extend(e.expr[":"],{blank:function(c){return !e.trim(""+e(c).val())},filled:function(c){return !!e.trim(""+e(c).val())},unchecked:function(c){return !e(c).prop("checked")}}),e.validator=function(g,h){this.settings=e.extend(!0,{},e.validator.defaults,g),this.currentForm=h,this.init()},e.validator.format=function(g,h){return 1===arguments.length?function(){var b=e.makeArray(arguments);return b.unshift(g),e.validator.format.apply(this,b)}:(arguments.length>2&&h.constructor!==Array&&(h=e.makeArray(arguments).slice(1)),h.constructor!==Array&&(h=[h]),e.each(h,function(b,i){g=g.replace(new RegExp("\\{"+b+"\\}","g"),function(){return i})}),g)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(b){this.lastActive=b,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(b)))},onfocusout:function(b){this.checkable(b)||!(b.name in this.submitted)&&this.optional(b)||this.element(b)},onkeyup:function(g,c){(9!==c.which||""!==this.elementValue(g))&&(g.name in this.submitted||g===this.lastElement)&&this.element(g)},onclick:function(b){b.name in this.submitted?this.element(b):b.parentNode.name in this.submitted&&this.element(b.parentNode)},highlight:function(g,i,h){"radio"===g.type?this.findByName(g.name).addClass(i).removeClass(h):e(g).addClass(i).removeClass(h)},unhighlight:function(g,i,h){"radio"===g.type?this.findByName(g.name).removeClass(i).addClass(h):e(g).removeClass(i).addClass(h)}},setDefaults:function(c){e.extend(e.validator.defaults,c)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function g(j){var m=e.data(this[0].form,"validator"),l="on"+j.type.replace(/^validate/,""),k=m.settings;k[l]&&!this.is(k.ignore)&&k[l].call(m,this[0],j)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,h=this.groups={};e.each(this.settings.groups,function(j,k){"string"==typeof k&&(k=k.split(/\s/)),e.each(k,function(b,l){h[l]=j})}),i=this.settings.rules,e.each(i,function(c,j){i[c]=e.validator.normalizeRule(j)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",g).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",g),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var g=0,c=this.currentElements=this.elements();c[g];g++){this.check(c[g])}return this.valid()},element:function(g){var j=this.clean(g),i=this.validationTargetFor(j),h=!0;return this.lastElement=i,void 0===i?delete this.invalid[j.name]:(this.prepareElement(i),this.currentElements=e(i),h=this.check(i)!==!1,h?delete this.invalid[i.name]:this.invalid[i.name]=!0),e(g).attr("aria-invalid",!h),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),h},showErrors:function(g){if(g){e.extend(this.errorMap,g),this.errorList=[];for(var h in g){this.errorList.push({message:g[h],element:this.findByName(h)[0]})}this.successList=e.grep(this.successList,function(b){return !(b.name in g)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(h){var g,i=0;for(g in h){i++}return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(b){b.not(this.containers).text(""),this.addWrapper(b).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(c){}}},findLastActive:function(){var c=this.lastActive;return c&&1===e.grep(this.errorList,function(b){return b.element.name===c.name}).length&&c},elements:function(){var g=this,h={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return !this.name&&g.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in h||!g.objectLength(e(this).rules())?!1:(h[this.name]=!0,!0)})},clean:function(c){return e(c)[0]},errors:function(){var c=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+c,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset(),this.toHide=this.errorsFor(b)},elementValue:function(g){var j,i=e(g),h=g.type;return"radio"===h||"checkbox"===h?e("input[name='"+g.name+"']:checked").val():"number"===h&&"undefined"!=typeof g.validity?g.validity.badInput?!1:i.val():(j=i.val(),"string"==typeof j?j.replace(/\r/g,""):j)},check:function(s){s=this.validationTargetFor(this.clean(s));var r,q,p,o=e(s).rules(),n=e.map(o,function(g,c){return c}).length,m=!1,l=this.elementValue(s);for(q in o){p={method:q,parameters:o[q]};try{if(r=e.validator.methods[q].call(this,l,s,p.parameters),"dependency-mismatch"===r&&1===n){m=!0;continue}if(m=!1,"pending"===r){return void (this.toHide=this.toHide.not(this.errorsFor(s)))}if(!r){return this.formatAndAdd(s,p),!1}}catch(k){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+s.id+", check the '"+p.method+"' method.",k),k}}if(!m){return this.objectLength(o)&&this.successList.push(s),!0}},customDataMessage:function(g,h){return e(g).data("msg"+h.charAt(0).toUpperCase()+h.substring(1).toLowerCase())||e(g).data("msg")},customMessage:function(h,g){var i=this.settings.messages[h];return i&&(i.constructor===String?i:i[g])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(void 0!==arguments[b]){return arguments[b]}}return void 0},defaultMessage:function(g,h){return this.findDefined(this.customMessage(g.name,h),this.customDataMessage(g,h),!this.settings.ignoreTitle&&g.title||void 0,e.validator.messages[h],"<strong>Warning: No message defined for "+g.name+"</strong>")},formatAndAdd:function(g,j){var i=this.defaultMessage(g,j.method),h=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,j.parameters,g):h.test(i)&&(i=e.validator.format(i.replace(h,"{$1}"),j.parameters)),this.errorList.push({message:i,element:g,method:j.method}),this.errorMap[g.name]=i,this.submitted[g.name]=i},addWrapper:function(b){return this.settings.wrapper&&(b=b.add(b.parent(this.settings.wrapper))),b},defaultShowErrors:function(){var h,g,i;for(h=0;this.errorList[h];h++){i=this.errorList[h],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success){for(h=0;this.successList[h];h++){this.showLabel(this.successList[h])}}if(this.settings.unhighlight){for(h=0,g=this.validElements();g[h];h++){this.settings.unhighlight.call(this,g[h],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(j,q){var p,o,n,m=this.errorsFor(j),l=this.idOrName(j),k=e(j).attr("aria-describedby");m.length?(m.removeClass(this.settings.validClass).addClass(this.settings.errorClass),m.html(q)):(m=e("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(q||""),p=m,this.settings.wrapper&&(p=m.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(p):this.settings.errorPlacement?this.settings.errorPlacement(p,e(j)):p.insertAfter(j),m.is("label")?m.attr("for",l):0===m.parents("label[for='"+l+"']").length&&(n=m.attr("id"),k?k.match(new RegExp("\b"+n+"\b"))||(k+=" "+n):k=n,e(j).attr("aria-describedby",k),o=this.groups[j.name],o&&e.each(this.groups,function(g,h){h===o&&e("[name='"+g+"']",this.currentForm).attr("aria-describedby",m.attr("id"))}))),!q&&this.settings.success&&(m.text(""),"string"==typeof this.settings.success?m.addClass(this.settings.success):this.settings.success(m,j)),this.toShow=this.toShow.add(m)},errorsFor:function(g){var j=this.idOrName(g),i=e(g).attr("aria-describedby"),h="label[for='"+j+"'], label[for='"+j+"'] *";return i&&(h=h+", #"+i.replace(/\s+/g,", #")),this.errors().filter(h)},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name).not(this.settings.ignore)[0]),b},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(c){return e(this.currentForm).find("[name='"+c+"']")},getLength:function(g,h){switch(h.nodeName.toLowerCase()){case"select":return e("option:selected",h).length;case"input":if(this.checkable(h)){return this.findByName(h.name).filter(":checked").length}}return g.length},depend:function(g,c){return this.dependTypes[typeof g]?this.dependTypes[typeof g](g,c):!0},dependTypes:{"boolean":function(b){return b},string:function(g,h){return !!e(g,h.form).length},"function":function(g,c){return g(c)}},optional:function(g){var h=this.elementValue(g);return !e.validator.methods.required.call(this,h,g)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,this.pending[b.name]=!0)},stopRequest:function(g,h){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[g.name],h&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!h&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(c){return e.data(c,"previousValue")||e.data(c,"previousValue",{old:null,valid:!0,message:this.defaultMessage(c,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(g,h){g.constructor===String?this.classRuleSettings[g]=h:e.extend(this.classRuleSettings,g)},classRules:function(g){var i={},h=e(g).attr("class");return h&&e.each(h.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(h){var m,l,k={},j=e(h),i=h.getAttribute("type");for(m in e.validator.methods){"required"===m?(l=h.getAttribute(m),""===l&&(l=!0),l=!!l):l=j.attr(m),/min|max/.test(m)&&(null===i||/number|range|text/.test(i))&&(l=Number(l)),l||0===l?k[m]=l:i===m&&"range"!==i&&(k[m]=!0)}return k.maxlength&&/-1|2147483647|524288/.test(k.maxlength)&&delete k.maxlength,k},dataRules:function(g){var k,j,i={},h=e(g);for(k in e.validator.methods){j=h.data("rule"+k.charAt(0).toUpperCase()+k.substring(1).toLowerCase()),void 0!==j&&(i[k]=j)}return i},staticRules:function(g){var i={},h=e.data(g.form,"validator");return h.settings.rules&&(i=e.validator.normalizeRule(h.settings.rules[g.name])||{}),i},normalizeRules:function(g,h){return e.each(g,function(i,c){if(c===!1){return void delete g[i]}if(c.param||c.depends){var b=!0;switch(typeof c.depends){case"string":b=!!e(c.depends,h.form).length;break;case"function":b=c.depends.call(h,h)}b?g[i]=void 0!==c.param?c.param:!0:delete g[i]}}),e.each(g,function(c,b){g[c]=e.isFunction(b)?b(h):b}),e.each(["minlength","maxlength"],function(){g[this]&&(g[this]=Number(g[this]))}),e.each(["rangelength","range"],function(){var b;g[this]&&(e.isArray(g[this])?g[this]=[Number(g[this][0]),Number(g[this][1])]:"string"==typeof g[this]&&(b=g[this].replace(/[\[\]]/g,"").split(/[\s,]+/),g[this]=[Number(b[0]),Number(b[1])]))}),e.validator.autoCreateRanges&&(g.min&&g.max&&(g.range=[g.min,g.max],delete g.min,delete g.max),g.minlength&&g.maxlength&&(g.rangelength=[g.minlength,g.maxlength],delete g.minlength,delete g.maxlength)),g},normalizeRule:function(g){if("string"==typeof g){var h={};e.each(g.split(/\s/),function(){h[this]=!0}),g=h}return g},addMethod:function(g,i,h){e.validator.methods[g]=i,e.validator.messages[g]=void 0!==h?h:e.validator.messages[g],i.length<3&&e.validator.addClassRules(g,e.validator.normalizeRule(g))},methods:{required:function(g,j,i){if(!this.depend(i,j)){return"dependency-mismatch"}if("select"===j.nodeName.toLowerCase()){var h=e(j).val();return h&&h.length>0}return this.checkable(j)?this.getLength(g,j)>0:e.trim(g).length>0},email:function(g,c){return this.optional(c)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(g)},url:function(g,c){return this.optional(c)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(g)},date:function(g,c){return this.optional(c)||!/Invalid|NaN/.test(new Date(g).toString())},dateISO:function(g,c){return this.optional(c)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(g)},number:function(g,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(g)},digits:function(g,c){return this.optional(c)||/^\d+$/.test(g)},creditcard:function(i,h){if(this.optional(h)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(i)){return !1}var n,m,l=0,k=0,j=!1;if(i=i.replace(/\D/g,""),i.length<13||i.length>19){return !1}for(n=i.length-1;n>=0;n--){m=i.charAt(n),k=parseInt(m,10),j&&(k*=2)>9&&(k-=9),l+=k,j=!j}return l%10===0},minlength:function(g,j,i){var h=e.isArray(g)?g.length:this.getLength(e.trim(g),j);return this.optional(j)||h>=i},maxlength:function(g,j,i){var h=e.isArray(g)?g.length:this.getLength(e.trim(g),j);return this.optional(j)||i>=h},rangelength:function(g,j,i){var h=e.isArray(g)?g.length:this.getLength(e.trim(g),j);return this.optional(j)||h>=i[0]&&h<=i[1]},min:function(h,g,i){return this.optional(g)||h>=i},max:function(h,g,i){return this.optional(g)||i>=h},range:function(h,g,i){return this.optional(g)||h>=i[0]&&h<=i[1]},equalTo:function(g,j,i){var h=e(i);return this.settings.onfocusout&&h.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(j).valid()}),g===h.val()},remote:function(h,m,l){if(this.optional(m)){return"dependency-mismatch"}var k,j,i=this.previousValue(m);return this.settings.messages[m.name]||(this.settings.messages[m.name]={}),i.originalMessage=this.settings.messages[m.name].remote,this.settings.messages[m.name].remote=i.message,l="string"==typeof l&&{url:l}||l,i.old===h?i.valid:(i.old=h,k=this,this.startRequest(m),j={},j[m.name]=h,e.ajax(e.extend(!0,{url:l,mode:"abort",port:"validate"+m.name,dataType:"json",data:j,context:k.currentForm,success:function(o){var n,g,c,b=o===!0||"true"===o;k.settings.messages[m.name].remote=i.originalMessage,b?(c=k.formSubmitted,k.prepareElement(m),k.formSubmitted=c,k.successList.push(m),delete k.invalid[m.name],k.showErrors()):(n={},g=o||k.defaultMessage(m,"remote"),n[m.name]=i.message=e.isFunction(g)?g(h):g,k.invalid[m.name]=!0,k.showErrors(n)),i.valid=b,k.stopRequest(m,b)}},l)),"pending")}}}),e.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var d,f={};e.ajaxPrefilter?e.ajaxPrefilter(function(g,c,i){var h=g.port;"abort"===g.mode&&(f[h]&&f[h].abort(),f[h]=i)}):(d=e.ajax,e.ajax=function(g){var c=("mode" in g?g:e.ajaxSettings).mode,b=("port" in g?g:e.ajaxSettings).port;return"abort"===c?(f[b]&&f[b].abort(),f[b]=d.apply(this,arguments),f[b]):d.apply(this,arguments)}),e.extend(e.fn,{validateDelegate:function(g,i,h){return this.bind(i,function(j){var b=e(j.target);return b.is(g)?h.apply(b,arguments):void 0})}})});(function(d,b){var e=/[<>&\r\n"']/gm;var c={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"#39;"};d.extend({fileDownload:function(o,h){var v=d.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:true},prepareCallback:function(B){},successCallback:function(B){},abortCallback:function(B){},failCallback:function(B,D,C){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",cookieDomain:null,popupWindowTitle:"Initiating file download...",encodeHTMLEntities:true},h);var A=new d.Deferred();var y=(navigator.userAgent||navigator.vendor||b.opera).toLowerCase();var s;var x;var g;if(/ip(ad|hone|od)/.test(y)){s=true}else{if(y.indexOf("android")!==-1){x=true}else{g=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(y)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(y.substr(0,4))}}var u=v.httpMethod.toUpperCase();if(x&&u!=="GET"&&v.androidPostUnsupportedMessageHtml){if(d().dialog){d("<div>").html(v.androidPostUnsupportedMessageHtml).dialog(v.dialogOptions)}else{alert(v.androidPostUnsupportedMessageHtml)}return A.reject()}var z=null;var m={onPrepare:function(B){if(v.preparingMessageHtml){z=d("<div>").html(v.preparingMessageHtml).dialog(v.dialogOptions)}else{if(v.prepareCallback){v.prepareCallback(B)}}},onSuccess:function(B){if(z){z.dialog("close")}v.successCallback(B);A.resolve(B)},onAbort:function(B){if(z){z.dialog("close")}v.abortCallback(B);A.reject(B)},onFail:function(B,D,C){if(z){z.dialog("close")}if(v.failMessageHtml){d("<div>").html(v.failMessageHtml).dialog(v.dialogOptions)}v.failCallback(B,D,C);A.reject(B,D)}};m.onPrepare(o);if(v.data!==null&&typeof v.data!=="string"){v.data=d.param(v.data)}var q,i,w,j;if(u==="GET"){if(v.data!==null){var t=o.indexOf("?");if(t!==-1){if(o.substring(o.length-1)!=="&"){o=o+"&"}}else{o=o+"?"}o=o+v.data}if(s||x){i=b.open(o);i.document.title=v.popupWindowTitle;b.focus()}else{if(g){b.location(o)}else{q=d("<iframe>").hide().prop("src",o).appendTo("body")}}}else{var l="";if(v.data!==null){d.each(v.data.replace(/\+/g," ").split("&"),function(){var D=this.split("=");var C=D[0];D.shift();var B=D.join("=");D=[C,B];var E=v.encodeHTMLEntities?k(decodeURIComponent(D[0])):decodeURIComponent(D[0]);if(E){var F=v.encodeHTMLEntities?k(decodeURIComponent(D[1])):decodeURIComponent(D[1]);l+='<input type="hidden" name="'+E+'" value="'+F+'" />'}})}if(g){j=d("<form>").appendTo("body");j.hide().prop("method",v.httpMethod).prop("action",o).html(l)}else{if(s){i=b.open("about:blank");i.document.title=v.popupWindowTitle;w=i.document;b.focus()}else{q=d("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body");w=f(q)}w.write("<html><head></head><body><form method='"+v.httpMethod+"' action='"+o+"'>"+l+"</form>"+v.popupWindowTitle+"</body></html>");j=d(w).find("form")}j.submit()}setTimeout(n,v.checkInterval);function n(){var I=v.cookieValue;if(typeof I=="string"){I=I.toLowerCase()}var C=v.cookieName.toLowerCase()+"="+I;if(document.cookie.toLowerCase().indexOf(C)>-1){m.onSuccess(o);var D=v.cookieName+"=; path="+v.cookiePath+"; expires="+new Date(0).toUTCString()+";";if(v.cookieDomain){D+=" domain="+v.cookieDomain+";"}document.cookie=D;p(false);return}if(i||q){try{var B=i?i.document:f(q);if(B&&B.body!==null&&B.body.innerHTML.length){var G=true;if(j&&j.length){var E=d(B.body).contents().first();try{if(E.length&&E[0]===j[0]){G=false}}catch(H){if(H&&H.number==-2146828218){G=true}else{throw H}}}if(G){setTimeout(function(){m.onFail(B.body.innerHTML,o);p(true)},100);return}}}catch(F){m.onFail("",o,F);p(true);return}}setTimeout(n,v.checkInterval)}function f(B){var C=B[0].contentWindow||B[0].contentDocument;if(C.document){C=C.document}return C}function p(B){setTimeout(function(){if(i){if(x){i.close()}if(s){if(i.focus){i.focus();if(B){i.close()}}}}},0)}function k(B){return B.replace(e,function(C){return"&"+c[C]})}var r=A.promise();r.abort=function(){p();q.attr("src","").html("");m.onAbort(o)};return r}})})(jQuery,this||window);jQuery.fn.setLoading=function(c){var b=jQuery(this).attr("id");$("#loading-indicator-"+b).html(c+"%")};jQuery.fn.showLoading=function(p){var o;var c={addClass:"",beforeShow:"",afterShow:"",hPos:"center",vPos:"center",indicatorZIndex:5001,overlayZIndex:5000,parent:"",marginTop:0,marginLeft:0,overlayWidth:null,overlayHeight:null};jQuery.extend(c,p);var b=jQuery('<div style="text-align:center"></div>');var j=jQuery('<div><i class="close fa fa-times-circle blue fa-3x"></i></div>');if(c.indicatorID){o=c.indicatorID}else{o=jQuery(this).attr("id")}jQuery(b).attr("id","loading-indicator-"+o);jQuery(b).addClass("loading-indicator");if(c.addClass){jQuery(b).addClass(c.addClass)}jQuery(j).css("display","none");jQuery(document.body).append(j);jQuery(j).attr("id","loading-indicator-"+o+"-overlay");jQuery(j).addClass("loading-indicator-overlay");if(c.addClass){jQuery(j).addClass(c.addClass+"-overlay")}var i=$(this);jQuery(j).on("click",".close",function(){i.hideLoading();try{NProgress.done()}catch(q){}});var d;var m;var k=jQuery(this).css("border-top-width");var n=jQuery(this).css("border-left-width");k=isNaN(parseInt(k))?0:k;n=isNaN(parseInt(n))?0:n;var h=jQuery(this).offset().left+parseInt(n);var f=jQuery(this).offset().top+parseInt(k);if(c.overlayWidth!==null){d=c.overlayWidth}else{d=parseInt(jQuery(this).width())+parseInt(jQuery(this).css("padding-right"))+parseInt(jQuery(this).css("padding-left"))}if(c.overlayHeight!==null){m=c.overlayWidth}else{m=parseInt(jQuery(this).height())+parseInt(jQuery(this).css("padding-top"))+parseInt(jQuery(this).css("padding-bottom"))}jQuery(j).css("width",d.toString()+"px");jQuery(j).css("height",m.toString()+"px");jQuery(j).css("left",h.toString()+"px");jQuery(j).css("position","absolute");jQuery(j).css("top",f.toString()+"px");jQuery(j).css("z-index",c.overlayZIndex);if(c.overlayCSS){jQuery(j).css(c.overlayCSS)}jQuery(b).css("display","none");jQuery(document.body).append(b);jQuery(b).css("position","absolute");jQuery(b).css("z-index",c.indicatorZIndex);var g=f;if(c.marginTop){g+=parseInt(c.marginTop)}var l=h;if(c.marginLeft){l+=parseInt(c.marginTop)}if(c.hPos.toString().toLowerCase()=="center"){jQuery(b).css("left",(l+((jQuery(j).width()-parseInt(jQuery(b).width()))/2)).toString()+"px")}else{if(c.hPos.toString().toLowerCase()=="left"){jQuery(b).css("left",(l+parseInt(jQuery(j).css("margin-left"))).toString()+"px")}else{if(c.hPos.toString().toLowerCase()=="right"){jQuery(b).css("left",(l+(jQuery(j).width()-parseInt(jQuery(b).width()))).toString()+"px")}else{jQuery(b).css("left",(l+parseInt(c.hPos)).toString()+"px")}}}if(c.vPos.toString().toLowerCase()=="center"){jQuery(b).css("top",(g+((jQuery(j).height()-parseInt(jQuery(b).height()))/2)).toString()+"px")}else{if(c.vPos.toString().toLowerCase()=="top"){jQuery(b).css("top",g.toString()+"px")}else{if(c.vPos.toString().toLowerCase()=="bottom"){jQuery(b).css("top",(g+(jQuery(j).height()-parseInt(jQuery(b).height()))).toString()+"px")}else{jQuery(b).css("top",(g+parseInt(c.vPos)).toString()+"px")}}}if(c.css){jQuery(b).css(c.css)}var e={overlay:j,indicator:b,element:this};if(typeof(c.beforeShow)=="function"){c.beforeShow(e)}jQuery(j).show();jQuery(b).show();if(typeof(c.afterShow)=="function"){c.afterShow(e)}return this};jQuery.fn.hideLoading=function(b){var c={};jQuery.extend(c,b);if(c.indicatorID){indicatorID=c.indicatorID}else{indicatorID=jQuery(this).attr("id")}jQuery(document.body).find("#loading-indicator-"+indicatorID).remove();jQuery(document.body).find("#loading-indicator-"+indicatorID+"-overlay").remove();return this};(function(){var w=this;var l=w._;var J=Array.prototype,h=Object.prototype,o=Function.prototype;var M=J.push,m=J.slice,d=h.toString,k=h.hasOwnProperty;var t=Array.isArray,f=Object.keys,K=o.bind,C=Object.create;var F=function(){};var Q=function(R){if(R instanceof Q){return R}if(!(this instanceof Q)){return new Q(R)}this._wrapped=R};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=Q}exports._=Q}else{w._=Q}Q.VERSION="1.8.3";var c=function(S,R,T){if(R===void 0){return S}switch(T==null?3:T){case 1:return function(U){return S.call(R,U)};case 2:return function(V,U){return S.call(R,V,U)};case 3:return function(V,U,W){return S.call(R,V,U,W)};case 4:return function(U,W,V,X){return S.call(R,U,W,V,X)}}return function(){return S.apply(R,arguments)}};var G=function(S,R,T){if(S==null){return Q.identity}if(Q.isFunction(S)){return c(S,R,T)}if(Q.isObject(S)){return Q.matcher(S)}return Q.property(S)};Q.iteratee=function(S,R){return G(S,R,Infinity)};var q=function(S,R){return function(aa){var Y=arguments.length;if(Y<2||aa==null){return aa}for(var U=1;U<Y;U++){var Z=arguments[U],X=S(Z),T=X.length;for(var W=0;W<T;W++){var V=X[W];if(!R||aa[V]===void 0){aa[V]=Z[V]}}}return aa}};var D=function(S){if(!Q.isObject(S)){return{}}if(C){return C(S)}F.prototype=S;var R=new F;F.prototype=null;return R};var N=function(R){return function(S){return S==null?void 0:S[R]}};var L=Math.pow(2,53)-1;var P=N("length");var E=function(S){var R=P(S);return typeof R=="number"&&R>=0&&R<=L};Q.each=Q.forEach=function(V,W,S){W=c(W,S);var R,U;if(E(V)){for(R=0,U=V.length;R<U;R++){W(V[R],R,V)}}else{var T=Q.keys(V);for(R=0,U=T.length;R<U;R++){W(V[T[R]],T[R],V)}}return V};Q.map=Q.collect=function(W,Y,T){Y=G(Y,T);var V=!E(W)&&Q.keys(W),U=(V||W).length,S=Array(U);for(var R=0;R<U;R++){var X=V?V[R]:R;S[R]=Y(W[X],X,W)}return S};function A(R){function S(X,Z,T,W,U,V){for(;U>=0&&U<V;U+=R){var Y=W?W[U]:U;T=Z(T,X[Y],Y,X)}return T}return function(Y,Z,T,V){Z=c(Z,V,4);var X=!E(Y)&&Q.keys(Y),W=(X||Y).length,U=R>0?0:W-1;if(arguments.length<3){T=Y[X?X[U]:U];U+=R}return S(Y,Z,T,X,U,W)}}Q.reduce=Q.foldl=Q.inject=A(1);Q.reduceRight=Q.foldr=A(-1);Q.find=Q.detect=function(U,R,T){var S;if(E(U)){S=Q.findIndex(U,R,T)}else{S=Q.findKey(U,R,T)}if(S!==void 0&&S!==-1){return U[S]}};Q.filter=Q.select=function(U,R,T){var S=[];R=G(R,T);Q.each(U,function(X,V,W){if(R(X,V,W)){S.push(X)}});return S};Q.reject=function(T,R,S){return Q.filter(T,Q.negate(G(R)),S)};Q.every=Q.all=function(W,R,T){R=G(R,T);var V=!E(W)&&Q.keys(W),U=(V||W).length;for(var S=0;S<U;S++){var X=V?V[S]:S;if(!R(W[X],X,W)){return false}}return true};Q.some=Q.any=function(W,R,T){R=G(R,T);var V=!E(W)&&Q.keys(W),U=(V||W).length;for(var S=0;S<U;S++){var X=V?V[S]:S;if(R(W[X],X,W)){return true}}return false};Q.contains=Q.includes=Q.include=function(U,T,R,S){if(!E(U)){U=Q.values(U)}if(typeof R!="number"||S){R=0}return Q.indexOf(U,T,R)>=0};Q.invoke=function(T,U){var R=m.call(arguments,2);var S=Q.isFunction(U);return Q.map(T,function(W){var V=S?U:W[U];return V==null?V:V.apply(W,R)})};Q.pluck=function(S,R){return Q.map(S,Q.property(R))};Q.where=function(S,R){return Q.filter(S,Q.matcher(R))};Q.findWhere=function(S,R){return Q.find(S,Q.matcher(R))};Q.max=function(U,W,R){var Z=-Infinity,X=-Infinity,Y,T;if(W==null&&U!=null){U=E(U)?U:Q.values(U);for(var V=0,S=U.length;V<S;V++){Y=U[V];if(Y>Z){Z=Y}}}else{W=G(W,R);Q.each(U,function(ac,aa,ab){T=W(ac,aa,ab);if(T>X||T===-Infinity&&Z===-Infinity){Z=ac;X=T}})}return Z};Q.min=function(U,W,R){var Z=Infinity,X=Infinity,Y,T;if(W==null&&U!=null){U=E(U)?U:Q.values(U);for(var V=0,S=U.length;V<S;V++){Y=U[V];if(Y<Z){Z=Y}}}else{W=G(W,R);Q.each(U,function(ac,aa,ab){T=W(ac,aa,ab);if(T<X||T===Infinity&&Z===Infinity){Z=ac;X=T}})}return Z};Q.shuffle=function(V){var W=E(V)?V:Q.values(V);var U=W.length;var R=Array(U);for(var S=0,T;S<U;S++){T=Q.random(0,S);if(T!==S){R[S]=R[T]}R[T]=W[S]}return R};Q.sample=function(S,T,R){if(T==null||R){if(!E(S)){S=Q.values(S)}return S[Q.random(S.length-1)]}return Q.shuffle(S).slice(0,Math.max(0,T))};Q.sortBy=function(S,T,R){T=G(T,R);return Q.pluck(Q.map(S,function(W,U,V){return{value:W,index:U,criteria:T(W,U,V)}}).sort(function(X,W){var V=X.criteria;var U=W.criteria;if(V!==U){if(V>U||V===void 0){return 1}if(V<U||U===void 0){return -1}}return X.index-W.index}),"value")};var r=function(R){return function(U,V,T){var S={};V=G(V,T);Q.each(U,function(Y,W){var X=V(Y,W,U);R(S,Y,X)});return S}};Q.groupBy=r(function(R,T,S){if(Q.has(R,S)){R[S].push(T)}else{R[S]=[T]}});Q.indexBy=r(function(R,T,S){R[S]=T});Q.countBy=r(function(R,T,S){if(Q.has(R,S)){R[S]++}else{R[S]=1}});Q.toArray=function(R){if(!R){return[]}if(Q.isArray(R)){return m.call(R)}if(E(R)){return Q.map(R,Q.identity)}return Q.values(R)};Q.size=function(R){if(R==null){return 0}return E(R)?R.length:Q.keys(R).length};Q.partition=function(V,R,T){R=G(R,T);var U=[],S=[];Q.each(V,function(X,W,Y){(R(X,W,Y)?U:S).push(X)});return[U,S]};Q.first=Q.head=Q.take=function(T,S,R){if(T==null){return void 0}if(S==null||R){return T[0]}return Q.initial(T,T.length-S)};Q.initial=function(T,S,R){return m.call(T,0,Math.max(0,T.length-(S==null||R?1:S)))};Q.last=function(T,S,R){if(T==null){return void 0}if(S==null||R){return T[T.length-1]}return Q.rest(T,Math.max(0,T.length-S))};Q.rest=Q.tail=Q.drop=function(T,S,R){return m.call(T,S==null||R?1:S)};Q.compact=function(R){return Q.filter(R,Q.identity)};var y=function(X,T,Y,ab){var S=[],aa=0;for(var V=ab||0,R=P(X);V<R;V++){var Z=X[V];if(E(Z)&&(Q.isArray(Z)||Q.isArguments(Z))){if(!T){Z=y(Z,T,Y)}var U=0,W=Z.length;S.length+=W;while(U<W){S[aa++]=Z[U++]}}else{if(!Y){S[aa++]=Z}}}return S};Q.flatten=function(S,R){return y(S,R,false)};Q.without=function(R){return Q.difference(R,m.call(arguments,1))};Q.uniq=Q.unique=function(Y,U,X,S){if(!Q.isBoolean(U)){S=X;X=U;U=false}if(X!=null){X=G(X,S)}var aa=[];var R=[];for(var W=0,T=P(Y);W<T;W++){var Z=Y[W],V=X?X(Z,W,Y):Z;if(U){if(!W||R!==V){aa.push(Z)}R=V}else{if(X){if(!Q.contains(R,V)){R.push(V);aa.push(Z)}}else{if(!Q.contains(aa,Z)){aa.push(Z)}}}}return aa};Q.union=function(){return Q.uniq(y(arguments,true,true))};Q.intersection=function(X){var R=[];var W=arguments.length;for(var T=0,V=P(X);T<V;T++){var U=X[T];if(Q.contains(R,U)){continue}for(var S=1;S<W;S++){if(!Q.contains(arguments[S],U)){break}}if(S===W){R.push(U)}}return R};Q.difference=function(S){var R=y(arguments,true,true,1);return Q.filter(S,function(T){return !Q.contains(R,T)})};Q.zip=function(){return Q.unzip(arguments)};Q.unzip=function(U){var T=U&&Q.max(U,P).length||0;var R=Array(T);for(var S=0;S<T;S++){R[S]=Q.pluck(U,S)}return R};Q.object=function(V,S){var R={};for(var T=0,U=P(V);T<U;T++){if(S){R[V[T]]=S[T]}else{R[V[T][0]]=V[T][1]}}return R};function v(R){return function(W,S,U){S=G(S,U);var V=P(W);var T=R>0?0:V-1;for(;T>=0&&T<V;T+=R){if(S(W[T],T,W)){return T}}return -1}}Q.findIndex=v(1);Q.findLastIndex=v(-1);Q.sortedIndex=function(Y,W,X,T){X=G(X,T,1);var V=X(W);var R=0,U=P(Y);while(R<U){var S=Math.floor((R+U)/2);if(X(Y[S])<V){R=S+1}else{U=S}}return R};function g(R,S,T){return function(Y,X,U){var V=0,W=P(Y);if(typeof U=="number"){if(R>0){V=U>=0?U:Math.max(U+W,V)}else{W=U>=0?Math.min(U+1,W):U+W+1}}else{if(T&&U&&W){U=T(Y,X);return Y[U]===X?U:-1}}if(X!==X){U=S(m.call(Y,V,W),Q.isNaN);return U>=0?U+V:-1}for(U=R>0?V:W-1;U>=0&&U<W;U+=R){if(Y[U]===X){return U}}return -1}}Q.indexOf=g(1,Q.findIndex,Q.sortedIndex);Q.lastIndexOf=g(-1,Q.findLastIndex);Q.range=function(W,T,V){if(T==null){T=W||0;W=0}V=V||1;var U=Math.max(Math.ceil((T-W)/V),0);var S=Array(U);for(var R=0;R<U;R++,W+=V){S[R]=W}return S};var z=function(W,T,V,X,U){if(!(X instanceof T)){return W.apply(V,U)}var S=D(W.prototype);var R=W.apply(S,U);if(Q.isObject(R)){return R}return S};Q.bind=function(U,S){if(K&&U.bind===K){return K.apply(U,m.call(arguments,1))}if(!Q.isFunction(U)){throw new TypeError("Bind must be called on a function")}var R=m.call(arguments,2);var T=function(){return z(U,T,S,this,R.concat(m.call(arguments)))};return T};Q.partial=function(S){var T=m.call(arguments,1);var R=function(){var U=0,X=T.length;var V=Array(X);for(var W=0;W<X;W++){V[W]=T[W]===Q?arguments[U++]:T[W]}while(U<arguments.length){V.push(arguments[U++])}return z(S,R,this,this,V)};return R};Q.bindAll=function(U){var S,T=arguments.length,R;if(T<=1){throw new Error("bindAll must be passed function names")}for(S=1;S<T;S++){R=arguments[S];U[R]=Q.bind(U[R],U)}return U};Q.memoize=function(S,R){var T=function(W){var V=T.cache;var U=""+(R?R.apply(this,arguments):W);if(!Q.has(V,U)){V[U]=S.apply(this,arguments)}return V[U]};T.cache={};return T};Q.delay=function(S,T){var R=m.call(arguments,2);return setTimeout(function(){return S.apply(null,R)},T)};Q.defer=Q.partial(Q.delay,Q,1);Q.throttle=function(S,U,Y){var R,W,Z;var X=null;var V=0;if(!Y){Y={}}var T=function(){V=Y.leading===false?0:Q.now();X=null;Z=S.apply(R,W);if(!X){R=W=null}};return function(){var aa=Q.now();if(!V&&Y.leading===false){V=aa}var ab=U-(aa-V);R=this;W=arguments;if(ab<=0||ab>U){if(X){clearTimeout(X);X=null}V=aa;Z=S.apply(R,W);if(!X){R=W=null}}else{if(!X&&Y.trailing!==false){X=setTimeout(T,ab)}}return Z}};Q.debounce=function(T,V,S){var Y,X,R,W,Z;var U=function(){var aa=Q.now()-W;if(aa<V&&aa>=0){Y=setTimeout(U,V-aa)}else{Y=null;if(!S){Z=T.apply(R,X);if(!Y){R=X=null}}}};return function(){R=this;X=arguments;W=Q.now();var aa=S&&!Y;if(!Y){Y=setTimeout(U,V)}if(aa){Z=T.apply(R,X);R=X=null}return Z}};Q.wrap=function(R,S){return Q.partial(S,R)};Q.negate=function(R){return function(){return !R.apply(this,arguments)}};Q.compose=function(){var R=arguments;var S=R.length-1;return function(){var U=S;var T=R[S].apply(this,arguments);while(U--){T=R[U].call(this,T)}return T}};Q.after=function(S,R){return function(){if(--S<1){return R.apply(this,arguments)}}};Q.before=function(T,S){var R;return function(){if(--T>0){R=S.apply(this,arguments)}if(T<=1){S=null}return R}};Q.once=Q.partial(Q.before,2);var H=!{toString:null}.propertyIsEnumerable("toString");var b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function e(V,U){var R=b.length;var S=V.constructor;var T=(Q.isFunction(S)&&S.prototype)||h;var W="constructor";if(Q.has(V,W)&&!Q.contains(U,W)){U.push(W)}while(R--){W=b[R];if(W in V&&V[W]!==T[W]&&!Q.contains(U,W)){U.push(W)}}}Q.keys=function(T){if(!Q.isObject(T)){return[]}if(f){return f(T)}var S=[];for(var R in T){if(Q.has(T,R)){S.push(R)}}if(H){e(T,S)}return S};Q.allKeys=function(T){if(!Q.isObject(T)){return[]}var S=[];for(var R in T){S.push(R)}if(H){e(T,S)}return S};Q.values=function(V){var U=Q.keys(V);var T=U.length;var R=Array(T);for(var S=0;S<T;S++){R[S]=V[U[S]]}return R};Q.mapObject=function(W,Y,T){Y=G(Y,T);var V=Q.keys(W),U=V.length,S={},X;for(var R=0;R<U;R++){X=V[R];S[X]=Y(W[X],X,W)}return S};Q.pairs=function(V){var T=Q.keys(V);var S=T.length;var U=Array(S);for(var R=0;R<S;R++){U[R]=[T[R],V[T[R]]]}return U};Q.invert=function(V){var R={};var U=Q.keys(V);for(var S=0,T=U.length;S<T;S++){R[V[U[S]]]=U[S]}return R};Q.functions=Q.methods=function(T){var S=[];for(var R in T){if(Q.isFunction(T[R])){S.push(R)}}return S.sort()};Q.extend=q(Q.allKeys);Q.extendOwn=Q.assign=q(Q.keys);Q.findKey=function(X,R,U){R=G(R,U);var W=Q.keys(X),T;for(var S=0,V=W.length;S<V;S++){T=W[S];if(R(X[T],T,X)){return T}}};Q.pick=function(T,X,R){var ab={},U=T,W,aa;if(U==null){return ab}if(Q.isFunction(X)){aa=Q.allKeys(U);W=c(X,R)}else{aa=y(arguments,false,false,1);W=function(ad,ac,ae){return ac in ae};U=Object(U)}for(var V=0,S=aa.length;V<S;V++){var Z=aa[V];var Y=U[Z];if(W(Y,Z,U)){ab[Z]=Y}}return ab};Q.omit=function(T,U,R){if(Q.isFunction(U)){U=Q.negate(U)}else{var S=Q.map(y(arguments,false,false,1),String);U=function(W,V){return !Q.contains(S,V)}}return Q.pick(T,U,R)};Q.defaults=q(Q.allKeys,true);Q.create=function(S,T){var R=D(S);if(T){Q.extendOwn(R,T)}return R};Q.clone=function(R){if(!Q.isObject(R)){return R}return Q.isArray(R)?R.slice():Q.extend({},R)};Q.tap=function(S,R){R(S);return S};Q.isMatch=function(S,R){var W=Q.keys(R),V=W.length;if(S==null){return !V}var X=Object(S);for(var U=0;U<V;U++){var T=W[U];if(R[T]!==X[T]||!(T in X)){return false}}return true};var O=function(Z,Y,S,U){if(Z===Y){return Z!==0||1/Z===1/Y}if(Z==null||Y==null){return Z===Y}if(Z instanceof Q){Z=Z._wrapped}if(Y instanceof Q){Y=Y._wrapped}var W=d.call(Z);if(W!==d.call(Y)){return false}switch(W){case"[object RegExp]":case"[object String]":return""+Z===""+Y;case"[object Number]":if(+Z!==+Z){return +Y!==+Y}return +Z===0?1/+Z===1/Y:+Z===+Y;case"[object Date]":case"[object Boolean]":return +Z===+Y}var T=W==="[object Array]";if(!T){if(typeof Z!="object"||typeof Y!="object"){return false}var X=Z.constructor,V=Y.constructor;if(X!==V&&!(Q.isFunction(X)&&X instanceof X&&Q.isFunction(V)&&V instanceof V)&&("constructor" in Z&&"constructor" in Y)){return false}}S=S||[];U=U||[];var R=S.length;while(R--){if(S[R]===Z){return U[R]===Y}}S.push(Z);U.push(Y);if(T){R=Z.length;if(R!==Y.length){return false}while(R--){if(!O(Z[R],Y[R],S,U)){return false}}}else{var ab=Q.keys(Z),aa;R=ab.length;if(Q.keys(Y).length!==R){return false}while(R--){aa=ab[R];if(!(Q.has(Y,aa)&&O(Z[aa],Y[aa],S,U))){return false}}}S.pop();U.pop();return true};Q.isEqual=function(S,R){return O(S,R)};Q.isEmpty=function(R){if(R==null){return true}if(E(R)&&(Q.isArray(R)||Q.isString(R)||Q.isArguments(R))){return R.length===0}return Q.keys(R).length===0};Q.isElement=function(R){return !!(R&&R.nodeType===1)};Q.isArray=t||function(R){return d.call(R)==="[object Array]"};Q.isObject=function(S){var R=typeof S;return R==="function"||R==="object"&&!!S};Q.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(R){Q["is"+R]=function(S){return d.call(S)==="[object "+R+"]"}});if(!Q.isArguments(arguments)){Q.isArguments=function(R){return Q.has(R,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){Q.isFunction=function(R){return typeof R=="function"||false}}Q.isFinite=function(R){return isFinite(R)&&!isNaN(parseFloat(R))};Q.isNaN=function(R){return Q.isNumber(R)&&R!==+R};Q.isBoolean=function(R){return R===true||R===false||d.call(R)==="[object Boolean]"};Q.isNull=function(R){return R===null};Q.isUndefined=function(R){return R===void 0};Q.has=function(S,R){return S!=null&&k.call(S,R)};Q.noConflict=function(){w._=l;return this};Q.identity=function(R){return R};Q.constant=function(R){return function(){return R}};Q.noop=function(){};Q.property=N;Q.propertyOf=function(R){return R==null?function(){}:function(S){return R[S]}};Q.matcher=Q.matches=function(R){R=Q.extendOwn({},R);return function(S){return Q.isMatch(S,R)}};Q.times=function(V,U,T){var R=Array(Math.max(0,V));U=c(U,T,1);for(var S=0;S<V;S++){R[S]=U(S)}return R};Q.random=function(S,R){if(R==null){R=S;S=0}return S+Math.floor(Math.random()*(R-S+1))};Q.now=Date.now||function(){return new Date().getTime()};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var n=Q.invert(s);var x=function(V){var S=function(W){return V[W]};var U="(?:"+Q.keys(V).join("|")+")";var T=RegExp(U);var R=RegExp(U,"g");return function(W){W=W==null?"":""+W;return T.test(W)?W.replace(R,S):W}};Q.escape=x(s);Q.unescape=x(n);Q.result=function(R,T,U){var S=R==null?void 0:R[T];if(S===void 0){S=U}return Q.isFunction(S)?S.call(R):S};var B=0;Q.uniqueId=function(R){var S=++B+"";return R?R+S:S};Q.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var u=/(.)^/;var i={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var j=/\\|'|\r|\n|\u2028|\u2029/g;var I=function(R){return"\\"+i[R]};Q.template=function(aa,U,X){if(!U&&X){U=X}U=Q.defaults({},U,Q.templateSettings);var V=RegExp([(U.escape||u).source,(U.interpolate||u).source,(U.evaluate||u).source].join("|")+"|$","g");var W=0;var R="__p+='";aa.replace(V,function(ac,ad,ab,af,ae){R+=aa.slice(W,ae).replace(j,I);W=ae+ac.length;if(ad){R+="'+\n((__t=("+ad+"))==null?'':_.escape(__t))+\n'"}else{if(ab){R+="'+\n((__t=("+ab+"))==null?'':__t)+\n'"}else{if(af){R+="';\n"+af+"\n__p+='"}}}return ac});R+="';\n";if(!U.variable){R="with(obj||{}){\n"+R+"}\n"}R="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+R+"return __p;\n";try{var T=new Function(U.variable||"obj","_",R)}catch(Y){Y.source=R;throw Y}var Z=function(ab){return T.call(this,ab,Q)};var S=U.variable||"obj";Z.source="function("+S+"){\n"+R+"}";return Z};Q.chain=function(S){var R=Q(S);R._chain=true;return R};var p=function(R,S){return R._chain?Q(S).chain():S};Q.mixin=function(R){Q.each(Q.functions(R),function(S){var T=Q[S]=R[S];Q.prototype[S]=function(){var U=[this._wrapped];M.apply(U,arguments);return p(this,T.apply(Q,U))}})};Q.mixin(Q);Q.each(["pop","push","reverse","shift","sort","splice","unshift"],function(R){var S=J[R];Q.prototype[R]=function(){var T=this._wrapped;S.apply(T,arguments);if((R==="shift"||R==="splice")&&T.length===0){delete T[0]}return p(this,T)}});Q.each(["concat","join","slice"],function(R){var S=J[R];Q.prototype[R]=function(){return p(this,S.apply(this._wrapped,arguments))}});Q.prototype.value=function(){return this._wrapped};Q.prototype.valueOf=Q.prototype.toJSON=Q.prototype.value;Q.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return Q})}}.call(this));!function(d,c){"function"==typeof define&&define.amd?define(["jquery"],c):"object"==typeof exports?module.exports=c(require("jquery")):d.bootbox=c(d.jQuery)}(this,function a(G,F){function E(d){var c=r[t.locale];return c?c[d]:r.en[d]}function D(b,h,g){b.stopPropagation(),b.preventDefault();var f=G.isFunction(g)&&g.call(h,b)===!1;f||h.modal("hide")}function C(e){var d,f=0;for(d in e){f++}return f}function B(b,f){var e=0;G.each(b,function(d,c){f(d,c,e++)})}function A(b){var f,e;if("object"!=typeof b){throw new Error("Please supply an object of options")}if(!b.message){throw new Error("Please specify a message")}return b=G.extend({},t,b),b.buttons||(b.buttons={}),f=b.buttons,e=C(f),B(f,function(c,g,d){if(G.isFunction(g)&&(g=f[c]={callback:g}),"object"!==G.type(g)){throw new Error("button with key "+c+" must be an object")}g.label||(g.label=c),g.className||(g.className=2>=e&&d===e-1?"btn-primary":"btn-default")}),b}function z(f,e){var h=f.length,g={};if(1>h||h>2){throw new Error("Invalid argument length")}return 2===h||"string"==typeof f[0]?(g[e[0]]=f[0],g[e[1]]=f[1]):g=f[0],g}function y(b,f,e){return G.extend(!0,{},b,z(f,e))}function x(g,f,j,i){var h={className:"bootbox-"+g,buttons:w.apply(null,f)};return v(y(h,i,j),f)}function w(){for(var h={},d=0,l=arguments.length;l>d;d++){var k=arguments[d],j=k.toLowerCase(),i=k.toUpperCase();h[j]={label:E(i)}}return h}function v(e,c){var f={};return B(c,function(g,d){f[d]=!0}),B(e.buttons,function(b){if(f[b]===F){throw new Error("button key "+b+" is not allowed (options are "+c.join("\n")+")")}}),e}var u={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},t={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},s={};s.alert=function(){var b;if(b=x("alert",["ok"],["message","callback"],arguments),b.callback&&!G.isFunction(b.callback)){throw new Error("alert requires callback property to be a function when provided")}return b.buttons.ok.callback=b.onEscape=function(){return G.isFunction(b.callback)?b.callback.call(this):!0},s.dialog(b)},s.confirm=function(){var b;if(b=x("confirm",["cancel","confirm"],["message","callback"],arguments),b.buttons.cancel.callback=b.onEscape=function(){return b.callback.call(this,!1)},b.buttons.confirm.callback=function(){return b.callback.call(this,!0)},!G.isFunction(b.callback)){throw new Error("confirm requires a callback")}return s.dialog(b)},s.prompt=function(){var H,p,n,m,l,j,g;if(m=G(u.form),p={className:"bootbox-prompt",buttons:w("cancel","confirm"),value:"",inputType:"text"},H=v(y(p,arguments,["title","callback"]),["cancel","confirm"]),j=H.show===F?!0:H.show,H.message=m,H.buttons.cancel.callback=H.onEscape=function(){return H.callback.call(this,null)},H.buttons.confirm.callback=function(){var f;switch(H.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":f=l.val();break;case"checkbox":var e=l.find("input:checked");f=[],B(e,function(h,i){f.push(G(i).val())})}return H.callback.call(this,f)},H.show=!1,!H.title){throw new Error("prompt requires a title")}if(!G.isFunction(H.callback)){throw new Error("prompt requires a callback")}if(!u.inputs[H.inputType]){throw new Error("invalid prompt type")}switch(l=G(u.inputs[H.inputType]),H.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":l.val(H.value);break;case"select":var c={};if(g=H.inputOptions||[],!G.isArray(g)){throw new Error("Please pass an array of input options")}if(!g.length){throw new Error("prompt with select requires options")}B(g,function(f,i){var h=l;if(i.value===F||i.text===F){throw new Error("given options in wrong format")}i.group&&(c[i.group]||(c[i.group]=G("<optgroup/>").attr("label",i.group)),h=c[i.group]),h.append("<option value='"+i.value+"'>"+i.text+"</option>")}),B(c,function(e,d){l.append(d)}),l.val(H.value);break;case"checkbox":var b=G.isArray(H.value)?H.value:[H.value];if(g=H.inputOptions||[],!g.length){throw new Error("prompt with checkbox requires options")}if(!g[0].value||!g[0].text){throw new Error("given options in wrong format")}l=G("<div/>"),B(g,function(i,h){var f=G(u.inputs[H.inputType]);f.find("input").attr("value",h.value),f.find("label").append(h.text),B(b,function(e,d){d===h.value&&f.find("input").prop("checked",!0)}),l.append(f)})}return H.placeholder&&l.attr("placeholder",H.placeholder),H.pattern&&l.attr("pattern",H.pattern),H.maxlength&&l.attr("maxlength",H.maxlength),m.append(l),m.on("submit",function(d){d.preventDefault(),d.stopPropagation(),n.find(".btn-primary").click()}),n=s.dialog(H),n.off("shown.bs.modal"),n.on("shown.bs.modal",function(){l.focus()}),j===!0&&n.modal("show"),n},s.dialog=function(e){e=A(e);var p=G(u.dialog),o=p.find(".modal-dialog"),n=p.find(".modal-body"),h=e.buttons,g="",c={onEscape:e.onEscape};if(G.fn.modal===F){throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.")}if(B(h,function(f,d){g+="<button data-bb-handler='"+f+"' type='button' class='btn "+d.className+"'>"+d.label+"</button>",c[f]=d.callback}),n.find(".bootbox-body").html(e.message),e.animate===!0&&p.addClass("fade"),e.className&&p.addClass(e.className),"large"===e.size?o.addClass("modal-lg"):"small"===e.size&&o.addClass("modal-sm"),e.title&&n.before(u.header),e.closeButton){var b=G(u.closeButton);e.title?p.find(".modal-header").prepend(b):b.css("margin-top","-10px").prependTo(n)}return e.title&&p.find(".modal-title").html(e.title),g.length&&(n.after(u.footer),p.find(".modal-footer").html(g)),p.on("hidden.bs.modal",function(d){d.target===this&&p.remove()}),p.on("shown.bs.modal",function(){p.find(".btn-primary:first").focus()}),"static"!==e.backdrop&&p.on("click.dismiss.bs.modal",function(d){p.children(".modal-backdrop").length&&(d.currentTarget=p.children(".modal-backdrop").get(0)),d.target===d.currentTarget&&p.trigger("escape.close.bb")}),p.on("escape.close.bb",function(d){c.onEscape&&D(d,p,c.onEscape)}),p.on("click",".modal-footer button",function(d){var f=G(this).data("bb-handler");D(d,p,c[f])}),p.on("click",".bootbox-close-button",function(d){D(d,p,c.onEscape)}),p.on("keyup",function(d){27===d.which&&p.trigger("escape.close.bb")}),G(e.container).append(p),p.modal({backdrop:e.backdrop?"static":!1,keyboard:!1,show:!1}),e.show&&p.modal("show"),p},s.setDefaults=function(){var b={};2===arguments.length?b[arguments[0]]=arguments[1]:b=arguments[0],G.extend(t,b)},s.hideAll=function(){return G(".bootbox").modal("hide"),s};var r={bg_BG:{OK:"",CANCEL:"",CONFIRM:""},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zruit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"",CANCEL:"",CONFIRM:""},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"",CANCEL:"",CONFIRM:""},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"",CANCEL:"",CONFIRM:""},hu:{OK:"OK",CANCEL:"Mgsem",CONFIRM:"Megerst"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"",CONFIRM:""},lt:{OK:"Gerai",CANCEL:"Ataukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprint"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"",CONFIRM:""},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"",CANCEL:"",CONFIRM:""},tr:{OK:"Tamam",CANCEL:"ptal",CONFIRM:"Onayla"},zh_CN:{OK:"",CANCEL:"",CONFIRM:""},zh_TW:{OK:"OK",CANCEL:"",CONFIRM:""}};return s.addLocale=function(b,d){return G.each(["OK","CANCEL","CONFIRM"],function(e,c){if(!d[c]){throw new Error("Please supply a translation for '"+c+"'")}}),r[b]={OK:d.OK,CANCEL:d.CANCEL,CONFIRM:d.CONFIRM},s},s.removeLocale=function(b){return delete r[b],s},s.setLocale=function(b){return s.setDefaults("locale",b)},s.init=function(b){return a(b||G)},s});
/*!
 * Select2 4.0.1
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){b(require("jquery"))}else{b(jQuery)}}}(function(d){var c=(function(){if(d&&d.fn&&d.fn.select2&&d.fn.select2.amd){var e=d.fn.select2.amd}var e;(function(){if(!e||!e.requirejs){if(!e){e={}}else{f=e}var g,f,h;(function(m){var p,i,t,u,l={},k={},A={},x={},s=Object.prototype.hasOwnProperty,q=[].slice,r=/\.js$/;function B(C,D){return s.call(C,D)}function v(F,D){var N,J,H,K,O,G,Q,R,M,L,I,P=D&&D.split("/"),E=A.map,C=(E&&E["*"])||{};if(F&&F.charAt(0)==="."){if(D){F=F.split("/");O=F.length-1;if(A.nodeIdCompat&&r.test(F[O])){F[O]=F[O].replace(r,"")}F=P.slice(0,P.length-1).concat(F);for(M=0;M<F.length;M+=1){I=F[M];if(I==="."){F.splice(M,1);M-=1}else{if(I===".."){if(M===1&&(F[2]===".."||F[0]==="..")){break}else{if(M>0){F.splice(M-1,2);M-=2}}}}}F=F.join("/")}else{if(F.indexOf("./")===0){F=F.substring(2)}}}if((P||C)&&E){N=F.split("/");for(M=N.length;M>0;M-=1){J=N.slice(0,M).join("/");if(P){for(L=P.length;L>0;L-=1){H=E[P.slice(0,L).join("/")];if(H){H=H[J];if(H){K=H;G=M;break}}}}if(K){break}if(!Q&&C&&C[J]){Q=C[J];R=M}}if(!K&&Q){K=Q;G=R}if(K){N.splice(0,G,K);F=N.join("/")}}return F}function z(C,D){return function(){var E=q.call(arguments,0);if(typeof E[0]!=="string"&&E.length===1){E.push(null)}return i.apply(m,E.concat([C,D]))}}function w(C){return function(D){return v(D,C)}}function n(C){return function(D){l[C]=D}}function o(D){if(B(k,D)){var C=k[D];delete k[D];x[D]=true;p.apply(m,C)}if(!B(l,D)&&!B(x,D)){throw new Error("No "+D)}return l[D]}function y(D){var E,C=D?D.indexOf("!"):-1;if(C>-1){E=D.substring(0,C);D=D.substring(C+1,D.length)}return[E,D]}t=function(D,C){var E,G=y(D),F=G[0];D=G[1];if(F){F=v(F,C);E=o(F)}if(F){if(E&&E.normalize){D=E.normalize(D,w(C))}else{D=v(D,C)}}else{D=v(D,C);G=y(D);F=G[0];D=G[1];if(F){E=o(F)}}return{f:F?F+"!"+D:D,n:D,pr:F,p:E}};function j(C){return function(){return(A&&A.config&&A.config[C])||{}}}u={require:function(C){return z(C)},exports:function(C){var D=l[C];if(typeof D!=="undefined"){return D}else{return(l[C]={})}},module:function(C){return{id:C,uri:"",exports:l[C],config:j(C)}}};p=function(D,N,M,L){var G,K,H,C,F,I=[],E=typeof M,J;L=L||D;if(E==="undefined"||E==="function"){N=!N.length&&M.length?["require","exports","module"]:N;for(F=0;F<N.length;F+=1){C=t(N[F],L);K=C.f;if(K==="require"){I[F]=u.require(D)}else{if(K==="exports"){I[F]=u.exports(D);J=true}else{if(K==="module"){G=I[F]=u.module(D)}else{if(B(l,K)||B(k,K)||B(x,K)){I[F]=o(K)}else{if(C.p){C.p.load(C.n,z(L,true),n(K),{});I[F]=l[K]}else{throw new Error(D+" missing "+K)}}}}}}H=M?M.apply(l[D],I):undefined;if(D){if(G&&G.exports!==m&&G.exports!==l[D]){l[D]=G.exports}else{if(H!==m||!J){l[D]=H}}}}else{if(D){l[D]=M}}};g=f=i=function(F,G,C,D,E){if(typeof F==="string"){if(u[F]){return u[F](G)}return o(t(F,G).f)}else{if(!F.splice){A=F;if(A.deps){i(A.deps,A.callback)}if(!G){return}if(G.splice){F=G;G=C;C=null}else{F=m}}}G=G||function(){};if(typeof C==="function"){C=D;D=E}if(D){p(m,F,G,C)}else{setTimeout(function(){p(m,F,G,C)},4)}return i};i.config=function(C){return i(C)};g._defined=l;h=function(C,D,E){if(typeof C!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!D.splice){E=D;D=[]}if(!B(l,C)&&!B(k,C)){k[C]=[C,D,E]}};h.amd={jQuery:true}}());e.requirejs=g;e.require=f;e.define=h}}());e.define("almond",function(){});e.define("jquery",[],function(){var f=d||$;if(f==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page.")}return f});e.define("select2/utils",["jquery"],function(i){var h={};h.Extend=function(n,k){var l={}.hasOwnProperty;function j(){this.constructor=n}for(var m in k){if(l.call(k,m)){n[m]=k[m]}}j.prototype=k.prototype;n.prototype=new j();n.__super__=k.prototype;return n};function g(o){var n=o.prototype;var l=[];for(var k in n){var j=n[k];if(typeof j!=="function"){continue}if(k==="constructor"){continue}l.push(k)}return l}h.Decorate=function(r,q){var p=g(q);var o=g(r);function u(){var v=Array.prototype.unshift;var w=q.prototype.constructor.length;var m=r.prototype.constructor;if(w>0){v.call(arguments,r.prototype.constructor);m=q.prototype.constructor}m.apply(this,arguments)}q.displayName=r.displayName;function j(){this.constructor=u}u.prototype=new j();for(var n=0;n<o.length;n++){var k=o[n];u.prototype[k]=r.prototype[k]}var t=function(m){var v=function(){};if(m in u.prototype){v=u.prototype[m]}var w=q.prototype[m];return function(){var x=Array.prototype.unshift;x.call(arguments,v);return w.apply(this,arguments)}};for(var s=0;s<p.length;s++){var l=p[s];u.prototype[l]=t(l)}return u};var f=function(){this.listeners={}};f.prototype.on=function(j,k){this.listeners=this.listeners||{};if(j in this.listeners){this.listeners[j].push(k)}else{this.listeners[j]=[k]}};f.prototype.trigger=function(j){var k=Array.prototype.slice;this.listeners=this.listeners||{};if(j in this.listeners){this.invoke(this.listeners[j],k.call(arguments,1))}if("*" in this.listeners){this.invoke(this.listeners["*"],arguments)}};f.prototype.invoke=function(l,m){for(var k=0,j=l.length;k<j;k++){l[k].apply(this,m)}};h.Observable=f;h.generateChars=function(m){var l="";for(var k=0;k<m;k++){var j=Math.floor(Math.random()*36);l+=j.toString(36)}return l};h.bind=function(k,j){return function(){k.apply(j,arguments)}};h._convertData=function(p){for(var o in p){var n=o.split("-");var j=p;if(n.length===1){continue}for(var l=0;l<n.length;l++){var m=n[l];m=m.substring(0,1).toLowerCase()+m.substring(1);if(!(m in j)){j[m]={}}if(l==n.length-1){j[m]=p[o]}j=j[m]}delete p[o]}return p};h.hasScroll=function(l,n){var m=i(n);var k=n.style.overflowX;var j=n.style.overflowY;if(k===j&&(j==="hidden"||j==="visible")){return false}if(k==="scroll"||j==="scroll"){return true}return(m.innerHeight()<n.scrollHeight||m.innerWidth()<n.scrollWidth)};h.escapeMarkup=function(j){var k={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof j!=="string"){return j}return String(j).replace(/[&<>"'\/\\]/g,function(l){return k[l]})};h.appendMany=function(j,l){if(i.fn.jquery.substr(0,3)==="1.7"){var k=i();i.map(l,function(m){k=k.add(m)});l=k}j.append(l)};return h});e.define("select2/results",["jquery","./utils"],function(h,g){function f(i,j,k){this.$element=i;this.data=k;this.options=j;f.__super__.constructor.call(this)}g.Extend(f,g.Observable);f.prototype.render=function(){var i=h('<ul class="select2-results__options" role="tree"></ul>');if(this.options.get("multiple")){i.attr("aria-multiselectable","true")}this.$results=i;return i};f.prototype.clear=function(){this.$results.empty()};f.prototype.displayMessage=function(l){var i=this.options.get("escapeMarkup");this.clear();this.hideLoading();var j=h('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>');var k=this.options.get("translations").get(l.message);j.append(i(k(l.args)));j[0].className+=" select2-results__message";this.$results.append(j)};f.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};f.prototype.append=function(k){this.hideLoading();var i=[];if(k.results==null||k.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}k.results=this.sort(k.results);for(var m=0;m<k.results.length;m++){var j=k.results[m];var l=this.option(j);i.push(l)}this.$results.append(i)};f.prototype.position=function(i,j){var k=j.find(".select2-results");k.append(i)};f.prototype.sort=function(i){var j=this.options.get("sorter");return j(i)};f.prototype.setClasses=function(){var i=this;this.data.current(function(m){var k=h.map(m,function(n){return n.id.toString()});var j=i.$results.find(".select2-results__option[aria-selected]");j.each(function(){var o=h(this);var n=h.data(this,"data");var p=""+n.id;if((n.element!=null&&n.element.selected)||(n.element==null&&h.inArray(p,k)>-1)){o.attr("aria-selected","true")}else{o.attr("aria-selected","false")}});var l=j.filter("[aria-selected=true]");if(l.length>0){l.first().trigger("mouseenter")}else{j.first().trigger("mouseenter")}})};f.prototype.showLoading=function(k){this.hideLoading();var j=this.options.get("translations").get("searching");var l={disabled:true,loading:true,text:j(k)};var i=this.option(l);i.className+=" loading-results";this.$results.prepend(i)};f.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};f.prototype.option=function(m){var n=document.createElement("li");n.className="select2-results__option";var u={role:"treeitem","aria-selected":"false"};if(m.disabled){delete u["aria-selected"];u["aria-disabled"]="true"}if(m.id==null){delete u["aria-selected"]}if(m._resultId!=null){n.id=m._resultId}if(m.title){n.title=m.title}if(m.children){u.role="group";u["aria-label"]=m.text;delete u["aria-selected"]}for(var o in u){var l=u[o];n.setAttribute(o,l)}if(m.children){var i=h(n);var s=document.createElement("strong");s.className="select2-results__group";var r=h(s);this.template(m,s);var t=[];for(var q=0;q<m.children.length;q++){var k=m.children[q];var j=this.option(k);t.push(j)}var p=h("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});p.append(t);i.append(s);i.append(p)}else{this.template(m,n)}h.data(n,"data",m);return n};f.prototype.bind=function(i,k){var j=this;var l=i.id+"-results";this.$results.attr("id",l);i.on("results:all",function(m){j.clear();j.append(m.data);if(i.isOpen()){j.setClasses()}});i.on("results:append",function(m){j.append(m.data);if(i.isOpen()){j.setClasses()}});i.on("query",function(m){j.hideMessages();j.showLoading(m)});i.on("select",function(){if(!i.isOpen()){return}j.setClasses()});i.on("unselect",function(){if(!i.isOpen()){return}j.setClasses()});i.on("open",function(){j.$results.attr("aria-expanded","true");j.$results.attr("aria-hidden","false");j.setClasses();j.ensureHighlightVisible()});i.on("close",function(){j.$results.attr("aria-expanded","false");j.$results.attr("aria-hidden","true");j.$results.removeAttr("aria-activedescendant")});i.on("results:toggle",function(){var m=j.getHighlightedResults();if(m.length===0){return}m.trigger("mouseup")});i.on("results:select",function(){var m=j.getHighlightedResults();if(m.length===0){return}var n=m.data("data");if(m.attr("aria-selected")=="true"){j.trigger("close",{})}else{j.trigger("select",{data:n})}});i.on("results:previous",function(){var o=j.getHighlightedResults();var n=j.$results.find("[aria-selected]");var q=n.index(o);if(q===0){return}var m=q-1;if(o.length===0){m=0}var p=n.eq(m);p.trigger("mouseenter");var t=j.$results.offset().top;var s=p.offset().top;var r=j.$results.scrollTop()+(s-t);if(m===0){j.$results.scrollTop(0)}else{if(s-t<0){j.$results.scrollTop(r)}}});i.on("results:next",function(){var o=j.getHighlightedResults();var n=j.$results.find("[aria-selected]");var q=n.index(o);var m=q+1;if(m>=n.length){return}var p=n.eq(m);p.trigger("mouseenter");var t=j.$results.offset().top+j.$results.outerHeight(false);var s=p.offset().top+p.outerHeight(false);var r=j.$results.scrollTop()+s-t;if(m===0){j.$results.scrollTop(0)}else{if(s>t){j.$results.scrollTop(r)}}});i.on("results:focus",function(m){m.element.addClass("select2-results__option--highlighted")});i.on("results:message",function(m){j.displayMessage(m)});if(h.fn.mousewheel){this.$results.on("mousewheel",function(p){var o=j.$results.scrollTop();var m=(j.$results.get(0).scrollHeight-j.$results.scrollTop()+p.deltaY);var q=p.deltaY>0&&o-p.deltaY<=0;var n=p.deltaY<0&&m<=j.$results.height();if(q){j.$results.scrollTop(0);p.preventDefault();p.stopPropagation()}else{if(n){j.$results.scrollTop(j.$results.get(0).scrollHeight-j.$results.height());p.preventDefault();p.stopPropagation()}}})}this.$results.on("mouseup",".select2-results__option[aria-selected]",function(m){var o=h(this);var n=o.data("data");if(o.attr("aria-selected")==="true"){if(j.options.get("multiple")){j.trigger("unselect",{originalEvent:m,data:n})}else{j.trigger("close",{})}return}j.trigger("select",{originalEvent:m,data:n})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(m){var n=h(this).data("data");j.getHighlightedResults().removeClass("select2-results__option--highlighted");j.trigger("results:focus",{data:n,element:h(this)})})};f.prototype.getHighlightedResults=function(){var i=this.$results.find(".select2-results__option--highlighted");return i};f.prototype.destroy=function(){this.$results.remove()};f.prototype.ensureHighlightVisible=function(){var j=this.getHighlightedResults();if(j.length===0){return}var i=this.$results.find("[aria-selected]");var k=i.index(j);var n=this.$results.offset().top;var m=j.offset().top;var l=this.$results.scrollTop()+(m-n);var o=m-n;l-=j.outerHeight(false)*2;if(k<=2){this.$results.scrollTop(0)}else{if(o>this.$results.outerHeight()||o<0){this.$results.scrollTop(l)}}};f.prototype.template=function(j,k){var l=this.options.get("templateResult");var i=this.options.get("escapeMarkup");var m=l(j,k);if(m==null){k.style.display="none"}else{if(typeof m==="string"){k.innerHTML=i(m)}else{h(k).append(m)}}};return f});e.define("select2/keys",[],function(){var f={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return f});e.define("select2/selection/base",["jquery","../utils","../keys"],function(i,h,f){function g(j,k){this.$element=j;this.options=k;g.__super__.constructor.call(this)}h.Extend(g,h.Observable);g.prototype.render=function(){var j=i('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');this._tabindex=0;if(this.$element.data("old-tabindex")!=null){this._tabindex=this.$element.data("old-tabindex")}else{if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}}j.attr("title",this.$element.attr("title"));j.attr("tabindex",this._tabindex);this.$selection=j;return j};g.prototype.bind=function(j,m){var l=this;var n=j.id+"-container";var k=j.id+"-results";this.container=j;this.$selection.on("focus",function(o){l.trigger("focus",o)});this.$selection.on("blur",function(o){l._handleBlur(o)});this.$selection.on("keydown",function(o){l.trigger("keypress",o);if(o.which===f.SPACE){o.preventDefault()}});j.on("results:focus",function(o){l.$selection.attr("aria-activedescendant",o.data._resultId)});j.on("selection:update",function(o){l.update(o.data)});j.on("open",function(){l.$selection.attr("aria-expanded","true");l.$selection.attr("aria-owns",k);l._attachCloseHandler(j)});j.on("close",function(){l.$selection.attr("aria-expanded","false");l.$selection.removeAttr("aria-activedescendant");l.$selection.removeAttr("aria-owns");l.$selection.focus();l._detachCloseHandler(j)});j.on("enable",function(){l.$selection.attr("tabindex",l._tabindex)});j.on("disable",function(){l.$selection.attr("tabindex","-1")})};g.prototype._handleBlur=function(j){var k=this;window.setTimeout(function(){if((document.activeElement==k.$selection[0])||(i.contains(k.$selection[0],document.activeElement))){return}k.trigger("blur",j)},1)};g.prototype._attachCloseHandler=function(j){var k=this;i(document.body).on("mousedown.select2."+j.id,function(o){var l=i(o.target);var m=l.closest(".select2");var n=i(".select2.select2-container--open");n.each(function(){var q=i(this);if(this==m[0]){return}var p=q.data("element");p.select2("close")})})};g.prototype._detachCloseHandler=function(j){i(document.body).off("mousedown.select2."+j.id)};g.prototype.position=function(j,l){var k=l.find(".selection");k.append(j)};g.prototype.destroy=function(){this._detachCloseHandler(this.container)};g.prototype.update=function(j){throw new Error("The `update` method must be defined in child classes.")};return g});e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(i,g,h,f){function j(){j.__super__.constructor.apply(this,arguments)}h.Extend(j,g);j.prototype.render=function(){var k=j.__super__.render.call(this);k.addClass("select2-selection--single");k.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>');return k};j.prototype.bind=function(k,m){var l=this;j.__super__.bind.apply(this,arguments);var n=k.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n);this.$selection.attr("aria-labelledby",n);this.$selection.on("mousedown",function(o){if(o.which!==1){return}l.trigger("toggle",{originalEvent:o})});this.$selection.on("focus",function(o){});this.$selection.on("blur",function(o){});k.on("selection:update",function(o){l.update(o.data)})};j.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()};j.prototype.display=function(n,l){var m=this.options.get("templateSelection");var k=this.options.get("escapeMarkup");return k(m(n,l))};j.prototype.selectionContainer=function(){return i("<span></span>")};j.prototype.update=function(m){if(m.length===0){this.clear();return}var k=m[0];var n=this.$selection.find(".select2-selection__rendered");var l=this.display(k,n);n.empty().append(l);n.prop("title",k.title||k.text)};return j});e.define("select2/selection/multiple",["jquery","./base","../utils"],function(i,f,h){function g(j,k){g.__super__.constructor.apply(this,arguments)}h.Extend(g,f);g.prototype.render=function(){var j=g.__super__.render.call(this);j.addClass("select2-selection--multiple");j.html('<ul class="select2-selection__rendered"></ul>');return j};g.prototype.bind=function(j,l){var k=this;g.__super__.bind.apply(this,arguments);this.$selection.on("click",function(m){k.trigger("toggle",{originalEvent:m})});this.$selection.on("click",".select2-selection__choice__remove",function(n){if(k.options.get("disabled")){return}var o=i(this);var m=o.parent();var p=m.data("data");k.trigger("unselect",{originalEvent:n,data:p})})};g.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()};g.prototype.display=function(m,k){var l=this.options.get("templateSelection");var j=this.options.get("escapeMarkup");return j(l(m,k))};g.prototype.selectionContainer=function(){var j=i('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return j};g.prototype.update=function(n){this.clear();if(n.length===0){return}var k=[];for(var p=0;p<n.length;p++){var l=n[p];var j=this.selectionContainer();var m=this.display(l,j);j.append(m);j.prop("title",l.title||l.text);j.data("data",l);k.push(j)}var o=this.$selection.find(".select2-selection__rendered");h.appendMany(o,k)};return g});e.define("select2/selection/placeholder",["../utils"],function(g){function f(j,h,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));j.call(this,h,i)}f.prototype.normalizePlaceholder=function(h,i){if(typeof i==="string"){i={id:"",text:i}}return i};f.prototype.createPlaceholder=function(i,j){var h=this.selectionContainer();h.html(this.display(j));h.addClass("select2-selection__placeholder").removeClass("select2-selection__choice");return h};f.prototype.update=function(l,k){var i=(k.length==1&&k[0].id!=this.placeholder.id);var j=k.length>1;if(j||i){return l.call(this,k)}this.clear();var h=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(h)};return f});e.define("select2/selection/allowClear",["jquery","../keys"],function(g,f){function h(){}h.prototype.bind=function(k,i,l){var j=this;k.call(this,i,l);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",function(m){j._handleClear(m)});i.on("keypress",function(m){j._handleKeyboardClear(m,i)})};h.prototype._handleClear=function(j,i){if(this.options.get("disabled")){return}var m=this.$selection.find(".select2-selection__clear");if(m.length===0){return}i.stopPropagation();var l=m.data("data");for(var n=0;n<l.length;n++){var k={data:l[n]};this.trigger("unselect",k);if(k.prevented){return}}this.$element.val(this.placeholder.id).trigger("change");this.trigger("toggle",{})};h.prototype._handleKeyboardClear=function(k,j,i){if(i.isOpen()){return}if(j.which==f.DELETE||j.which==f.BACKSPACE){this._handleClear(j)}};h.prototype.update=function(k,j){k.call(this,j);if(this.$selection.find(".select2-selection__placeholder").length>0||j.length===0){return}var i=g('<span class="select2-selection__clear">&times;</span>');i.data("data",j);this.$selection.find(".select2-selection__rendered").prepend(i)};return h});e.define("select2/selection/search",["jquery","../utils","../keys"],function(i,h,f){function g(l,j,k){l.call(this,j,k)}g.prototype.render=function(k){var j=i('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=j;this.$search=j.find("input");var l=k.call(this);this._transferTabIndex();return l};g.prototype.bind=function(n,k,o){var l=this;n.call(this,k,o);k.on("open",function(){l.$search.trigger("focus")});k.on("close",function(){l.$search.val("");l.$search.removeAttr("aria-activedescendant");l.$search.trigger("focus")});k.on("enable",function(){l.$search.prop("disabled",false);l._transferTabIndex()});k.on("disable",function(){l.$search.prop("disabled",true)});k.on("focus",function(p){l.$search.trigger("focus")});k.on("results:focus",function(p){l.$search.attr("aria-activedescendant",p.id)});this.$selection.on("focusin",".select2-search--inline",function(p){l.trigger("focus",p)});this.$selection.on("focusout",".select2-search--inline",function(p){l._handleBlur(p)});this.$selection.on("keydown",".select2-search--inline",function(p){p.stopPropagation();l.trigger("keypress",p);l._keyUpPrevented=p.isDefaultPrevented();var r=p.which;if(r===f.BACKSPACE&&l.$search.val()===""){var q=l.$searchContainer.prev(".select2-selection__choice");if(q.length>0){var s=q.data("data");l.searchRemoveChoice(s);p.preventDefault()}}});var m=document.documentMode;var j=m&&m<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(p){if(j){l.$selection.off("input.search input.searchcheck");return}l.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(p){if(j&&p.type==="input"){l.$selection.off("input.search input.searchcheck");return}var q=p.which;if(q==f.SHIFT||q==f.CTRL||q==f.ALT){return}if(q==f.TAB){return}l.handleSearch(p)})};g.prototype._transferTabIndex=function(j){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};g.prototype.createPlaceholder=function(j,k){this.$search.attr("placeholder",k.text)};g.prototype.update=function(l,k){var j=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");l.call(this,k);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(j){this.$search.focus()}};g.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var j=this.$search.val();this.trigger("query",{term:j})}this._keyUpPrevented=false};g.prototype.searchRemoveChoice=function(k,j){this.trigger("unselect",{data:j});this.$search.val(j.text);this.handleSearch()};g.prototype.resizeSearch=function(){this.$search.css("width","25px");var j="";if(this.$search.attr("placeholder")!==""){j=this.$selection.find(".select2-selection__rendered").innerWidth()}else{var k=this.$search.val().length+1;j=(k*0.75)+"em"}this.$search.css("width",j)};return g});e.define("select2/selection/eventRelay",["jquery"],function(f){function g(){}g.prototype.bind=function(l,h,m){var i=this;var j=["open","opening","close","closing","select","selecting","unselect","unselecting"];var k=["opening","closing","selecting","unselecting"];l.call(this,h,m);h.on("*",function(o,p){if(f.inArray(o,j)===-1){return}p=p||{};var n=f.Event("select2:"+o,{params:p});i.$element.trigger(n);if(f.inArray(o,k)===-1){return}p.prevented=n.isDefaultPrevented()})};return g});e.define("select2/translation",["jquery","require"],function(h,g){function f(i){this.dict=i||{}}f.prototype.all=function(){return this.dict};f.prototype.get=function(i){return this.dict[i]};f.prototype.extend=function(i){this.dict=h.extend({},i.all(),this.dict)};f._cache={};f.loadPath=function(j){if(!(j in f._cache)){var i=g(j);f._cache[j]=i}return new f(f._cache[j])};return f});e.define("select2/diacritics",[],function(){var f={"\u24B6":"A","\uFF21":"A","\u00C0":"A","\u00C1":"A","\u00C2":"A","\u1EA6":"A","\u1EA4":"A","\u1EAA":"A","\u1EA8":"A","\u00C3":"A","\u0100":"A","\u0102":"A","\u1EB0":"A","\u1EAE":"A","\u1EB4":"A","\u1EB2":"A","\u0226":"A","\u01E0":"A","\u00C4":"A","\u01DE":"A","\u1EA2":"A","\u00C5":"A","\u01FA":"A","\u01CD":"A","\u0200":"A","\u0202":"A","\u1EA0":"A","\u1EAC":"A","\u1EB6":"A","\u1E00":"A","\u0104":"A","\u023A":"A","\u2C6F":"A","\uA732":"AA","\u00C6":"AE","\u01FC":"AE","\u01E2":"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B","\uFF22":"B","\u1E02":"B","\u1E04":"B","\u1E06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24B8":"C","\uFF23":"C","\u0106":"C","\u0108":"C","\u010A":"C","\u010C":"C","\u00C7":"C","\u1E08":"C","\u0187":"C","\u023B":"C","\uA73E":"C","\u24B9":"D","\uFF24":"D","\u1E0A":"D","\u010E":"D","\u1E0C":"D","\u1E10":"D","\u1E12":"D","\u1E0E":"D","\u0110":"D","\u018B":"D","\u018A":"D","\u0189":"D","\uA779":"D","\u01F1":"DZ","\u01C4":"DZ","\u01F2":"Dz","\u01C5":"Dz","\u24BA":"E","\uFF25":"E","\u00C8":"E","\u00C9":"E","\u00CA":"E","\u1EC0":"E","\u1EBE":"E","\u1EC4":"E","\u1EC2":"E","\u1EBC":"E","\u0112":"E","\u1E14":"E","\u1E16":"E","\u0114":"E","\u0116":"E","\u00CB":"E","\u1EBA":"E","\u011A":"E","\u0204":"E","\u0206":"E","\u1EB8":"E","\u1EC6":"E","\u0228":"E","\u1E1C":"E","\u0118":"E","\u1E18":"E","\u1E1A":"E","\u0190":"E","\u018E":"E","\u24BB":"F","\uFF26":"F","\u1E1E":"F","\u0191":"F","\uA77B":"F","\u24BC":"G","\uFF27":"G","\u01F4":"G","\u011C":"G","\u1E20":"G","\u011E":"G","\u0120":"G","\u01E6":"G","\u0122":"G","\u01E4":"G","\u0193":"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H","\uFF28":"H","\u0124":"H","\u1E22":"H","\u1E26":"H","\u021E":"H","\u1E24":"H","\u1E28":"H","\u1E2A":"H","\u0126":"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I","\uFF29":"I","\u00CC":"I","\u00CD":"I","\u00CE":"I","\u0128":"I","\u012A":"I","\u012C":"I","\u0130":"I","\u00CF":"I","\u1E2E":"I","\u1EC8":"I","\u01CF":"I","\u0208":"I","\u020A":"I","\u1ECA":"I","\u012E":"I","\u1E2C":"I","\u0197":"I","\u24BF":"J","\uFF2A":"J","\u0134":"J","\u0248":"J","\u24C0":"K","\uFF2B":"K","\u1E30":"K","\u01E8":"K","\u1E32":"K","\u0136":"K","\u1E34":"K","\u0198":"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L","\uFF2C":"L","\u013F":"L","\u0139":"L","\u013D":"L","\u1E36":"L","\u1E38":"L","\u013B":"L","\u1E3C":"L","\u1E3A":"L","\u0141":"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L","\u01C7":"LJ","\u01C8":"Lj","\u24C2":"M","\uFF2D":"M","\u1E3E":"M","\u1E40":"M","\u1E42":"M","\u2C6E":"M","\u019C":"M","\u24C3":"N","\uFF2E":"N","\u01F8":"N","\u0143":"N","\u00D1":"N","\u1E44":"N","\u0147":"N","\u1E46":"N","\u0145":"N","\u1E4A":"N","\u1E48":"N","\u0220":"N","\u019D":"N","\uA790":"N","\uA7A4":"N","\u01CA":"NJ","\u01CB":"Nj","\u24C4":"O","\uFF2F":"O","\u00D2":"O","\u00D3":"O","\u00D4":"O","\u1ED2":"O","\u1ED0":"O","\u1ED6":"O","\u1ED4":"O","\u00D5":"O","\u1E4C":"O","\u022C":"O","\u1E4E":"O","\u014C":"O","\u1E50":"O","\u1E52":"O","\u014E":"O","\u022E":"O","\u0230":"O","\u00D6":"O","\u022A":"O","\u1ECE":"O","\u0150":"O","\u01D1":"O","\u020C":"O","\u020E":"O","\u01A0":"O","\u1EDC":"O","\u1EDA":"O","\u1EE0":"O","\u1EDE":"O","\u1EE2":"O","\u1ECC":"O","\u1ED8":"O","\u01EA":"O","\u01EC":"O","\u00D8":"O","\u01FE":"O","\u0186":"O","\u019F":"O","\uA74A":"O","\uA74C":"O","\u01A2":"OI","\uA74E":"OO","\u0222":"OU","\u24C5":"P","\uFF30":"P","\u1E54":"P","\u1E56":"P","\u01A4":"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q","\uFF31":"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R","\uFF32":"R","\u0154":"R","\u1E58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1E5A":"R","\u1E5C":"R","\u0156":"R","\u1E5E":"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S","\uFF33":"S","\u1E9E":"S","\u015A":"S","\u1E64":"S","\u015C":"S","\u1E60":"S","\u0160":"S","\u1E66":"S","\u1E62":"S","\u1E68":"S","\u0218":"S","\u015E":"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T","\uFF34":"T","\u1E6A":"T","\u0164":"T","\u1E6C":"T","\u021A":"T","\u0162":"T","\u1E70":"T","\u1E6E":"T","\u0166":"T","\u01AC":"T","\u01AE":"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U","\uFF35":"U","\u00D9":"U","\u00DA":"U","\u00DB":"U","\u0168":"U","\u1E78":"U","\u016A":"U","\u1E7A":"U","\u016C":"U","\u00DC":"U","\u01DB":"U","\u01D7":"U","\u01D5":"U","\u01D9":"U","\u1EE6":"U","\u016E":"U","\u0170":"U","\u01D3":"U","\u0214":"U","\u0216":"U","\u01AF":"U","\u1EEA":"U","\u1EE8":"U","\u1EEE":"U","\u1EEC":"U","\u1EF0":"U","\u1EE4":"U","\u1E72":"U","\u0172":"U","\u1E76":"U","\u1E74":"U","\u0244":"U","\u24CB":"V","\uFF36":"V","\u1E7C":"V","\u1E7E":"V","\u01B2":"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W","\uFF37":"W","\u1E80":"W","\u1E82":"W","\u0174":"W","\u1E86":"W","\u1E84":"W","\u1E88":"W","\u2C72":"W","\u24CD":"X","\uFF38":"X","\u1E8A":"X","\u1E8C":"X","\u24CE":"Y","\uFF39":"Y","\u1EF2":"Y","\u00DD":"Y","\u0176":"Y","\u1EF8":"Y","\u0232":"Y","\u1E8E":"Y","\u0178":"Y","\u1EF6":"Y","\u1EF4":"Y","\u01B3":"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z","\uFF3A":"Z","\u0179":"Z","\u1E90":"Z","\u017B":"Z","\u017D":"Z","\u1E92":"Z","\u1E94":"Z","\u01B5":"Z","\u0224":"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a","\uFF41":"a","\u1E9A":"a","\u00E0":"a","\u00E1":"a","\u00E2":"a","\u1EA7":"a","\u1EA5":"a","\u1EAB":"a","\u1EA9":"a","\u00E3":"a","\u0101":"a","\u0103":"a","\u1EB1":"a","\u1EAF":"a","\u1EB5":"a","\u1EB3":"a","\u0227":"a","\u01E1":"a","\u00E4":"a","\u01DF":"a","\u1EA3":"a","\u00E5":"a","\u01FB":"a","\u01CE":"a","\u0201":"a","\u0203":"a","\u1EA1":"a","\u1EAD":"a","\u1EB7":"a","\u1E01":"a","\u0105":"a","\u2C65":"a","\u0250":"a","\uA733":"aa","\u00E6":"ae","\u01FD":"ae","\u01E3":"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b","\uFF42":"b","\u1E03":"b","\u1E05":"b","\u1E07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24D2":"c","\uFF43":"c","\u0107":"c","\u0109":"c","\u010B":"c","\u010D":"c","\u00E7":"c","\u1E09":"c","\u0188":"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d","\uFF44":"d","\u1E0B":"d","\u010F":"d","\u1E0D":"d","\u1E11":"d","\u1E13":"d","\u1E0F":"d","\u0111":"d","\u018C":"d","\u0256":"d","\u0257":"d","\uA77A":"d","\u01F3":"dz","\u01C6":"dz","\u24D4":"e","\uFF45":"e","\u00E8":"e","\u00E9":"e","\u00EA":"e","\u1EC1":"e","\u1EBF":"e","\u1EC5":"e","\u1EC3":"e","\u1EBD":"e","\u0113":"e","\u1E15":"e","\u1E17":"e","\u0115":"e","\u0117":"e","\u00EB":"e","\u1EBB":"e","\u011B":"e","\u0205":"e","\u0207":"e","\u1EB9":"e","\u1EC7":"e","\u0229":"e","\u1E1D":"e","\u0119":"e","\u1E19":"e","\u1E1B":"e","\u0247":"e","\u025B":"e","\u01DD":"e","\u24D5":"f","\uFF46":"f","\u1E1F":"f","\u0192":"f","\uA77C":"f","\u24D6":"g","\uFF47":"g","\u01F5":"g","\u011D":"g","\u1E21":"g","\u011F":"g","\u0121":"g","\u01E7":"g","\u0123":"g","\u01E5":"g","\u0260":"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h","\uFF48":"h","\u0125":"h","\u1E23":"h","\u1E27":"h","\u021F":"h","\u1E25":"h","\u1E29":"h","\u1E2B":"h","\u1E96":"h","\u0127":"h","\u2C68":"h","\u2C76":"h","\u0265":"h","\u0195":"hv","\u24D8":"i","\uFF49":"i","\u00EC":"i","\u00ED":"i","\u00EE":"i","\u0129":"i","\u012B":"i","\u012D":"i","\u00EF":"i","\u1E2F":"i","\u1EC9":"i","\u01D0":"i","\u0209":"i","\u020B":"i","\u1ECB":"i","\u012F":"i","\u1E2D":"i","\u0268":"i","\u0131":"i","\u24D9":"j","\uFF4A":"j","\u0135":"j","\u01F0":"j","\u0249":"j","\u24DA":"k","\uFF4B":"k","\u1E31":"k","\u01E9":"k","\u1E33":"k","\u0137":"k","\u1E35":"k","\u0199":"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l","\uFF4C":"l","\u0140":"l","\u013A":"l","\u013E":"l","\u1E37":"l","\u1E39":"l","\u013C":"l","\u1E3D":"l","\u1E3B":"l","\u017F":"l","\u0142":"l","\u019A":"l","\u026B":"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l","\u01C9":"lj","\u24DC":"m","\uFF4D":"m","\u1E3F":"m","\u1E41":"m","\u1E43":"m","\u0271":"m","\u026F":"m","\u24DD":"n","\uFF4E":"n","\u01F9":"n","\u0144":"n","\u00F1":"n","\u1E45":"n","\u0148":"n","\u1E47":"n","\u0146":"n","\u1E4B":"n","\u1E49":"n","\u019E":"n","\u0272":"n","\u0149":"n","\uA791":"n","\uA7A5":"n","\u01CC":"nj","\u24DE":"o","\uFF4F":"o","\u00F2":"o","\u00F3":"o","\u00F4":"o","\u1ED3":"o","\u1ED1":"o","\u1ED7":"o","\u1ED5":"o","\u00F5":"o","\u1E4D":"o","\u022D":"o","\u1E4F":"o","\u014D":"o","\u1E51":"o","\u1E53":"o","\u014F":"o","\u022F":"o","\u0231":"o","\u00F6":"o","\u022B":"o","\u1ECF":"o","\u0151":"o","\u01D2":"o","\u020D":"o","\u020F":"o","\u01A1":"o","\u1EDD":"o","\u1EDB":"o","\u1EE1":"o","\u1EDF":"o","\u1EE3":"o","\u1ECD":"o","\u1ED9":"o","\u01EB":"o","\u01ED":"o","\u00F8":"o","\u01FF":"o","\u0254":"o","\uA74B":"o","\uA74D":"o","\u0275":"o","\u01A3":"oi","\u0223":"ou","\uA74F":"oo","\u24DF":"p","\uFF50":"p","\u1E55":"p","\u1E57":"p","\u01A5":"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q","\uFF51":"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r","\uFF52":"r","\u0155":"r","\u1E59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1E5B":"r","\u1E5D":"r","\u0157":"r","\u1E5F":"r","\u024D":"r","\u027D":"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s","\uFF53":"s","\u00DF":"s","\u015B":"s","\u1E65":"s","\u015D":"s","\u1E61":"s","\u0161":"s","\u1E67":"s","\u1E63":"s","\u1E69":"s","\u0219":"s","\u015F":"s","\u023F":"s","\uA7A9":"s","\uA785":"s","\u1E9B":"s","\u24E3":"t","\uFF54":"t","\u1E6B":"t","\u1E97":"t","\u0165":"t","\u1E6D":"t","\u021B":"t","\u0163":"t","\u1E71":"t","\u1E6F":"t","\u0167":"t","\u01AD":"t","\u0288":"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u","\uFF55":"u","\u00F9":"u","\u00FA":"u","\u00FB":"u","\u0169":"u","\u1E79":"u","\u016B":"u","\u1E7B":"u","\u016D":"u","\u00FC":"u","\u01DC":"u","\u01D8":"u","\u01D6":"u","\u01DA":"u","\u1EE7":"u","\u016F":"u","\u0171":"u","\u01D4":"u","\u0215":"u","\u0217":"u","\u01B0":"u","\u1EEB":"u","\u1EE9":"u","\u1EEF":"u","\u1EED":"u","\u1EF1":"u","\u1EE5":"u","\u1E73":"u","\u0173":"u","\u1E77":"u","\u1E75":"u","\u0289":"u","\u24E5":"v","\uFF56":"v","\u1E7D":"v","\u1E7F":"v","\u028B":"v","\uA75F":"v","\u028C":"v","\uA761":"vy","\u24E6":"w","\uFF57":"w","\u1E81":"w","\u1E83":"w","\u0175":"w","\u1E87":"w","\u1E85":"w","\u1E98":"w","\u1E89":"w","\u2C73":"w","\u24E7":"x","\uFF58":"x","\u1E8B":"x","\u1E8D":"x","\u24E8":"y","\uFF59":"y","\u1EF3":"y","\u00FD":"y","\u0177":"y","\u1EF9":"y","\u0233":"y","\u1E8F":"y","\u00FF":"y","\u1EF7":"y","\u1E99":"y","\u1EF5":"y","\u01B4":"y","\u024F":"y","\u1EFF":"y","\u24E9":"z","\uFF5A":"z","\u017A":"z","\u1E91":"z","\u017C":"z","\u017E":"z","\u1E93":"z","\u1E95":"z","\u01B6":"z","\u0225":"z","\u0240":"z","\u2C6C":"z","\uA763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038A":"\u0399","\u03AA":"\u0399","\u038C":"\u039F","\u038E":"\u03A5","\u03AB":"\u03A5","\u038F":"\u03A9","\u03AC":"\u03B1","\u03AD":"\u03B5","\u03AE":"\u03B7","\u03AF":"\u03B9","\u03CA":"\u03B9","\u0390":"\u03B9","\u03CC":"\u03BF","\u03CD":"\u03C5","\u03CB":"\u03C5","\u03B0":"\u03C5","\u03C9":"\u03C9","\u03C2":"\u03C3"};return f});e.define("select2/data/base",["../utils"],function(g){function f(h,i){f.__super__.constructor.call(this)}g.Extend(f,g.Observable);f.prototype.current=function(h){throw new Error("The `current` method must be defined in child classes.")};f.prototype.query=function(h,i){throw new Error("The `query` method must be defined in child classes.")};f.prototype.bind=function(h,i){};f.prototype.destroy=function(){};f.prototype.generateResultId=function(h,i){var j=h.id+"-result-";j+=g.generateChars(4);if(i.id!=null){j+="-"+i.id.toString()}else{j+="-"+g.generateChars(4)}return j};return f});e.define("select2/data/select",["./base","../utils","jquery"],function(f,i,h){function g(j,k){this.$element=j;this.options=k;g.__super__.constructor.call(this)}i.Extend(g,f);g.prototype.current=function(l){var k=[];var j=this;this.$element.find(":selected").each(function(){var n=h(this);var m=j.item(n);k.push(m)});l(k)};g.prototype.select=function(k){var j=this;k.selected=true;if(h(k.element).is("option")){k.element.selected=true;this.$element.trigger("change");return}if(this.$element.prop("multiple")){this.current(function(m){var o=[];k=[k];k.push.apply(k,m);for(var n=0;n<k.length;n++){var p=k[n].id;if(h.inArray(p,o)===-1){o.push(p)}}j.$element.val(o);j.$element.trigger("change")})}else{var l=k.id;this.$element.val(l);this.$element.trigger("change")}};g.prototype.unselect=function(k){var j=this;if(!this.$element.prop("multiple")){return}k.selected=false;if(h(k.element).is("option")){k.element.selected=false;this.$element.trigger("change");return}this.current(function(l){var n=[];for(var m=0;m<l.length;m++){var o=l[m].id;if(o!==k.id&&h.inArray(o,n)===-1){n.push(o)}}j.$element.val(n);j.$element.trigger("change")})};g.prototype.bind=function(j,l){var k=this;this.container=j;j.on("select",function(m){k.select(m.data)});j.on("unselect",function(m){k.unselect(m.data)})};g.prototype.destroy=function(){this.$element.find("*").each(function(){h.removeData(this,"data")})};g.prototype.query=function(m,n){var l=[];var k=this;var j=this.$element.children();j.each(function(){var q=h(this);if(!q.is("option")&&!q.is("optgroup")){return}var o=k.item(q);var p=k.matches(m,o);if(p!==null){l.push(p)}});n({results:l})};g.prototype.addOptions=function(j){i.appendMany(this.$element,j)};g.prototype.option=function(k){var j;if(k.children){j=document.createElement("optgroup");j.label=k.text}else{j=document.createElement("option");if(j.textContent!==undefined){j.textContent=k.text}else{j.innerText=k.text}}if(k.id){j.value=k.id}if(k.disabled){j.disabled=true}if(k.selected){j.selected=true}if(k.title){j.title=k.title}var l=h(j);var m=this._normalizeItem(k);m.element=j;h.data(j,"data",m);return l};g.prototype.item=function(n){var m={};m=h.data(n[0],"data");if(m!=null){return m}if(n.is("option")){m={id:n.val(),text:n.text(),disabled:n.prop("disabled"),selected:n.prop("selected"),title:n.prop("title")}}else{if(n.is("optgroup")){m={text:n.prop("label"),children:[],title:n.prop("title")};var j=n.children("option");var k=[];for(var p=0;p<j.length;p++){var l=h(j[p]);var o=this.item(l);k.push(o)}m.children=k}}m=this._normalizeItem(m);m.element=n[0];h.data(n[0],"data",m);return m};g.prototype._normalizeItem=function(j){if(!h.isPlainObject(j)){j={id:j,text:j}}j=h.extend({},{text:""},j);var k={selected:false,disabled:false};if(j.id!=null){j.id=j.id.toString()}if(j.text!=null){j.text=j.text.toString()}if(j._resultId==null&&j.id&&this.container!=null){j._resultId=this.generateResultId(this.container,j)}return h.extend({},k,j)};g.prototype.matches=function(l,j){var k=this.options.get("matcher");return k(l,j)};return g});e.define("select2/data/array",["./select","../utils","jquery"],function(f,h,g){function i(j,k){var l=k.get("data")||[];i.__super__.constructor.call(this,j,k);this.addOptions(this.convertToOptions(l))}h.Extend(i,f);i.prototype.select=function(j){var k=this.$element.find("option").filter(function(l,m){return m.value==j.id.toString()});if(k.length===0){k=this.option(j);this.addOptions(k)}i.__super__.select.call(this,j)};i.prototype.convertToOptions=function(l){var v=this;var o=this.$element.find("option");var k=o.map(function(){return v.item(g(this)).id}).get();var n=[];function s(x){return function(){return g(this).val()==x.id}}for(var r=0;r<l.length;r++){var u=this._normalizeItem(l[r]);if(g.inArray(u.id,k)>=0){var p=o.filter(s(u));var q=this.item(p);var w=g.extend(true,{},q,u);var m=this.option(w);p.replaceWith(m);continue}var j=this.option(u);if(u.children){var t=this.convertToOptions(u.children);h.appendMany(j,t)}n.push(j)}return n};return i});e.define("select2/data/ajax",["./array","../utils","jquery"],function(i,h,g){function f(j,k){this.ajaxOptions=this._applyDefaults(k.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}f.__super__.constructor.call(this,j,k)}h.Extend(f,i);f.prototype._applyDefaults=function(j){var k={data:function(l){return g.extend({},l,{q:l.term})},transport:function(o,n,m){var l=g.ajax(o);l.then(n);l.fail(m);return l}};return g.extend({},k,j,true)};f.prototype.processResults=function(j){return j};f.prototype.query=function(n,o){var m=[];var j=this;if(this._request!=null){if(g.isFunction(this._request.abort)){this._request.abort()}this._request=null}var k=g.extend({type:"GET"},this.ajaxOptions);if(typeof k.url==="function"){k.url=k.url.call(this.$element,n)}if(typeof k.data==="function"){k.data=k.data.call(this.$element,n)}function l(){var p=k.transport(k,function(r){var q=j.processResults(r,n);if(j.options.get("debug")&&window.console&&console.error){if(!q||!q.results||!g.isArray(q.results)){console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")}}o(q)},function(){});j._request=p}if(this.ajaxOptions.delay&&n.term!==""){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(l,this.ajaxOptions.delay)}else{l()}};return f});e.define("select2/data/tags",["jquery"],function(g){function f(i,k,n){var o=n.get("tags");var j=n.get("createTag");if(j!==undefined){this.createTag=j}i.call(this,k,n);if(g.isArray(o)){for(var m=0;m<o.length;m++){var p=o[m];var l=this._normalizeItem(p);var h=this.option(l);this.$element.append(h)}}}f.prototype.query=function(i,j,l){var h=this;this._removeOldTags();if(j.term==null||j.page!=null){i.call(this,j,l);return}function k(q,n){var r=q.results;for(var s=0;s<r.length;s++){var t=r[s];var o=(t.children!=null&&!k({results:t.children},true));var p=t.text===j.term;if(p||o){if(n){return false}q.data=r;l(q);return}}if(n){return true}var u=h.createTag(j);if(u!=null){var m=h.option(u);m.attr("data-select2-tag",true);h.addOptions([m]);h.insertTag(r,u)}q.results=r;l(q)}i.call(this,j,k)};f.prototype.createTag=function(i,j){var h=g.trim(j.term);if(h===""){return null}return{id:h,text:h}};f.prototype.insertTag=function(i,j,h){j.unshift(h)};f.prototype._removeOldTags=function(j){var i=this._lastTag;var h=this.$element.find("option[data-select2-tag]");h.each(function(){if(this.selected){return}g(this).remove()})};return f});e.define("select2/data/tokenizer",["jquery"],function(g){function f(k,h,i){var j=i.get("tokenizer");if(j!==undefined){this.tokenizer=j}k.call(this,h,i)}f.prototype.bind=function(i,h,j){i.call(this,h,j);this.$search=h.dropdown.$search||h.selection.$search||j.find(".select2-search__field")};f.prototype.query=function(j,k,m){var i=this;function h(n){i.trigger("select",{data:n})}k.term=k.term||"";var l=this.tokenizer(k,this.options,h);if(l.term!==k.term){if(this.$search.length){this.$search.val(l.term);this.$search.focus()}k.term=l.term}j.call(this,k,m)};f.prototype.tokenizer=function(p,k,t,s){var l=t.get("tokenSeparators")||[];var j=k.term;var n=0;var o=this.createTag||function(i){return{id:i.term,text:i.term}};while(n<j.length){var r=j[n];if(g.inArray(r,l)===-1){n++;continue}var h=j.substr(0,n);var q=g.extend({},k,{term:h});var m=o(q);if(m==null){n++;continue}s(m);j=j.substr(n+1)||"";n=0}return{term:j}};return f});e.define("select2/data/minimumInputLength",[],function(){function f(i,h,g){this.minimumInputLength=g.get("minimumInputLength");i.call(this,h,g)}f.prototype.query=function(g,h,i){h.term=h.term||"";if(h.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:h.term,params:h}});return}g.call(this,h,i)};return f});e.define("select2/data/maximumInputLength",[],function(){function f(i,h,g){this.maximumInputLength=g.get("maximumInputLength");i.call(this,h,g)}f.prototype.query=function(g,h,i){h.term=h.term||"";if(this.maximumInputLength>0&&h.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:h.term,params:h}});return}g.call(this,h,i)};return f});e.define("select2/data/maximumSelectionLength",[],function(){function f(i,h,g){this.maximumSelectionLength=g.get("maximumSelectionLength");i.call(this,h,g)}f.prototype.query=function(h,i,j){var g=this;this.current(function(k){var l=k!=null?k.length:0;if(g.maximumSelectionLength>0&&l>=g.maximumSelectionLength){g.trigger("results:message",{message:"maximumSelected",args:{maximum:g.maximumSelectionLength}});return}h.call(g,i,j)})};return f});e.define("select2/dropdown",["jquery","./utils"],function(h,g){function f(i,j){this.$element=i;this.options=j;f.__super__.constructor.call(this)}g.Extend(f,g.Observable);f.prototype.render=function(){var i=h('<span class="select2-dropdown"><span class="select2-results"></span></span>');i.attr("dir",this.options.get("dir"));this.$dropdown=i;return i};f.prototype.bind=function(){};f.prototype.position=function(i,j){};f.prototype.destroy=function(){this.$dropdown.remove()};return f});e.define("select2/dropdown/search",["jquery","../utils"],function(h,g){function f(){}f.prototype.render=function(j){var k=j.call(this);var i=h('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');this.$searchContainer=i;this.$search=i.find("input");k.prepend(i);return k};f.prototype.bind=function(k,i,l){var j=this;k.call(this,i,l);this.$search.on("keydown",function(m){j.trigger("keypress",m);j._keyUpPrevented=m.isDefaultPrevented()});this.$search.on("input",function(m){h(this).off("keyup")});this.$search.on("keyup input",function(m){j.handleSearch(m)});i.on("open",function(){j.$search.attr("tabindex",0);j.$search.focus();window.setTimeout(function(){j.$search.focus()},0)});i.on("close",function(){j.$search.attr("tabindex",-1);j.$search.val("")});i.on("results:all",function(n){if(n.query.term==null||n.query.term===""){var m=j.showSearch(n);if(m){j.$searchContainer.removeClass("select2-search--hide")}else{j.$searchContainer.addClass("select2-search--hide")}}})};f.prototype.handleSearch=function(i){if(!this._keyUpPrevented){var j=this.$search.val();this.trigger("query",{term:j})}this._keyUpPrevented=false};f.prototype.showSearch=function(i,j){return true};return f});e.define("select2/dropdown/hidePlaceholder",[],function(){function f(i,g,h,j){this.placeholder=this.normalizePlaceholder(h.get("placeholder"));i.call(this,g,h,j)}f.prototype.append=function(h,g){g.results=this.removePlaceholder(g.results);h.call(this,g)};f.prototype.normalizePlaceholder=function(g,h){if(typeof h==="string"){h={id:"",text:h}}return h};f.prototype.removePlaceholder=function(g,j){var i=j.slice(0);for(var k=j.length-1;k>=0;k--){var h=j[k];if(this.placeholder.id===h.id){i.splice(k,1)}}return i};return f});e.define("select2/dropdown/infiniteScroll",["jquery"],function(g){function f(j,h,i,k){this.lastParams={};j.call(this,h,i,k);this.$loadingMore=this.createLoadingMore();this.loading=false}f.prototype.append=function(i,h){this.$loadingMore.remove();this.loading=false;i.call(this,h);if(this.showLoadingMore(h)){this.$results.append(this.$loadingMore)}};f.prototype.bind=function(j,h,k){var i=this;j.call(this,h,k);h.on("query",function(l){i.lastParams=l;i.loading=true});h.on("query:append",function(l){i.lastParams=l;i.loading=true});this.$results.on("scroll",function(){var n=g.contains(document.documentElement,i.$loadingMore[0]);if(i.loading||!n){return}var m=i.$results.offset().top+i.$results.outerHeight(false);var l=i.$loadingMore.offset().top+i.$loadingMore.outerHeight(false);if(m+50>=l){i.loadMore()}})};f.prototype.loadMore=function(){this.loading=true;var h=g.extend({},{page:1},this.lastParams);h.page++;this.trigger("query:append",h)};f.prototype.showLoadingMore=function(h,i){return i.pagination&&i.pagination.more};f.prototype.createLoadingMore=function(){var i=g('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>');var h=this.options.get("translations").get("loadingMore");i.html(h(this.lastParams));return i};return f});e.define("select2/dropdown/attachBody",["jquery","../utils"],function(h,g){function f(k,i,j){this.$dropdownParent=j.get("dropdownParent")||h(document.body);k.call(this,i,j)}f.prototype.bind=function(l,i,m){var k=this;var j=false;l.call(this,i,m);i.on("open",function(){k._showDropdown();k._attachPositioningHandler(i);if(!j){j=true;i.on("results:all",function(){k._positionDropdown();k._resizeDropdown()});i.on("results:append",function(){k._positionDropdown();k._resizeDropdown()})}});i.on("close",function(){k._hideDropdown();k._detachPositioningHandler(i)});this.$dropdownContainer.on("mousedown",function(n){n.stopPropagation()})};f.prototype.destroy=function(i){i.call(this);this.$dropdownContainer.remove()};f.prototype.position=function(i,j,k){j.attr("class",k.attr("class"));j.removeClass("select2");j.addClass("select2-container--open");j.css({position:"absolute",top:-999999});this.$container=k};f.prototype.render=function(i){var k=h("<span></span>");var j=i.call(this);k.append(j);this.$dropdownContainer=k;return k};f.prototype._hideDropdown=function(i){this.$dropdownContainer.detach()};f.prototype._attachPositioningHandler=function(o,i){var j=this;var l="scroll.select2."+i.id;var n="resize.select2."+i.id;var m="orientationchange.select2."+i.id;var k=this.$container.parents().filter(g.hasScroll);k.each(function(){h(this).data("select2-scroll-position",{x:h(this).scrollLeft(),y:h(this).scrollTop()})});k.on(l,function(q){var p=h(this).data("select2-scroll-position");h(this).scrollTop(p.y)});h(window).on(l+" "+n+" "+m,function(p){j._positionDropdown();j._resizeDropdown()})};f.prototype._detachPositioningHandler=function(n,i){var k="scroll.select2."+i.id;var m="resize.select2."+i.id;var l="orientationchange.select2."+i.id;var j=this.$container.parents().filter(g.hasScroll);j.off(k);h(window).off(k+" "+m+" "+l)};f.prototype._positionDropdown=function(){var l=h(window);var u=this.$dropdown.hasClass("select2-dropdown--above");var k=this.$dropdown.hasClass("select2-dropdown--below");var s=null;var n=this.$container.position();var m=this.$container.offset();m.bottom=m.top+this.$container.outerHeight(false);var j={height:this.$container.outerHeight(false)};j.top=m.top;j.bottom=m.top+j.height;var t={height:this.$dropdown.outerHeight(false)};var q={top:l.scrollTop(),bottom:l.scrollTop()+l.height()};var p=q.top<(m.top-t.height);var r=q.bottom>(m.bottom+t.height);var o={left:m.left,top:j.bottom};if(this.$dropdownParent[0].style.position!=="static"){var i=this.$dropdownParent.offset();o.top-=i.top;o.left-=i.left}if(!u&&!k){s="below"}if(!r&&p&&!u){s="above"}else{if(!p&&r&&u){s="below"}}if(s=="above"||(u&&s!=="below")){o.top=j.top-t.height}if(s!=null){this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+s);this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+s)}this.$dropdownContainer.css(o)};f.prototype._resizeDropdown=function(){var i={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){i.minWidth=i.width;i.width="auto"}this.$dropdown.css(i)};f.prototype._showDropdown=function(i){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return f});e.define("select2/dropdown/minimumResultsForSearch",[],function(){function g(j){var i=0;for(var k=0;k<j.length;k++){var h=j[k];if(h.children){i+=g(h.children)}else{i++}}return i}function f(j,h,i,k){this.minimumResultsForSearch=i.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}j.call(this,h,i,k)}f.prototype.showSearch=function(h,i){if(g(i.data.results)<this.minimumResultsForSearch){return false}return h.call(this,i)};return f});e.define("select2/dropdown/selectOnClose",[],function(){function f(){}f.prototype.bind=function(i,g,j){var h=this;i.call(this,g,j);g.on("close",function(){h._handleSelectOnClose()})};f.prototype._handleSelectOnClose=function(){var g=this.getHighlightedResults();if(g.length<1){return}var h=g.data("data");if((h.element!=null&&h.element.selected)||(h.element==null&&h.selected)){return}this.trigger("select",{data:h})};return f});e.define("select2/dropdown/closeOnSelect",[],function(){function f(){}f.prototype.bind=function(i,g,j){var h=this;i.call(this,g,j);g.on("select",function(k){h._selectTriggered(k)});g.on("unselect",function(k){h._selectTriggered(k)})};f.prototype._selectTriggered=function(i,h){var g=h.originalEvent;if(g&&g.ctrlKey){return}this.trigger("close",{})};return f});e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(f){var h=f.input.length-f.maximum;var g="Please delete "+h+" character";if(h!=1){g+="s"}return g},inputTooShort:function(f){var h=f.minimum-f.input.length;var g="Please enter "+h+" or more characters";return g},loadingMore:function(){return"Loading more results"},maximumSelected:function(f){var g="You can only select "+f.maximum+" item";if(f.maximum!=1){g+="s"}return g},noResults:function(){return"No results found"},searching:function(){return"Searching"}}});e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(h,l,F,p,u,H,k,D,G,f,v,J,C,t,g,y,i,E,I,x,B,n,r,A,s,w,m,j,z){function q(){this.reset()}q.prototype.apply=function(aa){aa=h.extend({},this.defaults,aa);if(aa.dataAdapter==null){if(aa.ajax!=null){aa.dataAdapter=g}else{if(aa.data!=null){aa.dataAdapter=t}else{aa.dataAdapter=C}}if(aa.minimumInputLength>0){aa.dataAdapter=f.Decorate(aa.dataAdapter,E)}if(aa.maximumInputLength>0){aa.dataAdapter=f.Decorate(aa.dataAdapter,I)}if(aa.maximumSelectionLength>0){aa.dataAdapter=f.Decorate(aa.dataAdapter,x)}if(aa.tags){aa.dataAdapter=f.Decorate(aa.dataAdapter,y)}if(aa.tokenSeparators!=null||aa.tokenizer!=null){aa.dataAdapter=f.Decorate(aa.dataAdapter,i)}if(aa.query!=null){var S=l(aa.amdBase+"compat/query");aa.dataAdapter=f.Decorate(aa.dataAdapter,S)}if(aa.initSelection!=null){var Z=l(aa.amdBase+"compat/initSelection");aa.dataAdapter=f.Decorate(aa.dataAdapter,Z)}}if(aa.resultsAdapter==null){aa.resultsAdapter=F;if(aa.ajax!=null){aa.resultsAdapter=f.Decorate(aa.resultsAdapter,A)}if(aa.placeholder!=null){aa.resultsAdapter=f.Decorate(aa.resultsAdapter,r)}if(aa.selectOnClose){aa.resultsAdapter=f.Decorate(aa.resultsAdapter,m)}}if(aa.dropdownAdapter==null){if(aa.multiple){aa.dropdownAdapter=B}else{var M=f.Decorate(B,n);aa.dropdownAdapter=M}if(aa.minimumResultsForSearch!==0){aa.dropdownAdapter=f.Decorate(aa.dropdownAdapter,w)}if(aa.closeOnSelect){aa.dropdownAdapter=f.Decorate(aa.dropdownAdapter,j)}if(aa.dropdownCssClass!=null||aa.dropdownCss!=null||aa.adaptDropdownCssClass!=null){var L=l(aa.amdBase+"compat/dropdownCss");aa.dropdownAdapter=f.Decorate(aa.dropdownAdapter,L)}aa.dropdownAdapter=f.Decorate(aa.dropdownAdapter,s)}if(aa.selectionAdapter==null){if(aa.multiple){aa.selectionAdapter=u}else{aa.selectionAdapter=p}if(aa.placeholder!=null){aa.selectionAdapter=f.Decorate(aa.selectionAdapter,H)}if(aa.allowClear){aa.selectionAdapter=f.Decorate(aa.selectionAdapter,k)}if(aa.multiple){aa.selectionAdapter=f.Decorate(aa.selectionAdapter,D)}if(aa.containerCssClass!=null||aa.containerCss!=null||aa.adaptContainerCssClass!=null){var U=l(aa.amdBase+"compat/containerCss");aa.selectionAdapter=f.Decorate(aa.selectionAdapter,U)}aa.selectionAdapter=f.Decorate(aa.selectionAdapter,G)}if(typeof aa.language==="string"){if(aa.language.indexOf("-")>0){var P=aa.language.split("-");var R=P[0];aa.language=[aa.language,R]}else{aa.language=[aa.language]}}if(h.isArray(aa.language)){var O=new v();aa.language.push("en");var X=aa.language;for(var N=0;N<X.length;N++){var K=X[N];var Q={};try{Q=v.loadPath(K)}catch(T){try{K=this.defaults.amdLanguageBase+K;Q=v.loadPath(K)}catch(W){if(aa.debug&&window.console&&console.warn){console.warn('Select2: The language file for "'+K+'" could not be automatically loaded. A fallback will be used instead.')}continue}}O.extend(Q)}aa.translations=O}else{var V=v.loadPath(this.defaults.amdLanguageBase+"en");var Y=new v(aa.language);Y.extend(V);aa.translations=Y}return aa};q.prototype.reset=function(){function L(N){function M(O){return J[O]||O}return N.replace(/[^\u0000-\u007E]/g,M)}function K(R,Q){if(h.trim(R.term)===""){return Q}if(Q.children&&Q.children.length>0){var M=h.extend(true,{},Q);for(var T=Q.children.length-1;T>=0;T--){var S=Q.children[T];var P=K(R,S);if(P==null){M.children.splice(T,1)}}if(M.children.length>0){return M}return K(R,M)}var O=L(Q.text).toUpperCase();var N=L(R.term).toUpperCase();if(O.indexOf(N)>-1){return Q}return null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:f.escapeMarkup,language:z,matcher:K,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,sorter:function(M){return M},templateResult:function(M){return M.text},templateSelection:function(M){return M.text},theme:"default",width:"resolve"}};q.prototype.set=function(L,N){var K=h.camelCase(L);var M={};M[K]=N;var O=f._convertData(M);h.extend(this.defaults,O)};var o=new q();return o});e.define("select2/options",["require","jquery","./defaults","./utils"],function(g,i,j,h){function f(m,k){this.options=m;if(k!=null){this.fromElement(k)}this.options=j.apply(this.options);if(k&&k.is("input")){var l=g(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=h.Decorate(this.options.dataAdapter,l)}}f.prototype.fromElement=function(k){var m=["select2"];if(this.options.multiple==null){this.options.multiple=k.prop("multiple")}if(this.options.disabled==null){this.options.disabled=k.prop("disabled")}if(this.options.language==null){if(k.prop("lang")){this.options.language=k.prop("lang").toLowerCase()}else{if(k.closest("[lang]").prop("lang")){this.options.language=k.closest("[lang]").prop("lang")}}}if(this.options.dir==null){if(k.prop("dir")){this.options.dir=k.prop("dir")}else{if(k.closest("[dir]").prop("dir")){this.options.dir=k.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}}k.prop("disabled",this.options.disabled);k.prop("multiple",this.options.multiple);if(k.data("select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.')}k.data("data",k.data("select2Tags"));k.data("tags",true)}if(k.data("ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2.")}k.attr("ajax--url",k.data("ajaxUrl"));k.data("ajax--url",k.data("ajaxUrl"))}var o={};if(i.fn.jquery&&i.fn.jquery.substr(0,2)=="1."&&k[0].dataset){o=i.extend(true,{},k[0].dataset,k.data())}else{o=k.data()}var n=i.extend(true,{},o);n=h._convertData(n);for(var l in n){if(i.inArray(l,m)>-1){continue}if(i.isPlainObject(this.options[l])){i.extend(this.options[l],n[l])}else{this.options[l]=n[l]}}return this};f.prototype.get=function(k){return this.options[k]};f.prototype.set=function(k,l){this.options[k]=l};return f});e.define("select2/core",["jquery","./options","./utils","./keys"],function(j,h,i,f){var g=function(p,s){if(p.data("select2")!=null){p.data("select2").destroy()}this.$element=p;this.id=this._generateId(p);s=s||{};this.options=new h(s,p);g.__super__.constructor.call(this);var n=p.attr("tabindex")||0;p.data("old-tabindex",n);p.attr("tabindex","-1");var m=this.options.get("dataAdapter");this.dataAdapter=new m(p,this.options);var r=this.render();this._placeContainer(r);var o=this.options.get("selectionAdapter");this.selection=new o(p,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,r);var k=this.options.get("dropdownAdapter");this.dropdown=new k(p,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,r);var l=this.options.get("resultsAdapter");this.results=new l(p,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var q=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(t){q.trigger("selection:update",{data:t})});p.addClass("select2-hidden-accessible");p.attr("aria-hidden","true");this._syncAttributes();p.data("select2",this)};i.Extend(g,i.Observable);g.prototype._generateId=function(k){var l="";if(k.attr("id")!=null){l=k.attr("id")}else{if(k.attr("name")!=null){l=k.attr("name")+"-"+i.generateChars(2)}else{l=i.generateChars(4)}}l="select2-"+l;return l};g.prototype._placeContainer=function(l){l.insertAfter(this.$element);var k=this._resolveWidth(this.$element,this.options.get("width"));if(k!=null){l.css("width",k)}};g.prototype._resolveWidth=function(v,k){var t=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(k=="resolve"){var o=this._resolveWidth(v,"style");if(o!=null){return o}return this._resolveWidth(v,"element")}if(k=="element"){var s=v.outerWidth(false);if(s<=0){return"auto"}return s+"px"}if(k=="style"){var m=v.attr("style");if(typeof(m)!=="string"){return null}var u=m.split(";");for(var p=0,n=u.length;p<n;p=p+1){var r=u[p].replace(/\s/g,"");var q=r.match(t);if(q!==null&&q.length>=1){return q[1]}}return null}return k};g.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};g.prototype._registerDomEvents=function(){var l=this;this.$element.on("change.select2",function(){l.dataAdapter.current(function(m){l.trigger("selection:update",{data:m})})});this._sync=i.bind(this._syncAttributes,this);if(this.$element[0].attachEvent){this.$element[0].attachEvent("onpropertychange",this._sync)}var k=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(k!=null){this._observer=new k(function(m){j.each(m,l._sync)});this._observer.observe(this.$element[0],{attributes:true,subtree:false})}else{if(this.$element[0].addEventListener){this.$element[0].addEventListener("DOMAttrModified",l._sync,false)}}};g.prototype._registerDataEvents=function(){var k=this;this.dataAdapter.on("*",function(l,m){k.trigger(l,m)})};g.prototype._registerSelectionEvents=function(){var k=this;var l=["toggle","focus"];this.selection.on("toggle",function(){k.toggleDropdown()});this.selection.on("focus",function(m){k.focus(m)});this.selection.on("*",function(m,n){if(j.inArray(m,l)!==-1){return}k.trigger(m,n)})};g.prototype._registerDropdownEvents=function(){var k=this;this.dropdown.on("*",function(l,m){k.trigger(l,m)})};g.prototype._registerResultsEvents=function(){var k=this;this.results.on("*",function(l,m){k.trigger(l,m)})};g.prototype._registerEvents=function(){var k=this;this.on("open",function(){k.$container.addClass("select2-container--open")});this.on("close",function(){k.$container.removeClass("select2-container--open")});this.on("enable",function(){k.$container.removeClass("select2-container--disabled")});this.on("disable",function(){k.$container.addClass("select2-container--disabled")});this.on("blur",function(){k.$container.removeClass("select2-container--focus")});this.on("query",function(l){if(!k.isOpen()){k.trigger("open",{})}this.dataAdapter.query(l,function(m){k.trigger("results:all",{data:m,query:l})})});this.on("query:append",function(l){this.dataAdapter.query(l,function(m){k.trigger("results:append",{data:m,query:l})})});this.on("keypress",function(l){var m=l.which;if(k.isOpen()){if(m===f.ESC||m===f.TAB||(m===f.UP&&l.altKey)){k.close();l.preventDefault()}else{if(m===f.ENTER){k.trigger("results:select",{});l.preventDefault()}else{if((m===f.SPACE&&l.ctrlKey)){k.trigger("results:toggle",{});l.preventDefault()}else{if(m===f.UP){k.trigger("results:previous",{});l.preventDefault()}else{if(m===f.DOWN){k.trigger("results:next",{});l.preventDefault()}}}}}}else{if(m===f.ENTER||m===f.SPACE||(m===f.DOWN&&l.altKey)){k.open();l.preventDefault()}}})};g.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.options.get("disabled")){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};g.prototype.trigger=function(n,m){var o=g.__super__.trigger;var p={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(m===undefined){m={}}if(n in p){var l=p[n];var k={prevented:false,name:n,args:m};o.call(this,l,k);if(k.prevented){m.prevented=true;return}}o.call(this,n,m)};g.prototype.toggleDropdown=function(){if(this.options.get("disabled")){return}if(this.isOpen()){this.close()}else{this.open()}};g.prototype.open=function(){if(this.isOpen()){return}this.trigger("query",{})};g.prototype.close=function(){if(!this.isOpen()){return}this.trigger("close",{})};g.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")};g.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")};g.prototype.focus=function(k){if(this.hasFocus()){return}this.$container.addClass("select2-container--focus");this.trigger("focus",{})};g.prototype.enable=function(k){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.')}if(k==null||k.length===0){k=[true]}var l=!k[0];this.$element.prop("disabled",l)};g.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.')}var k=[];this.dataAdapter.current(function(l){k=l});return k};g.prototype.val=function(l){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.')}if(l==null||l.length===0){return this.$element.val()}var k=l[0];if(j.isArray(k)){k=j.map(k,function(m){return m.toString()})}this.$element.val(k).trigger("change")};g.prototype.destroy=function(){this.$container.remove();if(this.$element[0].detachEvent){this.$element[0].detachEvent("onpropertychange",this._sync)}if(this._observer!=null){this._observer.disconnect();this._observer=null}else{if(this.$element[0].removeEventListener){this.$element[0].removeEventListener("DOMAttrModified",this._sync,false)}}this._sync=null;this.$element.off(".select2");this.$element.attr("tabindex",this.$element.data("old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};g.prototype.render=function(){var k=j('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');k.attr("dir",this.options.get("dir"));this.$container=k;this.$container.addClass("select2-container--"+this.options.get("theme"));k.data("element",this.$element);return k};return g});e.define("select2/compat/utils",["jquery"],function(g){function f(m,h,i){var k,l=[],j;k=g.trim(m.attr("class"));if(k){k=""+k;g(k.split(/\s+/)).each(function(){if(this.indexOf("select2-")===0){l.push(this)}})}k=g.trim(h.attr("class"));if(k){k=""+k;g(k.split(/\s+/)).each(function(){if(this.indexOf("select2-")!==0){j=i(this);if(j!=null){l.push(j)}}})}m.attr("class",l.join(" "))}return{syncCssClasses:f}});e.define("select2/compat/containerCss",["jquery","./utils"],function(i,f){function h(j){return null}function g(){}g.prototype.render=function(l){var n=l.call(this);var j=this.options.get("containerCssClass")||"";if(i.isFunction(j)){j=j(this.$element)}var m=this.options.get("adaptContainerCssClass");m=m||h;if(j.indexOf(":all:")!==-1){j=j.replace(":all:","");var o=m;m=function(p){var q=o(p);if(q!=null){return q+" "+p}return p}}var k=this.options.get("containerCss")||{};if(i.isFunction(k)){k=k(this.$element)}f.syncCssClasses(n,this.$element,m);n.css(k);n.addClass(j);return n};return g});e.define("select2/compat/dropdownCss",["jquery","./utils"],function(i,g){function h(j){return null}function f(){}f.prototype.render=function(l){var n=l.call(this);var j=this.options.get("dropdownCssClass")||"";if(i.isFunction(j)){j=j(this.$element)}var k=this.options.get("adaptDropdownCssClass");k=k||h;if(j.indexOf(":all:")!==-1){j=j.replace(":all:","");var o=k;k=function(p){var q=o(p);if(q!=null){return q+" "+p}return p}}var m=this.options.get("dropdownCss")||{};if(i.isFunction(m)){m=m(this.$element)}g.syncCssClasses(n,this.$element,k);n.css(m);n.addClass(j);return n};return f});e.define("select2/compat/initSelection",["jquery"],function(g){function f(j,h,i){if(i.get("debug")&&window.console&&console.warn){console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2")}this.initSelection=i.get("initSelection");this._isInitialized=false;j.call(this,h,i)}f.prototype.current=function(i,j){var h=this;if(this._isInitialized){i.call(this,j);return}this.initSelection.call(null,this.$element,function(k){h._isInitialized=true;if(!g.isArray(k)){k=[k]}j(k)})};return f});e.define("select2/compat/inputData",["jquery"],function(g){function f(j,h,i){this._currentData=[];this._valueSeparator=i.get("valueSeparator")||",";if(h.prop("type")==="hidden"){if(i.get("debug")&&console&&console.warn){console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead.")}}j.call(this,h,i)}f.prototype.current=function(i,m){function h(p,n){var o=[];if(p.selected||g.inArray(p.id,n)!==-1){p.selected=true;o.push(p)}else{p.selected=false}if(p.children){o.push.apply(o,h(p.children,n))}return o}var j=[];for(var l=0;l<this._currentData.length;l++){var k=this._currentData[l];j.push.apply(j,h(k,this.$element.val().split(this._valueSeparator)))}m(j)};f.prototype.select=function(h,j){if(!this.options.get("multiple")){this.current(function(k){g.map(k,function(l){l.selected=false})});this.$element.val(j.id);this.$element.trigger("change")}else{var i=this.$element.val();i+=this._valueSeparator+j.id;this.$element.val(i);this.$element.trigger("change")}};f.prototype.unselect=function(i,j){var h=this;j.selected=false;this.current(function(m){var k=[];for(var n=0;n<m.length;n++){var l=m[n];if(j.id==l.id){continue}k.push(l.id)}h.$element.val(k.join(h._valueSeparator));h.$element.trigger("change")})};f.prototype.query=function(h,m,n){var i=[];for(var l=0;l<this._currentData.length;l++){var k=this._currentData[l];var j=this.matches(m,k);if(j!==null){i.push(j)}}n({results:i})};f.prototype.addOptions=function(j,h){var i=g.map(h,function(k){return g.data(k[0],"data")});this._currentData.push.apply(this._currentData,i)};return f});e.define("select2/compat/matcher",["jquery"],function(g){function f(h){function i(m,l){var j=g.extend(true,{},l);if(m.term==null||g.trim(m.term)===""){return j}if(l.children){for(var o=l.children.length-1;o>=0;o--){var n=l.children[o];var k=h(m.term,n.text,n);if(!k){j.children.splice(o,1)}}if(j.children.length>0){return j}}if(h(m.term,l.text,l)){return j}return null}return i}return f});e.define("select2/compat/query",[],function(){function f(i,g,h){if(h.get("debug")&&window.console&&console.warn){console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2.")}i.call(this,g,h)}f.prototype.query=function(g,i,j){i.callback=j;var h=this.options.get("query");h.call(null,i)};return f});e.define("select2/dropdown/attachContainer",[],function(){function f(i,g,h){i.call(this,g,h)}f.prototype.position=function(h,i,j){var g=j.find(".dropdown-wrapper");g.append(i);i.addClass("select2-dropdown--below");j.addClass("select2-container--below")};return f});e.define("select2/dropdown/stopPropagation",[],function(){function f(){}f.prototype.bind=function(i,g,j){i.call(this,g,j);var h=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(h.join(" "),function(k){k.stopPropagation()})};return f});e.define("select2/selection/stopPropagation",[],function(){function f(){}f.prototype.bind=function(i,g,j){i.call(this,g,j);var h=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(h.join(" "),function(k){k.stopPropagation()})};return f});
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
(function(f){if(typeof e.define==="function"&&e.define.amd){e.define("jquery-mousewheel",["jquery"],f)}else{if(typeof exports==="object"){module.exports=f}else{f(d)}}}(function(h){var j=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],p=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],n=Array.prototype.slice,o,g;if(h.event.fixHooks){for(var k=j.length;k;){h.event.fixHooks[j[--k]]=h.event.mouseHooks}}var l=h.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var r=p.length;r;){this.addEventListener(p[--r],q,false)}}else{this.onmousewheel=q}h.data(this,"mousewheel-line-height",l.getLineHeight(this));h.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var r=p.length;r;){this.removeEventListener(p[--r],q,false)}}else{this.onmousewheel=null}h.removeData(this,"mousewheel-line-height");h.removeData(this,"mousewheel-page-height")},getLineHeight:function(r){var i=h(r),s=i["offsetParent" in h.fn?"offsetParent":"parent"]();if(!s.length){s=h("body")}return parseInt(s.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(i){return h(i).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};h.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}});function q(i){var t=i||window.event,z=n.call(arguments,1),B=0,v=0,u=0,y=0,x=0,w=0;i=h.event.fix(t);i.type="mousewheel";if("detail" in t){u=t.detail*-1}if("wheelDelta" in t){u=t.wheelDelta}if("wheelDeltaY" in t){u=t.wheelDeltaY}if("wheelDeltaX" in t){v=t.wheelDeltaX*-1}if("axis" in t&&t.axis===t.HORIZONTAL_AXIS){v=u*-1;u=0}B=u===0?v:u;if("deltaY" in t){u=t.deltaY*-1;B=u}if("deltaX" in t){v=t.deltaX;if(u===0){B=v*-1}}if(u===0&&v===0){return}if(t.deltaMode===1){var A=h.data(this,"mousewheel-line-height");B*=A;u*=A;v*=A}else{if(t.deltaMode===2){var s=h.data(this,"mousewheel-page-height");B*=s;u*=s;v*=s}}y=Math.max(Math.abs(u),Math.abs(v));if(!g||y<g){g=y;if(f(t,y)){g/=40}}if(f(t,y)){B/=40;v/=40;u/=40}B=Math[B>=1?"floor":"ceil"](B/g);v=Math[v>=1?"floor":"ceil"](v/g);u=Math[u>=1?"floor":"ceil"](u/g);if(l.settings.normalizeOffset&&this.getBoundingClientRect){var r=this.getBoundingClientRect();x=i.clientX-r.left;w=i.clientY-r.top}i.deltaX=v;i.deltaY=u;i.deltaFactor=g;i.offsetX=x;i.offsetY=w;i.deltaMode=0;z.unshift(i,B,v,u);if(o){clearTimeout(o)}o=setTimeout(m,200);return(h.event.dispatch||h.event.handle).apply(this,z)}function m(){g=null}function f(r,i){return l.settings.adjustOldDeltas&&r.type==="mousewheel"&&i%120===0}}));e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(i,h,f,j){if(i.fn.select2==null){var g=["open","close","destroy"];i.fn.select2=function(l){l=l||{};if(typeof l==="object"){this.each(function(){var n=i.extend(true,{},l);var m=new f(i(this),n)});return this}else{if(typeof l==="string"){var k;this.each(function(){var m=i(this).data("select2");if(m==null&&window.console&&console.error){console.error("The select2('"+l+"') method was called on an element that is not using Select2.")}var n=Array.prototype.slice.call(arguments,1);k=m[l].apply(m,n)});if(i.inArray(l,g)>-1){return this}return k}else{throw new Error("Invalid arguments for Select2: "+l)}}}}if(i.fn.select2.defaults==null){i.fn.select2.defaults=j}return f});return{define:e.define,require:e.require}}());var b=c.require("jquery.select2");d.fn.select2.amd=c;return b}));
/*! Select2 4.0.1 | https://github.com/select2/select2/blob/master/LICENSE.md */
(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var b=jQuery.fn.select2.amd}return b.define("select2/i18n/zh-CN",[],function(){return{errorLoading:function(){return""},inputTooLong:function(d){var c=d.input.length-d.maximum,f=""+c+"";return f},inputTooShort:function(d){var c=d.minimum-d.input.length,f=""+c+"";return f},loadingMore:function(){return""},maximumSelected:function(d){var c=""+d.maximum+"";return c},noResults:function(){return""},searching:function(){return""}}}),{define:b.define,require:b.require}})();
/*!
 * Datepicker for Bootstrap v1.8.0 (https://github.com/uxsolutions/bootstrap-datepicker)
 *
 * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){b(require("jquery"))}else{b(jQuery)}}}(function(d,h){function o(){return new Date(Date.UTC.apply(Date,arguments))}function c(){var t=new Date();return o(t.getFullYear(),t.getMonth(),t.getDate())}function p(u,t){return(u.getUTCFullYear()===t.getUTCFullYear()&&u.getUTCMonth()===t.getUTCMonth()&&u.getUTCDate()===t.getUTCDate())}function m(u,t){return function(){if(t!==h){d.fn.datepicker.deprecated(t)}return this[u].apply(this,arguments)}}function e(t){return t&&!isNaN(t.getTime())}var n=(function(){var t={get:function(u){return this.slice(u)[0]},contains:function(x){var w=x&&x.valueOf();for(var v=0,u=this.length;v<u;v++){if(0<=this[v].valueOf()-w&&this[v].valueOf()-w<1000*60*60*24){return v}}return -1},remove:function(u){this.splice(u,1)},replace:function(u){if(!u){return}if(!d.isArray(u)){u=[u]}this.clear();this.push.apply(this,u)},clear:function(){this.length=0},copy:function(){var u=new n();u.replace(this);return u}};return function(){var u=[];u.push.apply(u,arguments);d.extend(u,t);return u}})();var r=function(u,t){d.data(u,"datepicker",this);this._process_options(t);this.dates=new n();this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=d(u);this.isInput=this.element.is("input");this.inputField=this.isInput?this.element:this.element.find("input");this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):false;if(this.component&&this.component.length===0){this.component=false}this.isInline=!this.component&&this.element.is("div");this.picker=d(i.template);if(this._check_template(this.o.templates.leftArrow)){this.picker.find(".prev").html(this.o.templates.leftArrow)}if(this._check_template(this.o.templates.rightArrow)){this.picker.find(".next").html(this.o.templates.rightArrow)}this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl")}if(this.o.calendarWeeks){this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(v,w){return Number(w)+1})}this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled});this._allow_update=false;this.setViewMode(this.o.startView);this._allow_update=true;this.fillDow();this.fillMonths();this.update();if(this.isInline){this.show()}};r.prototype={constructor:r,_resolveViewName:function(t){d.each(i.viewModes,function(v,u){if(t===v||d.inArray(t,u.names)!==-1){t=v;return false}});return t},_resolveDaysOfWeek:function(t){if(!d.isArray(t)){t=t.split(/[,\s]*/)}return d.map(t,Number)},_check_template:function(u){try{if(u===h||u===""){return false}if((u.match(/[<>]/g)||[]).length<=0){return true}var v=d(u);return v.length>0}catch(t){return false}},_process_options:function(t){this._o=d.extend({},this._o,t);var u=this.o=d.extend({},this._o);var v=u.language;if(!g[v]){v=v.split("-")[0];if(!g[v]){v=j.language}}u.language=v;u.startView=this._resolveViewName(u.startView);u.minViewMode=this._resolveViewName(u.minViewMode);u.maxViewMode=this._resolveViewName(u.maxViewMode);u.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,u.startView));if(u.multidate!==true){u.multidate=Number(u.multidate)||false;if(u.multidate!==false){u.multidate=Math.max(0,u.multidate)}}u.multidateSeparator=String(u.multidateSeparator);u.weekStart%=7;u.weekEnd=(u.weekStart+6)%7;var B=i.parseFormat(u.format);if(u.startDate!==-Infinity){if(!!u.startDate){if(u.startDate instanceof Date){u.startDate=this._local_to_utc(this._zero_time(u.startDate))}else{u.startDate=i.parseDate(u.startDate,B,u.language,u.assumeNearbyYear)}}else{u.startDate=-Infinity}}if(u.endDate!==Infinity){if(!!u.endDate){if(u.endDate instanceof Date){u.endDate=this._local_to_utc(this._zero_time(u.endDate))}else{u.endDate=i.parseDate(u.endDate,B,u.language,u.assumeNearbyYear)}}else{u.endDate=Infinity}}u.daysOfWeekDisabled=this._resolveDaysOfWeek(u.daysOfWeekDisabled||[]);u.daysOfWeekHighlighted=this._resolveDaysOfWeek(u.daysOfWeekHighlighted||[]);u.datesDisabled=u.datesDisabled||[];if(!d.isArray(u.datesDisabled)){u.datesDisabled=u.datesDisabled.split(",")}u.datesDisabled=d.map(u.datesDisabled,function(C){return i.parseDate(C,B,u.language,u.assumeNearbyYear)});var w=String(u.orientation).toLowerCase().split(/\s+/g),y=u.orientation.toLowerCase();w=d.grep(w,function(C){return/^auto|left|right|top|bottom$/.test(C)});u.orientation={x:"auto",y:"auto"};if(!y||y==="auto"){}else{if(w.length===1){switch(w[0]){case"top":case"bottom":u.orientation.y=w[0];break;case"left":case"right":u.orientation.x=w[0];break}}else{y=d.grep(w,function(C){return/^left|right$/.test(C)});u.orientation.x=y[0]||"auto";y=d.grep(w,function(C){return/^top|bottom$/.test(C)});u.orientation.y=y[0]||"auto"}}if(u.defaultViewDate instanceof Date||typeof u.defaultViewDate==="string"){u.defaultViewDate=i.parseDate(u.defaultViewDate,B,u.language,u.assumeNearbyYear)}else{if(u.defaultViewDate){var z=u.defaultViewDate.year||new Date().getFullYear();var x=u.defaultViewDate.month||0;var A=u.defaultViewDate.day||1;u.defaultViewDate=o(z,x,A)}else{u.defaultViewDate=c()}}},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var u=0,w,v,x;u<t.length;u++){w=t[u][0];if(t[u].length===2){v=h;x=t[u][1]}else{if(t[u].length===3){v=t[u][1];x=t[u][2]}}w.on(x,v)}},_unapplyEvents:function(t){for(var u=0,w,x,v;u<t.length;u++){w=t[u][0];if(t[u].length===2){v=h;x=t[u][1]}else{if(t[u].length===3){v=t[u][1];x=t[u][2]}}w.off(x,v)}},_buildEvents:function(){var t={keyup:d.proxy(function(u){if(d.inArray(u.keyCode,[27,37,39,38,40,32,13,9])===-1){this.update()}},this),keydown:d.proxy(this.keydown,this),paste:d.proxy(this.paste,this)};if(this.o.showOnFocus===true){t.focus=d.proxy(this.show,this)}if(this.isInput){this._events=[[this.element,t]]}else{if(this.component&&this.inputField.length){this._events=[[this.inputField,t],[this.component,{click:d.proxy(this.show,this)}]]}else{this._events=[[this.element,{click:d.proxy(this.show,this),keydown:d.proxy(this.keydown,this)}]]}}this._events.push([this.element,"*",{blur:d.proxy(function(u){this._focused_from=u.target},this)}],[this.element,{blur:d.proxy(function(u){this._focused_from=u.target},this)}]);if(this.o.immediateUpdates){this._events.push([this.element,{"changeYear changeMonth":d.proxy(function(u){this.update(u.date)},this)}])}this._secondaryEvents=[[this.picker,{click:d.proxy(this.click,this)}],[this.picker,".prev, .next",{click:d.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:d.proxy(this.dayCellClick,this)}],[d(window),{resize:d.proxy(this.place,this)}],[d(document),{"mousedown touchstart":d.proxy(function(u){if(!(this.element.is(u.target)||this.element.find(u.target).length||this.picker.is(u.target)||this.picker.find(u.target).length||this.isInline)){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(v,w){var u=w||this.dates.get(-1),t=this._utc_to_local(u);this.element.trigger({type:v,date:t,viewMode:this.viewMode,dates:d.map(this.dates,this._utc_to_local),format:d.proxy(function(x,z){if(arguments.length===0){x=this.dates.length-1;z=this.o.format}else{if(typeof x==="string"){z=x;x=this.dates.length-1}}z=z||this.o.format;var y=this.dates.get(x);return i.formatDate(y,z,this.o.language)},this)})},show:function(){if(this.inputField.prop("disabled")||(this.inputField.prop("readonly")&&this.o.enableOnReadonly===false)){return}if(!this.isInline){this.picker.appendTo(this.o.container)}this.place();this.picker.show();this._attachSecondaryEvents();this._trigger("show");if((window.navigator.msMaxTouchPoints||"ontouchstart" in document)&&this.o.disableTouchKeyboard){d(this.element).blur()}return this},hide:function(){if(this.isInline||!this.picker.is(":visible")){return this}this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.setViewMode(this.o.startView);if(this.o.forceParse&&this.inputField.val()){this.setValue()}this._trigger("hide");return this},destroy:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}return this},paste:function(u){var t;if(u.originalEvent.clipboardData&&u.originalEvent.clipboardData.types&&d.inArray("text/plain",u.originalEvent.clipboardData.types)!==-1){t=u.originalEvent.clipboardData.getData("text/plain")}else{if(window.clipboardData){t=window.clipboardData.getData("Text")}else{return}}this.setDate(t);this.update();u.preventDefault()},_utc_to_local:function(u){if(!u){return u}var t=new Date(u.getTime()+(u.getTimezoneOffset()*60000));if(t.getTimezoneOffset()!==u.getTimezoneOffset()){t=new Date(u.getTime()+(t.getTimezoneOffset()*60000))}return t},_local_to_utc:function(t){return t&&new Date(t.getTime()-(t.getTimezoneOffset()*60000))},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&o(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},getDates:function(){return d.map(this.dates,this._utc_to_local)},getUTCDates:function(){return d.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);if(t!==h){return new Date(t)}else{return null}},clearDates:function(){this.inputField.val("");this.update();this._trigger("changeDate");if(this.o.autoclose){this.hide()}},setDates:function(){var t=d.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var t=d.isArray(arguments[0])?arguments[0]:arguments;this.setDates.apply(this,d.map(t,this._utc_to_local));return this},setDate:m("setDates"),setUTCDate:m("setUTCDates"),remove:m("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var t=this.getFormattedDate();this.inputField.val(t);return this},getFormattedDate:function(t){if(t===h){t=this.o.format}var u=this.o.language;return d.map(this.dates,function(v){return i.formatDate(v,t,u)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){this._process_options({startDate:t});this.update();this.updateNavArrows();return this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){this._process_options({endDate:t});this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t});this.update();return this},setDaysOfWeekHighlighted:function(t){this._process_options({daysOfWeekHighlighted:t});this.update();return this},setDatesDisabled:function(t){this._process_options({datesDisabled:t});this.update();return this},place:function(){if(this.isInline){return this}var J=this.picker.outerWidth(),E=this.picker.outerHeight(),x=10,v=d(this.o.container),z=v.width(),y=this.o.container==="body"?d(document).scrollTop():v.scrollTop(),B=v.offset();var D=[0];this.element.parents().each(function(){var K=d(this).css("z-index");if(K!=="auto"&&Number(K)!==0){D.push(Number(K))}});var G=Math.max.apply(Math,D)+this.o.zIndexOffset;var C=this.component?this.component.parent().offset():this.element.offset();var I=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var w=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var A=C.left-B.left;var F=C.top-B.top;if(this.o.container!=="body"){F+=y}this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");if(this.o.orientation.x!=="auto"){this.picker.addClass("datepicker-orient-"+this.o.orientation.x);if(this.o.orientation.x==="right"){A-=J-w}}else{if(C.left<0){this.picker.addClass("datepicker-orient-left");A-=C.left-x}else{if(A+J>z){this.picker.addClass("datepicker-orient-right");A+=w-J}else{if(this.o.rtl){this.picker.addClass("datepicker-orient-right")}else{this.picker.addClass("datepicker-orient-left")}}}}var t=this.o.orientation.y,u;if(t==="auto"){u=-y+F-E;t=u<0?"bottom":"top"}this.picker.addClass("datepicker-orient-"+t);if(t==="top"){F-=E+parseInt(this.picker.css("padding-top"))}else{F+=I}if(this.o.rtl){var H=z-(A+w);this.picker.css({top:F,right:H,zIndex:G})}else{this.picker.css({top:F,left:A,zIndex:G})}return this},_allow_update:true,update:function(){if(!this._allow_update){return this}var u=this.dates.copy(),v=[],t=false;if(arguments.length){d.each(arguments,d.proxy(function(x,w){if(w instanceof Date){w=this._local_to_utc(w)}v.push(w)},this));t=true}else{v=this.isInput?this.element.val():this.element.data("date")||this.inputField.val();if(v&&this.o.multidate){v=v.split(this.o.multidateSeparator)}else{v=[v]}delete this.element.data().date}v=d.map(v,d.proxy(function(w){return i.parseDate(w,this.o.format,this.o.language,this.o.assumeNearbyYear)},this));v=d.grep(v,d.proxy(function(w){return(!this.dateWithinRange(w)||!w)},this),true);this.dates.replace(v);if(this.o.updateViewDate){if(this.dates.length){this.viewDate=new Date(this.dates.get(-1))}else{if(this.viewDate<this.o.startDate){this.viewDate=new Date(this.o.startDate)}else{if(this.viewDate>this.o.endDate){this.viewDate=new Date(this.o.endDate)}else{this.viewDate=this.o.defaultViewDate}}}}if(t){this.setValue();this.element.change()}else{if(this.dates.length){if(String(u)!==String(this.dates)&&t){this._trigger("changeDate");this.element.change()}}}if(!this.dates.length&&u.length){this._trigger("clearDate");this.element.change()}this.fill();return this},fillDow:function(){if(this.o.showWeekDays){var t=this.o.weekStart,u="<tr>";if(this.o.calendarWeeks){u+='<th class="cw">&#160;</th>'}while(t<this.o.weekStart+7){u+='<th class="dow';if(d.inArray(t,this.o.daysOfWeekDisabled)!==-1){u+=" disabled"}u+='">'+g[this.o.language].daysMin[(t++)%7]+"</th>"}u+="</tr>";this.picker.find(".datepicker-days thead").append(u)}},fillMonths:function(){var t=this._utc_to_local(this.viewDate);var v="";var w;for(var u=0;u<12;u++){w=t&&t.getMonth()===u?" focused":"";v+='<span class="month'+w+'">'+g[this.o.language].monthsShort[u]+"</span>"}this.picker.find(".datepicker-months td").html(v)},setRange:function(t){if(!t||!t.length){delete this.range}else{this.range=d.map(t,function(u){return u.valueOf()})}this.fill()},getClassNames:function(v){var t=[],w=this.viewDate.getUTCFullYear(),x=this.viewDate.getUTCMonth(),u=c();if(v.getUTCFullYear()<w||(v.getUTCFullYear()===w&&v.getUTCMonth()<x)){t.push("old")}else{if(v.getUTCFullYear()>w||(v.getUTCFullYear()===w&&v.getUTCMonth()>x)){t.push("new")}}if(this.focusDate&&v.valueOf()===this.focusDate.valueOf()){t.push("focused")}if(this.o.todayHighlight&&p(v,u)){t.push("today")}if(this.dates.contains(v)!==-1){t.push("active")}if(!this.dateWithinRange(v)){t.push("disabled")}if(this.dateIsDisabled(v)){t.push("disabled","disabled-date")}if(d.inArray(v.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1){t.push("highlighted")}if(this.range){if(v>this.range[0]&&v<this.range[this.range.length-1]){t.push("range")}if(d.inArray(v.valueOf(),this.range)!==-1){t.push("selected")}if(v.valueOf()===this.range[0]){t.push("range-start")}if(v.valueOf()===this.range[this.range.length-1]){t.push("range-end")}}return t},_fill_yearsView:function(J,z,E,B,I,x,v){var A="";var w=E/10;var C=this.picker.find(J);var H=Math.floor(B/E)*E;var y=H+w*9;var G=Math.floor(this.viewDate.getFullYear()/w)*w;var F=d.map(this.dates,function(L){return Math.floor(L.getUTCFullYear()/w)*w});var K,u,D;for(var t=H-w;t<=y+w;t+=w){K=[z];u=null;if(t===H-w){K.push("old")}else{if(t===y+w){K.push("new")}}if(d.inArray(t,F)!==-1){K.push("active")}if(t<I||t>x){K.push("disabled")}if(t===G){K.push("focused")}if(v!==d.noop){D=v(new Date(t,0,1));if(D===h){D={}}else{if(typeof D==="boolean"){D={enabled:D}}else{if(typeof D==="string"){D={classes:D}}}}if(D.enabled===false){K.push("disabled")}if(D.classes){K=K.concat(D.classes.split(/\s+/))}if(D.tooltip){u=D.tooltip}}A+='<span class="'+K.join(" ")+'"'+(u?' title="'+u+'"':"")+">"+t+"</span>"}C.find(".datepicker-switch").text(H+"-"+y);C.find("td").html(A)},fill:function(){var Q=new Date(this.viewDate),E=Q.getUTCFullYear(),R=Q.getUTCMonth(),L=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,O=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,B=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,M=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,C=g[this.o.language].today||g.en.today||"",v=g[this.o.language].clear||g.en.clear||"",J=g[this.o.language].titleFormat||g.en.titleFormat,x,I;if(isNaN(E)||isNaN(R)){return}this.picker.find(".datepicker-days .datepicker-switch").text(i.formatDate(Q,J,this.o.language));this.picker.find("tfoot .today").text(C).css("display",this.o.todayBtn===true||this.o.todayBtn==="linked"?"table-cell":"none");this.picker.find("tfoot .clear").text(v).css("display",this.o.clearBtn===true?"table-cell":"none");this.picker.find("thead .datepicker-title").text(this.o.title).css("display",typeof this.o.title==="string"&&this.o.title!==""?"table-cell":"none");this.updateNavArrows();this.fillMonths();var S=o(E,R,0),N=S.getUTCDate();S.setUTCDate(N-(S.getUTCDay()-this.o.weekStart+7)%7);var t=new Date(S);if(S.getUTCFullYear()<100){t.setUTCFullYear(S.getUTCFullYear())}t.setUTCDate(t.getUTCDate()+42);t=t.valueOf();var D=[];var F,H;while(S.valueOf()<t){F=S.getUTCDay();if(F===this.o.weekStart){D.push("<tr>");if(this.o.calendarWeeks){var u=new Date(+S+(this.o.weekStart-F-7)%7*86400000),y=new Date(Number(u)+(7+4-u.getUTCDay())%7*86400000),w=new Date(Number(w=o(y.getUTCFullYear(),0,1))+(7+4-w.getUTCDay())%7*86400000),G=(y-w)/86400000/7+1;D.push('<td class="cw">'+G+"</td>")}}H=this.getClassNames(S);H.push("day");var K=S.getUTCDate();if(this.o.beforeShowDay!==d.noop){I=this.o.beforeShowDay(this._utc_to_local(S));if(I===h){I={}}else{if(typeof I==="boolean"){I={enabled:I}}else{if(typeof I==="string"){I={classes:I}}}}if(I.enabled===false){H.push("disabled")}if(I.classes){H=H.concat(I.classes.split(/\s+/))}if(I.tooltip){x=I.tooltip}if(I.content){K=I.content}}if(d.isFunction(d.uniqueSort)){H=d.uniqueSort(H)}else{H=d.unique(H)}D.push('<td class="'+H.join(" ")+'"'+(x?' title="'+x+'"':"")+' data-date="'+S.getTime().toString()+'">'+K+"</td>");x=null;if(F===this.o.weekEnd){D.push("</tr>")}S.setUTCDate(S.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(D.join(""));var P=g[this.o.language].monthsTitle||g.en.monthsTitle||"Months";var A=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?P:E).end().find("tbody span").removeClass("active");d.each(this.dates,function(T,U){if(U.getUTCFullYear()===E){A.eq(U.getUTCMonth()).addClass("active")}});if(E<L||E>B){A.addClass("disabled")}if(E===L){A.slice(0,O).addClass("disabled")}if(E===B){A.slice(M+1).addClass("disabled")}if(this.o.beforeShowMonth!==d.noop){var z=this;d.each(A,function(T,V){var W=new Date(E,T,1);var U=z.o.beforeShowMonth(W);if(U===h){U={}}else{if(typeof U==="boolean"){U={enabled:U}}else{if(typeof U==="string"){U={classes:U}}}}if(U.enabled===false&&!d(V).hasClass("disabled")){d(V).addClass("disabled")}if(U.classes){d(V).addClass(U.classes)}if(U.tooltip){d(V).prop("title",U.tooltip)}})}this._fill_yearsView(".datepicker-years","year",10,E,L,B,this.o.beforeShowYear);this._fill_yearsView(".datepicker-decades","decade",100,E,L,B,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1000,E,L,B,this.o.beforeShowCentury)},updateNavArrows:function(){if(!this._allow_update){return}var w=new Date(this.viewDate),z=w.getUTCFullYear(),u=w.getUTCMonth(),v=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,B=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,C=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,t=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,x,A,y=1;switch(this.viewMode){case 4:y*=10;case 3:y*=10;case 2:y*=10;case 1:x=Math.floor(z/y)*y<=v;A=Math.floor(z/y)*y+y>C;break;case 0:x=z<=v&&u<=B;A=z>=C&&u>=t;break}this.picker.find(".prev").toggleClass("disabled",x);this.picker.find(".next").toggleClass("disabled",A)},click:function(y){y.preventDefault();y.stopPropagation();var x,u,t,v,w;x=d(y.target);if(x.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode){this.setViewMode(this.viewMode+1)}if(x.hasClass("today")&&!x.hasClass("day")){this.setViewMode(0);this._setDate(c(),this.o.todayBtn==="linked"?null:"view")}if(x.hasClass("clear")){this.clearDates()}if(!x.hasClass("disabled")){if(x.hasClass("month")||x.hasClass("year")||x.hasClass("decade")||x.hasClass("century")){this.viewDate.setUTCDate(1);t=1;if(this.viewMode===1){w=x.parent().find("span").index(x);v=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(w)}else{w=0;v=Number(x.text());this.viewDate.setUTCFullYear(v)}this._trigger(i.viewModes[this.viewMode-1].e,this.viewDate);if(this.viewMode===this.o.minViewMode){this._setDate(o(v,w,t))}else{this.setViewMode(this.viewMode-1);this.fill()}}}if(this.picker.is(":visible")&&this._focused_from){this._focused_from.focus()}delete this._focused_from},dayCellClick:function(w){var t=d(w.currentTarget);var v=t.data("date");var u=new Date(v);if(this.o.updateViewDate){if(u.getUTCFullYear()!==this.viewDate.getUTCFullYear()){this._trigger("changeYear",this.viewDate)}if(u.getUTCMonth()!==this.viewDate.getUTCMonth()){this._trigger("changeMonth",this.viewDate)}}this._setDate(u)},navArrowsClick:function(v){var t=d(v.currentTarget);var u=t.hasClass("prev")?-1:1;if(this.viewMode!==0){u*=i.viewModes[this.viewMode].navStep*12}this.viewDate=this.moveMonth(this.viewDate,u);this._trigger(i.viewModes[this.viewMode].e,this.viewDate);this.fill()},_toggle_multidate:function(u){var t=this.dates.contains(u);if(!u){this.dates.clear()}if(t!==-1){if(this.o.multidate===true||this.o.multidate>1||this.o.toggleActive){this.dates.remove(t)}}else{if(this.o.multidate===false){this.dates.clear();this.dates.push(u)}else{this.dates.push(u)}}if(typeof this.o.multidate==="number"){while(this.dates.length>this.o.multidate){this.dates.remove(0)}}},_setDate:function(t,u){if(!u||u==="date"){this._toggle_multidate(t&&new Date(t))}if((!u&&this.o.updateViewDate)||u==="view"){this.viewDate=t&&new Date(t)}this.fill();this.setValue();if(!u||u!=="view"){this._trigger("changeDate")}this.inputField.trigger("change");if(this.o.autoclose&&(!u||u==="date")){this.hide()}},moveDay:function(v,u){var t=new Date(v);t.setUTCDate(v.getUTCDate()+u);return t},moveWeek:function(u,t){return this.moveDay(u,t*7)},moveMonth:function(t,u){if(!e(t)){return this.o.defaultViewDate}if(!u){return t}var x=new Date(t.valueOf()),B=x.getUTCDate(),y=x.getUTCMonth(),w=Math.abs(u),A,z;u=u>0?1:-1;if(w===1){z=u===-1?function(){return x.getUTCMonth()===y}:function(){return x.getUTCMonth()!==A};A=y+u;x.setUTCMonth(A);A=(A+12)%12}else{for(var v=0;v<w;v++){x=this.moveMonth(x,u)}A=x.getUTCMonth();x.setUTCDate(B);z=function(){return A!==x.getUTCMonth()}}while(z()){x.setUTCDate(--B);x.setUTCMonth(A)}return x},moveYear:function(u,t){return this.moveMonth(u,t*12)},moveAvailableDate:function(u,t,v){do{u=this[v](u,t);if(!this.dateWithinRange(u)){return false}v="moveDay"}while(this.dateIsDisabled(u));return u},weekOfDateIsDisabled:function(t){return d.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1},dateIsDisabled:function(t){return(this.weekOfDateIsDisabled(t)||d.grep(this.o.datesDisabled,function(u){return p(t,u)}).length>0)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(x){if(!this.picker.is(":visible")){if(x.keyCode===40||x.keyCode===27){this.show();x.stopPropagation()}return}var u=false,t,v,w=this.focusDate||this.viewDate;switch(x.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else{this.hide()}x.preventDefault();x.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||this.o.daysOfWeekDisabled.length===7){break}t=x.keyCode===37||x.keyCode===38?-1:1;if(this.viewMode===0){if(x.ctrlKey){v=this.moveAvailableDate(w,t,"moveYear");if(v){this._trigger("changeYear",this.viewDate)}}else{if(x.shiftKey){v=this.moveAvailableDate(w,t,"moveMonth");if(v){this._trigger("changeMonth",this.viewDate)}}else{if(x.keyCode===37||x.keyCode===39){v=this.moveAvailableDate(w,t,"moveDay")}else{if(!this.weekOfDateIsDisabled(w)){v=this.moveAvailableDate(w,t,"moveWeek")}}}}}else{if(this.viewMode===1){if(x.keyCode===38||x.keyCode===40){t=t*4}v=this.moveAvailableDate(w,t,"moveMonth")}else{if(this.viewMode===2){if(x.keyCode===38||x.keyCode===40){t=t*4}v=this.moveAvailableDate(w,t,"moveYear")}}}if(v){this.focusDate=this.viewDate=v;this.setValue();this.fill();x.preventDefault()}break;case 13:if(!this.o.forceParse){break}w=this.focusDate||this.dates.get(-1)||this.viewDate;if(this.o.keyboardNavigation){this._toggle_multidate(w);u=true}this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(":visible")){x.preventDefault();x.stopPropagation();if(this.o.autoclose){this.hide()}}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break}if(u){if(this.dates.length){this._trigger("changeDate")}else{this._trigger("clearDate")}this.inputField.trigger("change")}},setViewMode:function(t){this.viewMode=t;this.picker.children("div").hide().filter(".datepicker-"+i.viewModes[this.viewMode].clsName).show();this.updateNavArrows();this._trigger("changeViewMode",new Date(this.viewDate))}};var k=function(u,t){d.data(u,"datepicker",this);this.element=d(u);this.inputs=d.map(t.inputs,function(v){return v.jquery?v[0]:v});delete t.inputs;this.keepEmptyValues=t.keepEmptyValues;delete t.keepEmptyValues;s.call(d(this.inputs),t).on("changeDate",d.proxy(this.dateUpdated,this));this.pickers=d.map(this.inputs,function(v){return d.data(v,"datepicker")});this.updateDates()};k.prototype={updateDates:function(){this.dates=d.map(this.pickers,function(t){return t.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=d.map(this.dates,function(u){return u.valueOf()});d.each(this.pickers,function(u,v){v.setRange(t)})},clearDates:function(){d.each(this.pickers,function(t,u){u.clearDates()})},dateUpdated:function(z){if(this.updating){return}this.updating=true;var A=d.data(z.target,"datepicker");if(A===h){return}var y=A.getUTCDate(),w=this.keepEmptyValues,x=d.inArray(z.target,this.inputs),v=x-1,u=x+1,t=this.inputs.length;if(x===-1){return}d.each(this.pickers,function(B,C){if(!C.getUTCDate()&&(C===A||!w)){C.setUTCDate(y)}});if(y<this.dates[v]){while(v>=0&&y<this.dates[v]){this.pickers[v--].setUTCDate(y)}}else{if(y>this.dates[u]){while(u<t&&y>this.dates[u]){this.pickers[u++].setUTCDate(y)}}}this.updateDates();delete this.updating},destroy:function(){d.map(this.pickers,function(t){t.destroy()});d(this.inputs).off("changeDate",this.dateUpdated);delete this.element.data().datepicker},remove:m("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};function l(w,z){var y=d(w).data(),t={},x,v=new RegExp("^"+z.toLowerCase()+"([A-Z])");z=new RegExp("^"+z.toLowerCase());function A(C,B){return B.toLowerCase()}for(var u in y){if(z.test(u)){x=u.replace(v,A);t[x]=y[u]}}return t}function q(v){var t={};if(!g[v]){v=v.split("-")[0];if(!g[v]){return}}var u=g[v];d.each(f,function(x,w){if(w in u){t[w]=u[w]}});return t}var b=d.fn.datepicker;var s=function(v){var t=Array.apply(null,arguments);t.shift();var u;this.each(function(){var C=d(this),B=C.data("datepicker"),x=typeof v==="object"&&v;if(!B){var z=l(this,"date"),w=d.extend({},j,z,x),y=q(w.language),A=d.extend({},j,y,z,x);if(C.hasClass("input-daterange")||A.inputs){d.extend(A,{inputs:A.inputs||C.find("input").toArray()});B=new k(this,A)}else{B=new r(this,A)}C.data("datepicker",B)}if(typeof v==="string"&&typeof B[v]==="function"){u=B[v].apply(B,t)}});if(u===h||u instanceof r||u instanceof k){return this}if(this.length>1){throw new Error("Using only allowed for the collection of a single element ("+v+" function)")}else{return u}};d.fn.datepicker=s;var j=d.fn.datepicker.defaults={assumeNearbyYear:false,autoclose:false,beforeShowDay:d.noop,beforeShowMonth:d.noop,beforeShowYear:d.noop,beforeShowDecade:d.noop,beforeShowCentury:d.noop,calendarWeeks:false,clearBtn:false,toggleActive:false,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keepEmptyValues:false,keyboardNavigation:true,language:"en",minViewMode:0,maxViewMode:4,multidate:false,multidateSeparator:",",orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,updateViewDate:true,weekStart:0,disableTouchKeyboard:false,enableOnReadonly:true,showOnFocus:true,zIndexOffset:10,container:"body",immediateUpdates:false,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:true};var f=d.fn.datepicker.locale_opts=["format","rtl","weekStart"];d.fn.datepicker.Constructor=r;var g=d.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}};var i={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1000}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(v){if(typeof v.toValue==="function"&&typeof v.toDisplay==="function"){return v}var t=v.replace(this.validParts,"\0").split("\0"),u=v.match(this.validParts);if(!t||!t.length||!u||u.length===0){throw new Error("Invalid date format.")}return{separators:t,parts:u}},parseDate:function(M,J,G,t){if(!M){return h}if(M instanceof Date){return M}if(typeof J==="string"){J=i.parseFormat(J)}if(J.toValue){return J.toValue(M,J,G)}var y={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},N={yesterday:"-1d",today:"+0d",tomorrow:"+1d"},E,F,D,I,x;if(M in N){M=N[M]}if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(M)){E=M.match(/([\-+]\d+)([dmwy])/gi);M=new Date();for(I=0;I<E.length;I++){F=E[I].match(/([\-+]\d+)([dmwy])/i);D=Number(F[1]);x=y[F[2].toLowerCase()];M=r.prototype[x](M,D)}return r.prototype._zero_utc_time(M)}E=M&&M.match(this.nonpunctuation)||[];function v(Q,P){if(P===true){P=10}if(Q<100){Q+=2000;if(Q>((new Date()).getFullYear()+P)){Q-=100}}return Q}var z={},L=["yyyy","yy","M","MM","m","mm","d","dd"],C={yyyy:function(Q,P){return Q.setUTCFullYear(t?v(P,t):P)},m:function(Q,P){if(isNaN(Q)){return Q}P-=1;while(P<0){P+=12}P%=12;Q.setUTCMonth(P);while(Q.getUTCMonth()!==P){Q.setUTCDate(Q.getUTCDate()-1)}return Q},d:function(Q,P){return Q.setUTCDate(P)}},O,w;C.yy=C.yyyy;C.M=C.MM=C.mm=C.m;C.dd=C.d;M=c();var u=J.parts.slice();if(E.length!==u.length){u=d(u).filter(function(P,Q){return d.inArray(Q,L)!==-1}).toArray()}function K(){var P=this.slice(0,E[I].length),Q=E[I].slice(0,P.length);return P.toLowerCase()===Q.toLowerCase()}if(E.length===u.length){var H;for(I=0,H=u.length;I<H;I++){O=parseInt(E[I],10);F=u[I];if(isNaN(O)){switch(F){case"MM":w=d(g[G].months).filter(K);O=d.inArray(w[0],g[G].months)+1;break;case"M":w=d(g[G].monthsShort).filter(K);O=d.inArray(w[0],g[G].monthsShort)+1;break}}z[F]=O}var A,B;for(I=0;I<L.length;I++){B=L[I];if(B in z&&!isNaN(z[B])){A=new Date(M);C[B](A,z[B]);if(!isNaN(A)){M=A}}}}return M},formatDate:function(t,x,z){if(!t){return""}if(typeof x==="string"){x=i.parseFormat(x)}if(x.toDisplay){return x.toDisplay(t,x,z)}var y={d:t.getUTCDate(),D:g[z].daysShort[t.getUTCDay()],DD:g[z].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:g[z].monthsShort[t.getUTCMonth()],MM:g[z].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};y.dd=(y.d<10?"0":"")+y.d;y.mm=(y.m<10?"0":"")+y.m;t=[];var w=d.extend([],x.separators);for(var v=0,u=x.parts.length;v<=u;v++){if(w.length){t.push(w.shift())}t.push(y[x.parts[v]])}return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+j.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+j.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};i.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+i.headTemplate+"<tbody></tbody>"+i.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"</table></div></div>";d.fn.datepicker.DPGlobal=i;d.fn.datepicker.noConflict=function(){d.fn.datepicker=b;return this};d.fn.datepicker.version="1.8.0";d.fn.datepicker.deprecated=function(u){var t=window.console;if(t&&t.warn){t.warn("DEPRECATED: "+u)}};d(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(u){var t=d(this);if(t.data("datepicker")){return}u.preventDefault();s.call(t,"show")});d(function(){s.call(d('[data-provide="datepicker-inline"]'))})}));!function(b){b.fn.datepicker.dates["zh-CN"]={days:["","","","","","",""],daysShort:["","","","","","",""],daysMin:["","","","","","",""],months:["","","","","","","","","","","",""],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],today:"",clear:"",format:"yyyymmdd",titleFormat:"yyyymm",weekStart:1}}(jQuery);(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){b(require("jquery"))}else{b(jQuery)}}}(function(e,g){if(!("indexOf" in Array.prototype)){Array.prototype.indexOf=function(k,j){if(j===g){j=0}if(j<0){j+=this.length}if(j<0){j=0}for(var l=this.length;j<l;j++){if(j in this&&this[j]===k){return j}}return -1}}function b(){var q,k,p,l,j,n,m,o;k=(new Date()).toString();p=((m=k.split("(")[1])!=null?m.slice(0,-1):0)||k.split(" ");if(p instanceof Array){n=[];for(var l=0,j=p.length;l<j;l++){o=p[l];if((q=(m=o.match(/\b[A-Z]+\b/))!==null)?m[0]:0){n.push(q)}}p=n.pop()}return p}function i(){return new Date(Date.UTC.apply(Date,arguments))}var h=function(l,k){var n=this;this.element=e(l);this.container=k.container||"body";this.language=k.language||this.element.data("date-language")||"en";this.language=this.language in f?this.language:this.language.split("-")[0];this.language=this.language in f?this.language:"en";this.isRTL=f[this.language].rtl||false;this.formatType=k.formatType||this.element.data("format-type")||"standard";this.format=d.parseFormat(k.format||this.element.data("date-format")||f[this.language].format||d.getDefaultFormat(this.formatType,"input"),this.formatType);this.isInline=false;this.isVisible=false;this.isInput=this.element.is("input");this.fontAwesome=k.fontAwesome||this.element.data("font-awesome")||false;this.bootcssVer=k.bootcssVer||(this.isInput?(this.element.is(".form-control")?3:2):(this.bootcssVer=this.element.is(".input-group")?3:2));this.component=this.element.is(".date")?(this.bootcssVer===3?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-remove, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar, .add-on .fa-calendar, .add-on .fa-clock-o").parent()):false;this.componentReset=this.element.is(".date")?(this.bootcssVer===3?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent()):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.linkField=k.linkField||this.element.data("link-field")||false;this.linkFormat=d.parseFormat(k.linkFormat||this.element.data("link-format")||d.getDefaultFormat(this.formatType,"link"),this.formatType);this.minuteStep=k.minuteStep||this.element.data("minute-step")||5;this.pickerPosition=k.pickerPosition||this.element.data("picker-position")||"bottom-right";this.showMeridian=k.showMeridian||this.element.data("show-meridian")||false;this.initialDate=k.initialDate||new Date();this.zIndex=k.zIndex||this.element.data("z-index")||g;this.title=typeof k.title==="undefined"?false:k.title;this.timezone=k.timezone||b();this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":(this.bootcssVer===3?"glyphicon-arrow-left":"icon-arrow-left"),rightArrow:this.fontAwesome?"fa-arrow-right":(this.bootcssVer===3?"glyphicon-arrow-right":"icon-arrow-right")};this.icontype=this.fontAwesome?"fa":"glyphicon";this._attachEvents();this.clickedOutside=function(o){if(e(o.target).closest(".datetimepicker").length===0){n.hide()}};this.formatViewType="datetime";if("formatViewType" in k){this.formatViewType=k.formatViewType}else{if("formatViewType" in this.element.data()){this.formatViewType=this.element.data("formatViewType")}}this.minView=0;if("minView" in k){this.minView=k.minView}else{if("minView" in this.element.data()){this.minView=this.element.data("min-view")}}this.minView=d.convertViewMode(this.minView);this.maxView=d.modes.length-1;if("maxView" in k){this.maxView=k.maxView}else{if("maxView" in this.element.data()){this.maxView=this.element.data("max-view")}}this.maxView=d.convertViewMode(this.maxView);this.wheelViewModeNavigation=false;if("wheelViewModeNavigation" in k){this.wheelViewModeNavigation=k.wheelViewModeNavigation}else{if("wheelViewModeNavigation" in this.element.data()){this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")}}this.wheelViewModeNavigationInverseDirection=false;if("wheelViewModeNavigationInverseDirection" in k){this.wheelViewModeNavigationInverseDirection=k.wheelViewModeNavigationInverseDirection}else{if("wheelViewModeNavigationInverseDirection" in this.element.data()){this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")}}this.wheelViewModeNavigationDelay=100;if("wheelViewModeNavigationDelay" in k){this.wheelViewModeNavigationDelay=k.wheelViewModeNavigationDelay}else{if("wheelViewModeNavigationDelay" in this.element.data()){this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")}}this.startViewMode=2;if("startView" in k){this.startViewMode=k.startView}else{if("startView" in this.element.data()){this.startViewMode=this.element.data("start-view")}}this.startViewMode=d.convertViewMode(this.startViewMode);this.viewMode=this.startViewMode;this.viewSelect=this.minView;if("viewSelect" in k){this.viewSelect=k.viewSelect}else{if("viewSelect" in this.element.data()){this.viewSelect=this.element.data("view-select")}}this.viewSelect=d.convertViewMode(this.viewSelect);this.forceParse=true;if("forceParse" in k){this.forceParse=k.forceParse}else{if("dateForceParse" in this.element.data()){this.forceParse=this.element.data("date-force-parse")}}var m=this.bootcssVer===3?d.templateV3:d.template;while(m.indexOf("{iconType}")!==-1){m=m.replace("{iconType}",this.icontype)}while(m.indexOf("{leftArrow}")!==-1){m=m.replace("{leftArrow}",this.icons.leftArrow)}while(m.indexOf("{rightArrow}")!==-1){m=m.replace("{rightArrow}",this.icons.rightArrow)}this.picker=e(m).appendTo(this.isInline?this.element:this.container).on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)});if(this.wheelViewModeNavigation){if(e.fn.mousewheel){this.picker.on({mousewheel:e.proxy(this.mousewheel,this)})}else{console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")}}if(this.isInline){this.picker.addClass("datetimepicker-inline")}else{this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu")}if(this.isRTL){this.picker.addClass("datetimepicker-rtl");var j=this.bootcssVer===3?".prev span, .next span":".prev i, .next i";this.picker.find(j).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}e(document).on("mousedown touchend",this.clickedOutside);this.autoclose=false;if("autoclose" in k){this.autoclose=k.autoclose}else{if("dateAutoclose" in this.element.data()){this.autoclose=this.element.data("date-autoclose")}}this.keyboardNavigation=true;if("keyboardNavigation" in k){this.keyboardNavigation=k.keyboardNavigation}else{if("dateKeyboardNavigation" in this.element.data()){this.keyboardNavigation=this.element.data("date-keyboard-navigation")}}this.todayBtn=(k.todayBtn||this.element.data("date-today-btn")||false);this.clearBtn=(k.clearBtn||this.element.data("date-clear-btn")||false);this.todayHighlight=(k.todayHighlight||this.element.data("date-today-highlight")||false);this.weekStart=0;if(typeof k.weekStart!=="undefined"){this.weekStart=k.weekStart}else{if(typeof this.element.data("date-weekstart")!=="undefined"){this.weekStart=this.element.data("date-weekstart")}else{if(typeof f[this.language].weekStart!=="undefined"){this.weekStart=f[this.language].weekStart}}}this.weekStart=this.weekStart%7;this.weekEnd=((this.weekStart+6)%7);this.onRenderDay=function(o){var q=(k.onRenderDay||function(){return[]})(o);if(typeof q==="string"){q=[q]}var p=["day"];return p.concat((q?q:[]))};this.onRenderHour=function(o){var q=(k.onRenderHour||function(){return[]})(o);var p=["hour"];if(typeof q==="string"){q=[q]}return p.concat((q?q:[]))};this.onRenderMinute=function(o){var q=(k.onRenderMinute||function(){return[]})(o);var p=["minute"];if(typeof q==="string"){q=[q]}if(o<this.startDate||o>this.endDate){p.push("disabled")}else{if(Math.floor(this.date.getUTCMinutes()/this.minuteStep)===Math.floor(o.getUTCMinutes()/this.minuteStep)){p.push("active")}}return p.concat((q?q:[]))};this.onRenderYear=function(p){var r=(k.onRenderYear||function(){return[]})(p);var q=["year"];if(typeof r==="string"){r=[r]}if(this.date.getUTCFullYear()===p.getUTCFullYear()){q.push("active")}var o=p.getUTCFullYear();var s=this.endDate.getUTCFullYear();if(p<this.startDate||o>s){q.push("disabled")}return q.concat((r?r:[]))};this.onRenderMonth=function(o){var q=(k.onRenderMonth||function(){return[]})(o);var p=["month"];if(typeof q==="string"){q=[q]}return p.concat((q?q:[]))};this.startDate=new Date(-8639968443048000);this.endDate=new Date(8639968443048000);this.datesDisabled=[];this.daysOfWeekDisabled=[];this.setStartDate(k.startDate||this.element.data("date-startdate"));this.setEndDate(k.endDate||this.element.data("date-enddate"));this.setDatesDisabled(k.datesDisabled||this.element.data("date-dates-disabled"));this.setDaysOfWeekDisabled(k.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.setMinutesDisabled(k.minutesDisabled||this.element.data("date-minute-disabled"));this.setHoursDisabled(k.hoursDisabled||this.element.data("date-hour-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();if(this.isInline){this.show()}};h.prototype={constructor:h,_events:[],_attachEvents:function(){this._detachEvents();if(this.isInput){this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]];if(this.componentReset){this._events.push([this.componentReset,{click:e.proxy(this.reset,this)}])}}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:e.proxy(this.show,this)}]]}}}for(var j=0,k,l;j<this._events.length;j++){k=this._events[j][0];l=this._events[j][1];k.on(l)}},_detachEvents:function(){for(var j=0,k,l;j<this._events.length;j++){k=this._events[j][0];l=this._events[j][1];k.off(l)}this._events=[]},show:function(j){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();if(this.forceParse){this.update()}this.place();e(window).on("resize",e.proxy(this.place,this));if(j){j.stopPropagation();j.preventDefault()}this.isVisible=true;this.element.trigger({type:"show",date:this.date})},hide:function(){if(!this.isVisible){return}if(this.isInline){return}this.picker.hide();e(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){e(document).off("mousedown",this.hide)}if(this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this.isVisible=false;this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents();e(document).off("mousedown",this.clickedOutside);this.picker.remove();delete this.picker;delete this.element.data().datetimepicker},getDate:function(){var j=this.getUTCDate();if(j===null){return null}return new Date(j.getTime()+(j.getTimezoneOffset()*60000))},getUTCDate:function(){return this.date},getInitialDate:function(){return this.initialDate},setInitialDate:function(j){this.initialDate=j},setDate:function(j){this.setUTCDate(new Date(j.getTime()-(j.getTimezoneOffset()*60000)))},setUTCDate:function(j){if(j>=this.startDate&&j<=this.endDate){this.date=j;this.setValue();this.viewDate=this.date;this.fill()}else{this.element.trigger({type:"outOfRange",date:j,startDate:this.startDate,endDate:this.endDate})}},setFormat:function(k){this.format=d.parseFormat(k,this.formatType);var j;if(this.isInput){j=this.element}else{if(this.component){j=this.element.find("input")}}if(j&&j.val()){this.setValue()}},setValue:function(){var j=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(j)}this.element.data("date",j)}else{this.element.val(j)}if(this.linkField){e("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))}},getFormattedDate:function(j){j=j||this.format;return d.formatDate(this.date,j,this.language,this.formatType,this.timezone)},setStartDate:function(j){this.startDate=j||this.startDate;if(this.startDate.valueOf()!==8639968443048000){this.startDate=d.parseDate(this.startDate,this.format,this.language,this.formatType,this.timezone)}this.update();this.updateNavArrows()},setEndDate:function(j){this.endDate=j||this.endDate;if(this.endDate.valueOf()!==8639968443048000){this.endDate=d.parseDate(this.endDate,this.format,this.language,this.formatType,this.timezone)}this.update();this.updateNavArrows()},setDatesDisabled:function(k){this.datesDisabled=k||[];if(!e.isArray(this.datesDisabled)){this.datesDisabled=this.datesDisabled.split(/,\s*/)}var j=this;this.datesDisabled=e.map(this.datesDisabled,function(l){return d.parseDate(l,j.format,j.language,j.formatType,j.timezone).toDateString()});this.update();this.updateNavArrows()},setTitle:function(j,k){return this.picker.find(j).find("th:eq(1)").text(this.title===false?k:this.title)},setDaysOfWeekDisabled:function(j){this.daysOfWeekDisabled=j||[];if(!e.isArray(this.daysOfWeekDisabled)){this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)}this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(k){return parseInt(k,10)});this.update();this.updateNavArrows()},setMinutesDisabled:function(j){this.minutesDisabled=j||[];if(!e.isArray(this.minutesDisabled)){this.minutesDisabled=this.minutesDisabled.split(/,\s*/)}this.minutesDisabled=e.map(this.minutesDisabled,function(k){return parseInt(k,10)});this.update();this.updateNavArrows()},setHoursDisabled:function(j){this.hoursDisabled=j||[];if(!e.isArray(this.hoursDisabled)){this.hoursDisabled=this.hoursDisabled.split(/,\s*/)}this.hoursDisabled=e.map(this.hoursDisabled,function(k){return parseInt(k,10)});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}if(!this.zIndex){var k=0;e("div").each(function(){var p=parseInt(e(this).css("zIndex"),10);if(p>k){k=p}});this.zIndex=k+10}var o,n,m,l;if(this.container instanceof e){l=this.container.offset()}else{l=e(this.container).offset()}if(this.component){o=this.component.offset();m=o.left;if(this.pickerPosition==="bottom-left"||this.pickerPosition==="top-left"){m+=this.component.outerWidth()-this.picker.outerWidth()}}else{o=this.element.offset();m=o.left;if(this.pickerPosition==="bottom-left"||this.pickerPosition==="top-left"){m+=this.element.outerWidth()-this.picker.outerWidth()}}var j=document.body.clientWidth||window.innerWidth;if(m+220>j){m=j-220}if(this.pickerPosition==="top-left"||this.pickerPosition==="top-right"){n=o.top-this.picker.outerHeight()}else{n=o.top+this.height}n=n-l.top;m=m-l.left;this.picker.css({top:n,left:m,zIndex:this.zIndex})},hour_minute:"^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]",update:function(){var j,k=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){j=arguments[0];k=true}else{j=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate;if(typeof j==="string"){j=j.replace(/^\s+|\s+$/g,"")}}if(!j){j=new Date();k=false}if(typeof j==="string"){if(new RegExp(this.hour_minute).test(j)||new RegExp(this.hour_minute+":[0-5][0-9]").test(j)){j=this.getDate()}}this.date=d.parseDate(j,this.format,this.language,this.formatType,this.timezone);if(k){this.setValue()}if(this.date<this.startDate){this.viewDate=new Date(this.startDate)}else{if(this.date>this.endDate){this.viewDate=new Date(this.endDate)}else{this.viewDate=new Date(this.date)}}this.fill()},fillDow:function(){var j=this.weekStart,k="<tr>";while(j<this.weekStart+7){k+='<th class="dow">'+f[this.language].daysMin[(j++)%7]+"</th>"}k+="</tr>";this.picker.find(".datetimepicker-days thead").append(k)},fillMonths:function(){var l="";var m=new Date(this.viewDate);for(var k=0;k<12;k++){m.setUTCMonth(k);var j=this.onRenderMonth(m);l+='<span class="'+j.join(" ")+'">'+f[this.language].monthsShort[k]+"</span>"}this.picker.find(".datetimepicker-months td").html(l)},fill:function(){if(!this.date||!this.viewDate){return}var E=new Date(this.viewDate),t=E.getUTCFullYear(),G=E.getUTCMonth(),n=E.getUTCDate(),A=E.getUTCHours(),w=this.startDate.getUTCFullYear(),B=this.startDate.getUTCMonth(),p=this.endDate.getUTCFullYear(),x=this.endDate.getUTCMonth()+1,q=(new i(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate())).valueOf(),D=new Date();this.setTitle(".datetimepicker-days",f[this.language].months[G]+" "+t);if(this.formatViewType==="time"){var k=this.getFormattedDate();this.setTitle(".datetimepicker-hours",k);this.setTitle(".datetimepicker-minutes",k)}else{this.setTitle(".datetimepicker-hours",n+" "+f[this.language].months[G]+" "+t);this.setTitle(".datetimepicker-minutes",n+" "+f[this.language].months[G]+" "+t)}this.picker.find("tfoot th.today").text(f[this.language].today||f.en.today).toggle(this.todayBtn!==false);this.picker.find("tfoot th.clear").text(f[this.language].clear||f.en.clear).toggle(this.clearBtn!==false);this.updateNavArrows();this.fillMonths();var I=i(t,G-1,28,0,0,0,0),z=d.getDaysInMonth(I.getUTCFullYear(),I.getUTCMonth());I.setUTCDate(z);I.setUTCDate(z-(I.getUTCDay()-this.weekStart+7)%7);var j=new Date(I);j.setUTCDate(j.getUTCDate()+42);j=j.valueOf();var r=[];var F;while(I.valueOf()<j){if(I.getUTCDay()===this.weekStart){r.push("<tr>")}F=this.onRenderDay(I);if(I.getUTCFullYear()<t||(I.getUTCFullYear()===t&&I.getUTCMonth()<G)){F.push("old")}else{if(I.getUTCFullYear()>t||(I.getUTCFullYear()===t&&I.getUTCMonth()>G)){F.push("new")}}if(this.todayHighlight&&I.getUTCFullYear()===D.getFullYear()&&I.getUTCMonth()===D.getMonth()&&I.getUTCDate()===D.getDate()){F.push("today")}if(I.valueOf()===q){F.push("active")}if((I.valueOf()+86400000)<=this.startDate||I.valueOf()>this.endDate||e.inArray(I.getUTCDay(),this.daysOfWeekDisabled)!==-1||e.inArray(I.toDateString(),this.datesDisabled)!==-1){F.push("disabled")}r.push('<td class="'+F.join(" ")+'">'+I.getUTCDate()+"</td>");if(I.getUTCDay()===this.weekEnd){r.push("</tr>")}I.setUTCDate(I.getUTCDate()+1)}this.picker.find(".datetimepicker-days tbody").empty().append(r.join(""));r=[];var u="",C="",s="";var l=this.hoursDisabled||[];E=new Date(this.viewDate);for(var y=0;y<24;y++){E.setUTCHours(y);F=this.onRenderHour(E);if(l.indexOf(y)!==-1){F.push("disabled")}var v=i(t,G,n,y);if((v.valueOf()+3600000)<=this.startDate||v.valueOf()>this.endDate){F.push("disabled")}else{if(A===y){F.push("active")}}if(this.showMeridian&&f[this.language].meridiem.length===2){C=(y<12?f[this.language].meridiem[0]:f[this.language].meridiem[1]);if(C!==s){if(s!==""){r.push("</fieldset>")}r.push('<fieldset class="hour"><legend>'+C.toUpperCase()+"</legend>")}s=C;u=(y%12?y%12:12);if(y<12){F.push("hour_am")}else{F.push("hour_pm")}r.push('<span class="'+F.join(" ")+'">'+u+"</span>");if(y===23){r.push("</fieldset>")}}else{u=y+":00";r.push('<span class="'+F.join(" ")+'">'+u+"</span>")}}this.picker.find(".datetimepicker-hours td").html(r.join(""));r=[];u="";C="";s="";var m=this.minutesDisabled||[];E=new Date(this.viewDate);for(var y=0;y<60;y+=this.minuteStep){if(m.indexOf(y)!==-1){continue}E.setUTCMinutes(y);E.setUTCSeconds(0);F=this.onRenderMinute(E);if(this.showMeridian&&f[this.language].meridiem.length===2){C=(A<12?f[this.language].meridiem[0]:f[this.language].meridiem[1]);if(C!==s){if(s!==""){r.push("</fieldset>")}r.push('<fieldset class="minute"><legend>'+C.toUpperCase()+"</legend>")}s=C;u=(A%12?A%12:12);r.push('<span class="'+F.join(" ")+'">'+u+":"+(y<10?"0"+y:y)+"</span>");if(y===59){r.push("</fieldset>")}}else{u=y+":00";r.push('<span class="'+F.join(" ")+'">'+A+":"+(y<10?"0"+y:y)+"</span>")}}this.picker.find(".datetimepicker-minutes td").html(r.join(""));var J=this.date.getUTCFullYear();var o=this.setTitle(".datetimepicker-months",t).end().find(".month").removeClass("active");if(J===t){o.eq(this.date.getUTCMonth()).addClass("active")}if(t<w||t>p){o.addClass("disabled")}if(t===w){o.slice(0,B).addClass("disabled")}if(t===p){o.slice(x).addClass("disabled")}r="";t=parseInt(t/10,10)*10;var H=this.setTitle(".datetimepicker-years",t+"-"+(t+9)).end().find("td");t-=1;E=new Date(this.viewDate);for(var y=-1;y<11;y++){E.setUTCFullYear(t);F=this.onRenderYear(E);if(y===-1||y===10){F.push(c)}r+='<span class="'+F.join(" ")+'">'+t+"</span>";t+=1}H.html(r);this.place()},updateNavArrows:function(){var n=new Date(this.viewDate),l=n.getUTCFullYear(),m=n.getUTCMonth(),k=n.getUTCDate(),j=n.getUTCHours();switch(this.viewMode){case 0:if(l<=this.startDate.getUTCFullYear()&&m<=this.startDate.getUTCMonth()&&k<=this.startDate.getUTCDate()&&j<=this.startDate.getUTCHours()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(l>=this.endDate.getUTCFullYear()&&m>=this.endDate.getUTCMonth()&&k>=this.endDate.getUTCDate()&&j>=this.endDate.getUTCHours()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:if(l<=this.startDate.getUTCFullYear()&&m<=this.startDate.getUTCMonth()&&k<=this.startDate.getUTCDate()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(l>=this.endDate.getUTCFullYear()&&m>=this.endDate.getUTCMonth()&&k>=this.endDate.getUTCDate()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 2:if(l<=this.startDate.getUTCFullYear()&&m<=this.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(l>=this.endDate.getUTCFullYear()&&m>=this.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 3:case 4:if(l<=this.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(l>=this.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},mousewheel:function(k){k.preventDefault();k.stopPropagation();if(this.wheelPause){return}this.wheelPause=true;var j=k.originalEvent;var m=j.wheelDelta;var l=m>0?1:(m===0)?0:-1;if(this.wheelViewModeNavigationInverseDirection){l=-l}this.showMode(l);setTimeout(e.proxy(function(){this.wheelPause=false},this),this.wheelViewModeNavigationDelay)},click:function(n){n.stopPropagation();n.preventDefault();var o=e(n.target).closest("span, td, th, legend");if(o.is("."+this.icontype)){o=e(o).parent().closest("span, td, th, legend")}if(o.length===1){if(o.is(".disabled")){this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});return}switch(o[0].nodeName.toLowerCase()){case"th":switch(o[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var j=d.modes[this.viewMode].navStep*(o[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,j);break;case 1:this.viewDate=this.moveDate(this.viewDate,j);break;case 2:this.viewDate=this.moveMonth(this.viewDate,j);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,j);break}this.fill();this.element.trigger({type:o[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"clear":this.reset();if(this.autoclose){this.hide()}break;case"today":var k=new Date();k=i(k.getFullYear(),k.getMonth(),k.getDate(),k.getHours(),k.getMinutes(),k.getSeconds(),0);if(k<this.startDate){k=this.startDate}else{if(k>this.endDate){k=this.endDate}}this.viewMode=this.startViewMode;this.showMode(0);this._setDate(k);this.fill();if(this.autoclose){this.hide()}break}break;case"span":if(!o.is(".disabled")){var q=this.viewDate.getUTCFullYear(),p=this.viewDate.getUTCMonth(),r=this.viewDate.getUTCDate(),s=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),t=this.viewDate.getUTCSeconds();if(o.is(".month")){this.viewDate.setUTCDate(1);p=o.parent().find("span").index(o);r=this.viewDate.getUTCDate();this.viewDate.setUTCMonth(p);this.element.trigger({type:"changeMonth",date:this.viewDate});if(this.viewSelect>=3){this._setDate(i(q,p,r,s,l,t,0))}}else{if(o.is(".year")){this.viewDate.setUTCDate(1);q=parseInt(o.text(),10)||0;this.viewDate.setUTCFullYear(q);this.element.trigger({type:"changeYear",date:this.viewDate});if(this.viewSelect>=4){this._setDate(i(q,p,r,s,l,t,0))}}else{if(o.is(".hour")){s=parseInt(o.text(),10)||0;if(o.hasClass("hour_am")||o.hasClass("hour_pm")){if(s===12&&o.hasClass("hour_am")){s=0}else{if(s!==12&&o.hasClass("hour_pm")){s+=12}}}this.viewDate.setUTCHours(s);this.element.trigger({type:"changeHour",date:this.viewDate});if(this.viewSelect>=1){this._setDate(i(q,p,r,s,l,t,0))}}else{if(o.is(".minute")){l=parseInt(o.text().substr(o.text().indexOf(":")+1),10)||0;this.viewDate.setUTCMinutes(l);this.element.trigger({type:"changeMinute",date:this.viewDate});if(this.viewSelect>=0){this._setDate(i(q,p,r,s,l,t,0))}}}}}if(this.viewMode!==0){var m=this.viewMode;this.showMode(-1);this.fill();if(m===this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}}break;case"td":if(o.is(".day")&&!o.is(".disabled")){var r=parseInt(o.text(),10)||1;var q=this.viewDate.getUTCFullYear(),p=this.viewDate.getUTCMonth(),s=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),t=this.viewDate.getUTCSeconds();if(o.is(".old")){if(p===0){p=11;q-=1}else{p-=1}}else{if(o.is(".new")){if(p===11){p=0;q+=1}else{p+=1}}}this.viewDate.setUTCFullYear(q);this.viewDate.setUTCMonth(p,r);this.element.trigger({type:"changeDay",date:this.viewDate});if(this.viewSelect>=2){this._setDate(i(q,p,r,s,l,t,0))}}var m=this.viewMode;this.showMode(-1);this.fill();if(m===this.viewMode&&this.autoclose){this.hide()}break}}},_setDate:function(j,l){if(!l||l==="date"){this.date=j}if(!l||l==="view"){this.viewDate=j}this.fill();this.setValue();var k;if(this.isInput){k=this.element}else{if(this.component){k=this.element.find("input")}}if(k){k.change()}this.element.trigger({type:"changeDate",date:this.getDate()});if(j===null){this.date=this.viewDate}},moveMinute:function(k,j){if(!j){return k}var l=new Date(k.valueOf());l.setUTCMinutes(l.getUTCMinutes()+(j*this.minuteStep));return l},moveHour:function(k,j){if(!j){return k}var l=new Date(k.valueOf());l.setUTCHours(l.getUTCHours()+j);return l},moveDate:function(k,j){if(!j){return k}var l=new Date(k.valueOf());l.setUTCDate(l.getUTCDate()+j);return l},moveMonth:function(j,k){if(!k){return j}var n=new Date(j.valueOf()),r=n.getUTCDate(),o=n.getUTCMonth(),m=Math.abs(k),q,p;k=k>0?1:-1;if(m===1){p=k===-1?function(){return n.getUTCMonth()===o}:function(){return n.getUTCMonth()!==q};q=o+k;n.setUTCMonth(q);if(q<0||q>11){q=(q+12)%12}}else{for(var l=0;l<m;l++){n=this.moveMonth(n,k)}q=n.getUTCMonth();n.setUTCDate(r);p=function(){return q!==n.getUTCMonth()}}while(p()){n.setUTCDate(--r);n.setUTCMonth(q)}return n},moveYear:function(k,j){return this.moveMonth(k,j*12)},dateWithinRange:function(j){return j>=this.startDate&&j<=this.endDate},keydown:function(p){if(this.picker.is(":not(:visible)")){if(p.keyCode===27){this.show()}return}var l=false,k,j,o;switch(p.keyCode){case 27:this.hide();p.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation){break}k=p.keyCode===37?-1:1;var n=this.viewMode;if(p.ctrlKey){n+=2}else{if(p.shiftKey){n+=1}}if(n===4){j=this.moveYear(this.date,k);o=this.moveYear(this.viewDate,k)}else{if(n===3){j=this.moveMonth(this.date,k);o=this.moveMonth(this.viewDate,k)}else{if(n===2){j=this.moveDate(this.date,k);o=this.moveDate(this.viewDate,k)}else{if(n===1){j=this.moveHour(this.date,k);o=this.moveHour(this.viewDate,k)}else{if(n===0){j=this.moveMinute(this.date,k);o=this.moveMinute(this.viewDate,k)}}}}}if(this.dateWithinRange(j)){this.date=j;this.viewDate=o;this.setValue();this.update();p.preventDefault();l=true}break;case 38:case 40:if(!this.keyboardNavigation){break}k=p.keyCode===38?-1:1;n=this.viewMode;if(p.ctrlKey){n+=2}else{if(p.shiftKey){n+=1}}if(n===4){j=this.moveYear(this.date,k);o=this.moveYear(this.viewDate,k)}else{if(n===3){j=this.moveMonth(this.date,k);o=this.moveMonth(this.viewDate,k)}else{if(n===2){j=this.moveDate(this.date,k*7);o=this.moveDate(this.viewDate,k*7)}else{if(n===1){if(this.showMeridian){j=this.moveHour(this.date,k*6);o=this.moveHour(this.viewDate,k*6)}else{j=this.moveHour(this.date,k*4);o=this.moveHour(this.viewDate,k*4)}}else{if(n===0){j=this.moveMinute(this.date,k*4);o=this.moveMinute(this.viewDate,k*4)}}}}}if(this.dateWithinRange(j)){this.date=j;this.viewDate=o;this.setValue();this.update();p.preventDefault();l=true}break;case 13:if(this.viewMode!==0){var q=this.viewMode;this.showMode(-1);this.fill();if(q===this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}p.preventDefault();break;case 9:this.hide();break}if(l){var m;if(this.isInput){m=this.element}else{if(this.component){m=this.element.find("input")}}if(m){m.change()}this.element.trigger({type:"changeDate",date:this.getDate()})}},showMode:function(j){if(j){var k=Math.max(0,Math.min(d.modes.length-1,this.viewMode+j));if(k>=this.minView&&k<=this.maxView){this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:k});this.viewMode=k}}this.picker.find(">div").hide().filter(".datetimepicker-"+d.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()},reset:function(){this._setDate(null,"date")},convertViewModeText:function(j){switch(j){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var c=e.fn.datetimepicker;e.fn.datetimepicker=function(l){var j=Array.apply(null,arguments);j.shift();var k;this.each(function(){var o=e(this),n=o.data("datetimepicker"),m=typeof l==="object"&&l;if(!n){o.data("datetimepicker",(n=new h(this,e.extend({},e.fn.datetimepicker.defaults,m))))}if(typeof l==="string"&&typeof n[l]==="function"){k=n[l].apply(n,j);if(k!==g){return false}}});if(k!==g){return k}else{return this}};e.fn.datetimepicker.defaults={};e.fn.datetimepicker.Constructor=h;var f=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",clear:"Clear"}};var d={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(j){return(((j%4===0)&&(j%100!==0))||(j%400===0))},getDaysInMonth:function(j,k){return[31,(d.isLeapYear(j)?29:28),31,30,31,30,31,31,30,31,30,31][k]},getDefaultFormat:function(j,k){if(j==="standard"){if(k==="input"){return"yyyy-mm-dd hh:ii"}else{return"yyyy-mm-dd hh:ii:ss"}}else{if(j==="php"){if(k==="input"){return"Y-m-d H:i"}else{return"Y-m-d H:i:s"}}else{throw new Error("Invalid format type.")}}},validParts:function(j){if(j==="standard"){return/t|hh?|HH?|p|P|z|Z|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g}else{if(j==="php"){return/[dDjlNwzFmMnStyYaABgGhHis]/g}else{throw new Error("Invalid format type.")}}},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(m,k){var j=m.replace(this.validParts(k),"\0").split("\0"),l=m.match(this.validParts(k));if(!j||!j.length||!l||l.length===0){throw new Error("Invalid date format.")}return{separators:j,parts:l}},parseDate:function(A,y,v,j,r){if(A instanceof Date){var u=new Date(A.valueOf()-A.getTimezoneOffset()*60000);u.setMilliseconds(0);return u}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(A)){y=this.parseFormat("yyyy-mm-dd",j)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(A)){y=this.parseFormat("yyyy-mm-dd hh:ii",j)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(A)){y=this.parseFormat("yyyy-mm-dd hh:ii:ss",j)}if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(A)){var l=/([-+]\d+)([dmwy])/,q=A.match(/([-+]\d+)([dmwy])/g),t,p;A=new Date();for(var x=0;x<q.length;x++){t=l.exec(q[x]);p=parseInt(t[1]);switch(t[2]){case"d":A.setUTCDate(A.getUTCDate()+p);break;case"m":A=h.prototype.moveMonth.call(h.prototype,A,p);break;case"w":A.setUTCDate(A.getUTCDate()+p*7);break;case"y":A=h.prototype.moveYear.call(h.prototype,A,p);break}}return i(A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate(),A.getUTCHours(),A.getUTCMinutes(),A.getUTCSeconds(),0)}var q=A&&A.toString().match(this.nonpunctuation)||[],A=new Date(0,0,0,0,0,0,0),m={},z=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P","z","Z"],o={hh:function(C,s){return C.setUTCHours(s)},h:function(C,s){return C.setUTCHours(s)},HH:function(C,s){return C.setUTCHours(s===12?0:s)},H:function(C,s){return C.setUTCHours(s===12?0:s)},ii:function(C,s){return C.setUTCMinutes(s)},i:function(C,s){return C.setUTCMinutes(s)},ss:function(C,s){return C.setUTCSeconds(s)},s:function(C,s){return C.setUTCSeconds(s)},yyyy:function(C,s){return C.setUTCFullYear(s)},yy:function(C,s){return C.setUTCFullYear(2000+s)},m:function(C,s){s-=1;while(s<0){s+=12}s%=12;C.setUTCMonth(s);while(C.getUTCMonth()!==s){if(isNaN(C.getUTCMonth())){return C}else{C.setUTCDate(C.getUTCDate()-1)}}return C},d:function(C,s){return C.setUTCDate(s)},p:function(C,s){return C.setUTCHours(s===1?C.getUTCHours()+12:C.getUTCHours())},z:function(){return r}},B,k,t;o.M=o.MM=o.mm=o.m;o.dd=o.d;o.P=o.p;o.Z=o.z;A=i(A.getFullYear(),A.getMonth(),A.getDate(),A.getHours(),A.getMinutes(),A.getSeconds());if(q.length===y.parts.length){for(var x=0,w=y.parts.length;x<w;x++){B=parseInt(q[x],10);t=y.parts[x];if(isNaN(B)){switch(t){case"MM":k=e(f[v].months).filter(function(){var s=this.slice(0,q[x].length),C=q[x].slice(0,s.length);return s===C});B=e.inArray(k[0],f[v].months)+1;break;case"M":k=e(f[v].monthsShort).filter(function(){var s=this.slice(0,q[x].length),C=q[x].slice(0,s.length);return s.toLowerCase()===C.toLowerCase()});B=e.inArray(k[0],f[v].monthsShort)+1;break;case"p":case"P":B=e.inArray(q[x].toLowerCase(),f[v].meridiem);break;case"z":case"Z":r;break}}m[t]=B}for(var x=0,n;x<z.length;x++){n=z[x];if(n in m&&!isNaN(m[n])){o[n](A,m[n])}}}return A},formatDate:function(l,q,m,p,o){if(l===null){return""}var k;if(p==="standard"){k={t:l.getTime(),yy:l.getUTCFullYear().toString().substring(2),yyyy:l.getUTCFullYear(),m:l.getUTCMonth()+1,M:f[m].monthsShort[l.getUTCMonth()],MM:f[m].months[l.getUTCMonth()],d:l.getUTCDate(),D:f[m].daysShort[l.getUTCDay()],DD:f[m].days[l.getUTCDay()],p:(f[m].meridiem.length===2?f[m].meridiem[l.getUTCHours()<12?0:1]:""),h:l.getUTCHours(),i:l.getUTCMinutes(),s:l.getUTCSeconds(),z:o};if(f[m].meridiem.length===2){k.H=(k.h%12===0?12:k.h%12)}else{k.H=k.h}k.HH=(k.H<10?"0":"")+k.H;k.P=k.p.toUpperCase();k.Z=k.z;k.hh=(k.h<10?"0":"")+k.h;k.ii=(k.i<10?"0":"")+k.i;k.ss=(k.s<10?"0":"")+k.s;k.dd=(k.d<10?"0":"")+k.d;k.mm=(k.m<10?"0":"")+k.m}else{if(p==="php"){k={y:l.getUTCFullYear().toString().substring(2),Y:l.getUTCFullYear(),F:f[m].months[l.getUTCMonth()],M:f[m].monthsShort[l.getUTCMonth()],n:l.getUTCMonth()+1,t:d.getDaysInMonth(l.getUTCFullYear(),l.getUTCMonth()),j:l.getUTCDate(),l:f[m].days[l.getUTCDay()],D:f[m].daysShort[l.getUTCDay()],w:l.getUTCDay(),N:(l.getUTCDay()===0?7:l.getUTCDay()),S:(l.getUTCDate()%10<=f[m].suffix.length?f[m].suffix[l.getUTCDate()%10-1]:""),a:(f[m].meridiem.length===2?f[m].meridiem[l.getUTCHours()<12?0:1]:""),g:(l.getUTCHours()%12===0?12:l.getUTCHours()%12),G:l.getUTCHours(),i:l.getUTCMinutes(),s:l.getUTCSeconds()};k.m=(k.n<10?"0":"")+k.n;k.d=(k.j<10?"0":"")+k.j;k.A=k.a.toString().toUpperCase();k.h=(k.g<10?"0":"")+k.g;k.H=(k.G<10?"0":"")+k.G;k.i=(k.i<10?"0":"")+k.i;k.s=(k.s<10?"0":"")+k.s}else{throw new Error("Invalid format type.")}}var l=[],r=e.extend([],q.separators);for(var n=0,j=q.parts.length;n<j;n++){if(r.length){l.push(r.shift())}l.push(k[q.parts[n]])}if(r.length){l.push(r.shift())}return l.join("")},convertViewMode:function(j){switch(j){case 4:case"decade":j=4;break;case 3:case"year":j=3;break;case 2:case"month":j=2;break;case 1:case"day":j=1;break;case 0:case"hour":j=0;break}return j},headTemplate:'<thead><tr><th class="prev"><i class="{iconType} {leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{iconType} {rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};d.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table></div></div>";d.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+d.headTemplateV3+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+d.headTemplateV3+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+d.headTemplateV3+"<tbody></tbody>"+d.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+d.headTemplateV3+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+d.headTemplateV3+d.contTemplate+d.footTemplate+"</table></div></div>";e.fn.datetimepicker.DPGlobal=d;e.fn.datetimepicker.noConflict=function(){e.fn.datetimepicker=c;return this};e(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(k){var j=e(this);if(j.data("datetimepicker")){return}k.preventDefault();j.datetimepicker("show")});e(function(){e('[data-provide="datetimepicker-inline"]').datetimepicker()})}));(function(b){b.fn.datetimepicker.dates["zh-CN"]={days:["","","","","","","",""],daysShort:["","","","","","","",""],daysMin:["","","","","","","",""],months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],today:"",clear:"",suffix:[],meridiem:["",""]}}(jQuery));(function(){var b=[].slice;!function(d,c){var f;return f=function(){function e(h,g){null==g&&(g={}),this.$element=d(h),this.options=d.extend({},d.fn.bootstrapSwitch.defaults,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")},g),this.prevOptions={},this.$wrapper=d("<div>",{"class":function(i){return function(){var j;return j=[""+i.options.baseClass].concat(i._getClasses(i.options.wrapperClass)),j.push(i.options.state?i.options.baseClass+"-on":i.options.baseClass+"-off"),null!=i.options.size&&j.push(i.options.baseClass+"-"+i.options.size),i.options.disabled&&j.push(i.options.baseClass+"-disabled"),i.options.readonly&&j.push(i.options.baseClass+"-readonly"),i.options.indeterminate&&j.push(i.options.baseClass+"-indeterminate"),i.options.inverse&&j.push(i.options.baseClass+"-inverse"),i.$element.attr("id")&&j.push(i.options.baseClass+"-id-"+i.$element.attr("id")),j.join(" ")}}(this)()}),this.$container=d("<div>",{"class":this.options.baseClass+"-container"}),this.$on=d("<span>",{html:this.options.onText,"class":this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor}),this.$off=d("<span>",{html:this.options.offText,"class":this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor}),this.$label=d("<span>",{html:this.options.labelText,"class":this.options.baseClass+"-label"}),this.$element.on("init.bootstrapSwitch",function(i){return function(){return i.options.onInit.apply(h,arguments)}}(this)),this.$element.on("switchChange.bootstrapSwitch",function(j){return function(i){return !1===j.options.onSwitchChange.apply(h,arguments)?j.$element.is(":radio")?d("[name='"+j.$element.attr("name")+"']").trigger("previousState.bootstrapSwitch",!0):j.$element.trigger("previousState.bootstrapSwitch",!0):void 0}}(this)),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch",this.options.state)}return e.prototype._constructor=e,e.prototype.setPrevOptions=function(){return this.prevOptions=d.extend(!0,{},this.options)},e.prototype.state=function(h,g){return"undefined"==typeof h?this.options.state:this.options.disabled||this.options.readonly?this.$element:this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.$element.is(":radio")?d("[name='"+this.$element.attr("name")+"']").trigger("setPreviousOptions.bootstrapSwitch"):this.$element.trigger("setPreviousOptions.bootstrapSwitch"),this.options.indeterminate&&this.indeterminate(!1),h=!!h,this.$element.prop("checked",h).trigger("change.bootstrapSwitch",g),this.$element)},e.prototype.toggleState=function(g){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",g)},e.prototype.size=function(g){return"undefined"==typeof g?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(this.options.baseClass+"-"+this.options.size),g&&this.$wrapper.addClass(this.options.baseClass+"-"+g),this._width(),this._containerPosition(),this.options.size=g,this.$element)},e.prototype.animate=function(g){return"undefined"==typeof g?this.options.animate:(g=!!g,g===this.options.animate?this.$element:this.toggleAnimate())},e.prototype.toggleAnimate=function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(this.options.baseClass+"-animate"),this.$element},e.prototype.disabled=function(g){return"undefined"==typeof g?this.options.disabled:(g=!!g,g===this.options.disabled?this.$element:this.toggleDisabled())},e.prototype.toggleDisabled=function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(this.options.baseClass+"-disabled"),this.$element},e.prototype.readonly=function(g){return"undefined"==typeof g?this.options.readonly:(g=!!g,g===this.options.readonly?this.$element:this.toggleReadonly())},e.prototype.toggleReadonly=function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(this.options.baseClass+"-readonly"),this.$element},e.prototype.indeterminate=function(g){return"undefined"==typeof g?this.options.indeterminate:(g=!!g,g===this.options.indeterminate?this.$element:this.toggleIndeterminate())},e.prototype.toggleIndeterminate=function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(this.options.baseClass+"-indeterminate"),this._containerPosition(),this.$element},e.prototype.inverse=function(g){return"undefined"==typeof g?this.options.inverse:(g=!!g,g===this.options.inverse?this.$element:this.toggleInverse())},e.prototype.toggleInverse=function(){var g,h;return this.$wrapper.toggleClass(this.options.baseClass+"-inverse"),h=this.$on.clone(!0),g=this.$off.clone(!0),this.$on.replaceWith(g),this.$off.replaceWith(h),this.$on=g,this.$off=h,this.options.inverse=!this.options.inverse,this.$element},e.prototype.onColor=function(g){var h;return h=this.options.onColor,"undefined"==typeof g?h:(null!=h&&this.$on.removeClass(this.options.baseClass+"-"+h),this.$on.addClass(this.options.baseClass+"-"+g),this.options.onColor=g,this.$element)},e.prototype.offColor=function(g){var h;return h=this.options.offColor,"undefined"==typeof g?h:(null!=h&&this.$off.removeClass(this.options.baseClass+"-"+h),this.$off.addClass(this.options.baseClass+"-"+g),this.options.offColor=g,this.$element)},e.prototype.onText=function(g){return"undefined"==typeof g?this.options.onText:(this.$on.html(g),this._width(),this._containerPosition(),this.options.onText=g,this.$element)},e.prototype.offText=function(g){return"undefined"==typeof g?this.options.offText:(this.$off.html(g),this._width(),this._containerPosition(),this.options.offText=g,this.$element)},e.prototype.labelText=function(g){return"undefined"==typeof g?this.options.labelText:(this.$label.html(g),this._width(),this.options.labelText=g,this.$element)},e.prototype.handleWidth=function(g){return"undefined"==typeof g?this.options.handleWidth:(this.options.handleWidth=g,this._width(),this._containerPosition(),this.$element)},e.prototype.labelWidth=function(g){return"undefined"==typeof g?this.options.labelWidth:(this.options.labelWidth=g,this._width(),this._containerPosition(),this.$element)},e.prototype.baseClass=function(g){return this.options.baseClass},e.prototype.wrapperClass=function(g){return"undefined"==typeof g?this.options.wrapperClass:(g||(g=d.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(g).join(" ")),this.options.wrapperClass=g,this.$element)},e.prototype.radioAllOff=function(g){return"undefined"==typeof g?this.options.radioAllOff:(g=!!g,g===this.options.radioAllOff?this.$element:(this.options.radioAllOff=g,this.$element))},e.prototype.onInit=function(g){return"undefined"==typeof g?this.options.onInit:(g||(g=d.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=g,this.$element)},e.prototype.onSwitchChange=function(g){return"undefined"==typeof g?this.options.onSwitchChange:(g||(g=d.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=g,this.$element)},e.prototype.destroy=function(){var g;return g=this.$element.closest("form"),g.length&&g.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element},e.prototype._width=function(){var g,h;return g=this.$on.add(this.$off),g.add(this.$label).css("width",""),h="auto"===this.options.handleWidth?Math.max(this.$on.width(),this.$off.width()):this.options.handleWidth,g.width(h),this.$label.width(function(i){return function(j,k){return"auto"!==i.options.labelWidth?i.options.labelWidth:h>k?h:k}}(this)),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)},e.prototype._containerPosition=function(g,h){return null==g&&(g=this.options.state),this.$container.css("margin-left",function(i){return function(){var j;return j=[0,"-"+i._handleWidth+"px"],i.options.indeterminate?"-"+i._handleWidth/2+"px":g?i.options.inverse?j[1]:j[0]:i.options.inverse?j[0]:j[1]}}(this)),h?setTimeout(function(){return h()},50):void 0},e.prototype._init=function(){var g,h;return g=function(i){return function(){return i.setPrevOptions(),i._width(),i._containerPosition(null,function(){return i.options.animate?i.$wrapper.addClass(i.options.baseClass+"-animate"):void 0})}}(this),this.$wrapper.is(":visible")?g():h=c.setInterval(function(i){return function(){return i.$wrapper.is(":visible")?(g(),c.clearInterval(h)):void 0}}(this),50)},e.prototype._elementHandlers=function(){return this.$element.on({"setPreviousOptions.bootstrapSwitch":function(g){return function(h){return g.setPrevOptions()}}(this),"previousState.bootstrapSwitch":function(g){return function(h){return g.options=g.prevOptions,g.options.indeterminate&&g.$wrapper.addClass(g.options.baseClass+"-indeterminate"),g.$element.prop("checked",g.options.state).trigger("change.bootstrapSwitch",!0)}}(this),"change.bootstrapSwitch":function(g){return function(h,k){var j;return h.preventDefault(),h.stopImmediatePropagation(),j=g.$element.is(":checked"),g._containerPosition(j),j!==g.options.state?(g.options.state=j,g.$wrapper.toggleClass(g.options.baseClass+"-off").toggleClass(g.options.baseClass+"-on"),k?void 0:(g.$element.is(":radio")&&d("[name='"+g.$element.attr("name")+"']").not(g.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),g.$element.trigger("switchChange.bootstrapSwitch",[j]))):void 0}}(this),"focus.bootstrapSwitch":function(g){return function(h){return h.preventDefault(),g.$wrapper.addClass(g.options.baseClass+"-focused")}}(this),"blur.bootstrapSwitch":function(g){return function(h){return h.preventDefault(),g.$wrapper.removeClass(g.options.baseClass+"-focused")}}(this),"keydown.bootstrapSwitch":function(g){return function(h){if(h.which&&!g.options.disabled&&!g.options.readonly){switch(h.which){case 37:return h.preventDefault(),h.stopImmediatePropagation(),g.state(!1);case 39:return h.preventDefault(),h.stopImmediatePropagation(),g.state(!0)}}}}(this)})},e.prototype._handleHandlers=function(){return this.$on.on("click.bootstrapSwitch",function(g){return function(h){return h.preventDefault(),h.stopPropagation(),g.state(!1),g.$element.trigger("focus.bootstrapSwitch")}}(this)),this.$off.on("click.bootstrapSwitch",function(g){return function(h){return h.preventDefault(),h.stopPropagation(),g.state(!0),g.$element.trigger("focus.bootstrapSwitch")}}(this))},e.prototype._labelHandlers=function(){return this.$label.on({click:function(g){return g.stopPropagation()},"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(g){return function(h){return g._dragStart||g.options.disabled||g.options.readonly?void 0:(h.preventDefault(),h.stopPropagation(),g._dragStart=(h.pageX||h.originalEvent.touches[0].pageX)-parseInt(g.$container.css("margin-left"),10),g.options.animate&&g.$wrapper.removeClass(g.options.baseClass+"-animate"),g.$element.trigger("focus.bootstrapSwitch"))}}(this),"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(g){return function(j){var h;if(null!=g._dragStart&&(j.preventDefault(),h=(j.pageX||j.originalEvent.touches[0].pageX)-g._dragStart,!(h<-g._handleWidth||h>0))){return g._dragEnd=h,g.$container.css("margin-left",g._dragEnd+"px")}}}(this),"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(g){return function(j){var h;if(g._dragStart){return j.preventDefault(),g.options.animate&&g.$wrapper.addClass(g.options.baseClass+"-animate"),g._dragEnd?(h=g._dragEnd>-(g._handleWidth/2),g._dragEnd=!1,g.state(g.options.inverse?!h:h)):g.state(!g.options.state),g._dragStart=!1}}}(this),"mouseleave.bootstrapSwitch":function(g){return function(h){return g.$label.trigger("mouseup.bootstrapSwitch")}}(this)})},e.prototype._externalLabelHandler=function(){var g;return g=this.$element.closest("label"),g.on("click",function(h){return function(j){return j.preventDefault(),j.stopImmediatePropagation(),j.target===g[0]?h.toggleState():void 0}}(this))},e.prototype._formHandler=function(){var g;return g=this.$element.closest("form"),g.data("bootstrap-switch")?void 0:g.on("reset.bootstrapSwitch",function(){return c.setTimeout(function(){return g.find("input").filter(function(){return d(this).data("bootstrap-switch")}).each(function(){return d(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)},e.prototype._getClasses=function(h){var g,l,k,j;if(!d.isArray(h)){return[this.options.baseClass+"-"+h]}for(l=[],k=0,j=h.length;j>k;k++){g=h[k],l.push(this.options.baseClass+"-"+g)}return l},e}(),d.fn.bootstrapSwitch=function(){var e,h,g;return h=arguments[0],e=2<=arguments.length?b.call(arguments,1):[],g=this,this.each(function(){var j,i;return j=d(this),i=j.data("bootstrap-switch"),i||j.data("bootstrap-switch",i=new f(this,h)),"string"==typeof h?g=i[h].apply(i,e):void 0}),g},d.fn.bootstrapSwitch.Constructor=f,d.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}(window.jQuery,window)}).call(this);(function(b,c){if(typeof define==="function"&&define.amd&&typeof require==="function"&&typeof require.specified==="function"&&require.specified("knockout")){define(["jquery","knockout"],c)}else{c(b.jQuery,b.ko)}})(this,function(d,b){if(typeof b!=="undefined"&&b.bindingHandlers&&!b.bindingHandlers.multiselect){b.bindingHandlers.multiselect={after:["options","value","selectedOptions","enable","disable"],init:function(j,n,m,p,k){var q=d(j);var f=b.toJS(n());q.multiselect(f);if(m.has("options")){var r=m.get("options");if(b.isObservable(r)){b.computed({read:function(){r();setTimeout(function(){var s=q.data("multiselect");if(s){s.updateOriginalOptions()}q.multiselect("rebuild")},1)},disposeWhenNodeIsRemoved:j})}}if(m.has("value")){var o=m.get("value");if(b.isObservable(o)){b.computed({read:function(){o();setTimeout(function(){q.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:j}).extend({rateLimit:100,notifyWhenChangesStop:true})}}if(m.has("selectedOptions")){var h=m.get("selectedOptions");if(b.isObservable(h)){b.computed({read:function(){h();setTimeout(function(){q.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:j}).extend({rateLimit:100,notifyWhenChangesStop:true})}}var g=function(s){setTimeout(function(){if(s){q.multiselect("enable")}else{q.multiselect("disable")}})};if(m.has("enable")){var l=m.get("enable");if(b.isObservable(l)){b.computed({read:function(){g(l())},disposeWhenNodeIsRemoved:j}).extend({rateLimit:100,notifyWhenChangesStop:true})}else{g(l)}}if(m.has("disable")){var i=m.get("disable");if(b.isObservable(i)){b.computed({read:function(){g(!i())},disposeWhenNodeIsRemoved:j}).extend({rateLimit:100,notifyWhenChangesStop:true})}else{g(!i)}}b.utils.domNodeDisposal.addDisposeCallback(j,function(){q.multiselect("destroy")})},update:function(j,k,l,i,g){var f=d(j);var h=b.toJS(k());f.multiselect("setOptions",h);f.multiselect("rebuild")}}}function e(h,g){for(var f=0;f<h.length;++f){g(h[f],f)}}function c(f,g){this.$select=d(f);this.options=this.mergeOptions(d.extend({},g,this.$select.data()));if(this.$select.attr("data-placeholder")){this.options.nonSelectedText=this.$select.data("placeholder")}this.originalOptions=this.$select.clone()[0].options;this.query="";this.searchTimeout=null;this.lastToggledInput=null;this.options.multiple=this.$select.attr("multiple")==="multiple";this.options.onChange=d.proxy(this.options.onChange,this);this.options.onSelectAll=d.proxy(this.options.onSelectAll,this);this.options.onDeselectAll=d.proxy(this.options.onDeselectAll,this);this.options.onDropdownShow=d.proxy(this.options.onDropdownShow,this);this.options.onDropdownHide=d.proxy(this.options.onDropdownHide,this);this.options.onDropdownShown=d.proxy(this.options.onDropdownShown,this);this.options.onDropdownHidden=d.proxy(this.options.onDropdownHidden,this);this.options.onInitialized=d.proxy(this.options.onInitialized,this);this.options.onFiltering=d.proxy(this.options.onFiltering,this);this.buildContainer();this.buildButton();this.buildDropdown();this.buildReset();this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll(true);if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}this.options.wasDisabled=this.$select.prop("disabled");if(this.options.disableIfEmpty&&d("option",this.$select).length<=0){this.disable()}this.$select.wrap('<span class="multiselect-native-select" />').after(this.$container);this.options.onInitialized(this.$select,this.$container)}c.prototype={defaults:{buttonText:function(h,f){if(this.disabledText.length>0&&(f.prop("disabled")||(h.length==0&&this.disableIfEmpty))){return this.disabledText}else{if(h.length===0){return this.nonSelectedText}else{if(this.allSelectedText&&h.length===d("option",d(f)).length&&d("option",d(f)).length!==1&&this.multiple){if(this.selectAllNumber){return this.allSelectedText+" ("+h.length+")"}else{return this.allSelectedText}}else{if(this.numberDisplayed!=0&&h.length>this.numberDisplayed){return h.length+" "+this.nSelectedText}else{var i="";var g=this.delimiterText;h.each(function(){var j=(d(this).attr("label")!==undefined)?d(this).attr("label"):d(this).text();i+=j+g});return i.substr(0,i.length-this.delimiterText.length)}}}}},buttonTitle:function(h,f){if(h.length===0){return this.nonSelectedText}else{var i="";var g=this.delimiterText;h.each(function(){var j=(d(this).attr("label")!==undefined)?d(this).attr("label"):d(this).text();i+=j+g});return i.substr(0,i.length-this.delimiterText.length)}},checkboxName:function(f){return false},optionLabel:function(f){return d(f).attr("label")||d(f).text()},optionClass:function(f){return d(f).attr("class")||""},onChange:function(f,g){},onDropdownShow:function(f){},onDropdownHide:function(f){},onDropdownShown:function(f){},onDropdownHidden:function(f){},onSelectAll:function(){},onDeselectAll:function(){},onInitialized:function(f,g){},onFiltering:function(f){},enableHTML:false,buttonClass:"btn btn-default",inheritClass:false,buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:false,dropUp:false,selectedClass:"active",maxHeight:false,includeSelectAllOption:false,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",selectAllName:false,selectAllNumber:true,selectAllJustVisible:true,enableFiltering:false,enableCaseInsensitiveFiltering:false,enableFullValueFiltering:false,enableClickableOptGroups:false,enableCollapsibleOptGroups:false,collapseOptGroupsByDefault:false,filterPlaceholder:"Search",filterBehavior:"text",includeFilterClearBtn:true,preventInputChangeEvent:false,nonSelectedText:"None selected",nSelectedText:"selected",allSelectedText:"All selected",numberDisplayed:3,disableIfEmpty:false,disabledText:"",delimiterText:", ",includeResetOption:false,includeResetDivider:false,resetText:"Reset",templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"><span class="multiselect-selected-text"></span> <b class="caret"></b></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item multiselect-filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text" /></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="glyphicon glyphicon-remove-circle"></i></button></span>',li:'<li><a tabindex="0"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>',resetButton:'<li class="multiselect-reset text-center"><div class="input-group"><a class="btn btn-default btn-block"></a></div></li>'}},constructor:c,buildContainer:function(){this.$container=d(this.options.buttonContainer);this.$container.on("show.bs.dropdown",this.options.onDropdownShow);this.$container.on("hide.bs.dropdown",this.options.onDropdownHide);this.$container.on("shown.bs.dropdown",this.options.onDropdownShown);this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=d(this.options.templates.button).addClass(this.options.buttonClass);if(this.$select.attr("class")&&this.options.inheritClass){this.$button.addClass(this.$select.attr("class"))}if(this.$select.prop("disabled")){this.disable()}else{this.enable()}if(this.options.buttonWidth&&this.options.buttonWidth!=="auto"){this.$button.css({width:"100%",overflow:"hidden","text-overflow":"ellipsis"});this.$container.css({width:this.options.buttonWidth})}var f=this.$select.attr("tabindex");if(f){this.$button.attr("tabindex",f)}this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=d(this.options.templates.ul);if(this.options.dropRight){this.$ul.addClass("pull-right")}if(this.options.maxHeight){this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"})}if(this.options.dropUp){var f=Math.min(this.options.maxHeight,d('option[data-role!="divider"]',this.$select).length*26+d('option[data-role="divider"]',this.$select).length*19+(this.options.includeSelectAllOption?26:0)+(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering?44:0));var g=f+34;this.$ul.css({"max-height":f+"px","overflow-y":"auto","overflow-x":"hidden","margin-top":"-"+g+"px"})}this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(d.proxy(function(h,i){var g=d(i);var f=g.prop("tagName").toLowerCase();if(g.prop("value")===this.options.selectAllValue){return}if(f==="optgroup"){this.createOptgroup(i)}else{if(f==="option"){if(g.data("role")==="divider"){this.createDivider()}else{this.createOptionValue(i)}}}},this));d(this.$ul).off("change",'li:not(.multiselect-group) input[type="checkbox"], li:not(.multiselect-group) input[type="radio"]');d(this.$ul).on("change",'li:not(.multiselect-group) input[type="checkbox"], li:not(.multiselect-group) input[type="radio"]',d.proxy(function(j){var f=d(j.target);var i=f.prop("checked")||false;var g=f.val()===this.options.selectAllValue;if(this.options.selectedClass){if(i){f.closest("li").addClass(this.options.selectedClass)}else{f.closest("li").removeClass(this.options.selectedClass)}}var k=f.val();var l=this.getOptionByValue(k);var m=d("option",this.$select).not(l);var h=d("input",this.$container).not(f);if(g){if(i){this.selectAll(this.options.selectAllJustVisible,true)}else{this.deselectAll(this.options.selectAllJustVisible,true)}}else{if(i){l.prop("selected",true);if(this.options.multiple){l.prop("selected",true)}else{if(this.options.selectedClass){d(h).closest("li").removeClass(this.options.selectedClass)}d(h).prop("checked",false);m.prop("selected",false);this.$button.click()}if(this.options.selectedClass==="active"){m.closest("a").css("outline","")}}else{l.prop("selected",false)}this.options.onChange(l,i);this.updateSelectAll();if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}}this.$select.change();this.updateButtonText();if(this.options.preventInputChangeEvent){return false}},this));d("li a",this.$ul).on("mousedown",function(f){if(f.shiftKey){return false}});d(this.$ul).on("touchstart click","li a",d.proxy(function(g){g.stopPropagation();var k=d(g.target);if(g.shiftKey&&this.options.multiple){if(k.is("label")){g.preventDefault();k=k.find("input");k.prop("checked",!k.prop("checked"))}var r=k.prop("checked")||false;if(this.lastToggledInput!==null&&this.lastToggledInput!==k){var p=this.$ul.find("li:visible").index(k.parents("li"));var q=this.$ul.find("li:visible").index(this.lastToggledInput.parents("li"));if(p>q){var m=q;q=p;p=m}++q;var o=this.$ul.find("li").not(".multiselect-filter-hidden").slice(p,q).find("input");o.prop("checked",r);if(this.options.selectedClass){o.closest("li").toggleClass(this.options.selectedClass,r)}for(var n=0,l=o.length;n<l;n++){var h=d(o[n]);var f=this.getOptionByValue(h.val());f.prop("selected",r)}}k.trigger("change")}if(k.is("input")&&!k.closest("li").is(".multiselect-item")){this.lastToggledInput=k}k.blur()},this));this.$container.off("keydown.multiselect").on("keydown.multiselect",d.proxy(function(i){if(d('input[type="text"]',this.$container).is(":focus")){return}if(i.keyCode===9&&this.$container.hasClass("open")){this.$button.click()}else{var j=d(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!j.length){return}var f=j.index(j.filter(":focus"));if(i.keyCode===38&&f>0){f--}else{if(i.keyCode===40&&f<j.length-1){f++}else{if(!~f){f=0}}}var h=j.eq(f);h.focus();if(i.keyCode===32||i.keyCode===13){var g=h.find("input");g.prop("checked",!g.prop("checked"));g.change()}i.stopPropagation();i.preventDefault()}},this));if(this.options.enableClickableOptGroups&&this.options.multiple){d("li.multiselect-group input",this.$ul).on("change",d.proxy(function(l){l.stopPropagation();var g=d(l.target);var k=g.prop("checked")||false;var m=d(l.target).closest("li");var j=m.nextUntil("li.multiselect-group").not(".multiselect-filter-hidden").not(".disabled");var i=j.find("input");var h=[];var f=[];if(this.options.selectedClass){if(k){m.addClass(this.options.selectedClass)}else{m.removeClass(this.options.selectedClass)}}d.each(i,d.proxy(function(o,n){var p=d(n).val();var q=this.getOptionByValue(p);if(k){d(n).prop("checked",true);d(n).closest("li").addClass(this.options.selectedClass);q.prop("selected",true)}else{d(n).prop("checked",false);d(n).closest("li").removeClass(this.options.selectedClass);q.prop("selected",false)}f.push(this.getOptionByValue(p))},this));this.options.onChange(f,k);this.$select.change();this.updateButtonText();this.updateSelectAll()},this))}if(this.options.enableCollapsibleOptGroups&&this.options.multiple){d("li.multiselect-group .caret-container",this.$ul).on("click",d.proxy(function(g){var i=d(g.target).closest("li");var f=i.nextUntil("li.multiselect-group").not(".multiselect-filter-hidden");var h=true;f.each(function(){h=h&&!d(this).hasClass("multiselect-collapsible-hidden")});if(h){f.hide().addClass("multiselect-collapsible-hidden")}else{f.show().removeClass("multiselect-collapsible-hidden")}},this));d("li.multiselect-all",this.$ul).css("background","#f3f3f3").css("border-bottom","1px solid #eaeaea");d("li.multiselect-all > a > label.checkbox",this.$ul).css("padding","3px 20px 3px 35px");d("li.multiselect-group > a > input",this.$ul).css("margin","4px 0px 5px -20px")}},createOptionValue:function(k){var p=d(k);if(p.is(":selected")){p.prop("selected",true)}var n=this.options.optionLabel(k);var i=this.options.optionClass(k);var o=p.val();var h=this.options.multiple?"checkbox":"radio";var l=d(this.options.templates.li);var m=d("label",l);m.addClass(h);m.attr("title",n);l.addClass(i);if(this.options.collapseOptGroupsByDefault&&d(k).parent().prop("tagName").toLowerCase()==="optgroup"){l.addClass("multiselect-collapsible-hidden");l.hide()}if(this.options.enableHTML){m.html(" "+n)}else{m.text(" "+n)}var g=d("<input/>").attr("type",h);var f=this.options.checkboxName(p);if(f){g.attr("name",f)}m.prepend(g);var j=p.prop("selected")||false;g.val(o);if(o===this.options.selectAllValue){l.addClass("multiselect-item multiselect-all");g.parent().parent().addClass("multiselect-all")}m.attr("title",p.attr("title"));this.$ul.append(l);if(p.is(":disabled")){g.attr("disabled","disabled").prop("disabled",true).closest("a").attr("tabindex","-1").closest("li").addClass("disabled")}g.prop("checked",j);if(j&&this.options.selectedClass){g.closest("li").addClass(this.options.selectedClass)}},createDivider:function(g){var f=d(this.options.templates.divider);this.$ul.append(f)},createOptgroup:function(i){var f=d(i).attr("label");var h=d(i).attr("value");var j=d('<li class="multiselect-item multiselect-group"><a href="javascript:void(0);"><label><b></b></label></a></li>');var g=this.options.optionClass(i);j.addClass(g);if(this.options.enableHTML){d("label b",j).html(" "+f)}else{d("label b",j).text(" "+f)}if(this.options.enableCollapsibleOptGroups&&this.options.multiple){d("a",j).append('<span class="caret-container"><b class="caret"></b></span>')}if(this.options.enableClickableOptGroups&&this.options.multiple){d("a label",j).prepend('<input type="checkbox" value="'+h+'"/>')}if(d(i).is(":disabled")){j.addClass("disabled")}this.$ul.append(j);d("option",i).each(d.proxy(function(k,l){this.createOptionValue(l)},this))},buildReset:function(){if(this.options.includeResetOption){if(this.options.includeResetDivider){this.$ul.prepend(d(this.options.templates.divider))}var f=d(this.options.templates.resetButton);if(this.options.enableHTML){d("a",f).html(this.options.resetText)}else{d("a",f).text(this.options.resetText)}d("a",f).click(d.proxy(function(){this.clearSelection()},this));this.$ul.prepend(f)}},buildSelectAll:function(){if(typeof this.options.selectAllValue==="number"){this.options.selectAllValue=this.options.selectAllValue.toString()}var f=this.hasSelectAll();if(!f&&this.options.includeSelectAllOption&&this.options.multiple&&d("option",this.$select).length>this.options.includeSelectAllIfMoreThan){if(this.options.includeSelectAllDivider){this.$ul.prepend(d(this.options.templates.divider))}var h=d(this.options.templates.li);d("label",h).addClass("checkbox");if(this.options.enableHTML){d("label",h).html(" "+this.options.selectAllText)}else{d("label",h).text(" "+this.options.selectAllText)}if(this.options.selectAllName){d("label",h).prepend('<input type="checkbox" name="'+this.options.selectAllName+'" />')}else{d("label",h).prepend('<input type="checkbox" />')}var g=d("input",h);g.val(this.options.selectAllValue);h.addClass("multiselect-item multiselect-all");g.parent().parent().addClass("multiselect-all");this.$ul.prepend(h);g.prop("checked",false)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var g=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find("option").length>=g){this.$filter=d(this.options.templates.filter);d("input",this.$filter).attr("placeholder",this.options.filterPlaceholder);if(this.options.includeFilterClearBtn){var f=d(this.options.templates.filterClearBtn);f.on("click",d.proxy(function(h){clearTimeout(this.searchTimeout);this.query="";this.$filter.find(".multiselect-search").val("");d("li",this.$ul).show().removeClass("multiselect-filter-hidden");this.updateSelectAll();if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}},this));this.$filter.find(".input-group").append(f)}this.$ul.prepend(this.$filter);this.$filter.val(this.query).on("click",function(h){h.stopPropagation()}).on("input keydown",d.proxy(function(h){if(h.which===13){h.preventDefault()}clearTimeout(this.searchTimeout);this.searchTimeout=this.asyncFunction(d.proxy(function(){if(this.query!==h.target.value){this.query=h.target.value;var i,j;d.each(d("li",this.$ul),d.proxy(function(m,n){var p=d("input",n).length>0?d("input",n).val():"";var q=d("label",n).text();var k="";if((this.options.filterBehavior==="text")){k=q}else{if((this.options.filterBehavior==="value")){k=p}else{if(this.options.filterBehavior==="both"){k=q+"\n"+p}}}if(p!==this.options.selectAllValue&&q){var o=false;if(this.options.enableCaseInsensitiveFiltering){k=k.toLowerCase();this.query=this.query.toLowerCase()}if(this.options.enableFullValueFiltering&&this.options.filterBehavior!=="both"){var l=k.trim().substring(0,this.query.length);if(this.query.indexOf(l)>-1){o=true}}else{if(k.indexOf(this.query)>-1){o=true}}if(!o){d(n).css("display","none");d(n).addClass("multiselect-filter-hidden")}if(o){d(n).css("display","block");d(n).removeClass("multiselect-filter-hidden")}if(d(n).hasClass("multiselect-group")){i=n;j=o}else{if(o){d(i).show().removeClass("multiselect-filter-hidden")}if(!o&&j){d(n).show().removeClass("multiselect-filter-hidden")}}}},this))}this.updateSelectAll();if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}this.options.onFiltering(h.target)},this),300,this)},this))}}},destroy:function(){this.$container.remove();this.$select.show();this.$select.prop("disabled",this.options.wasDisabled);this.$select.data("multiselect",null)},refresh:function(){var f={};d("li input",this.$ul).each(function(){f[d(this).val()]=d(this)});d("option",this.$select).each(d.proxy(function(h,i){var g=d(i);var j=f[d(i).val()];if(g.is(":selected")){j.prop("checked",true);if(this.options.selectedClass){j.closest("li").addClass(this.options.selectedClass)}}else{j.prop("checked",false);if(this.options.selectedClass){j.closest("li").removeClass(this.options.selectedClass)}}if(g.is(":disabled")){j.attr("disabled","disabled").prop("disabled",true).closest("li").addClass("disabled")}else{j.prop("disabled",false).closest("li").removeClass("disabled")}},this));this.updateButtonText();this.updateSelectAll();if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}},select:function(k,l){if(!d.isArray(k)){k=[k]}for(var f=0;f<k.length;f++){var h=k[f];if(h===null||h===undefined){continue}var j=this.getOptionByValue(h);var g=this.getInputByValue(h);if(j===undefined||g===undefined){continue}if(!this.options.multiple){this.deselectAll(false)}if(this.options.selectedClass){g.closest("li").addClass(this.options.selectedClass)}g.prop("checked",true);j.prop("selected",true);if(l){this.options.onChange(j,true)}}this.updateButtonText();this.updateSelectAll();if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}},clearSelection:function(){this.deselectAll(false);this.updateButtonText();this.updateSelectAll();if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}},deselect:function(f,l){if(!d.isArray(f)){f=[f]}for(var g=0;g<f.length;g++){var j=f[g];if(j===null||j===undefined){continue}var k=this.getOptionByValue(j);var h=this.getInputByValue(j);if(k===undefined||h===undefined){continue}if(this.options.selectedClass){h.closest("li").removeClass(this.options.selectedClass)}h.prop("checked",false);k.prop("selected",false);if(l){this.options.onChange(k,false)}}this.updateButtonText();this.updateSelectAll();if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}},selectAll:function(f,g){var f=typeof f==="undefined"?true:f;var i=d("li:not(.divider):not(.disabled):not(.multiselect-group)",this.$ul);var h=d("li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)",this.$ul).filter(":visible");if(f){d("input:enabled",h).prop("checked",true);h.addClass(this.options.selectedClass);d("input:enabled",h).each(d.proxy(function(j,k){var m=d(k).val();var l=this.getOptionByValue(m);d(l).prop("selected",true)},this))}else{d("input:enabled",i).prop("checked",true);i.addClass(this.options.selectedClass);d("input:enabled",i).each(d.proxy(function(j,k){var m=d(k).val();var l=this.getOptionByValue(m);d(l).prop("selected",true)},this))}d('li input[value="'+this.options.selectAllValue+'"]',this.$ul).prop("checked",true);if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}if(g){this.options.onSelectAll()}},deselectAll:function(f,g){var f=typeof f==="undefined"?true:f;var i=d("li:not(.divider):not(.disabled):not(.multiselect-group)",this.$ul);var h=d("li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)",this.$ul).filter(":visible");if(f){d('input[type="checkbox"]:enabled',h).prop("checked",false);h.removeClass(this.options.selectedClass);d('input[type="checkbox"]:enabled',h).each(d.proxy(function(j,k){var m=d(k).val();var l=this.getOptionByValue(m);d(l).prop("selected",false)},this))}else{d('input[type="checkbox"]:enabled',i).prop("checked",false);i.removeClass(this.options.selectedClass);d('input[type="checkbox"]:enabled',i).each(d.proxy(function(j,k){var m=d(k).val();var l=this.getOptionByValue(m);d(l).prop("selected",false)},this))}d('li input[value="'+this.options.selectAllValue+'"]',this.$ul).prop("checked",false);if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}if(g){this.options.onDeselectAll()}},rebuild:function(){this.$ul.html("");this.options.multiple=this.$select.attr("multiple")==="multiple";this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll(true);if(this.options.enableClickableOptGroups&&this.options.multiple){this.updateOptGroups()}if(this.options.disableIfEmpty&&d("option",this.$select).length<=0){this.disable()}else{this.enable()}if(this.options.dropRight){this.$ul.addClass("pull-right")}},dataprovider:function(h){var f=0;var g=this.$select.empty();d.each(h,function(k,m){var j;if(d.isArray(m.children)){f++;j=d("<optgroup/>").attr({label:m.label||"Group "+f,disabled:!!m.disabled,value:m.value});e(m.children,function(o){var n={value:o.value,label:o.label||o.value,title:o.title,selected:!!o.selected,disabled:!!o.disabled};for(var p in o.attributes){n["data-"+p]=o.attributes[p]}j.append(d("<option/>").attr(n))})}else{var i={value:m.value,label:m.label||m.value,title:m.title,"class":m["class"],selected:!!m.selected,disabled:!!m.disabled};for(var l in m.attributes){i["data-"+l]=m.attributes[l]}j=d("<option/>").attr(i);j.text(m.label||m.value)}g.append(j)});this.rebuild()},enable:function(){this.$select.prop("disabled",false);this.$button.prop("disabled",false).removeClass("disabled")},disable:function(){this.$select.prop("disabled",true);this.$button.prop("disabled",true).addClass("disabled")},setOptions:function(f){this.options=this.mergeOptions(f)},mergeOptions:function(f){return d.extend(true,{},this.defaults,this.options,f)},hasSelectAll:function(){return d("li.multiselect-all",this.$ul).length>0},updateOptGroups:function(){var f=d("li.multiselect-group",this.$ul);var g=this.options.selectedClass;f.each(function(){var h=d(this).nextUntil("li.multiselect-group").not(".multiselect-filter-hidden").not(".multiselect-item.divider").not(".disabled");var i=h.length>0;h.each(function(){var j=d("input",this);if(!j.prop("checked")){i=false}});if(g){if(i){d(this).addClass(g)}else{d(this).removeClass(g)}}d("input",this).prop("checked",i)})},updateSelectAll:function(h){if(this.hasSelectAll()){var k=d("li:not(.multiselect-item):not(.multiselect-filter-hidden):not(.multiselect-group):not(.disabled) input:enabled",this.$ul);var j=k.length;var g=k.filter(":checked").length;var f=d("li.multiselect-all",this.$ul);var i=f.find("input");if(g>0&&g===j){i.prop("checked",true);f.addClass(this.options.selectedClass)}else{i.prop("checked",false);f.removeClass(this.options.selectedClass)}}},updateButtonText:function(){var f=this.getSelected();if(this.options.enableHTML){d(".multiselect .multiselect-selected-text",this.$container).html(this.options.buttonText(f,this.$select))}else{d(".multiselect .multiselect-selected-text",this.$container).text(this.options.buttonText(f,this.$select))}d(".multiselect",this.$container).attr("title",this.options.buttonTitle(f,this.$select))},getSelected:function(){return d("option",this.$select).filter(":selected")},getOptionByValue:function(j){var f=d("option",this.$select);var k=j.toString();for(var g=0;g<f.length;g=g+1){var h=f[g];if(h.value===k){return d(h)}}},getInputByValue:function(j){var h=d("li input:not(.multiselect-search)",this.$ul);var k=j.toString();for(var f=0;f<h.length;f=f+1){var g=h[f];if(g.value===k){return d(g)}}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(i,h,f){var g=Array.prototype.slice.call(arguments,3);return setTimeout(function(){i.apply(f||window,g)},h)},setAllSelectedText:function(f){this.options.allSelectedText=f;this.updateButtonText()}};d.fn.multiselect=function(g,h,f){return this.each(function(){var j=d(this).data("multiselect");var i=typeof g==="object"&&g;if(!j){j=new c(this,i);d(this).data("multiselect",j)}if(typeof g==="string"){j[g](h,f);if(g==="destroy"){d(this).data("multiselect",false)}}})};d.fn.multiselect.Constructor=c;d(function(){d("select[data-role=multiselect]").multiselect()})});(function(b){b.fn.inputlimiter=function(e){var h=b.extend({},b.fn.inputlimiter.defaults,e),g=b(this);if(h.boxAttach&&!b("#"+h.boxId).length){b("<div/>").appendTo("body").attr({id:h.boxId,"class":h.boxClass}).css({position:"absolute"}).hide();if(b.fn.bgiframe){b("#"+h.boxId).bgiframe()}}var j=function(p){var o=b(this),n=c(o.val());if(!h.allowExceed&&n>h.limit){o.val(f(o.val()))}if(h.boxAttach){b("#"+h.boxId).css({width:o.outerWidth()-(b("#"+h.boxId).outerWidth()-b("#"+h.boxId).width())+"px",left:o.offset().left+"px",top:(o.offset().top+o.outerHeight())-1+"px","z-index":2000})}var l=(h.limit-n>0?h.limit-n:0),m=h.remTextFilter(h,l),k=h.limitTextFilter(h);if(h.limitTextShow){b("#"+h.boxId).html(m+" "+k);var q=b("<span/>").appendTo("body").attr({id:"19cc9195583bfae1fad88e19d443be7a","class":h.boxClass}).html(m+" "+k).innerWidth();b("#19cc9195583bfae1fad88e19d443be7a").remove();if(q>b("#"+h.boxId).innerWidth()){b("#"+h.boxId).html(m+"<br />"+k)}b("#"+h.boxId).show()}else{b("#"+h.boxId).html(m).show()}},d=function(m){var l=c(b(this).val());if(!h.allowExceed&&l>h.limit){var k=m.ctrlKey||m.altKey||m.metaKey;if(!k&&(m.which>=32&&m.which<=122)&&this.selectionStart===this.selectionEnd){return false}}},i=function(){var l=b(this);count=c(l.val());if(!h.allowExceed&&count>h.limit){l.val(f(l.val()))}if(h.boxAttach){b("#"+h.boxId).fadeOut("fast")}else{if(h.remTextHideOnBlur){var k=h.limitText;k=k.replace(/\%n/g,h.limit);k=k.replace(/\%s/g,(h.limit===1?"":"s"));b("#"+h.boxId).html(k)}}},c=function(m){if(h.limitBy.toLowerCase()==="words"){return(m.length>0?b.trim(m).replace(/\ +(?= )/g,"").split(" ").length:0)}var k=m.length,l=m.match(/\n/g);if(l&&h.lineReturnCount>1){k+=l.length*(h.lineReturnCount-1)}return k},f=function(k){if(h.limitBy.toLowerCase()==="words"){return b.trim(k).replace(/\ +(?= )/g,"").split(" ").splice(0,h.limit).join(" ")+" "}return k.substring(0,h.limit)};b(this).each(function(k){var l=b(this);if((!e||!e.limit)&&h.useMaxlength&&parseInt(l.attr("maxlength"))>0&&parseInt(l.attr("maxlength"))!=h.limit){l.inputlimiter(b.extend({},h,{limit:parseInt(l.attr("maxlength"))}))}else{if(!h.allowExceed&&h.useMaxlength&&h.limitBy.toLowerCase()==="characters"){l.attr("maxlength",h.limit)}l.unbind(".inputlimiter");l.bind("keyup.inputlimiter",j);l.bind("keypress.inputlimiter",d);l.bind("blur.inputlimiter",i)}})};b.fn.inputlimiter.remtextfilter=function(e,c){var d=e.remText;if(c===0&&e.remFullText!==null){d=e.remFullText}d=d.replace(/\%n/g,c);d=d.replace(/\%s/g,(e.zeroPlural?(c===1?"":"s"):(c<=1?"":"s")));return d};b.fn.inputlimiter.limittextfilter=function(d){var c=d.limitText;c=c.replace(/\%n/g,d.limit);c=c.replace(/\%s/g,(d.limit<=1?"":"s"));return c};b.fn.inputlimiter.defaults={limit:255,boxAttach:true,boxId:"limiterBox",boxClass:"limiterBox",remText:"%n character%s remaining.",remTextFilter:b.fn.inputlimiter.remtextfilter,remTextHideOnBlur:true,remFullText:null,limitTextShow:true,limitText:"Field limited to %n character%s.",limitTextFilter:b.fn.inputlimiter.limittextfilter,zeroPlural:true,allowExceed:false,useMaxlength:true,limitBy:"characters",lineReturnCount:1}})(jQuery);
/*!
 * jquery.base64.js 0.1 - https://github.com/yckart/jquery.base64.js
 * Makes Base64 en & -decoding simpler as it is.
 *
 * Based upon: https://gist.github.com/Yaffle/1284012
 *
 * Copyright (c) 2012 Yannick Albert (http://yckart.com)
 * Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php).
 * 2013/02/10
 **/
(function(g){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m="",k=[256],f=[256],h=0;var e={encode:function(c){var i=c.replace(/[\u0080-\u07ff]/g,function(o){var n=o.charCodeAt(0);return String.fromCharCode(192|n>>6,128|n&63)}).replace(/[\u0800-\uffff]/g,function(o){var n=o.charCodeAt(0);return String.fromCharCode(224|n>>12,128|n>>6&63,128|n&63)});return i},decode:function(i){var c=i.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(o){var n=((o.charCodeAt(0)&15)<<12)|((o.charCodeAt(1)&63)<<6)|(o.charCodeAt(2)&63);return String.fromCharCode(n)}).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(o){var n=(o.charCodeAt(0)&31)<<6|o.charCodeAt(1)&63;return String.fromCharCode(n)});return c}};while(h<256){var j=String.fromCharCode(h);m+=j;f[h]=h;k[h]=d.indexOf(j);++h}function b(A,v,o,y,u,t){A=String(A);var p=0,r=0,n=A.length,z="",x=0;while(r<n){var w=A.charCodeAt(r);w=w<256?o[w]:-1;p=(p<<u)+w;x+=u;while(x>=t){x-=t;var q=p>>x;z+=y.charAt(q);p^=q<<x}++r}if(!v&&x>0){z+=y.charAt(p<<(t-x))}return z}var l=g.base64=function(i,c,n){return c?l[i](c,n):i?null:this};l.btoa=l.encode=function(c,i){c=l.raw===false||l.utf8encode||i?e.encode(c):c;c=b(c,false,f,d,8,6);return c+"====".slice((c.length%4)||4)};l.atob=l.decode=function(o,c){o=String(o).split("=");var n=o.length;do{--n;o[n]=b(o[n],true,k,m,6,8)}while(n>0);o=o.join("");return l.raw===false||l.utf8decode||c?e.decode(o):o}}(jQuery));
/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(d,g){var f=d.jQuery||d.Cowboy||(d.Cowboy={}),e;f.throttle=e=function(n,m,b,c){var k,o=0;if(typeof m!=="boolean"){c=b;b=m;m=g}function l(){var p=this,h=+new Date()-o,q=arguments;function i(){o=+new Date();b.apply(p,q)}function j(){k=g}if(c&&!k){i()}k&&clearTimeout(k);if(c===g&&h>n){i()}else{if(m!==true){k=setTimeout(c?j:i,c===g?n-h:n)}}}if(f.guid){l.guid=b.guid=b.guid||f.guid++}return l};f.debounce=function(h,c,b){return b===g?e(h,c,false):e(h,b,c!==false)}})(this);function stickheader(b){b=b||$("table");b.each(function(){if($(this).find("thead").length>0&&$(this).find("th").length>0){var e=$(window),h=$(this),i=h.find("thead").clone(),l=h.find("thead, tbody").clone();h.addClass("sticky-enabled").css({}).wrap('<div class="sticky-wrap" />');if(h.hasClass("overflow-y")){h.removeClass("overflow-y").parent().addClass("overflow-y")}h.after('<table class="sticky-thead table table-striped table-bordered" />');if(h.find("tbody th").length>0){h.after('<table class="sticky-col table table-bordered  table-striped" /><table class="sticky-intersect" />')}var f=$(this).siblings(".sticky-thead"),g=$(this).siblings(".sticky-col"),m=$(this).siblings(".sticky-intersect"),j=$(this).parent(".sticky-wrap");f.append(i);g.append(l).find("thead th:gt(0)").remove().end().find("tbody td").remove();m.html("<thead><tr><th>"+h.find("thead th:first-child").html()+"</th></tr></thead>");var c=function(){var o=0;h.find("thead th").each(function(p){o+=$(this).width();f.find("th").eq(p).width($(this).width())}).end().find("tr").each(function(p){g.find("tr").eq(p).height($(this).height())});f.width(h.width());g.find("th").add(m.find("th")).width(h.find("thead th").width())},d=function(){var o=k();if(h.height()>j.height()){if(j.scrollTop()>0){f.add(m).css({opacity:1,top:j.scrollTop()})}else{f.add(m).css({opacity:0,top:0})}}else{if(e.scrollTop()>(h.offset().top-(h.data("offset-top")||0))&&e.scrollTop()<h.offset().top+h.outerHeight()-o){f.add(m).css({opacity:1,top:e.scrollTop()-h.offset().top+(h.data("offset-top")||0)})}else{f.add(m).css({opacity:0,top:0})}}},n=function(){if(j.scrollLeft()>0){g.add(m).css({opacity:1,left:j.scrollLeft()})}else{g.css({opacity:0}).add(m).css({left:0})}},k=function(){var o=0;h.find("tbody tr:lt(3)").each(function(){o+=$(this).height()});if(o>e.height()*0.25){o=e.height()*0.25}o+=f.height();return o};c();h.parent(".sticky-wrap").scroll($.throttle(250,function(){d();n()}));e.load(c).resize($.debounce(250,function(){c();d();n()})).scroll($.throttle(250,d))}})}(function(c){var b;if(typeof window!=="undefined"){b=window}else{if(typeof self!=="undefined"){b=self}}b.lazyload=c()})(function(){var f,c,b;return(function d(g,l,j){function h(q,n){if(!l[q]){if(!g[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=l[q]={exports:{}};g[q][0].call(i.exports,function(o){var r=g[q][1][o];return h(r?r:o)},i,i.exports,d,g,l,j)}return l[q].exports}var e=typeof require=="function"&&require;for(var k=0;k<j.length;k++){h(j[k])}return h})({1:[function(g,h,e){(function(n){h.exports=i;var j=g("in-viewport");var l=["data-src"];n.lzld=i();p("Image");p("IFrame");function k(q){if(m.call(l,q)===-1){l.push(q)}}function i(t){t=o({offset:333,src:"data-src",container:false},t||{});if(typeof t.src==="string"){k(t.src)}var u=[];function q(v){var w=r(v);if(w){v.src=w}v.setAttribute("data-lzled",true);u[m.call(u,v)]=null}function r(v){if(typeof t.src==="function"){return t.src(v)}return v.getAttribute(t.src)}function s(v){v.onload=null;v.removeAttribute("onload");v.onerror=null;v.removeAttribute("onerror");if(m.call(u,v)===-1){j(v,t,q)}}return s}function p(q){var r="HTML"+q+"Element";if(r in n===false){return}var s=n[r].prototype.getAttribute;n[r].prototype.getAttribute=function(v){if(v==="src"){var u;for(var w=0,t=l.length;w<t;w++){u=s.call(this,l[w]);if(u){break}}return u||s.call(this,v)}return s.call(this,v)}}function o(s,r){for(var q in s){if(r[q]===undefined){r[q]=s[q]}}return r}function m(r){for(var q=this.length;q--&&this[q]!==r;){}return q}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"in-viewport":2}],2:[function(g,h,e){(function(j){h.exports=k;var i=[];var r=typeof j.MutationObserver==="function";function k(u,y,s){var w={container:j.document.body,offset:0};if(y===undefined||typeof y==="function"){s=y;y={}}var t=w.container=y.container||w.container;var x=w.offset=y.offset||w.offset;for(var v=0;v<i.length;v++){if(i[v].container===t){return i[v].isInViewport(u,x,s)}}return i[i.push(n(t))-1].isInViewport(u,x,s)}function m(u,t,s){if(u.attachEvent){u.attachEvent("on"+t,s)}else{u.addEventListener(t,s,false)}}function q(t,v,s){var u;return function(){var z=this,y=arguments;var x=s&&!u;clearTimeout(u);u=setTimeout(w,v);if(x){t.apply(z,y)}function w(){u=null;if(!s){t.apply(z,y)}}}}var l=j.document.documentElement.compareDocumentPosition?function(t,s){return !!(t.compareDocumentPosition(s)&16)}:j.document.documentElement.contains?function(t,s){return t!==s&&(t.contains?t.contains(s):false)}:function(t,s){while(s=s.parentNode){if(s===t){return true}}return false};function n(t){var v=p();var w=t===j.document.body?j:t;var z=q(v.checkAll(u),15);m(w,"scroll",z);if(w===j){m(j,"resize",z)}if(r){o(v,t,z)}setInterval(z,150);function y(B,D,A){if(!A){return s(B,D)}var C=x(B,D,A);C.watch();return C}function x(B,E,A){function D(){v.add(B,E,A)}function C(){v.remove(B)}return{watch:D,dispose:C}}function u(B,C,A){if(s(B,C)){v.remove(B);A(B)}}function s(C,E){if(!l(j.document.documentElement,C)||!l(j.document.documentElement,t)){return false}if(!C.offsetWidth||!C.offsetHeight){return false}var F=C.getBoundingClientRect();var B={};if(t===j.document.body){B={top:-E,left:-E,right:j.document.documentElement.clientWidth+E,bottom:j.document.documentElement.clientHeight+E}}else{var A=t.getBoundingClientRect();B={top:A.top-E,left:A.left-E,right:A.right+E,bottom:A.bottom+E}}var D=(F.right>=B.left&&F.left<=B.right&&F.bottom>=B.top&&F.top<=B.bottom);return D}return{container:t,isInViewport:y}}function p(){var u=[];function w(z,A,y){if(!x(z)){u.push([z,A,y])}}function s(y){var z=v(y);if(z!==-1){u.splice(z,1)}}function v(y){for(var z=u.length-1;z>=0;z--){if(u[z][0]===y){return z}}return -1}function x(y){return v(y)!==-1}function t(y){return function(){for(var z=u.length-1;z>=0;z--){y.apply(this,u[z])}}}return{add:w,remove:s,isWatched:x,checkAll:t}}function o(v,t,s){var u=new MutationObserver(x);var w=Array.prototype.filter;var y=Array.prototype.concat;u.observe(t,{childList:true,subtree:true,attributes:true});function x(A){if(A.some(z)===true){setTimeout(s,0)}}function z(B){var A=y.call([],Array.prototype.slice.call(B.addedNodes),B.target);return w.call(A,v.isWatched).length>0}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1])(1)});
/*!
 * fancyBox - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
(function(g,o,e,f){var r=0;var k=e("html"),d=e(g),n=e(o),m=e.fancybox=function(){m.open.apply(this,arguments)},h=navigator.userAgent.match(/msie/i),p=null,j=o.createTouch!==f,i=function(t){return t&&t.hasOwnProperty&&t instanceof e},l=function(t){return t&&e.type(t)==="string"},s=function(t){return l(t)&&t.indexOf("%")>0},b=function(t){return(t&&!(t.style.overflow&&t.style.overflow==="hidden")&&((t.clientWidth&&t.scrollWidth>t.clientWidth)||(t.clientHeight&&t.scrollHeight>t.clientHeight)))},q=function(v,u){var t=parseInt(v,10)||0;if(u&&s(v)){t=m.getViewport()[u]/100*t}return Math.ceil(t)},c=function(t,u){return q(t,u)+"px"};e.extend(m,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!j,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div id="fancybox-wrap" class="fancybox-wrap" tabIndex="-1"><div id="fancybox-skin" class="fancybox-skin"><div id="fancybox-outer" class="fancybox-outer"><div id="fancybox-content" class="fancybox-inner"></div></div></div></div>',image:'<img id="fancybox-img" class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(h?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:true,title:true},onCancel:e.noop,beforeLoad:e.noop,afterLoad:e.noop,beforeShow:e.noop,afterShow:e.noop,beforeChange:e.noop,beforeClose:e.noop,afterClose:e.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(u,t){if(!u){return}if(!e.isPlainObject(t)){t={}}if(false===m.close(true)){return}if(!e.isArray(u)){u=i(u)?e(u).get():[u]}e.each(u,function(z,A){var y={},v,D,B,C,x,E,w;if(e.type(A)==="object"){if(A.nodeType){A=e(A)}if(i(A)){y={href:A.data("fancybox-href")||A.attr("href"),title:A.data("fancybox-title")||A.attr("title"),isDom:true,element:A};if(e.metadata){e.extend(true,y,A.metadata())}}else{y=A}}v=t.href||y.href||(l(A)?A:null);D=t.title!==f?t.title:y.title||"";B=t.content||y.content;C=B?"html":(t.type||y.type);if(!C&&y.isDom){C=A.data("fancybox-type");if(!C){x=A.prop("class").match(/fancybox\.(\w+)/);C=x?x[1]:null}}if(l(v)){if(!C){if(m.isImage(v)){C="image"}else{if(m.isSWF(v)){C="swf"}else{if(v.charAt(0)==="#"){C="inline"}else{if(l(A)){C="html";B=A}}}}}if(C==="ajax"){E=v.split(/\s+/,2);v=E.shift();w=E.shift()}}if(!B){if(C==="inline"){if(v){B=e(l(v)?v.replace(/.*(?=#[^\s]+$)/,""):v)}else{if(y.isDom){B=A}}}else{if(C==="html"){B=v}else{if(!C&&!v&&y.isDom){C="inline";B=A}}}}e.extend(y,{href:v,type:C,content:B,title:D,selector:w});u[z]=y});m.opts=e.extend(true,{},m.defaults,t);if(t.keys!==f){m.opts.keys=t.keys?e.extend({},m.defaults.keys,t.keys):false}m.group=u;return m._start(m.opts.index)},cancel:function(){var t=m.coming;if(!t||false===m.trigger("onCancel")){return}m.hideLoading();if(m.ajaxLoad){m.ajaxLoad.abort()}m.ajaxLoad=null;if(m.imgPreload){m.imgPreload.onload=m.imgPreload.onerror=null}if(t.wrap){t.wrap.stop(true,true).trigger("onReset").remove()}m.coming=null;if(!m.current){m._afterZoomOut(t)}},close:function(t){m.cancel();if(false===m.trigger("beforeClose")){return}m.unbindEvents();if(!m.isActive){return}if(!m.isOpen||t===true){e(".fancybox-wrap").stop(true).trigger("onReset").remove();m._afterZoomOut()}else{m.isOpen=m.isOpened=false;m.isClosing=true;e(".fancybox-item, .fancybox-nav").remove();m.wrap.stop(true,true).removeClass("fancybox-opened");m.transitions[m.current.closeMethod]()}},play:function(v){var t=function(){clearTimeout(m.player.timer)},x=function(){t();if(m.current&&m.player.isActive){m.player.timer=setTimeout(m.next,m.current.playSpeed)}},u=function(){t();n.unbind(".player");m.player.isActive=false;m.trigger("onPlayEnd")},w=function(){if(m.current&&(m.current.loop||m.current.index<m.group.length-1)){m.player.isActive=true;n.bind({"onCancel.player beforeClose.player":u,"onUpdate.player":x,"beforeLoad.player":t});x();m.trigger("onPlayStart")}};if(v===true||(!m.player.isActive&&v!==false)){w()}else{u()}},next:function(u){var t=m.current;r=0;if(t){if(!l(u)){u=t.direction.next}m.jumpto(t.index+1,u,"next")}},prev:function(u){var t=m.current;r=0;if(t){if(!l(u)){u=t.direction.prev}m.jumpto(t.index-1,u,"prev")}},jumpto:function(u,w,t){var v=m.current;if(!v){return}u=q(u);m.direction=w||v.direction[(u>=v.index?"next":"prev")];m.router=t||"jumpto";if(v.loop){if(u<0){u=v.group.length+(u%v.group.length)}u=u%v.group.length}if(v.group[u]!==f){m.cancel();m._start(u)}},reposition:function(w,t){var v=m.current,u=v?v.wrap:null,x;if(u){x=m._getPosition(t);if(w&&w.type==="scroll"){delete x.position;u.stop(true,true).animate(x,200)}else{u.css(x);v.pos=e.extend({},v.dim,x)}}},update:function(v){var t=(v&&v.type),u=!t||t==="orientationchange";if(u){clearTimeout(p);p=null}if(!m.isOpen||p){return}p=setTimeout(function(){var w=m.current;if(!w||m.isClosing){return}m.wrap.removeClass("fancybox-tmp");if(u||t==="load"||(t==="resize"&&w.autoResize)){m._setDimension()}if(!(t==="scroll"&&w.canShrink)){m.reposition(v)}m.trigger("onUpdate");p=null},(u&&!j?0:300))},rotateL:function(){var t=e("#fancybox-content").width();var u=e("#fancybox-content").height();var v=(u-t)/2;r=r-90;if(r==-360){r=0}m.rot(t,u,v)},rotateR:function(){var t=e("#fancybox-content").width();var u=e("#fancybox-content").height();var v=(u-t)/2;r=r+90;if(r==360){r=0}m.rot(t,u,v)},rot:function(v,w,y){if(r/90%2){e("#fancybox-img").css("-webkit-transform","translate("+(y-4)+"px,"+(-y)+"px) rotate("+r+"deg)").css("-moz-transform","translate("+(y-4)+"px,"+(-y)+"px) rotate("+r+"deg)").css("-o-transform","translate("+(y-4)+"px,"+(-y)+"px) rotate("+r+"deg)").css("-ms-transform","translate("+(y-4)+"px,"+(-y)+"px) rotate("+r+"deg)").css("transform","translate("+(y-4)+"px,"+(-y)+"px) rotate("+r+"deg)");e("#fancybox-img").height(w).width(v);e("#fancybox-content").height(v).width(w);e("#fancybox-wrap").width(e("#fancybox-content").width()+20);var x=e("#fancybox-wrap").css("left");var u=x.substring(0,x.length-2);var z=(e("#fancybox-content").height()-e("#fancybox-content").width())/2;var t=parseInt(u)+parseInt(z);e("#fancybox-wrap").css("left",t+"px")}else{e("#fancybox-img").css("-webkit-transform","rotate("+r+"deg)").css("-moz-transform","rotate("+r+"deg)").css("-o-transform","rotate("+r+"deg)").css("-ms-transform","rotate("+r+"deg)").css("transform","translate(-4px, 0px) rotate("+r+"deg)");e("#fancybox-img").height("100%").width("100%");e("#fancybox-content").height(v).width(w);e("#fancybox-wrap").width(e("#fancybox-content").width()+20);var x=e("#fancybox-wrap").css("left");var u=x.substring(0,x.length-2);var z=(e("#fancybox-content").height()-e("#fancybox-content").width())/2;var t=parseInt(u)+parseInt(z);e("#fancybox-wrap").css("left",t+"px")}},rotIsIE:function(v,w,y){if(r/90%2){m.progidIE();e("#fancybox-img").height(w).width(v);e("#fancybox-content").height(v).width(w);e("#fancybox-wrap").width(e("#fancybox-content").width()+20);var x=e("#fancybox-wrap").css("left");var u=x.substring(0,x.length-2);var z=(e("#fancybox-content").height()-e("#fancybox-content").width())/2;var t=parseInt(u)+parseInt(z);e("#fancybox-wrap").css("left",t+"px")}else{m.progidIE();e("#fancybox-img").height("100%").width("100%");e("#fancybox-content").height(v).width(w);e("#fancybox-wrap").width(e("#fancybox-content").width()+20);var x=e("#fancybox-wrap").css("left");var u=x.substring(0,x.length-2);var z=(e("#fancybox-content").height()-e("#fancybox-content").width())/2;var t=parseInt(u)+parseInt(z);e("#fancybox-wrap").css("left",t+"px")}},progidIE:function(){alert(r);switch(r/90){case -3:e("#fancybox-img").css("filter","progid:DXImageTransform.Microsoft.BasicImage(rotation=1)");break;case -2:e("#fancybox-img").css("filter","progid:DXImageTransform.Microsoft.BasicImage(rotation=2)");break;case -1:e("#fancybox-img").css("filter","progid:DXImageTransform.Microsoft.BasicImage(rotation=3)");break;case 0:e("#fancybox-img").css("filter","progid:DXImageTransform.Microsoft.BasicImage(rotation=0)");break;case 1:e("#fancybox-img").css("filter","progid:DXImageTransform.Microsoft.BasicImage(rotation=1)");break;case 2:e("#fancybox-img").css("filter","progid:DXImageTransform.Microsoft.BasicImage(rotation=2)");break;case 3:e("#fancybox-img").css("filter","progid:DXImageTransform.Microsoft.BasicImage(rotation=3)");break}},toggle:function(t){if(m.isOpen){m.current.fitToView=e.type(t)==="boolean"?t:!m.current.fitToView;if(j){m.wrap.removeAttr("style").addClass("fancybox-tmp");m.trigger("onUpdate")}m.update()}},hideLoading:function(){n.unbind(".loading");e("#fancybox-loading").remove()},showLoading:function(){var u,t;m.hideLoading();u=e('<div id="fancybox-loading"><div></div></div>').click(m.cancel).appendTo("body");n.bind("keydown.loading",function(v){if((v.which||v.keyCode)===27){v.preventDefault();m.cancel()}});if(!m.defaults.fixed){t=m.getViewport();u.css({position:"absolute",top:(t.h*0.5)+t.y,left:(t.w*0.5)+t.x})}},getViewport:function(){var t=(m.current&&m.current.locked)||false,u={x:d.scrollLeft(),y:d.scrollTop()};if(t){u.w=t[0].clientWidth;u.h=t[0].clientHeight}else{u.w=j&&g.innerWidth?g.innerWidth:d.width();u.h=j&&g.innerHeight?g.innerHeight:d.height()}return u},unbindEvents:function(){if(m.wrap&&i(m.wrap)){m.wrap.unbind(".fb")}n.unbind(".fb");d.unbind(".fb")},bindEvents:function(){var u=m.current,t;if(!u){return}d.bind("orientationchange.fb"+(j?"":" resize.fb")+(u.autoCenter&&!u.locked?" scroll.fb":""),m.update);t=u.keys;if(t){n.bind("keydown.fb",function(x){var v=x.which||x.keyCode,w=x.target||x.srcElement;if(v===27&&m.coming){return false}if(!x.ctrlKey&&!x.altKey&&!x.shiftKey&&!x.metaKey&&!(w&&(w.type||e(w).is("[contenteditable]")))){e.each(t,function(y,z){if(u.group.length>1&&z[v]!==f){m[y](z[v]);x.preventDefault();return false}if(e.inArray(v,z)>-1){m[y]();x.preventDefault();return false}})}})}if(e.fn.mousewheel&&u.mouseWheel){m.wrap.bind("mousewheel.fb",function(A,B,w,v){var z=A.target||null,x=e(z),y=false;while(x.length){if(y||x.is(".fancybox-skin")||x.is(".fancybox-wrap")){break}y=b(x[0]);x=e(x).parent()}if(B!==0&&!y){if(m.group.length>1&&!u.canShrink){if(v>0||w>0){m.prev(v>0?"down":"left")}else{if(v<0||w<0){m.next(v<0?"up":"right")}}A.preventDefault()}}})}},trigger:function(u,w){var t,v=w||m.coming||m.current;if(!v){return}if(e.isFunction(v[u])){t=v[u].apply(v,Array.prototype.slice.call(arguments,1))}if(t===false){return false}if(v.helpers){e.each(v.helpers,function(y,x){if(x&&m.helpers[y]&&e.isFunction(m.helpers[y][u])){m.helpers[y][u](e.extend(true,{},m.helpers[y].defaults,x),v)}})}n.trigger(u)},isImage:function(t){return l(t)&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(t){return l(t)&&t.match(/\.(swf)((\?|#).*)?$/i)},_start:function(u){var v={},z,t,w,x,y;u=q(u);z=m.group[u]||null;if(!z){return false}v=e.extend(true,{},m.opts,z);x=v.margin;y=v.padding;if(e.type(x)==="number"){v.margin=[x,x,x,x]}if(e.type(y)==="number"){v.padding=[y,y,y,y]}if(v.modal){e.extend(true,v,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}})}if(v.autoSize){v.autoWidth=v.autoHeight=true}if(v.width==="auto"){v.autoWidth=true}if(v.height==="auto"){v.autoHeight=true}v.group=m.group;v.index=u;m.coming=v;if(false===m.trigger("beforeLoad")){m.coming=null;return}w=v.type;t=v.href;if(!w){m.coming=null;if(m.current&&m.router&&m.router!=="jumpto"){m.current.index=u;return m[m.router](m.direction)}return false}m.isActive=true;if(w==="image"||w==="swf"){v.autoHeight=v.autoWidth=false;v.scrolling="visible"}if(w==="image"){v.aspectRatio=true}if(w==="iframe"&&j){v.scrolling="scroll"}v.wrap=e(v.tpl.wrap).addClass("fancybox-"+(j?"mobile":"desktop")+" fancybox-type-"+w+" fancybox-tmp "+v.wrapCSS).appendTo(v.parent||"body");e.extend(v,{skin:e(".fancybox-skin",v.wrap),outer:e(".fancybox-outer",v.wrap),inner:e(".fancybox-inner",v.wrap)});e.each(["Top","Right","Bottom","Left"],function(B,A){v.skin.css("padding"+A,c(v.padding[B]))});m.trigger("onReady");if(w==="inline"||w==="html"){if(!v.content||!v.content.length){return m._error("content")}}else{if(!t){return m._error("href")}}if(w==="image"){m._loadImage()}else{if(w==="ajax"){m._loadAjax()}else{if(w==="iframe"){m._loadIframe()}else{m._afterLoad()}}}},_error:function(t){e.extend(m.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:m.coming.tpl.error});m._afterLoad()},_loadImage:function(){var t=m.imgPreload=new Image();t.onload=function(){this.onload=this.onerror=null;m.coming.width=this.width/m.opts.pixelRatio;m.coming.height=this.height/m.opts.pixelRatio;m._afterLoad()};t.onerror=function(){this.onload=this.onerror=null;m._error("image")};t.src=m.coming.href;if(t.complete!==true){m.showLoading()}},_loadAjax:function(){var t=m.coming;m.showLoading();m.ajaxLoad=e.ajax(e.extend({},t.ajax,{url:t.href,error:function(u,v){if(m.coming&&v!=="abort"){m._error("ajax",u)}else{m.hideLoading()}},success:function(u,v){if(v==="success"){t.content=u;m._afterLoad()}}}))},_loadIframe:function(){var t=m.coming,u=e(t.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",j?"auto":t.iframe.scrolling).attr("src",t.href);e(t.wrap).bind("onReset",function(){try{e(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(v){}});if(t.iframe.preload){m.showLoading();u.one("load",function(){e(this).data("ready",1);if(!j){e(this).bind("load.fb",m.update)}e(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();m._afterLoad()})}t.content=u.appendTo(t.inner);if(!t.iframe.preload){m._afterLoad()}},_preloadImages:function(){var y=m.group,x=m.current,t=y.length,v=x.preload?Math.min(x.preload,t-1):0,w,u;for(u=1;u<=v;u+=1){w=y[(x.index+u)%t];if(w.type==="image"&&w.href){new Image().src=w.href}}},_afterLoad:function(){var u=m.coming,w=m.current,B="fancybox-placeholder",y,z,A,v,t,x;m.hideLoading();if(!u||m.isActive===false){return}if(false===m.trigger("afterLoad",u,w)){u.wrap.stop(true).trigger("onReset").remove();m.coming=null;return}if(w){m.trigger("beforeChange",w);w.wrap.stop(true).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()}m.unbindEvents();y=u;z=u.content;A=u.type;v=u.scrolling;e.extend(m,{wrap:y.wrap,skin:y.skin,outer:y.outer,inner:y.inner,current:y,previous:w});t=y.href;switch(A){case"inline":case"ajax":case"html":if(y.selector){z=e("<div>").html(z).find(y.selector)}else{if(i(z)){if(!z.data(B)){z.data(B,e('<div class="'+B+'"></div>').insertAfter(z).hide())}z=z.show().detach();y.wrap.bind("onReset",function(){if(e(this).find(z).length){z.hide().replaceAll(z.data(B)).data(B,false)}})}}break;case"image":z=y.tpl.image.replace("{href}",t);break;case"swf":z='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+t+'"></param>';x="";e.each(y.swf,function(C,D){z+='<param name="'+C+'" value="'+D+'"></param>';x+=" "+C+'="'+D+'"'});z+='<embed src="'+t+'" type="application/x-shockwave-flash" width="100%" height="100%"'+x+"></embed></object>";break}if(!(i(z)&&z.parent().is(y.inner))){y.inner.append(z)}m.trigger("beforeShow");y.inner.css("overflow",v==="yes"?"scroll":(v==="no"?"hidden":v));m._setDimension();m.reposition();m.isOpen=false;m.coming=null;m.bindEvents();if(!m.isOpened){e(".fancybox-wrap").not(y.wrap).stop(true).trigger("onReset").remove()}else{if(w.prevMethod){m.transitions[w.prevMethod]()}}m.transitions[m.isOpened?y.nextMethod:y.openMethod]();m._preloadImages()},_setDimension:function(){var W=m.getViewport(),S=0,Y=false,aa=false,E=m.wrap,Q=m.skin,ab=m.inner,N=m.current,O=N.width,L=N.height,H=N.minWidth,A=N.minHeight,U=N.maxWidth,M=N.maxHeight,G=N.scrolling,y=N.scrollOutside?N.scrollbarWidth:0,K=N.margin,z=q(K[1]+K[3]),x=q(K[0]+K[2]),v,u,R,T,J,I,P,C,B,X,w,Z,t,D,F;E.add(Q).add(ab).width("auto").height("auto").removeClass("fancybox-tmp");v=q(Q.outerWidth(true)-Q.width());u=q(Q.outerHeight(true)-Q.height());R=z+v;T=x+u;J=s(O)?(W.w-R)*q(O)/100:O;I=s(L)?(W.h-T)*q(L)/100:L;if(N.type==="iframe"){D=N.content;if(N.autoHeight&&D.data("ready")===1){try{if(D[0].contentWindow.document.location){ab.width(J).height(9999);F=D.contents().find("body");if(y){F.css("overflow-x","hidden")}I=F.outerHeight(true)}}catch(V){}}}else{if(N.autoWidth||N.autoHeight){ab.addClass("fancybox-tmp");if(!N.autoWidth){ab.width(J)}if(!N.autoHeight){ab.height(I)}if(N.autoWidth){J=ab.width()}if(N.autoHeight){I=ab.height()}ab.removeClass("fancybox-tmp")}}O=q(J);L=q(I);B=J/I;H=q(s(H)?q(H,"w")-R:H);U=q(s(U)?q(U,"w")-R:U);A=q(s(A)?q(A,"h")-T:A);M=q(s(M)?q(M,"h")-T:M);P=U;C=M;if(N.fitToView){U=Math.min(W.w-R,U);M=Math.min(W.h-T,M)}Z=W.w-z;t=W.h-x;if(N.aspectRatio){if(O>U){O=U;L=q(O/B)}if(L>M){L=M;O=q(L*B)}if(O<H){O=H;L=q(O/B)}if(L<A){L=A;O=q(L*B)}}else{O=Math.max(H,Math.min(O,U));if(N.autoHeight&&N.type!=="iframe"){ab.width(O);L=ab.height()}L=Math.max(A,Math.min(L,M))}if(N.fitToView){ab.width(O).height(L);E.width(O+v);X=E.width();w=E.height();if(N.aspectRatio){while((X>Z||w>t)&&O>H&&L>A){if(S++>19){break}L=Math.max(A,Math.min(M,L-10));O=q(L*B);if(O<H){O=H;L=q(O/B)}if(O>U){O=U;L=q(O/B)}ab.width(O).height(L);E.width(O+v);X=E.width();w=E.height()}}else{O=Math.max(H,Math.min(O,O-(X-Z)));L=Math.max(A,Math.min(L,L-(w-t)))}}if(y&&G==="auto"&&L<I&&(O+v+y)<Z){O+=y}ab.width(O).height(L);E.width(O+v);X=E.width();w=E.height();Y=(X>Z||w>t)&&O>H&&L>A;aa=N.aspectRatio?(O<P&&L<C&&O<J&&L<I):((O<P||L<C)&&(O<J||L<I));e.extend(N,{dim:{width:c(X),height:c(w)},origWidth:J,origHeight:I,canShrink:Y,canExpand:aa,wPadding:v,hPadding:u,wrapSpace:w-Q.outerHeight(true),skinSpace:Q.height()-L});if(!D&&N.autoHeight&&L>A&&L<M&&!aa){ab.height("auto")}},_getPosition:function(v){var z=m.current,u=m.getViewport(),x=z.margin,w=m.wrap.width()+x[1]+x[3],t=m.wrap.height()+x[0]+x[2],y={position:"absolute",top:x[0],left:x[3]};if(z.autoCenter&&z.fixed&&!v&&t<=u.h&&w<=u.w){y.position="fixed"}else{if(!z.locked){y.top+=u.y;y.left+=u.x}}y.top=c(Math.max(y.top,y.top+((u.h-t)*z.topRatio)));y.left=c(Math.max(y.left,y.left+((u.w-w)*z.leftRatio)));return y},_afterZoomIn:function(){var t=m.current;if(!t){return}m.isOpen=m.isOpened=true;m.wrap.css("overflow","visible").addClass("fancybox-opened");m.update();if(t.closeClick||(t.nextClick&&m.group.length>1)){m.inner.css("cursor","pointer").bind("click.fb",function(u){if(!e(u.target).is("a")&&!e(u.target).parent().is("a")){u.preventDefault();m[t.closeClick?"close":"next"]()}})}if(t.closeBtn){e(t.tpl.closeBtn).appendTo(m.skin).bind("click.fb",function(u){u.preventDefault();m.close()})}if(t.arrows&&m.group.length>1){if(t.loop||t.index>0){e(t.tpl.prev).appendTo(m.outer).bind("click.fb",m.prev)}if(t.loop||t.index<m.group.length-1){e(t.tpl.next).appendTo(m.outer).bind("click.fb",m.next)}}m.trigger("afterShow");if(!t.loop&&t.index===t.group.length-1){m.play(false)}else{if(m.opts.autoPlay&&!m.player.isActive){m.opts.autoPlay=false;m.play()}}},_afterZoomOut:function(t){t=t||m.current;e(".fancybox-wrap").trigger("onReset").remove();e.extend(m,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});m.trigger("afterClose",t)}});m.transitions={getOrigPosition:function(){var w=m.current,u=w.element,z=w.orig,y={},t=50,A=50,x=w.hPadding,B=w.wPadding,v=m.getViewport();if(!z&&w.isDom&&u.is(":visible")){z=u.find("img:first");if(!z.length){z=u}}if(i(z)){y=z.offset();if(z.is("img")){t=z.outerWidth();A=z.outerHeight()}}else{y.top=v.y+(v.h-A)*w.topRatio;y.left=v.x+(v.w-t)*w.leftRatio}if(m.wrap.css("position")==="fixed"||w.locked){y.top-=v.y;y.left-=v.x}y={top:c(y.top-x*w.topRatio),left:c(y.left-B*w.leftRatio),width:c(t+B),height:c(A+x)};return y},step:function(u,v){var x,z,A,t=v.prop,w=m.current,y=w.wrapSpace,B=w.skinSpace;if(t==="width"||t==="height"){x=v.end===v.start?1:(u-v.start)/(v.end-v.start);if(m.isClosing){x=1-x}z=t==="width"?w.wPadding:w.hPadding;A=u-z;m.skin[t](q(t==="width"?A:A-(y*x)));m.inner[t](q(t==="width"?A:A-(y*x)-(B*x)))}},zoomIn:function(){var x=m.current,u=x.pos,v=x.openEffect,w=v==="elastic",t=e.extend({opacity:1},u);delete t.position;if(w){u=this.getOrigPosition();if(x.openOpacity){u.opacity=0.1}}else{if(v==="fade"){u.opacity=0.1}}m.wrap.css(u).animate(t,{duration:v==="none"?0:x.openSpeed,easing:x.openEasing,step:w?this.step:null,complete:m._afterZoomIn})},zoomOut:function(){var w=m.current,u=w.closeEffect,v=u==="elastic",t={opacity:0.1};if(v){t=this.getOrigPosition();if(w.closeOpacity){t.opacity=0.1}}m.wrap.animate(t,{duration:u==="none"?0:w.closeSpeed,easing:w.closeEasing,step:v?this.step:null,complete:m._afterZoomOut})},changeIn:function(){var y=m.current,v=y.nextEffect,u=y.pos,t={opacity:1},x=m.direction,z=200,w;u.opacity=0.1;if(v==="elastic"){w=x==="down"||x==="up"?"top":"left";if(x==="down"||x==="right"){u[w]=c(q(u[w])-z);t[w]="+="+z+"px"}else{u[w]=c(q(u[w])+z);t[w]="-="+z+"px"}}if(v==="none"){m._afterZoomIn()}else{m.wrap.css(u).animate(t,{duration:y.nextSpeed,easing:y.nextEasing,complete:m._afterZoomIn})}},changeOut:function(){var v=m.previous,u=v.prevEffect,t={opacity:0.1},w=m.direction,x=200;if(u==="elastic"){t[w==="down"||w==="up"?"top":"left"]=(w==="up"||w==="left"?"-":"+")+"="+x+"px"}v.wrap.animate(t,{duration:u==="none"?0:v.prevSpeed,easing:v.prevEasing,complete:function(){e(this).trigger("onReset").remove()}})}};m.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!j,fixed:true},overlay:null,fixed:false,el:e("html"),create:function(t){t=e.extend({},this.defaults,t);if(this.overlay){this.close()}this.overlay=e('<div class="fancybox-overlay"></div>').appendTo(m.coming?m.coming.parent:t.parent);this.fixed=false;if(t.fixed&&m.defaults.fixed){this.overlay.addClass("fancybox-overlay-fixed");this.fixed=true}},open:function(u){var t=this;u=e.extend({},this.defaults,u);if(this.overlay){this.overlay.unbind(".overlay").width("auto").height("auto")}else{this.create(u)}if(!this.fixed){d.bind("resize.overlay",e.proxy(this.update,this));this.update()}if(u.closeClick){this.overlay.bind("click.overlay",function(v){if(e(v.target).hasClass("fancybox-overlay")){if(m.isActive){m.close()}else{t.close()}return false}})}this.overlay.css(u.css).show()},close:function(){var t,u;d.unbind("resize.overlay");if(this.el.hasClass("fancybox-lock")){e(".fancybox-margin").removeClass("fancybox-margin");t=d.scrollTop();u=d.scrollLeft();this.el.removeClass("fancybox-lock");d.scrollTop(t).scrollLeft(u)}e(".fancybox-overlay").remove().hide();e.extend(this,{overlay:null,fixed:false})},update:function(){var u="100%",t;this.overlay.width(u).height("100%");if(h){t=Math.max(o.documentElement.offsetWidth,o.body.offsetWidth);if(n.width()>t){u=n.width()}}else{if(n.width()>d.width()){u=n.width()}}this.overlay.width(u).height(n.height())},onReady:function(u,v){var t=this.overlay;e(".fancybox-overlay").stop(true,true);if(!t){this.create(u)}if(u.locked&&this.fixed&&v.fixed){if(!t){this.margin=n.height()>d.height()?e("html").css("margin-right").replace("px",""):false}v.locked=this.overlay.append(v.wrap);v.fixed=false}if(u.showEarly===true){this.beforeShow.apply(this,arguments)}},beforeShow:function(v,w){var t,u;if(w.locked){if(this.margin!==false){e("*").filter(function(){return(e(this).css("position")==="fixed"&&!e(this).hasClass("fancybox-overlay")&&!e(this).hasClass("fancybox-wrap"))}).addClass("fancybox-margin");this.el.addClass("fancybox-margin")}t=d.scrollTop();u=d.scrollLeft();this.el.addClass("fancybox-lock");d.scrollTop(t).scrollLeft(u)}this.open(v)},onUpdate:function(){if(!this.fixed){this.update()}},afterClose:function(t){if(this.overlay&&!m.coming){this.overlay.fadeOut(t.speedOut,e.proxy(this.close,this))}}};m.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(u){var w=m.current,y=w.title,t=u.type,x,v;if(e.isFunction(y)){y=y.call(w.element,w)}if(!l(y)||e.trim(y)===""){return}x=e('<div class="fancybox-title fancybox-title-'+t+'-wrap">'+y+"</div>");switch(t){case"inside":v=m.skin;break;case"outside":v=m.wrap;break;case"over":v=m.inner;break;default:v=m.skin;x.appendTo("body");if(h){x.width(x.width())}x.wrapInner('<span class="child"></span>');m.current.margin[2]+=Math.abs(q(x.css("margin-bottom")));break}x[(u.position==="top"?"prependTo":"appendTo")](v)}};e.fn.fancybox=function(v){var u,w=e(this),t=this.selector||"",x=function(B){var A=e(this).blur(),y=u,z,C;if(!(B.ctrlKey||B.altKey||B.shiftKey||B.metaKey)&&!A.is(".fancybox-wrap")){z=v.groupAttr||"data-fancybox-group";C=A.attr(z);if(!C){z="rel";C=A.get(0)[z]}if(C&&C!==""&&C!=="nofollow"){A=t.length?e(t):w;A=A.filter("["+z+'="'+C+'"]');y=A.index(this)}v.index=y;if(m.open(A,v)!==false){B.preventDefault()}}};v=v||{};u=v.index||0;if(!t||v.live===false){w.unbind("click.fb-start").bind("click.fb-start",x)}else{n.undelegate(t,"click.fb-start").delegate(t+":not('.fancybox-item, .fancybox-nav')","click.fb-start",x)}this.filter("[data-fancybox-start=1]").trigger("click");return this};n.ready(function(){var u,t;if(e.scrollbarWidth===f){e.scrollbarWidth=function(){var w=e('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),x=w.children(),v=x.innerWidth()-x.height(99).innerWidth();w.remove();return v}}if(e.support.fixedPosition===f){e.support.fixedPosition=(function(){var w=e('<div style="position:fixed;top:20px;"></div>').appendTo("body"),v=(w[0].offsetTop===20||w[0].offsetTop===15);w.remove();return v}())}e.extend(m.defaults,{scrollbarWidth:e.scrollbarWidth(),fixed:e.support.fixedPosition,parent:e("body")});u=e(g).width();k.addClass("fancybox-lock-test");t=e(g).width();k.removeClass("fancybox-lock-test");e("<style type='text/css'>.fancybox-margin{margin-right:"+(t-u)+"px;}</style>").appendTo("head")})}(window,document,jQuery));
/*!
 * Buttons helper for fancyBox
 * version: 1.0.5 (Mon, 15 Oct 2012)
 * @requires fancyBox v2.0 or later
 *
 * Usage:
 *     $(".fancybox").fancybox({
 *         helpers : {
 *             buttons: {
 *                 position : 'top'
 *             }
 *         }
 *     });
 *
 */
(function(c){var b=c.fancybox;b.helpers.buttons={defaults:{skipSingle:false,position:"top",tpl:'<div id="fancybox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggle" title="Toggle size" href="javascript:;"></a></li><li><a class="btnRotateL" title="left" href="javascript:;"></a></li><li><a class="btnRotateR" title="right" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:;"></a></li></ul></div>'},list:null,buttons:null,beforeLoad:function(d,e){if(d.skipSingle&&e.group.length<2){e.helpers.buttons=false;e.closeBtn=true;return}e.margin[d.position==="bottom"?2:0]+=30},onPlayStart:function(){if(this.buttons){this.buttons.play.attr("title","Pause slideshow").addClass("btnPlayOn")}},onPlayEnd:function(){if(this.buttons){this.buttons.play.attr("title","Start slideshow").removeClass("btnPlayOn")}},afterShow:function(e,f){var d=this.buttons;if(!d){this.list=c(e.tpl).addClass(e.position).appendTo("body");d={prev:this.list.find(".btnPrev").click(b.prev),next:this.list.find(".btnNext").click(b.next),play:this.list.find(".btnPlay").click(b.play),toggle:this.list.find(".btnToggle").click(b.toggle),close:this.list.find(".btnClose").click(b.close),rotateL:this.list.find(".btnRotateL").click(b.rotateL),rotateR:this.list.find(".btnRotateR").click(b.rotateR)}}if(f.index>0||f.loop){d.prev.removeClass("btnDisabled")}else{d.prev.addClass("btnDisabled")}if(f.loop||f.index<f.group.length-1){d.next.removeClass("btnDisabled");d.play.removeClass("btnDisabled")}else{d.next.addClass("btnDisabled");d.play.addClass("btnDisabled")}this.buttons=d;this.onUpdate(e,f)},onUpdate:function(e,f){var d;if(!this.buttons){return}d=this.buttons.toggle.removeClass("btnDisabled btnToggleOn");if(f.canShrink){d.addClass("btnToggleOn")}else{if(!f.canExpand){d.addClass("btnDisabled")}}},beforeClose:function(){if(this.list){this.list.remove()}this.list=null;this.buttons=null}}}(jQuery));(function(c,b,d){(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{if(typeof exports==="object"){module.exports=e(require("jquery"))}else{e(c.jQuery)}}}(function(h){var e="webuiPopover";var i="webui-popover";var g="webui.popover";var k={placement:"auto",container:null,width:"auto",height:"auto",trigger:"click",style:"",selector:false,delay:{show:null,hide:300},async:{type:"GET",before:null,success:null,error:null},cache:true,multi:false,arrow:true,title:"",content:"",closeable:false,padding:true,url:"",type:"html",direction:"",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><a href="#" class="close"></a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:false,dismissible:true,onShow:null,onHide:null,abortXHR:true,autoHide:false,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""},hideEmpty:false};var l=i+"-rtl";var r=[];var s=h('<div class="webui-popover-backdrop"></div>');var v=0;var t=false;var j=-2000;var w=h(b);var u=function(y,z){return isNaN(y)?(z||0):Number(y)};var p=function(y){return y.data("plugin_"+e)};var f=function(){var y=null;for(var z=0;z<r.length;z++){y=p(r[z]);if(y){y.hide(true)}}w.trigger("hiddenAll."+g)};var x=function(A){var y=null;for(var z=0;z<r.length;z++){y=p(r[z]);if(y&&y.id!==A.id){y.hide(true)}}w.trigger("hiddenAll."+g)};var q=("ontouchstart" in b.documentElement)&&(/Mobi/.test(navigator.userAgent));var o=function(z){var y={x:0,y:0};if(z.type==="touchstart"||z.type==="touchmove"||z.type==="touchend"||z.type==="touchcancel"){var A=z.originalEvent.touches[0]||z.originalEvent.changedTouches[0];y.x=A.pageX;y.y=A.pageY}else{if(z.type==="mousedown"||z.type==="mouseup"||z.type==="click"){y.x=z.pageX;y.y=z.pageY}}return y};function n(z,y){this.$element=h(z);if(y){if(h.type(y.delay)==="string"||h.type(y.delay)==="number"){y.delay={show:y.delay,hide:y.delay}}}this.options=h.extend({},k,y);this._defaults=k;this._name=e;this._targetclick=false;this.init();r.push(this.$element);return this}n.prototype={init:function(){if(this.$element[0] instanceof b.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}if(this.getTrigger()!=="manual"){if(q){this.$element.off("touchend",this.options.selector).on("touchend",this.options.selector,h.proxy(this.toggle,this))}else{if(this.getTrigger()==="click"){this.$element.off("click",this.options.selector).on("click",this.options.selector,h.proxy(this.toggle,this))}else{if(this.getTrigger()==="hover"){this.$element.off("mouseenter mouseleave click",this.options.selector).on("mouseenter",this.options.selector,h.proxy(this.mouseenterHandler,this)).on("mouseleave",this.options.selector,h.proxy(this.mouseleaveHandler,this))}}}}this._poped=false;this._inited=true;this._opened=false;this._idSeed=v;this.id=e+this._idSeed;this.options.container=h(this.options.container||b.body).first();if(this.options.backdrop){s.appendTo(this.options.container).hide()}v++;if(this.getTrigger()==="sticky"){this.show()}if(this.options.selector){this._options=h.extend({},this.options,{selector:""})}},destroy:function(){var y=-1;for(var z=0;z<r.length;z++){if(r[z]===this.$element){y=z;break}}r.splice(y,1);this.hide();this.$element.data("plugin_"+e,null);if(this.getTrigger()==="click"){this.$element.off("click")}else{if(this.getTrigger()==="hover"){this.$element.off("mouseenter mouseleave")}}if(this.$target){this.$target.remove()}},getDelegateOptions:function(){var y={};this._options&&h.each(this._options,function(z,A){if(k[z]!==A){y[z]=A}});return y},hide:function(A,z){if(!A&&this.getTrigger()==="sticky"){return}if(!this._opened){return}if(z){z.preventDefault();z.stopPropagation()}if(this.xhr&&this.options.abortXHR===true){this.xhr.abort();this.xhr=null}var B=h.Event("hide."+g);this.$element.trigger(B,[this.$target]);if(this.$target){this.$target.removeClass("in").addClass(this.getHideAnimation());var y=this;setTimeout(function(){y.$target.hide();if(!y.getCache()){y.$target.remove()}},y.getHideDelay())}if(this.options.backdrop){s.hide()}this._opened=false;this.$element.trigger("hidden."+g,[this.$target]);if(this.options.onHide){this.options.onHide(this.$target)}},resetAutoHide:function(){var z=this;var y=z.getAutoHide();if(y){if(z.autoHideHandler){clearTimeout(z.autoHideHandler)}z.autoHideHandler=setTimeout(function(){z.hide()},y)}},delegate:function(z){var y=h(z).data("plugin_"+e);if(!y){y=new n(z,this.getDelegateOptions());h(z).data("plugin_"+e,y)}return y},toggle:function(z){var y=this;if(z){z.preventDefault();z.stopPropagation();if(this.options.selector){y=this.delegate(z.currentTarget)}}y[y.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){f()},hideOthers:function(){x(this)},show:function(){if(this._opened){return}var y=this.getTarget().removeClass().addClass(i).addClass(this._customTargetClass);if(!this.options.multi){this.hideOthers()}if(!this.getCache()||!this._poped||this.content===""){this.content="";this.setTitle(this.getTitle());if(!this.options.closeable){y.find(".close").off("click").remove()}if(!this.isAsync()){this.setContent(this.getContent())}else{this.setContentASync(this.options.content)}if(this.canEmptyHide()&&this.content===""){return}y.show()}this.displayContent();if(this.options.onShow){this.options.onShow(y)}this.bindBodyEvents();if(this.options.backdrop){s.show()}this._opened=true;this.resetAutoHide()},displayContent:function(){var A=this.getElementPosition(),y=this.getTarget().removeClass().addClass(i).addClass(this._customTargetClass),K=this.getContentElement(),I=y[0].offsetWidth,F=y[0].offsetHeight,C="bottom",G=h.Event("show."+g);if(this.canEmptyHide()){var H=K.children().html();if(H!==null&&H.trim().length===0){return}}this.$element.trigger(G,[y]);var z=this.$element.data("width")||this.options.width;if(z===""){z=this._defaults.width}if(z!=="auto"){y.width(z)}var L=this.$element.data("height")||this.options.height;if(L===""){L=this._defaults.height}if(L!=="auto"){K.height(L)}if(this.options.style){this.$target.addClass(i+"-"+this.options.style)}if(this.options.direction==="rtl"&&!K.hasClass(l)){K.addClass(l)}if(!this.options.arrow){y.find(".webui-arrow").remove()}y.detach().css({top:j,left:j,display:"block"});if(this.getAnimation()){y.addClass(this.getAnimation())}y.appendTo(this.options.container);C=this.getPlacement(A);this.$element.trigger("added."+g);this.initTargetEvents();if(!this.options.padding){if(this.options.height!=="auto"){K.css("height",K.outerHeight())}this.$target.addClass("webui-no-padding")}if(this.options.maxHeight){K.css("maxHeight",this.options.maxHeight)}if(this.options.maxWidth){K.css("maxWidth",this.options.maxWidth)}I=y[0].offsetWidth;F=y[0].offsetHeight;var B=this.getTargetPositin(A,C,I,F);this.$target.css(B.position).addClass(C).addClass("in");if(this.options.type==="iframe"){var M=y.find("iframe");var E=y.width();var D=M.parent().height();if(this.options.iframeOptions.width!==""&&this.options.iframeOptions.width!=="auto"){E=this.options.iframeOptions.width}if(this.options.iframeOptions.height!==""&&this.options.iframeOptions.height!=="auto"){D=this.options.iframeOptions.height}M.width(E).height(D)}if(!this.options.arrow){this.$target.css({margin:0})}if(this.options.arrow){var J=this.$target.find(".webui-arrow");J.removeAttr("style");if(C==="left"||C==="right"){J.css({top:this.$target.height()/2})}else{if(C==="top"||C==="bottom"){J.css({left:this.$target.width()/2})}}if(B.arrowOffset){if(B.arrowOffset.left===-1||B.arrowOffset.top===-1){J.hide()}else{J.css(B.arrowOffset)}}}this._poped=true;this.$element.trigger("shown."+g,[this.$target])},isTargetLoaded:function(){return this.getTarget().find("i.glyphicon-refresh").length===0},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var y=e+this._idSeed;this.$target=h(this.options.template).attr("id",y);this._customTargetClass=this.$target.attr("class")!==i?this.$target.attr("class"):null;this.getTriggerElement().attr("data-target",y)}if(!this.$target.data("trigger-element")){this.$target.data("trigger-element",this.getTriggerElement())}return this.$target},removeTarget:function(){this.$target.remove();this.$target=null;this.$contentElement=null},getTitleElement:function(){return this.getTarget().find("."+i+"-title")},getContentElement:function(){if(!this.$contentElement){this.$contentElement=this.getTarget().find("."+i+"-content")}return this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return u(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return u(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var y=this.$element.attr("data-cache");if(typeof(y)!=="undefined"){switch(y.toLowerCase()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":return false}}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var y=this.$element.attr("data-delay-show");if(typeof(y)!=="undefined"){return y}return this.options.delay.show===0?0:this.options.delay.show||100},getHideDelay:function(){var y=this.$element.attr("data-delay-hide");if(typeof(y)!=="undefined"){return y}return this.options.delay.hide===0?0:this.options.delay.hide||100},getAnimation:function(){var y=this.$element.attr("data-animation");return y||this.options.animation},getHideAnimation:function(){var y=this.getAnimation();return y?y+"-out":"out"},setTitle:function(y){var z=this.getTitleElement();if(y){if(this.options.direction==="rtl"&&!z.hasClass(l)){z.addClass(l)}z.html(y)}else{z.remove()}},hasContent:function(){return this.getContent()},canEmptyHide:function(){return this.options.hideEmpty&&this.options.type==="html"},getIframe:function(){var z=h("<iframe></iframe>").attr("src",this.getUrl());var y=this;h.each(this._defaults.iframeOptions,function(A){if(typeof y.options.iframeOptions[A]!=="undefined"){z.attr(A,y.options.iframeOptions[A])}});return z},getContent:function(){if(this.getUrl()){switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=h(this.getUrl());if(!this.content.is(":visible")){this.content.show()}}catch(z){throw new Error("Unable to get popover content. Invalid selector specified.")}break}}else{if(!this.content){var A="";if(h.isFunction(this.options.content)){A=this.options.content.apply(this.$element[0],[this])}else{A=this.options.content}this.content=this.$element.attr("data-content")||A;if(!this.content){var y=this.$element.next();if(y&&y.hasClass(i+"-content")){this.content=y}}}}return this.content},setContent:function(A){var y=this.getTarget();var z=this.getContentElement();if(typeof A==="string"){z.html(A)}else{if(A instanceof h){z.html("");if(!this.options.cache){A.clone(true,true).removeClass(i+"-content").appendTo(z)}else{A.removeClass(i+"-content").appendTo(z)}}}this.$target=y},isAsync:function(){return this.options.type==="async"},setContentASync:function(z){var y=this;if(this.xhr){return}this.xhr=h.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(B,A){if(y.options.async.before){y.options.async.before(y,B,A)}},success:function(B){y.bindBodyEvents();if(z&&h.isFunction(z)){y.content=z.apply(y.$element[0],[B])}else{y.content=B}y.setContent(y.content);var A=y.getContentElement();A.removeAttr("style");y.displayContent();if(y.options.async.success){y.options.async.success(y,B)}},complete:function(){y.xhr=null},error:function(B,A){if(y.options.async.error){y.options.async.error(y,B,A)}}})},bindBodyEvents:function(){if(t){return}if(this.options.dismissible&&this.getTrigger()==="click"){if(q){w.off("touchstart.webui-popover").on("touchstart.webui-popover",h.proxy(this.bodyTouchStartHandler,this))}else{w.off("keyup.webui-popover").on("keyup.webui-popover",h.proxy(this.escapeHandler,this));w.off("click.webui-popover").on("click.webui-popover",h.proxy(this.bodyClickHandler,this))}}else{if(this.getTrigger()==="hover"){w.off("touchend.webui-popover").on("touchend.webui-popover",h.proxy(this.bodyClickHandler,this))}}},mouseenterHandler:function(z){var y=this;if(z&&this.options.selector){y=this.delegate(z.currentTarget)}if(y._timeout){clearTimeout(y._timeout)}y._enterTimeout=setTimeout(function(){if(!y.getTarget().is(":visible")){y.show()}},this.getDelayShow())},mouseleaveHandler:function(){var y=this;clearTimeout(y._enterTimeout);y._timeout=setTimeout(function(){y.hide()},this.getHideDelay())},escapeHandler:function(y){if(y.keyCode===27){this.hideAll()}},bodyTouchStartHandler:function(A){var y=this;var z=h(A.currentTarget);z.on("touchend",function(B){y.bodyClickHandler(B);z.off("touchend")});z.on("touchmove",function(){z.off("touchend")})},bodyClickHandler:function(D){t=true;var E=true;for(var A=0;A<r.length;A++){var G=p(r[A]);if(G&&G._opened){var z=G.getTarget().offset();var H=z.left;var C=z.top;var F=z.left+G.getTarget().width();var B=z.top+G.getTarget().height();var I=o(D);var y=I.x>=H&&I.x<=F&&I.y>=C&&I.y<=B;if(y){E=false;break}}}if(E){f()}},initTargetEvents:function(){if(this.getTrigger()==="hover"){this.$target.off("mouseenter mouseleave").on("mouseenter",h.proxy(this.mouseenterHandler,this)).on("mouseleave",h.proxy(this.mouseleaveHandler,this))}this.$target.find(".close").off("click").on("click",h.proxy(this.hide,this,true))},getPlacement:function(I){var F,z=this.options.container,J=z.innerWidth(),G=z.innerHeight(),B=z.scrollTop(),C=z.scrollLeft(),E=Math.max(0,I.left-C),D=Math.max(0,I.top-B);if(typeof(this.options.placement)==="function"){F=this.options.placement.call(this,this.getTarget()[0],this.$element[0])}else{F=this.$element.data("placement")||this.options.placement}var H=F==="horizontal";var y=F==="vertical";var A=F==="auto"||H||y;if(A){if(E<J/3){if(D<G/3){F=H?"right-bottom":"bottom-right"}else{if(D<G*2/3){if(y){F=D<=G/2?"bottom-right":"top-right"}else{F="right"}}else{F=H?"right-top":"top-right"}}}else{if(E<J*2/3){if(D<G/3){if(H){F=E<=J/2?"right-bottom":"left-bottom"}else{F="bottom"}}else{if(D<G*2/3){if(H){F=E<=J/2?"right":"left"}else{F=D<=G/2?"bottom":"top"}}else{if(H){F=E<=J/2?"right-top":"left-top"}else{F="top"}}}}else{if(D<G/3){F=H?"left-bottom":"bottom-left"}else{if(D<G*2/3){if(y){F=D<=G/2?"bottom-left":"top-left"}else{F="left"}}else{F=H?"left-top":"top-left"}}}}}else{if(F==="auto-top"){if(E<J/3){F="top-right"}else{if(E<J*2/3){F="top"}else{F="top-left"}}}else{if(F==="auto-bottom"){if(E<J/3){F="bottom-right"}else{if(E<J*2/3){F="bottom"}else{F="bottom-left"}}}else{if(F==="auto-left"){if(D<G/3){F="left-top"}else{if(D<G*2/3){F="left"}else{F="left-bottom"}}}else{if(F==="auto-right"){if(D<G/3){F="right-bottom"}else{if(D<G*2/3){F="right"}else{F="right-top"}}}}}}}return F},getElementPosition:function(){var B=this.$element[0].getBoundingClientRect();var A=this.options.container;var z=A.css("position");if(A.is(b.body)||z==="static"){return h.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||B.width,height:this.$element[0].offsetHeight||B.height})}else{if(z==="fixed"){var y=A[0].getBoundingClientRect();return{top:B.top-y.top+A.scrollTop(),left:B.left-y.left+A.scrollLeft(),width:B.width,height:B.height}}else{if(z==="relative"){return{top:this.$element.offset().top-A.offset().top,left:this.$element.offset().left-A.offset().left,width:this.$element[0].offsetWidth||B.width,height:this.$element[0].offsetHeight||B.height}}}}},getTargetPositin:function(R,M,C,D){var E=R,K=this.options.container,A=this.$element.outerWidth(),H=this.$element.outerHeight(),z=b.documentElement.scrollTop+K.scrollTop(),Q=b.documentElement.scrollLeft+K.scrollLeft(),T={},O=null,N=this.options.arrow?20:0,L=10,B=A<N+L?N:0,J=H<N+L?N:0,U=0,F=b.documentElement.clientHeight+z,y=b.documentElement.clientWidth+Q;var P=E.left+E.width/2-B>0;var S=E.left+E.width/2+B<y;var G=E.top+E.height/2-J>0;var I=E.top+E.height/2+J<F;switch(M){case"bottom":T={top:E.top+E.height,left:E.left+E.width/2-C/2};break;case"top":T={top:E.top-D,left:E.left+E.width/2-C/2};break;case"left":T={top:E.top+E.height/2-D/2,left:E.left-C};break;case"right":T={top:E.top+E.height/2-D/2,left:E.left+E.width};break;case"top-right":T={top:E.top-D,left:P?E.left-B:L};O={left:P?Math.min(A,C)/2+B:j};break;case"top-left":U=S?B:-L;T={top:E.top-D,left:E.left-C+E.width+U};O={left:S?C-Math.min(A,C)/2-B:j};break;case"bottom-right":T={top:E.top+E.height,left:P?E.left-B:L};O={left:P?Math.min(A,C)/2+B:j};break;case"bottom-left":U=S?B:-L;T={top:E.top+E.height,left:E.left-C+E.width+U};O={left:S?C-Math.min(A,C)/2-B:j};break;case"right-top":U=I?J:-L;T={top:E.top-D+E.height+U,left:E.left+E.width};O={top:I?D-Math.min(H,D)/2-J:j};break;case"right-bottom":T={top:G?E.top-J:L,left:E.left+E.width};O={top:G?Math.min(H,D)/2+J:j};break;case"left-top":U=I?J:-L;T={top:E.top-D+E.height+U,left:E.left-C};O={top:I?D-Math.min(H,D)/2-J:j};break;case"left-bottom":T={top:G?E.top-J:L,left:E.left-C};O={top:G?Math.min(H,D)/2+J:j};break}T.top+=this.getOffsetTop();T.left+=this.getOffsetLeft();return{position:T,arrowOffset:O}}};h.fn[e]=function(A,z){var B=[];var y=this.each(function(){var C=h.data(this,"plugin_"+e);if(!C){if(!A){C=new n(this,null)}else{if(typeof A==="string"){if(A!=="destroy"){if(!z){C=new n(this,null);B.push(C[A]())}}}else{if(typeof A==="object"){C=new n(this,A)}}}h.data(this,"plugin_"+e,C)}else{if(A==="destroy"){C.destroy()}else{if(typeof A==="string"){B.push(C[A]())}}}});return(B.length)?B:y};var m=(function(){var A=function(){f()};var E=function(G,H){H=H||{};h(G).webuiPopover(H)};var C=function(G){var H=true;h(G).each(function(I,J){H=H&&h(J).data("plugin_"+e)!==d});return H};var F=function(G,H){if(H){h(G).webuiPopover(H).webuiPopover("show")}else{h(G).webuiPopover("show")}};var z=function(G){h(G).webuiPopover("hide")};var y=function(G){k=h.extend({},k,G)};var D=function(G,J){var I=h(G).data("plugin_"+e);if(I){var H=I.getCache();I.options.cache=false;I.options.content=J;if(I._opened){I._opened=false;I.show()}else{if(I.isAsync()){I.setContentASync(J)}else{I.setContent(J)}}I.options.cache=H}};var B=function(G,J){var I=h(G).data("plugin_"+e);if(I){var H=I.getCache();var K=I.options.type;I.options.cache=false;I.options.url=J;if(I._opened){I._opened=false;I.show()}else{I.options.type="async";I.setContentASync(I.content)}I.options.cache=H;I.options.type=K}};return{show:F,hide:z,create:E,isCreated:C,hideAll:A,updateContent:D,updateContentAsync:B,setDefaultOptions:y}})();c.WebuiPopovers=m}))})(window,document);(function(window,undefined){if(window.KindEditor){return}if(!window.console){window.console={}}if(!console.log){console.log=function(){}}var _VERSION="4.1.12 (2019-03-07)",_ua=navigator.userAgent.toLowerCase(),_IE=_ua.indexOf("msie")>-1&&_ua.indexOf("opera")==-1,_NEWIE=_ua.indexOf("msie")==-1&&_ua.indexOf("trident")>-1,_GECKO=_ua.indexOf("gecko")>-1&&_ua.indexOf("khtml")==-1,_WEBKIT=_ua.indexOf("applewebkit")>-1,_OPERA=_ua.indexOf("opera")>-1,_MOBILE=_ua.indexOf("mobile")>-1,_IOS=/ipad|iphone|ipod/.test(_ua),_QUIRKS=document.compatMode!="CSS1Compat",_IERANGE=!window.getSelection,_matches=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(_ua),_V=_matches?_matches[1]:"0",_TIME=new Date().getTime();function _isArray(val){if(!val){return false}return Object.prototype.toString.call(val)==="[object Array]"}function _isFunction(val){if(!val){return false}return Object.prototype.toString.call(val)==="[object Function]"}function _inArray(val,arr){for(var i=0,len=arr.length;i<len;i++){if(val===arr[i]){return i}}return -1}function _each(obj,fn){if(_isArray(obj)){for(var i=0,len=obj.length;i<len;i++){if(fn.call(obj[i],i,obj[i])===false){break}}}else{for(var key in obj){if(obj.hasOwnProperty(key)){if(fn.call(obj[key],key,obj[key])===false){break}}}}}function _trim(str){return str.replace(/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")}function _inString(val,str,delimiter){delimiter=delimiter===undefined?",":delimiter;return(delimiter+str+delimiter).indexOf(delimiter+val+delimiter)>=0}function _addUnit(val,unit){unit=unit||"px";return val&&/^-?\d+(?:\.\d+)?$/.test(val)?val+unit:val}function _removeUnit(val){var match;return val&&(match=/(\d+)/.exec(val))?parseInt(match[1],10):0}function _escape(val){return val.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function _unescape(val){return val.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function _toCamel(str){var arr=str.split("-");str="";_each(arr,function(key,val){str+=(key>0)?val.charAt(0).toUpperCase()+val.substr(1):val});return str}function _toHex(val){function hex(d){var s=parseInt(d,10).toString(16).toUpperCase();return s.length>1?s:"0"+s}return val.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/ig,function($0,$1,$2,$3){return"#"+hex($1)+hex($2)+hex($3)})}function _toMap(val,delimiter){delimiter=delimiter===undefined?",":delimiter;var map={},arr=_isArray(val)?val:val.split(delimiter),match;_each(arr,function(key,val){if((match=/^(\d+)\.\.(\d+)$/.exec(val))){for(var i=parseInt(match[1],10);i<=parseInt(match[2],10);i++){map[i.toString()]=true}}else{map[val]=true}});return map}function _toArray(obj,offset){return Array.prototype.slice.call(obj,offset||0)}function _undef(val,defaultVal){return val===undefined?defaultVal:val}function _invalidUrl(url){return !url||/[<>"]/.test(url)}function _addParam(url,param){return url.indexOf("?")>=0?url+"&"+param:url+"?"+param}function _extend(child,parent,proto){if(!proto){proto=parent;parent=null}var childProto;if(parent){var fn=function(){};fn.prototype=parent.prototype;childProto=new fn();_each(proto,function(key,val){childProto[key]=val})}else{childProto=proto}childProto.constructor=child;child.prototype=childProto;child.parent=parent?parent.prototype:null}function _json(text){var match;if((match=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(text))){text=match[0]}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}throw"JSON parse error"}var _round=Math.round;var K={DEBUG:false,VERSION:_VERSION,IE:_IE,GECKO:_GECKO,WEBKIT:_WEBKIT,OPERA:_OPERA,V:_V,TIME:_TIME,each:_each,isArray:_isArray,isFunction:_isFunction,inArray:_inArray,inString:_inString,trim:_trim,addUnit:_addUnit,removeUnit:_removeUnit,escape:_escape,unescape:_unescape,toCamel:_toCamel,toHex:_toHex,toMap:_toMap,toArray:_toArray,undef:_undef,invalidUrl:_invalidUrl,addParam:_addParam,extend:_extend,json:_json};var _INLINE_TAG_MAP=_toMap("a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),_BLOCK_TAG_MAP=_toMap("address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul"),_SINGLE_TAG_MAP=_toMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),_STYLE_TAG_MAP=_toMap("b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u"),_CONTROL_TAG_MAP=_toMap("img,table,input,textarea,button"),_PRE_TAG_MAP=_toMap("pre,style,script"),_NOSPLIT_TAG_MAP=_toMap("html,head,body,td,tr,table,ol,ul,li"),_AUTOCLOSE_TAG_MAP=_toMap("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),_FILL_ATTR_MAP=_toMap("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),_VALUE_TAG_MAP=_toMap("input,button,textarea,select");function _getBasePath(){var els=document.getElementsByTagName("script"),src;for(var i=0,len=els.length;i<len;i++){src=els[i].src||"";if(/kindeditor[\w\-\.]*\.js/.test(src)){return src.substring(0,src.lastIndexOf("/")+1)}}return""}K.basePath=_getBasePath();K.options={designMode:true,fullscreenMode:false,filterMode:true,wellFormatMode:true,shadowMode:true,loadStyleMode:true,basePath:K.basePath,themesPath:K.basePath+"themes/",langPath:K.basePath+"lang/",pluginsPath:K.basePath+"plugins/",themeType:"default",langType:"zh-CN",urlType:"",newlineTag:"p",resizeType:2,syncType:"form",pasteType:2,dialogAlignType:"page",useContextmenu:true,fullscreenShortcut:false,bodyClass:"ke-content",indentChar:"\t",cssPath:"",cssData:"",minWidth:650,minHeight:100,minChangeSize:50,zIndex:811213,items:["source","|","undo","redo","|","preview","print","template","code","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","image","multiimage","flash","media","insertfile","table","hr","emoticons","baidumap","pagebreak","anchor","link","unlink","|","about"],noDisableItems:["source","fullscreen"],colorTable:[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]],fontSizeTable:["9px","10px","12px","14px","16px","18px","24px","32px"],htmlTags:{font:["id","class","color","size","face",".background-color"],span:["id","class",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".line-height"],div:["id","class","align",".border",".margin",".padding",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".background",".font-style",".text-decoration",".vertical-align",".margin-left"],table:["id","class","border","cellspacing","cellpadding","width","height","align","bordercolor",".padding",".margin",".border","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".background",".width",".height",".border-collapse"],"td,th":["id","class","align","valign","width","height","colspan","rowspan","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".vertical-align",".background",".border"],a:["id","class","href","target","name"],embed:["id","class","src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess","wmode"],img:["id","class","src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["id","class","align",".text-align",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["id","class"],hr:["id","class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":["id","class"],iframe:["id","class","src","frameborder","width","height",".width",".height"]},layout:'<div class="container"><div class="toolbar"></div><div class="edit"></div><div class="statusbar"></div></div>'};var _useCapture=false;var _INPUT_KEY_MAP=_toMap("8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222");var _CURSORMOVE_KEY_MAP=_toMap("33..40");var _CHANGE_KEY_MAP={};_each(_INPUT_KEY_MAP,function(key,val){_CHANGE_KEY_MAP[key]=val});_each(_CURSORMOVE_KEY_MAP,function(key,val){_CHANGE_KEY_MAP[key]=val});function _bindEvent(el,type,fn){if(el.addEventListener){el.addEventListener(type,fn,_useCapture)}else{if(el.attachEvent){el.attachEvent("on"+type,fn)}}}function _unbindEvent(el,type,fn){if(el.removeEventListener){el.removeEventListener(type,fn,_useCapture)}else{if(el.detachEvent){el.detachEvent("on"+type,fn)}}}var _EVENT_PROPS=("altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which").split(",");function KEvent(el,event){this.init(el,event)}_extend(KEvent,{init:function(el,event){var self=this,doc=el.ownerDocument||el.document||el;self.event=event;_each(_EVENT_PROPS,function(key,val){self[val]=event[val]});if(!self.target){self.target=self.srcElement||doc}if(self.target.nodeType===3){self.target=self.target.parentNode}if(!self.relatedTarget&&self.fromElement){self.relatedTarget=self.fromElement===self.target?self.toElement:self.fromElement}if(self.pageX==null&&self.clientX!=null){var d=doc.documentElement,body=doc.body;self.pageX=self.clientX+(d&&d.scrollLeft||body&&body.scrollLeft||0)-(d&&d.clientLeft||body&&body.clientLeft||0);self.pageY=self.clientY+(d&&d.scrollTop||body&&body.scrollTop||0)-(d&&d.clientTop||body&&body.clientTop||0)}if(!self.which&&((self.charCode||self.charCode===0)?self.charCode:self.keyCode)){self.which=self.charCode||self.keyCode}if(!self.metaKey&&self.ctrlKey){self.metaKey=self.ctrlKey}if(!self.which&&self.button!==undefined){self.which=(self.button&1?1:(self.button&2?3:(self.button&4?2:0)))}switch(self.which){case 186:self.which=59;break;case 187:case 107:case 43:self.which=61;break;case 189:case 45:self.which=109;break;case 42:self.which=106;break;case 47:self.which=111;break;case 78:self.which=110;break}if(self.which>=96&&self.which<=105){self.which-=48}},preventDefault:function(){var ev=this.event;if(ev.preventDefault){ev.preventDefault()}else{ev.returnValue=false}},stopPropagation:function(){var ev=this.event;if(ev.stopPropagation){ev.stopPropagation()}else{ev.cancelBubble=true}},stop:function(){this.preventDefault();this.stopPropagation()}});var _eventExpendo="kindeditor_"+_TIME,_eventId=0,_eventData={};function _getId(el){return el[_eventExpendo]||null}function _setId(el){el[_eventExpendo]=++_eventId;return _eventId}function _removeId(el){try{delete el[_eventExpendo]}catch(e){if(el.removeAttribute){el.removeAttribute(_eventExpendo)}}}function _bind(el,type,fn){if(type.indexOf(",")>=0){_each(type.split(","),function(){_bind(el,this,fn)});return}var id=_getId(el);if(!id){id=_setId(el)}if(_eventData[id]===undefined){_eventData[id]={}}var events=_eventData[id][type];if(events&&events.length>0){_unbindEvent(el,type,events[0])}else{_eventData[id][type]=[];_eventData[id].el=el}events=_eventData[id][type];if(events.length===0){events[0]=function(e){var kevent=e?new KEvent(el,e):undefined;_each(events,function(i,event){if(i>0&&event){event.call(el,kevent)}})}}if(_inArray(fn,events)<0){events.push(fn)}_bindEvent(el,type,events[0])}function _unbind(el,type,fn){if(type&&type.indexOf(",")>=0){_each(type.split(","),function(){_unbind(el,this,fn)});return}var id=_getId(el);if(!id){return}if(type===undefined){if(id in _eventData){_each(_eventData[id],function(key,events){if(key!="el"&&events.length>0){_unbindEvent(el,key,events[0])}});delete _eventData[id];_removeId(el)}return}if(!_eventData[id]){return}var events=_eventData[id][type];if(events&&events.length>0){if(fn===undefined){_unbindEvent(el,type,events[0]);delete _eventData[id][type]}else{_each(events,function(i,event){if(i>0&&event===fn){events.splice(i,1)}});if(events.length==1){_unbindEvent(el,type,events[0]);delete _eventData[id][type]}}var count=0;_each(_eventData[id],function(){count++});if(count<2){delete _eventData[id];_removeId(el)}}}function _fire(el,type){if(type.indexOf(",")>=0){_each(type.split(","),function(){_fire(el,this)});return}var id=_getId(el);if(!id){return}var events=_eventData[id][type];if(_eventData[id]&&events&&events.length>0){events[0]()}}function _ctrl(el,key,fn){var self=this;key=/^\d{2,}$/.test(key)?key:key.toUpperCase().charCodeAt(0);_bind(el,"keydown",function(e){if(e.ctrlKey&&e.which==key&&!e.shiftKey&&!e.altKey){fn.call(el);e.stop()}})}var _readyFinished=false;function _ready(fn){if(_readyFinished){fn(KindEditor);return}var loaded=false;function readyFunc(){if(!loaded){loaded=true;fn(KindEditor);_readyFinished=true}}function ieReadyFunc(){if(!loaded){try{document.documentElement.doScroll("left")}catch(e){setTimeout(ieReadyFunc,100);return}readyFunc()}}function ieReadyStateFunc(){if(document.readyState==="complete"){readyFunc()}}if(document.addEventListener){_bind(document,"DOMContentLoaded",readyFunc)}else{if(document.attachEvent){_bind(document,"readystatechange",ieReadyStateFunc);var toplevel=false;try{toplevel=window.frameElement==null}catch(e){}if(document.documentElement.doScroll&&toplevel){ieReadyFunc()}}}_bind(window,"load",readyFunc)}if(window.attachEvent){window.attachEvent("onunload",function(){_each(_eventData,function(key,events){if(events.el){_unbind(events.el)}})})}K.ctrl=_ctrl;K.ready=_ready;function _getCssList(css){css=css.replace(/&quot;/g,'"');var list={},reg=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,match;while((match=reg.exec(css))){var key=_trim(match[1].toLowerCase()),val=_trim(_toHex(match[2]));list[key]=val}return list}function _getAttrList(tag){var list={},reg=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g,match;while((match=reg.exec(tag))){var key=(match[1]||match[2]||match[4]||match[6]).toLowerCase(),val=(match[2]?match[3]:(match[4]?match[5]:match[7]))||"";list[key]=val}return list}function _addClassToTag(tag,className){if(/\s+class\s*=/.test(tag)){tag=tag.replace(/(\s+class=["']?)([^"']*)(["']?[\s>])/,function($0,$1,$2,$3){if((" "+$2+" ").indexOf(" "+className+" ")<0){return $2===""?$1+className+$3:$1+$2+" "+className+$3}else{return $0}})}else{tag=tag.substr(0,tag.length-1)+' class="'+className+'">'}return tag}function _formatCss(css){var str="";_each(_getCssList(css),function(key,val){str+=key+":"+val+";"});return str}function _formatUrl(url,mode,host,pathname){mode=_undef(mode,"").toLowerCase();if(url.substr(0,5)!="data:"){url=url.replace(/([^:])\/\//g,"$1/")}if(_inArray(mode,["absolute","relative","domain"])<0){return url}host=host||location.protocol+"//"+location.host;if(pathname===undefined){var m=location.pathname.match(/^(\/.*)\//);pathname=m?m[1]:""}var match;if((match=/^(\w+:\/\/[^\/]*)/.exec(url))){if(match[1]!==host){return url}}else{if(/^\w+:/.test(url)){return url}}function getRealPath(path){var parts=path.split("/"),paths=[];for(var i=0,len=parts.length;i<len;i++){var part=parts[i];if(part==".."){if(paths.length>0){paths.pop()}}else{if(part!==""&&part!="."){paths.push(part)}}}return"/"+paths.join("/")}if(/^\//.test(url)){url=host+getRealPath(url.substr(1))}else{if(!/^\w+:\/\//.test(url)){url=host+getRealPath(pathname+"/"+url)}}function getRelativePath(path,depth){if(url.substr(0,path.length)===path){var arr=[];for(var i=0;i<depth;i++){arr.push("..")}var prefix=".";if(arr.length>0){prefix+="/"+arr.join("/")}if(pathname=="/"){prefix+="/"}return prefix+url.substr(path.length)}else{if((match=/^(.*)\//.exec(path))){return getRelativePath(match[1],++depth)}}}if(mode==="relative"){url=getRelativePath(host+pathname,0).substr(2)}else{if(mode==="absolute"){if(url.substr(0,host.length)===host){url=url.substr(host.length)}}}return url}function _formatHtml(html,htmlTags,urlType,wellFormatted,indentChar){if(html==null){html=""}urlType=urlType||"";wellFormatted=_undef(wellFormatted,false);indentChar=_undef(indentChar,"\t");var fontSizeList="xx-small,x-small,small,medium,large,x-large,xx-large".split(",");html=html.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/ig,function($0,$1,$2,$3){return $1+$2.replace(/<(?:br|br\s[^>]*)>/ig,"\n")+$3});html=html.replace(/<(?:br|br\s[^>]*)\s*\/?>\s*<\/p>/ig,"</p>");html=html.replace(/(<(?:p|p\s[^>]*)>)\s*(<\/p>)/ig,"$1<br />$2");html=html.replace(/\u200B/g,"");html=html.replace(/\u00A9/g,"&copy;");html=html.replace(/\u00AE/g,"&reg;");html=html.replace(/\u2003/g,"&emsp;");html=html.replace(/\u3000/g,"&emsp;");html=html.replace(/<[^>]+/g,function($0){return $0.replace(/\s+/g," ")});var htmlTagMap={};if(htmlTags){_each(htmlTags,function(key,val){var arr=key.split(",");for(var i=0,len=arr.length;i<len;i++){htmlTagMap[arr[i]]=_toMap(val)}});if(!htmlTagMap.script){html=html.replace(/(<(?:script|script\s[^>]*)>)([\s\S]*?)(<\/script>)/ig,"")}if(!htmlTagMap.style){html=html.replace(/(<(?:style|style\s[^>]*)>)([\s\S]*?)(<\/style>)/ig,"")}}var re=/(\s*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>(\s*)/g;var tagStack=[];html=html.replace(re,function($0,$1,$2,$3,$4,$5,$6){var full=$0,startNewline=$1||"",startSlash=$2||"",tagName=$3.toLowerCase(),attr=$4||"",endSlash=$5?" "+$5:"",endNewline=$6||"";if(htmlTags&&!htmlTagMap[tagName]){return""}if(endSlash===""&&_SINGLE_TAG_MAP[tagName]){endSlash=" /"}if(_INLINE_TAG_MAP[tagName]){if(startNewline){startNewline=" "}if(endNewline){endNewline=" "}}if(_PRE_TAG_MAP[tagName]){if(startSlash){endNewline="\n"}else{startNewline="\n"}}if(wellFormatted&&tagName=="br"){endNewline="\n"}if(_BLOCK_TAG_MAP[tagName]&&!_PRE_TAG_MAP[tagName]){if(wellFormatted){if(startSlash&&tagStack.length>0&&tagStack[tagStack.length-1]===tagName){tagStack.pop()}else{tagStack.push(tagName)}startNewline="\n";endNewline="\n";for(var i=0,len=startSlash?tagStack.length:tagStack.length-1;i<len;i++){startNewline+=indentChar;if(!startSlash){endNewline+=indentChar}}if(endSlash){tagStack.pop()}else{if(!startSlash){endNewline+=indentChar}}}else{startNewline=endNewline=""}}if(attr!==""){var attrMap=_getAttrList(full);if(tagName==="font"){var fontStyleMap={},fontStyle="";_each(attrMap,function(key,val){if(key==="color"){fontStyleMap.color=val;delete attrMap[key]}if(key==="size"){fontStyleMap["font-size"]=fontSizeList[parseInt(val,10)-1]||"";delete attrMap[key]}if(key==="face"){fontStyleMap["font-family"]=val;delete attrMap[key]}if(key==="style"){fontStyle=val}});if(fontStyle&&!/;$/.test(fontStyle)){fontStyle+=";"}_each(fontStyleMap,function(key,val){if(val===""){return}if(/\s/.test(val)){val="'"+val+"'"}fontStyle+=key+":"+val+";"});attrMap.style=fontStyle}_each(attrMap,function(key,val){if(_FILL_ATTR_MAP[key]){attrMap[key]=key}if(_inArray(key,["src","href"])>=0){attrMap[key]=_formatUrl(val,urlType)}if(htmlTags&&key!=="style"&&!htmlTagMap[tagName]["*"]&&!htmlTagMap[tagName][key]||tagName==="body"&&key==="contenteditable"||/^kindeditor_\d+$/.test(key)){delete attrMap[key]}if(key==="style"&&val!==""){var styleMap=_getCssList(val);_each(styleMap,function(k,v){if(htmlTags&&!htmlTagMap[tagName].style&&!htmlTagMap[tagName]["."+k]){delete styleMap[k]}});var style="";_each(styleMap,function(k,v){style+=k+":"+v+";"});attrMap.style=style}});attr="";_each(attrMap,function(key,val){if(key==="style"&&val===""){return}val=val.replace(/"/g,"&quot;");attr+=" "+key+'="'+val+'"'})}if(tagName==="font"){tagName="span"}return startNewline+"<"+startSlash+tagName+attr+endSlash+">"+endNewline});html=html.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/ig,function($0,$1,$2,$3){return $1+$2.replace(/\n/g,'<span id="__kindeditor_pre_newline__">\n')+$3});html=html.replace(/\n\s*\n/g,"\n");html=html.replace(/<span id="__kindeditor_pre_newline__">\n/g,"\n");return _trim(html)}function _clearMsWord(html,htmlTags){html=html.replace(/<meta[\s\S]*?>/ig,"").replace(/<![\s\S]*?>/ig,"").replace(/<style[^>]*>[\s\S]*?<\/style>/ig,"").replace(/<script[^>]*>[\s\S]*?<\/script>/ig,"").replace(/<w:[^>]+>[\s\S]*?<\/w:[^>]+>/ig,"").replace(/<o:[^>]+>[\s\S]*?<\/o:[^>]+>/ig,"").replace(/<xml>[\s\S]*?<\/xml>/ig,"").replace(/<(?:table|td)[^>]*>/ig,function(full){return full.replace(/border-bottom:([#\w\s]+)/ig,"border:$1")});return _formatHtml(html,htmlTags)}function _mediaType(src){if(/\.(rm|rmvb)(\?|$)/i.test(src)){return"audio/x-pn-realaudio-plugin"}if(/\.(swf|flv)(\?|$)/i.test(src)){return"application/x-shockwave-flash"}return"video/x-ms-asf-plugin"}function _mediaClass(type){if(/realaudio/i.test(type)){return"ke-rm"}if(/flash/i.test(type)){return"ke-flash"}return"ke-media"}function _mediaAttrs(srcTag){return _getAttrList(unescape(srcTag))}function _mediaEmbed(attrs){var html="<embed ";_each(attrs,function(key,val){html+=key+'="'+val+'" '});html+="/>";return html}function _mediaImg(blankPath,attrs){var width=attrs.width,height=attrs.height,type=attrs.type||_mediaType(attrs.src),srcTag=_mediaEmbed(attrs),style="";if(/\D/.test(width)){style+="width:"+width+";"}else{if(width>0){style+="width:"+width+"px;"}}if(/\D/.test(height)){style+="height:"+height+";"}else{if(height>0){style+="height:"+height+"px;"}}var html='<img class="'+_mediaClass(type)+'" src="'+blankPath+'" ';if(style!==""){html+='style="'+style+'" '}html+='data-ke-tag="'+escape(srcTag)+'" alt="" />';return html}function _tmpl(str,data){var fn=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return data?fn(data):fn}K.formatUrl=_formatUrl;K.formatHtml=_formatHtml;K.getCssList=_getCssList;K.getAttrList=_getAttrList;K.mediaType=_mediaType;K.mediaAttrs=_mediaAttrs;K.mediaEmbed=_mediaEmbed;K.mediaImg=_mediaImg;K.clearMsWord=_clearMsWord;K.tmpl=_tmpl;function _contains(nodeA,nodeB){if(nodeA.nodeType==9&&nodeB.nodeType!=9){return true}while((nodeB=nodeB.parentNode)){if(nodeB==nodeA){return true}}return false}var _getSetAttrDiv=document.createElement("div");_getSetAttrDiv.setAttribute("className","t");var _GET_SET_ATTRIBUTE=_getSetAttrDiv.className!=="t";function _getAttr(el,key){key=key.toLowerCase();var val=null;if(!_GET_SET_ATTRIBUTE&&el.nodeName.toLowerCase()!="script"){var div=el.ownerDocument.createElement("div");div.appendChild(el.cloneNode(false));var list=_getAttrList(_unescape(div.innerHTML));if(key in list){val=list[key]}}else{try{val=el.getAttribute(key,2)}catch(e){val=el.getAttribute(key,1)}}if(key==="style"&&val!==null){val=_formatCss(val)}return val}function _queryAll(expr,root){var exprList=expr.split(",");if(exprList.length>1){var mergedResults=[];_each(exprList,function(){_each(_queryAll(this,root),function(){if(_inArray(this,mergedResults)<0){mergedResults.push(this)}})});return mergedResults}root=root||document;function escape(str){if(typeof str!="string"){return str}return str.replace(/([^\w\-])/g,"\\$1")}function stripslashes(str){return str.replace(/\\/g,"")}function cmpTag(tagA,tagB){return tagA==="*"||tagA.toLowerCase()===escape(tagB.toLowerCase())}function byId(id,tag,root){var arr=[],doc=root.ownerDocument||root,el=doc.getElementById(stripslashes(id));if(el){if(cmpTag(tag,el.nodeName)&&_contains(root,el)){arr.push(el)}}return arr}function byClass(className,tag,root){var doc=root.ownerDocument||root,arr=[],els,i,len,el;if(root.getElementsByClassName){els=root.getElementsByClassName(stripslashes(className));for(i=0,len=els.length;i<len;i++){el=els[i];if(cmpTag(tag,el.nodeName)){arr.push(el)}}}else{if(doc.querySelectorAll){els=doc.querySelectorAll((root.nodeName!=="#document"?root.nodeName+" ":"")+tag+"."+className);for(i=0,len=els.length;i<len;i++){el=els[i];if(_contains(root,el)){arr.push(el)}}}else{els=root.getElementsByTagName(tag);className=" "+className+" ";for(i=0,len=els.length;i<len;i++){el=els[i];if(el.nodeType==1){var cls=el.className;if(cls&&(" "+cls+" ").indexOf(className)>-1){arr.push(el)}}}}}return arr}function byName(name,tag,root){var arr=[],doc=root.ownerDocument||root,els=doc.getElementsByName(stripslashes(name)),el;for(var i=0,len=els.length;i<len;i++){el=els[i];if(cmpTag(tag,el.nodeName)&&_contains(root,el)){if(el.getAttribute("name")!==null){arr.push(el)}}}return arr}function byAttr(key,val,tag,root){var arr=[],els=root.getElementsByTagName(tag),el;for(var i=0,len=els.length;i<len;i++){el=els[i];if(el.nodeType==1){if(val===null){if(_getAttr(el,key)!==null){arr.push(el)}}else{if(val===escape(_getAttr(el,key))){arr.push(el)}}}}return arr}function select(expr,root){var arr=[],matches;matches=/^((?:\\.|[^.#\s\[<>])+)/.exec(expr);var tag=matches?matches[1]:"*";if((matches=/#((?:[\w\-]|\\.)+)$/.exec(expr))){arr=byId(matches[1],tag,root)}else{if((matches=/\.((?:[\w\-]|\\.)+)$/.exec(expr))){arr=byClass(matches[1],tag,root)}else{if((matches=/\[((?:[\w\-]|\\.)+)\]/.exec(expr))){arr=byAttr(matches[1].toLowerCase(),null,tag,root)}else{if((matches=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(expr))){var key=matches[1].toLowerCase(),val=matches[2];if(key==="id"){arr=byId(val,tag,root)}else{if(key==="class"){arr=byClass(val,tag,root)}else{if(key==="name"){arr=byName(val,tag,root)}else{arr=byAttr(key,val,tag,root)}}}}else{var els=root.getElementsByTagName(tag),el;for(var i=0,len=els.length;i<len;i++){el=els[i];if(el.nodeType==1){arr.push(el)}}}}}}return arr}var parts=[],arr,re=/((?:\\.|[^\s>])+|[\s>])/g;while((arr=re.exec(expr))){if(arr[1]!==" "){parts.push(arr[1])}}var results=[];if(parts.length==1){return select(parts[0],root)}var isChild=false,part,els,subResults,val,v,i,j,k,length,len,l;for(i=0,lenth=parts.length;i<lenth;i++){part=parts[i];if(part===">"){isChild=true;continue}if(i>0){els=[];for(j=0,len=results.length;j<len;j++){val=results[j];subResults=select(part,val);for(k=0,l=subResults.length;k<l;k++){v=subResults[k];if(isChild){if(val===v.parentNode){els.push(v)}}else{els.push(v)}}}results=els}else{results=select(part,root)}if(results.length===0){return[]}}return results}function _query(expr,root){var arr=_queryAll(expr,root);return arr.length>0?arr[0]:null}K.query=_query;K.queryAll=_queryAll;function _get(val){return K(val)[0]}function _getDoc(node){if(!node){return document}return node.ownerDocument||node.document||node}function _getWin(node){if(!node){return window}var doc=_getDoc(node);return doc.parentWindow||doc.defaultView}function _setHtml(el,html){if(el.nodeType!=1){return}var doc=_getDoc(el);try{el.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+html;var temp=doc.getElementById("__kindeditor_temp_tag__");temp.parentNode.removeChild(temp)}catch(e){K(el).empty();K("@"+html,doc).each(function(){el.appendChild(this)})}}function _hasClass(el,cls){return _inString(cls,el.className," ")}function _setAttr(el,key,val){if(_IE&&_V<8&&key.toLowerCase()=="class"){key="className"}el.setAttribute(key,""+val)}function _removeAttr(el,key){if(_IE&&_V<8&&key.toLowerCase()=="class"){key="className"}_setAttr(el,key,"");el.removeAttribute(key)}function _getNodeName(node){if(!node||!node.nodeName){return""}return node.nodeName.toLowerCase()}function _computedCss(el,key){var self=this,win=_getWin(el),camelKey=_toCamel(key),val="";if(win.getComputedStyle){var style=win.getComputedStyle(el,null);val=style[camelKey]||style.getPropertyValue(key)||el.style[camelKey]}else{if(el.currentStyle){val=el.currentStyle[camelKey]||el.style[camelKey]}}return val}function _hasVal(node){return !!_VALUE_TAG_MAP[_getNodeName(node)]}function _docElement(doc){doc=doc||document;return _QUIRKS?doc.body:doc.documentElement}function _docHeight(doc){var el=_docElement(doc);return Math.max(el.scrollHeight,el.clientHeight)}function _docWidth(doc){var el=_docElement(doc);return Math.max(el.scrollWidth,el.clientWidth)}function _getScrollPos(doc){doc=doc||document;var x,y;if(_IE||_NEWIE||_OPERA){x=_docElement(doc).scrollLeft;y=_docElement(doc).scrollTop}else{x=_getWin(doc).scrollX;y=_getWin(doc).scrollY}return{x:x,y:y}}function KNode(node){this.init(node)}_extend(KNode,{init:function(node){var self=this;node=_isArray(node)?node:[node];var length=0;for(var i=0,len=node.length;i<len;i++){if(node[i]){self[i]=node[i].constructor===KNode?node[i][0]:node[i];length++}}self.length=length;self.doc=_getDoc(self[0]);self.name=_getNodeName(self[0]);self.type=self.length>0?self[0].nodeType:null;self.win=_getWin(self[0])},each:function(fn){var self=this;for(var i=0;i<self.length;i++){if(fn.call(self[i],i,self[i])===false){return self}}return self},bind:function(type,fn){this.each(function(){_bind(this,type,fn)});return this},unbind:function(type,fn){this.each(function(){_unbind(this,type,fn)});return this},fire:function(type){if(this.length<1){return this}_fire(this[0],type);return this},hasAttr:function(key){if(this.length<1){return false}return !!_getAttr(this[0],key)},attr:function(key,val){var self=this;if(key===undefined){return _getAttrList(self.outer())}if(typeof key==="object"){_each(key,function(k,v){self.attr(k,v)});return self}if(val===undefined){val=self.length<1?null:_getAttr(self[0],key);return val===null?"":val}self.each(function(){_setAttr(this,key,val)});return self},removeAttr:function(key){this.each(function(){_removeAttr(this,key)});return this},get:function(i){if(this.length<1){return null}return this[i||0]},eq:function(i){if(this.length<1){return null}return this[i]?new KNode(this[i]):null},hasClass:function(cls){if(this.length<1){return false}return _hasClass(this[0],cls)},addClass:function(cls){this.each(function(){if(!_hasClass(this,cls)){this.className=_trim(this.className+" "+cls)}});return this},removeClass:function(cls){this.each(function(){if(_hasClass(this,cls)){this.className=_trim(this.className.replace(new RegExp("(^|\\s)"+cls+"(\\s|$)")," "))}});return this},html:function(val){var self=this;if(val===undefined){if(self.length<1||self.type!=1){return""}return _formatHtml(self[0].innerHTML)}self.each(function(){_setHtml(this,val)});return self},text:function(){var self=this;if(self.length<1){return""}return _IE?self[0].innerText:self[0].textContent},hasVal:function(){if(this.length<1){return false}return _hasVal(this[0])},val:function(val){var self=this;if(val===undefined){if(self.length<1){return""}return self.hasVal()?self[0].value:self.attr("value")}else{self.each(function(){if(_hasVal(this)){this.value=val}else{_setAttr(this,"value",val)}});return self}},css:function(key,val){var self=this;if(key===undefined){return _getCssList(self.attr("style"))}if(typeof key==="object"){_each(key,function(k,v){self.css(k,v)});return self}if(val===undefined){if(self.length<1){return""}return self[0].style[_toCamel(key)]||_computedCss(self[0],key)||""}self.each(function(){this.style[_toCamel(key)]=val});return self},width:function(val){var self=this;if(val===undefined){if(self.length<1){return 0}return self[0].offsetWidth}return self.css("width",_addUnit(val))},height:function(val){var self=this;if(val===undefined){if(self.length<1){return 0}return self[0].offsetHeight}return self.css("height",_addUnit(val))},opacity:function(val){this.each(function(){if(this.style.opacity===undefined){this.style.filter=val==1?"":"alpha(opacity="+(val*100)+")"}else{this.style.opacity=val==1?"":val}});return this},data:function(key,val){var self=this;key="kindeditor_data_"+key;if(val===undefined){if(self.length<1){return null}return self[0][key]}this.each(function(){this[key]=val});return self},pos:function(){var self=this,node=self[0],x=0,y=0;if(node){if(node.getBoundingClientRect){var box=node.getBoundingClientRect(),pos=_getScrollPos(self.doc);x=box.left+pos.x;y=box.top+pos.y}else{while(node){x+=node.offsetLeft;y+=node.offsetTop;node=node.offsetParent}}}return{x:_round(x),y:_round(y)}},clone:function(bool){if(this.length<1){return new KNode([])}return new KNode(this[0].cloneNode(bool))},append:function(expr){this.each(function(){if(this.appendChild){this.appendChild(_get(expr))}});return this},appendTo:function(expr){this.each(function(){_get(expr).appendChild(this)});return this},before:function(expr){this.each(function(){this.parentNode.insertBefore(_get(expr),this)});return this},after:function(expr){this.each(function(){if(this.nextSibling){this.parentNode.insertBefore(_get(expr),this.nextSibling)}else{this.parentNode.appendChild(_get(expr))}});return this},replaceWith:function(expr){var nodes=[];this.each(function(i,node){_unbind(node);var newNode=_get(expr);node.parentNode.replaceChild(newNode,node);nodes.push(newNode)});return K(nodes)},empty:function(){var self=this;self.each(function(i,node){var child=node.firstChild;while(child){if(!node.parentNode){return}var next=child.nextSibling;child.parentNode.removeChild(child);child=next}});return self},remove:function(keepChilds){var self=this;self.each(function(i,node){if(!node.parentNode){return}_unbind(node);if(keepChilds){var child=node.firstChild;while(child){var next=child.nextSibling;node.parentNode.insertBefore(child,node);child=next}}node.parentNode.removeChild(node);delete self[i]});self.length=0;return self},show:function(val){var self=this;if(val===undefined){val=self._originDisplay||""}if(self.css("display")!="none"){return self}return self.css("display",val)},hide:function(){var self=this;if(self.length<1){return self}self._originDisplay=self[0].style.display;return self.css("display","none")},outer:function(){var self=this;if(self.length<1){return""}var div=self.doc.createElement("div"),html;div.appendChild(self[0].cloneNode(true));html=_formatHtml(div.innerHTML);div=null;return html},isSingle:function(){return !!_SINGLE_TAG_MAP[this.name]},isInline:function(){return !!_INLINE_TAG_MAP[this.name]},isBlock:function(){return !!_BLOCK_TAG_MAP[this.name]},isStyle:function(){return !!_STYLE_TAG_MAP[this.name]},isControl:function(){return !!_CONTROL_TAG_MAP[this.name]},contains:function(otherNode){if(this.length<1){return false}return _contains(this[0],_get(otherNode))},parent:function(){if(this.length<1){return null}var node=this[0].parentNode;return node?new KNode(node):null},children:function(){if(this.length<1){return new KNode([])}var list=[],child=this[0].firstChild;while(child){if(child.nodeType!=3||_trim(child.nodeValue)!==""){list.push(child)}child=child.nextSibling}return new KNode(list)},first:function(){var list=this.children();return list.length>0?list.eq(0):null},last:function(){var list=this.children();return list.length>0?list.eq(list.length-1):null},index:function(){if(this.length<1){return -1}var i=-1,sibling=this[0];while(sibling){i++;sibling=sibling.previousSibling}return i},prev:function(){if(this.length<1){return null}var node=this[0].previousSibling;return node?new KNode(node):null},next:function(){if(this.length<1){return null}var node=this[0].nextSibling;return node?new KNode(node):null},scan:function(fn,order){if(this.length<1){return}order=(order===undefined)?true:order;function walk(node){var n=order?node.firstChild:node.lastChild;while(n){var next=order?n.nextSibling:n.previousSibling;if(fn(n)===false){return false}if(walk(n)===false){return false}n=next}}walk(this[0]);return this}});_each(("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu").split(","),function(i,type){KNode.prototype[type]=function(fn){return fn?this.bind(type,fn):this.fire(type)}});var _K=K;K=function(expr,root){if(expr===undefined||expr===null){return}function newNode(node){if(!node[0]){node=[]}return new KNode(node)}if(typeof expr==="string"){if(root){root=_get(root)}var length=expr.length;if(expr.charAt(0)==="@"){expr=expr.substr(1)}if(expr.length!==length||/<.+>/.test(expr)){var doc=root?root.ownerDocument||root:document,div=doc.createElement("div"),list=[];div.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+expr;for(var i=0,len=div.childNodes.length;i<len;i++){var child=div.childNodes[i];if(child.id=="__kindeditor_temp_tag__"){continue}list.push(child)}return newNode(list)}return newNode(_queryAll(expr,root))}if(expr&&expr.constructor===KNode){return expr}if(expr.toArray){expr=expr.toArray()}if(_isArray(expr)){return newNode(expr)}return newNode(_toArray(arguments))};_each(_K,function(key,val){K[key]=val});K.NodeClass=KNode;window.KindEditor=K;var _START_TO_START=0,_START_TO_END=1,_END_TO_END=2,_END_TO_START=3,_BOOKMARK_ID=0;function _updateCollapsed(range){range.collapsed=(range.startContainer===range.endContainer&&range.startOffset===range.endOffset);return range}function _copyAndDelete(range,isCopy,isDelete){var doc=range.doc,nodeList=[];function splitTextNode(node,startOffset,endOffset){var length=node.nodeValue.length,centerNode;if(isCopy){var cloneNode=node.cloneNode(true);if(startOffset>0){centerNode=cloneNode.splitText(startOffset)}else{centerNode=cloneNode}if(endOffset<length){centerNode.splitText(endOffset-startOffset)}}if(isDelete){var center=node;if(startOffset>0){center=node.splitText(startOffset);range.setStart(node,startOffset)}if(endOffset<length){var right=center.splitText(endOffset-startOffset);range.setEnd(right,0)}nodeList.push(center)}return centerNode}function removeNodes(){if(isDelete){range.up().collapse(true)}for(var i=0,len=nodeList.length;i<len;i++){var node=nodeList[i];if(node.parentNode){node.parentNode.removeChild(node)}}}var copyRange=range.cloneRange().down();var start=-1,incStart=-1,incEnd=-1,end=-1,ancestor=range.commonAncestor(),frag=doc.createDocumentFragment();if(ancestor.nodeType==3){var textNode=splitTextNode(ancestor,range.startOffset,range.endOffset);if(isCopy){frag.appendChild(textNode)}removeNodes();return isCopy?frag:range}function extractNodes(parent,frag){var node=parent.firstChild,nextNode;while(node){var testRange=new KRange(doc).selectNode(node);start=testRange.compareBoundaryPoints(_START_TO_END,range);if(start>=0&&incStart<=0){incStart=testRange.compareBoundaryPoints(_START_TO_START,range)}if(incStart>=0&&incEnd<=0){incEnd=testRange.compareBoundaryPoints(_END_TO_END,range)}if(incEnd>=0&&end<=0){end=testRange.compareBoundaryPoints(_END_TO_START,range)}if(end>=0){return false}nextNode=node.nextSibling;if(start>0){if(node.nodeType==1){if(incStart>=0&&incEnd<=0){if(isCopy){frag.appendChild(node.cloneNode(true))}if(isDelete){nodeList.push(node)}}else{var childFlag;if(isCopy){childFlag=node.cloneNode(false);frag.appendChild(childFlag)}if(extractNodes(node,childFlag)===false){return false}}}else{if(node.nodeType==3){var textNode;if(node==copyRange.startContainer){textNode=splitTextNode(node,copyRange.startOffset,node.nodeValue.length)}else{if(node==copyRange.endContainer){textNode=splitTextNode(node,0,copyRange.endOffset)}else{textNode=splitTextNode(node,0,node.nodeValue.length)}}if(isCopy){try{frag.appendChild(textNode)}catch(e){}}}}}node=nextNode}}extractNodes(ancestor,frag);if(isDelete){range.up().collapse(true)}for(var i=0,len=nodeList.length;i<len;i++){var node=nodeList[i];if(node.parentNode){node.parentNode.removeChild(node)}}return isCopy?frag:range}function _moveToElementText(range,el){var node=el;while(node){var knode=K(node);if(knode.name=="marquee"||knode.name=="select"){return}node=node.parentNode}try{range.moveToElementText(el)}catch(e){}}function _getStartEnd(rng,isStart){var doc=rng.parentElement().ownerDocument,pointRange=rng.duplicate();pointRange.collapse(isStart);var parent=pointRange.parentElement(),nodes=parent.childNodes;if(nodes.length===0){return{node:parent.parentNode,offset:K(parent).index()}}var startNode=doc,startPos=0,cmp=-1;var testRange=rng.duplicate();_moveToElementText(testRange,parent);for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i];cmp=testRange.compareEndPoints("StartToStart",pointRange);if(cmp===0){return{node:node.parentNode,offset:i}}if(node.nodeType==1){var nodeRange=rng.duplicate(),dummy,knode=K(node),newNode=node;if(knode.isControl()){dummy=doc.createElement("span");knode.after(dummy);newNode=dummy;startPos+=knode.text().replace(/\r\n|\n|\r/g,"").length}_moveToElementText(nodeRange,newNode);testRange.setEndPoint("StartToEnd",nodeRange);if(cmp>0){startPos+=nodeRange.text.replace(/\r\n|\n|\r/g,"").length}else{startPos=0}if(dummy){K(dummy).remove()}}else{if(node.nodeType==3){testRange.moveStart("character",node.nodeValue.length);startPos+=node.nodeValue.length}}if(cmp<0){startNode=node}}if(cmp<0&&startNode.nodeType==1){return{node:parent,offset:K(parent.lastChild).index()+1}}if(cmp>0){while(startNode.nextSibling&&startNode.nodeType==1){startNode=startNode.nextSibling}}testRange=rng.duplicate();_moveToElementText(testRange,parent);testRange.setEndPoint("StartToEnd",pointRange);startPos-=testRange.text.replace(/\r\n|\n|\r/g,"").length;if(cmp>0&&startNode.nodeType==3){var prevNode=startNode.previousSibling;while(prevNode&&prevNode.nodeType==3){startPos-=prevNode.nodeValue.length;prevNode=prevNode.previousSibling}}return{node:startNode,offset:startPos}}function _getEndRange(node,offset){var doc=node.ownerDocument||node,range=doc.body.createTextRange();if(doc==node){range.collapse(true);return range}if(node.nodeType==1&&node.childNodes.length>0){var children=node.childNodes,isStart,child;if(offset===0){child=children[0];isStart=true}else{child=children[offset-1];isStart=false}if(!child){return range}if(K(child).name==="head"){if(offset===1){isStart=true}if(offset===2){isStart=false}range.collapse(isStart);return range}if(child.nodeType==1){var kchild=K(child),span;if(kchild.isControl()){span=doc.createElement("span");if(isStart){kchild.before(span)}else{kchild.after(span)}child=span}_moveToElementText(range,child);range.collapse(isStart);if(span){K(span).remove()}return range}node=child;offset=isStart?0:child.nodeValue.length}var dummy=doc.createElement("span");K(node).before(dummy);_moveToElementText(range,dummy);range.moveStart("character",offset);K(dummy).remove();return range}function _toRange(rng){var doc,range;function tr2td(start){if(K(start.node).name=="tr"){start.node=start.node.cells[start.offset];start.offset=0}}if(_IERANGE){if(rng.item){doc=_getDoc(rng.item(0));range=new KRange(doc);range.selectNode(rng.item(0));return range}doc=rng.parentElement().ownerDocument;var start=_getStartEnd(rng,true),end=_getStartEnd(rng,false);tr2td(start);tr2td(end);range=new KRange(doc);range.setStart(start.node,start.offset);range.setEnd(end.node,end.offset);return range}var startContainer=rng.startContainer;doc=startContainer.ownerDocument||startContainer;range=new KRange(doc);range.setStart(startContainer,rng.startOffset);range.setEnd(rng.endContainer,rng.endOffset);return range}function KRange(doc){this.init(doc)}_extend(KRange,{init:function(doc){var self=this;self.startContainer=doc;self.startOffset=0;self.endContainer=doc;self.endOffset=0;self.collapsed=true;self.doc=doc},commonAncestor:function(){function getParents(node){var parents=[];while(node){parents.push(node);node=node.parentNode}return parents}var parentsA=getParents(this.startContainer),parentsB=getParents(this.endContainer),i=0,lenA=parentsA.length,lenB=parentsB.length,parentA,parentB;while(++i){parentA=parentsA[lenA-i];parentB=parentsB[lenB-i];if(!parentA||!parentB||parentA!==parentB){break}}return parentsA[lenA-i+1]},setStart:function(node,offset){var self=this,doc=self.doc;self.startContainer=node;self.startOffset=offset;if(self.endContainer===doc){self.endContainer=node;self.endOffset=offset}return _updateCollapsed(this)},setEnd:function(node,offset){var self=this,doc=self.doc;self.endContainer=node;self.endOffset=offset;if(self.startContainer===doc){self.startContainer=node;self.startOffset=offset}return _updateCollapsed(this)},setStartBefore:function(node){return this.setStart(node.parentNode||this.doc,K(node).index())},setStartAfter:function(node){return this.setStart(node.parentNode||this.doc,K(node).index()+1)},setEndBefore:function(node){return this.setEnd(node.parentNode||this.doc,K(node).index())},setEndAfter:function(node){return this.setEnd(node.parentNode||this.doc,K(node).index()+1)},selectNode:function(node){return this.setStartBefore(node).setEndAfter(node)},selectNodeContents:function(node){var knode=K(node);if(knode.type==3||knode.isSingle()){return this.selectNode(node)}var children=knode.children();if(children.length>0){return this.setStartBefore(children[0]).setEndAfter(children[children.length-1])}return this.setStart(node,0).setEnd(node,0)},collapse:function(toStart){if(toStart){return this.setEnd(this.startContainer,this.startOffset)}return this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(how,range){var rangeA=this.get(),rangeB=range.get();if(_IERANGE){var arr={};arr[_START_TO_START]="StartToStart";arr[_START_TO_END]="EndToStart";arr[_END_TO_END]="EndToEnd";arr[_END_TO_START]="StartToEnd";var cmp=rangeA.compareEndPoints(arr[how],rangeB);if(cmp!==0){return cmp}var nodeA,nodeB,nodeC,posA,posB;if(how===_START_TO_START||how===_END_TO_START){nodeA=this.startContainer;posA=this.startOffset}if(how===_START_TO_END||how===_END_TO_END){nodeA=this.endContainer;posA=this.endOffset}if(how===_START_TO_START||how===_START_TO_END){nodeB=range.startContainer;posB=range.startOffset}if(how===_END_TO_END||how===_END_TO_START){nodeB=range.endContainer;posB=range.endOffset}if(nodeA===nodeB){var diff=posA-posB;return diff>0?1:(diff<0?-1:0)}nodeC=nodeB;while(nodeC&&nodeC.parentNode!==nodeA){nodeC=nodeC.parentNode}if(nodeC){return K(nodeC).index()>=posA?-1:1}nodeC=nodeA;while(nodeC&&nodeC.parentNode!==nodeB){nodeC=nodeC.parentNode}if(nodeC){return K(nodeC).index()>=posB?1:-1}nodeC=K(nodeB).next();if(nodeC&&nodeC.contains(nodeA)){return 1}nodeC=K(nodeA).next();if(nodeC&&nodeC.contains(nodeB)){return -1}}else{return rangeA.compareBoundaryPoints(how,rangeB)}},cloneRange:function(){return new KRange(this.doc).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},toString:function(){var rng=this.get(),str=_IERANGE?rng.text:rng.toString();return str.replace(/\r\n|\n|\r/g,"")},cloneContents:function(){return _copyAndDelete(this,true,false)},deleteContents:function(){return _copyAndDelete(this,false,true)},extractContents:function(){return _copyAndDelete(this,true,true)},insertNode:function(node){var self=this,sc=self.startContainer,so=self.startOffset,ec=self.endContainer,eo=self.endOffset,firstChild,lastChild,c,nodeCount=1;if(node.nodeName.toLowerCase()==="#document-fragment"){firstChild=node.firstChild;lastChild=node.lastChild;nodeCount=node.childNodes.length}if(sc.nodeType==1){c=sc.childNodes[so];if(c){sc.insertBefore(node,c);if(sc===ec){eo+=nodeCount}}else{sc.appendChild(node)}}else{if(sc.nodeType==3){if(so===0){sc.parentNode.insertBefore(node,sc);if(sc.parentNode===ec){eo+=nodeCount}}else{if(so>=sc.nodeValue.length){if(sc.nextSibling){sc.parentNode.insertBefore(node,sc.nextSibling)}else{sc.parentNode.appendChild(node)}}else{if(so>0){c=sc.splitText(so)}else{c=sc}sc.parentNode.insertBefore(node,c);if(sc===ec){ec=c;eo-=so}}}}}if(firstChild){self.setStartBefore(firstChild).setEndAfter(lastChild)}else{self.selectNode(node)}if(self.compareBoundaryPoints(_END_TO_END,self.cloneRange().setEnd(ec,eo))>=1){return self}return self.setEnd(ec,eo)},surroundContents:function(node){node.appendChild(this.extractContents());return this.insertNode(node).selectNode(node)},isControl:function(){var self=this,sc=self.startContainer,so=self.startOffset,ec=self.endContainer,eo=self.endOffset,rng;return sc.nodeType==1&&sc===ec&&so+1===eo&&K(sc.childNodes[so]).isControl()},get:function(hasControlRange){var self=this,doc=self.doc,node,rng;if(!_IERANGE){rng=doc.createRange();try{rng.setStart(self.startContainer,self.startOffset);rng.setEnd(self.endContainer,self.endOffset)}catch(e){}return rng}if(hasControlRange&&self.isControl()){rng=doc.body.createControlRange();rng.addElement(self.startContainer.childNodes[self.startOffset]);return rng}var range=self.cloneRange().down();rng=doc.body.createTextRange();rng.setEndPoint("StartToStart",_getEndRange(range.startContainer,range.startOffset));rng.setEndPoint("EndToStart",_getEndRange(range.endContainer,range.endOffset));return rng},html:function(){return K(this.cloneContents()).outer()},down:function(){var self=this;function downPos(node,pos,isStart){if(node.nodeType!=1){return}var children=K(node).children();if(children.length===0){return}var left,right,child,offset;if(pos>0){left=children.eq(pos-1)}if(pos<children.length){right=children.eq(pos)}if(left&&left.type==3){child=left[0];offset=child.nodeValue.length}if(right&&right.type==3){child=right[0];offset=0}if(!child){return}if(isStart){self.setStart(child,offset)}else{self.setEnd(child,offset)}}downPos(self.startContainer,self.startOffset,true);downPos(self.endContainer,self.endOffset,false);return self},up:function(){var self=this;function upPos(node,pos,isStart){if(node.nodeType!=3){return}if(pos===0){if(isStart){self.setStartBefore(node)}else{self.setEndBefore(node)}}else{if(pos==node.nodeValue.length){if(isStart){self.setStartAfter(node)}else{self.setEndAfter(node)}}}}upPos(self.startContainer,self.startOffset,true);upPos(self.endContainer,self.endOffset,false);return self},enlarge:function(toBlock){var self=this;self.up();function enlargePos(node,pos,isStart){var knode=K(node),parent;if(knode.type==3||_NOSPLIT_TAG_MAP[knode.name]||!toBlock&&knode.isBlock()){return}if(pos===0){while(!knode.prev()){parent=knode.parent();if(!parent||_NOSPLIT_TAG_MAP[parent.name]||!toBlock&&parent.isBlock()){break}knode=parent}if(isStart){self.setStartBefore(knode[0])}else{self.setEndBefore(knode[0])}}else{if(pos==knode.children().length){while(!knode.next()){parent=knode.parent();if(!parent||_NOSPLIT_TAG_MAP[parent.name]||!toBlock&&parent.isBlock()){break}knode=parent}if(isStart){self.setStartAfter(knode[0])}else{self.setEndAfter(knode[0])}}}}enlargePos(self.startContainer,self.startOffset,true);enlargePos(self.endContainer,self.endOffset,false);return self},shrink:function(){var self=this,child,collapsed=self.collapsed;while(self.startContainer.nodeType==1&&(child=self.startContainer.childNodes[self.startOffset])&&child.nodeType==1&&!K(child).isSingle()){self.setStart(child,0)}if(collapsed){return self.collapse(collapsed)}while(self.endContainer.nodeType==1&&self.endOffset>0&&(child=self.endContainer.childNodes[self.endOffset-1])&&child.nodeType==1&&!K(child).isSingle()){self.setEnd(child,child.childNodes.length)}return self},createBookmark:function(serialize){var self=this,doc=self.doc,endNode,startNode=K('<span style="display:none;"></span>',doc)[0];startNode.id="__kindeditor_bookmark_start_"+(_BOOKMARK_ID++)+"__";if(!self.collapsed){endNode=startNode.cloneNode(true);endNode.id="__kindeditor_bookmark_end_"+(_BOOKMARK_ID++)+"__"}if(endNode){self.cloneRange().collapse(false).insertNode(endNode).setEndBefore(endNode)}self.insertNode(startNode).setStartAfter(startNode);return{start:serialize?"#"+startNode.id:startNode,end:endNode?(serialize?"#"+endNode.id:endNode):null}},moveToBookmark:function(bookmark){var self=this,doc=self.doc,start=K(bookmark.start,doc),end=bookmark.end?K(bookmark.end,doc):null;if(!start||start.length<1){return self}self.setStartBefore(start[0]);start.remove();if(end&&end.length>0){self.setEndBefore(end[0]);end.remove()}else{self.collapse(true)}return self},dump:function(){console.log("--------------------");console.log(this.startContainer.nodeType==3?this.startContainer.nodeValue:this.startContainer,this.startOffset);console.log(this.endContainer.nodeType==3?this.endContainer.nodeValue:this.endContainer,this.endOffset)}});function _range(mixed){if(!mixed.nodeName){return mixed.constructor===KRange?mixed:_toRange(mixed)}return new KRange(mixed)}K.RangeClass=KRange;K.range=_range;K.START_TO_START=_START_TO_START;K.START_TO_END=_START_TO_END;K.END_TO_END=_END_TO_END;K.END_TO_START=_END_TO_START;function _nativeCommand(doc,key,val){try{doc.execCommand(key,false,val)}catch(e){}}function _nativeCommandValue(doc,key){var val="";try{val=doc.queryCommandValue(key)}catch(e){}if(typeof val!=="string"){val=""}return val}function _getSel(doc){var win=_getWin(doc);return _IERANGE?doc.selection:win.getSelection()}function _getRng(doc){var sel=_getSel(doc),rng;try{if(sel.rangeCount>0){rng=sel.getRangeAt(0)}else{rng=sel.createRange()}}catch(e){}if(_IERANGE&&(!rng||(!rng.item&&rng.parentElement().ownerDocument!==doc))){return null}return rng}function _singleKeyMap(map){var newMap={},arr,v;_each(map,function(key,val){arr=key.split(",");for(var i=0,len=arr.length;i<len;i++){v=arr[i];newMap[v]=val}});return newMap}function _hasAttrOrCss(knode,map){return _hasAttrOrCssByKey(knode,map,"*")||_hasAttrOrCssByKey(knode,map)}function _hasAttrOrCssByKey(knode,map,mapKey){mapKey=mapKey||knode.name;if(knode.type!==1){return false}var newMap=_singleKeyMap(map);if(!newMap[mapKey]){return false}var arr=newMap[mapKey].split(",");for(var i=0,len=arr.length;i<len;i++){var key=arr[i];if(key==="*"){return true}var match=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(key);var method=match[1]?"css":"attr";key=match[2];var val=match[3]||"";if(val===""&&knode[method](key)!==""){return true}if(val!==""&&knode[method](key)===val){return true}}return false}function _removeAttrOrCss(knode,map){if(knode.type!=1){return}_removeAttrOrCssByKey(knode,map,"*");_removeAttrOrCssByKey(knode,map)}function _removeAttrOrCssByKey(knode,map,mapKey){mapKey=mapKey||knode.name;if(knode.type!==1){return}var newMap=_singleKeyMap(map);if(!newMap[mapKey]){return}var arr=newMap[mapKey].split(","),allFlag=false;for(var i=0,len=arr.length;i<len;i++){var key=arr[i];if(key==="*"){allFlag=true;break}var match=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(key);key=match[2];if(match[1]){key=_toCamel(key);if(knode[0].style[key]){knode[0].style[key]=""}}else{knode.removeAttr(key)}}if(allFlag){knode.remove(true)}}function _getInnerNode(knode){var inner=knode;while(inner.first()){inner=inner.first()}return inner}function _isEmptyNode(knode){if(knode.type!=1||knode.isSingle()){return false}return knode.html().replace(/<[^>]+>/g,"")===""}function _mergeWrapper(a,b){a=a.clone(true);var lastA=_getInnerNode(a),childA=a,merged=false;while(b){while(childA){if(childA.name===b.name){_mergeAttrs(childA,b.attr(),b.css());merged=true}childA=childA.first()}if(!merged){lastA.append(b.clone(false))}merged=false;b=b.first()}return a}function _wrapNode(knode,wrapper){wrapper=wrapper.clone(true);if(knode.type==3){_getInnerNode(wrapper).append(knode.clone(false));knode.replaceWith(wrapper);return wrapper}var nodeWrapper=knode,child;while((child=knode.first())&&child.children().length==1){knode=child}child=knode.first();var frag=knode.doc.createDocumentFragment();while(child){frag.appendChild(child[0]);child=child.next()}wrapper=_mergeWrapper(nodeWrapper,wrapper);if(frag.firstChild){_getInnerNode(wrapper).append(frag)}nodeWrapper.replaceWith(wrapper);return wrapper}function _mergeAttrs(knode,attrs,styles){_each(attrs,function(key,val){if(key!=="style"){knode.attr(key,val)}});_each(styles,function(key,val){knode.css(key,val)})}function _inPreElement(knode){while(knode&&knode.name!="body"){if(_PRE_TAG_MAP[knode.name]||knode.name=="div"&&knode.hasClass("ke-script")){return true}knode=knode.parent()}return false}function KCmd(range){this.init(range)}_extend(KCmd,{init:function(range){var self=this,doc=range.doc;self.doc=doc;self.win=_getWin(doc);self.sel=_getSel(doc);self.range=range},selection:function(forceReset){var self=this,doc=self.doc,rng=_getRng(doc);self.sel=_getSel(doc);if(rng){self.range=_range(rng);if(K(self.range.startContainer).name=="html"){self.range.selectNodeContents(doc.body).collapse(false)}return self}if(forceReset){self.range.selectNodeContents(doc.body).collapse(false)}return self},select:function(hasDummy){hasDummy=_undef(hasDummy,true);var self=this,sel=self.sel,range=self.range.cloneRange().shrink(),sc=range.startContainer,so=range.startOffset,ec=range.endContainer,eo=range.endOffset,doc=_getDoc(sc),win=self.win,rng,hasU200b=false;if(hasDummy&&sc.nodeType==1&&range.collapsed){if(_IERANGE){var dummy=K("<span>&nbsp;</span>",doc);range.insertNode(dummy[0]);rng=doc.body.createTextRange();try{rng.moveToElementText(dummy[0])}catch(ex){}rng.collapse(false);rng.select();dummy.remove();win.focus();return self}if(_WEBKIT){var children=sc.childNodes;if(K(sc).isInline()||so>0&&K(children[so-1]).isInline()||children[so]&&K(children[so]).isInline()){range.insertNode(doc.createTextNode("\u200B"));hasU200b=true}}}if(_IERANGE){try{rng=range.get(true);rng.select()}catch(e){}}else{if(hasU200b){range.collapse(false)}rng=range.get(true);sel.removeAllRanges();sel.addRange(rng);if(doc!==document){var pos=K(rng.endContainer).pos();win.scrollTo(pos.x,pos.y)}}win.focus();return self},wrap:function(val){var self=this,doc=self.doc,range=self.range,wrapper;wrapper=K(val,doc);if(range.collapsed){range.shrink();range.insertNode(wrapper[0]).selectNodeContents(wrapper[0]);return self}if(wrapper.isBlock()){var copyWrapper=wrapper.clone(true),child=copyWrapper;while(child.first()){child=child.first()}child.append(range.extractContents());range.insertNode(copyWrapper[0]).selectNode(copyWrapper[0]);return self}range.enlarge();var bookmark=range.createBookmark(),ancestor=range.commonAncestor(),isStart=false;K(ancestor).scan(function(node){if(!isStart&&node==bookmark.start){isStart=true;return}if(isStart){if(node==bookmark.end){return false}var knode=K(node);if(_inPreElement(knode)){return}if(knode.type==3&&_trim(node.nodeValue).length>0){var parent;while((parent=knode.parent())&&parent.isStyle()&&parent.children().length==1){knode=parent}_wrapNode(knode,wrapper)}}});range.moveToBookmark(bookmark);return self},split:function(isStart,map){var range=this.range,doc=range.doc;var tempRange=range.cloneRange().collapse(isStart);var node=tempRange.startContainer,pos=tempRange.startOffset,parent=node.nodeType==3?node.parentNode:node,needSplit=false,knode;while(parent&&parent.parentNode){knode=K(parent);if(map){if(!knode.isStyle()){break}if(!_hasAttrOrCss(knode,map)){break}}else{if(_NOSPLIT_TAG_MAP[knode.name]){break}}needSplit=true;parent=parent.parentNode}if(needSplit){var dummy=doc.createElement("span");range.cloneRange().collapse(!isStart).insertNode(dummy);if(isStart){tempRange.setStartBefore(parent.firstChild).setEnd(node,pos)}else{tempRange.setStart(node,pos).setEndAfter(parent.lastChild)}var frag=tempRange.extractContents(),first=frag.firstChild,last=frag.lastChild;if(isStart){tempRange.insertNode(frag);range.setStartAfter(last).setEndBefore(dummy)}else{parent.appendChild(frag);range.setStartBefore(dummy).setEndBefore(first)}var dummyParent=dummy.parentNode;if(dummyParent==range.endContainer){var prev=K(dummy).prev(),next=K(dummy).next();if(prev&&next&&prev.type==3&&next.type==3){range.setEnd(prev[0],prev[0].nodeValue.length)}else{if(!isStart){range.setEnd(range.endContainer,range.endOffset-1)}}}dummyParent.removeChild(dummy)}return this},remove:function(map){var self=this,doc=self.doc,range=self.range;range.enlarge();if(range.startOffset===0){var ksc=K(range.startContainer),parent;while((parent=ksc.parent())&&parent.isStyle()&&parent.children().length==1){ksc=parent}range.setStart(ksc[0],0);ksc=K(range.startContainer);if(ksc.isBlock()){_removeAttrOrCss(ksc,map)}var kscp=ksc.parent();if(kscp&&kscp.isBlock()){_removeAttrOrCss(kscp,map)}}var sc,so;if(range.collapsed){self.split(true,map);sc=range.startContainer;so=range.startOffset;if(so>0){var sb=K(sc.childNodes[so-1]);if(sb&&_isEmptyNode(sb)){sb.remove();range.setStart(sc,so-1)}}var sa=K(sc.childNodes[so]);if(sa&&_isEmptyNode(sa)){sa.remove()}if(_isEmptyNode(sc)){range.startBefore(sc);sc.remove()}range.collapse(true);return self}self.split(true,map);self.split(false,map);var startDummy=doc.createElement("span"),endDummy=doc.createElement("span");range.cloneRange().collapse(false).insertNode(endDummy);range.cloneRange().collapse(true).insertNode(startDummy);var nodeList=[],cmpStart=false;K(range.commonAncestor()).scan(function(node){if(!cmpStart&&node==startDummy){cmpStart=true;return}if(node==endDummy){return false}if(cmpStart){nodeList.push(node)}});K(startDummy).remove();K(endDummy).remove();sc=range.startContainer;so=range.startOffset;var ec=range.endContainer,eo=range.endOffset;if(so>0){var startBefore=K(sc.childNodes[so-1]);if(startBefore&&_isEmptyNode(startBefore)){startBefore.remove();range.setStart(sc,so-1);if(sc==ec){range.setEnd(ec,eo-1)}}var startAfter=K(sc.childNodes[so]);if(startAfter&&_isEmptyNode(startAfter)){startAfter.remove();if(sc==ec){range.setEnd(ec,eo-1)}}}var endAfter=K(ec.childNodes[range.endOffset]);if(endAfter&&_isEmptyNode(endAfter)){endAfter.remove()}var bookmark=range.createBookmark(true);_each(nodeList,function(i,node){_removeAttrOrCss(K(node),map)});range.moveToBookmark(bookmark);return self},commonNode:function(map){var range=this.range;var ec=range.endContainer,eo=range.endOffset,node=(ec.nodeType==3||eo===0)?ec:ec.childNodes[eo-1];function find(node){var child=node,parent=node;while(parent){if(_hasAttrOrCss(K(parent),map)){return K(parent)}parent=parent.parentNode}while(child&&(child=child.lastChild)){if(_hasAttrOrCss(K(child),map)){return K(child)}}return null}var cNode=find(node);if(cNode){return cNode}if(node.nodeType==1||(ec.nodeType==3&&eo===0)){var prev=K(node).prev();if(prev){return find(prev)}}return null},commonAncestor:function(tagName){var range=this.range,sc=range.startContainer,so=range.startOffset,ec=range.endContainer,eo=range.endOffset,startNode=(sc.nodeType==3||so===0)?sc:sc.childNodes[so-1],endNode=(ec.nodeType==3||eo===0)?ec:ec.childNodes[eo-1];function find(node){while(node){if(node.nodeType==1){if(node.tagName.toLowerCase()===tagName){return node}}node=node.parentNode}return null}var start=find(startNode),end=find(endNode);if(start&&end&&start===end){return K(start)}return null},state:function(key){var self=this,doc=self.doc,bool=false;try{bool=doc.queryCommandState(key)}catch(e){}return bool},val:function(key){var self=this,doc=self.doc,range=self.range;function lc(val){return val.toLowerCase()}key=lc(key);var val="",knode;if(key==="fontfamily"||key==="fontname"){val=_nativeCommandValue(doc,"fontname");val=val.replace(/['"]/g,"");return lc(val)}if(key==="formatblock"){val=_nativeCommandValue(doc,key);if(val===""){knode=self.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"});if(knode){val=knode.name}}if(val==="Normal"){val="p"}return lc(val)}if(key==="fontsize"){knode=self.commonNode({"*":".font-size"});if(knode){val=knode.css("font-size")}return lc(val)}if(key==="forecolor"){knode=self.commonNode({"*":".color"});if(knode){val=knode.css("color")}val=_toHex(val);if(val===""){val="default"}return lc(val)}if(key==="hilitecolor"){knode=self.commonNode({"*":".background-color"});if(knode){val=knode.css("background-color")}val=_toHex(val);if(val===""){val="default"}return lc(val)}return val},toggle:function(wrapper,map){var self=this;if(self.commonNode(map)){self.remove(map)}else{self.wrap(wrapper)}return self.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",{span:".text-decoration=line-through",s:"*"})},forecolor:function(val){return this.wrap('<span style="color:'+val+';"></span>').select()},hilitecolor:function(val){return this.wrap('<span style="background-color:'+val+';"></span>').select()},fontsize:function(val){return this.wrap('<span style="font-size:'+val+';"></span>').select()},fontname:function(val){return this.fontfamily(val)},fontfamily:function(val){return this.wrap('<span style="font-family:'+val+';"></span>').select()},removeformat:function(){var map={"*":".font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent"},tags=_STYLE_TAG_MAP;_each(tags,function(key,val){map[key]="*"});this.remove(map);return this.select()},inserthtml:function(val,quickMode){var self=this,range=self.range;if(val===""){return self}function pasteHtml(range,val){val='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+val;var rng=range.get();if(rng.item){rng.item(0).outerHTML=val}else{rng.pasteHTML(val)}var temp=range.doc.getElementById("__kindeditor_temp_tag__");temp.parentNode.removeChild(temp);var newRange=_toRange(rng);range.setEnd(newRange.endContainer,newRange.endOffset);range.collapse(false);self.select(false)}function insertHtml(range,val){var doc=range.doc,frag=doc.createDocumentFragment();K("@"+val,doc).each(function(){frag.appendChild(this)});range.deleteContents();range.insertNode(frag);range.collapse(false);self.select(false)}if(_IERANGE&&quickMode){try{pasteHtml(range,val)}catch(e){insertHtml(range,val)}return self}insertHtml(range,val);return self},hr:function(){return this.inserthtml("<hr />")},print:function(){this.win.print();return this},insertimage:function(url,title,width,height,border,align){title=_undef(title,"");border=_undef(border,0);var html='<img src="'+_escape(url)+'" data-ke-src="'+_escape(url)+'" ';if(width){html+='width="'+_escape(width)+'" '}if(height){html+='height="'+_escape(height)+'" '}if(title){html+='title="'+_escape(title)+'" '}if(align){html+='align="'+_escape(align)+'" '}html+='alt="'+_escape(title)+'" ';html+="/>";return this.inserthtml(html)},createlink:function(url,type){var self=this,doc=self.doc,range=self.range;self.select();var a=self.commonNode({a:"*"});if(a&&!range.isControl()){range.selectNode(a.get());self.select()}var html='<a href="'+_escape(url)+'" data-ke-src="'+_escape(url)+'" ';if(type){html+=' target="'+_escape(type)+'"'}if(range.collapsed){html+=">"+_escape(url)+"</a>";return self.inserthtml(html)}if(range.isControl()){var node=K(range.startContainer.childNodes[range.startOffset]);html+="></a>";node.after(K(html,doc));node.next().append(node);range.selectNode(node[0]);return self.select()}function setAttr(node,url,type){K(node).attr("href",url).attr("data-ke-src",url);if(type){K(node).attr("target",type)}else{K(node).removeAttr("target")}}var sc=range.startContainer,so=range.startOffset,ec=range.endContainer,eo=range.endOffset;if(sc.nodeType==1&&sc===ec&&so+1===eo){var child=sc.childNodes[so];if(child.nodeName.toLowerCase()=="a"){setAttr(child,url,type);return self}}_nativeCommand(doc,"createlink","__kindeditor_temp_url__");K('a[href="__kindeditor_temp_url__"]',doc).each(function(){setAttr(this,url,type)});return self},unlink:function(){var self=this,doc=self.doc,range=self.range;self.select();if(range.collapsed){var a=self.commonNode({a:"*"});if(a){range.selectNode(a.get());self.select()}_nativeCommand(doc,"unlink",null);if(_WEBKIT&&K(range.startContainer).name==="img"){var parent=K(range.startContainer).parent();if(parent.name==="a"){parent.remove(true)}}}else{_nativeCommand(doc,"unlink",null)}return self}});_each(("formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript").split(","),function(i,name){KCmd.prototype[name]=function(val){var self=this;self.select();_nativeCommand(self.doc,name,val);if(_IERANGE&&_inArray(name,"justifyleft,justifycenter,justifyright,justifyfull".split(","))>=0){self.selection()}if(!_IERANGE||_inArray(name,"formatblock,selectall,insertorderedlist,insertunorderedlist".split(","))>=0){self.selection()}return self}});_each("cut,copy,paste".split(","),function(i,name){KCmd.prototype[name]=function(){var self=this;if(!self.doc.queryCommandSupported(name)){throw"not supported"}self.select();_nativeCommand(self.doc,name,null);return self}});function _cmd(mixed){if(mixed.nodeName){var doc=_getDoc(mixed);mixed=_range(doc).selectNodeContents(doc.body).collapse(false)}return new KCmd(mixed)}K.CmdClass=KCmd;K.cmd=_cmd;function _drag(options){var moveEl=options.moveEl,moveFn=options.moveFn,clickEl=options.clickEl||moveEl,beforeDrag=options.beforeDrag,iframeFix=options.iframeFix===undefined?true:options.iframeFix;var docs=[document];if(iframeFix){K("iframe").each(function(){var src=_formatUrl(this.src||"","absolute");if(/^https?:\/\//.test(src)){return}var doc;try{doc=_iframeDoc(this)}catch(e){}if(doc){var pos=K(this).pos();K(doc).data("pos-x",pos.x);K(doc).data("pos-y",pos.y);docs.push(doc)}})}clickEl.mousedown(function(e){if(e.button!==0&&e.button!==1){return}e.stopPropagation();var self=clickEl.get(),x=_removeUnit(moveEl.css("left")),y=_removeUnit(moveEl.css("top")),width=moveEl.width(),height=moveEl.height(),pageX=e.pageX,pageY=e.pageY;if(beforeDrag){beforeDrag()}function moveListener(e){e.preventDefault();var kdoc=K(_getDoc(e.target));var diffX=_round((kdoc.data("pos-x")||0)+e.pageX-pageX);var diffY=_round((kdoc.data("pos-y")||0)+e.pageY-pageY);moveFn.call(clickEl,x,y,width,height,diffX,diffY)}function selectListener(e){e.preventDefault()}function upListener(e){e.preventDefault();K(docs).unbind("mousemove",moveListener).unbind("mouseup",upListener).unbind("selectstart",selectListener);if(self.releaseCapture){self.releaseCapture()}}K(docs).mousemove(moveListener).mouseup(upListener).bind("selectstart",selectListener);if(self.setCapture){self.setCapture()}})}function KWidget(options){this.init(options)}_extend(KWidget,{init:function(options){var self=this;self.name=options.name||"";self.doc=options.doc||document;self.win=_getWin(self.doc);self.x=_addUnit(options.x);self.y=_addUnit(options.y);self.z=options.z;self.width=_addUnit(options.width);self.height=_addUnit(options.height);self.div=K('<div style="display:block;"></div>');self.options=options;self._alignEl=options.alignEl;if(self.width){self.div.css("width",self.width)}if(self.height){self.div.css("height",self.height)}if(self.z){self.div.css({position:"absolute",left:self.x,top:self.y,"z-index":self.z})}if(self.z&&(self.x===undefined||self.y===undefined)){self.autoPos(self.width,self.height)}if(options.cls){self.div.addClass(options.cls)}if(options.shadowMode){self.div.addClass("ke-shadow")}if(options.css){self.div.css(options.css)}if(options.src){K(options.src).replaceWith(self.div)}else{K(self.doc.body).append(self.div)}if(options.html){self.div.html(options.html)}if(options.autoScroll){if(_IE&&_V<7||_QUIRKS){var scrollPos=_getScrollPos();K(self.win).bind("scroll",function(e){var pos=_getScrollPos(),diffX=pos.x-scrollPos.x,diffY=pos.y-scrollPos.y;self.pos(_removeUnit(self.x)+diffX,_removeUnit(self.y)+diffY,false)})}else{self.div.css("position","fixed")}}},pos:function(x,y,updateProp){var self=this;updateProp=_undef(updateProp,true);if(x!==null){x=x<0?0:_addUnit(x);self.div.css("left",x);if(updateProp){self.x=x}}if(y!==null){y=y<0?0:_addUnit(y);self.div.css("top",y);if(updateProp){self.y=y}}return self},autoPos:function(width,height){var x,y,self=this,w=_removeUnit(width)||0,h=_removeUnit(height)||0,scrollPos=_getScrollPos();if(self._alignEl){var knode=K(self._alignEl),pos=knode.pos(),diffX=_round(knode[0].clientWidth/2-w/2),diffY=_round(knode[0].clientHeight/2-h/2);x=diffX<0?pos.x:pos.x+diffX;y=diffY<0?pos.y:pos.y+diffY}else{var docEl=_docElement(self.doc);x=_round(scrollPos.x+(docEl.clientWidth-w)/2);y=_round(scrollPos.y+(docEl.clientHeight-h)/2)}if(!(_IE&&_V<7||_QUIRKS)){x-=scrollPos.x;y-=scrollPos.y}return self.pos(x,y)},remove:function(){var self=this;if(_IE&&_V<7||_QUIRKS){K(self.win).unbind("scroll")}self.div.remove();_each(self,function(i){self[i]=null});return this},show:function(){this.div.show();return this},hide:function(){this.div.hide();return this},draggable:function(options){var self=this;options=options||{};options.moveEl=self.div;options.moveFn=function(x,y,width,height,diffX,diffY){if((x=x+diffX)<0){x=0}if((y=y+diffY)<0){y=0}self.pos(x,y)};_drag(options);return self}});function _widget(options){return new KWidget(options)}K.WidgetClass=KWidget;K.widget=_widget;function _iframeDoc(iframe){iframe=_get(iframe);return iframe.contentDocument||iframe.contentWindow.document}var html,_direction="";if((html=document.getElementsByTagName("html"))){_direction=html[0].dir}function _getInitHtml(themesPath,bodyClass,cssPath,cssData){var arr=[(_direction===""?"<html>":'<html dir="'+_direction+'">'),'<head><meta charset="utf-8" /><title></title>',"<style>","html {margin:0;padding:0;}","body {margin:0;padding:5px;}",'body, td {font:12px/1.5 "sans serif",tahoma,verdana,helvetica;}',"body, p, div {word-wrap: break-word;}","p {margin:5px 0;}","table {border-collapse:collapse;}","img {border:0;}","noscript {display:none;}","table.ke-zeroborder td {border:1px dotted #AAA;}","img.ke-flash {","	border:1px solid #AAA;","	background-image:url("+themesPath+"common/flash.gif);","	background-position:center center;","	background-repeat:no-repeat;","	width:100px;","	height:100px;","}","img.ke-rm {","	border:1px solid #AAA;","	background-image:url("+themesPath+"common/rm.gif);","	background-position:center center;","	background-repeat:no-repeat;","	width:100px;","	height:100px;","}","img.ke-media {","	border:1px solid #AAA;","	background-image:url("+themesPath+"common/media.gif);","	background-position:center center;","	background-repeat:no-repeat;","	width:100px;","	height:100px;","}","img.ke-anchor {","	border:1px dashed #666;","	width:16px;","	height:16px;","}",".ke-script, .ke-noscript, .ke-display-none {","	display:none;","	font-size:0;","	width:0;","	height:0;","}",".ke-pagebreak {","	border:1px dotted #AAA;","	font-size:0;","	height:2px;","}","</style>"];if(!_isArray(cssPath)){cssPath=[cssPath]}_each(cssPath,function(i,path){if(path){arr.push('<link href="'+path+'" rel="stylesheet" />')}});if(cssData){arr.push("<style>"+cssData+"</style>")}arr.push("</head><body "+(bodyClass?'class="'+bodyClass+'"':"")+"></body></html>");return arr.join("\n")}function _elementVal(knode,val){if(knode.hasVal()){if(val===undefined){var html=knode.val();html=html.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/ig,"");return html}return knode.val(val)}return knode.html(val)}function KEdit(options){this.init(options)}_extend(KEdit,KWidget,{init:function(options){var self=this;KEdit.parent.init.call(self,options);self.srcElement=K(options.srcElement);self.div.addClass("ke-edit");self.designMode=_undef(options.designMode,true);self.beforeGetHtml=options.beforeGetHtml;self.beforeSetHtml=options.beforeSetHtml;self.afterSetHtml=options.afterSetHtml;var themesPath=_undef(options.themesPath,""),bodyClass=options.bodyClass,cssPath=options.cssPath,cssData=options.cssData,isDocumentDomain=location.protocol!="res:"&&location.host.replace(/:\d+/,"")!==document.domain,srcScript=("document.open();"+(isDocumentDomain?'document.domain="'+document.domain+'";':"")+"document.close();"),iframeSrc=_IE?' src="javascript:void(function(){'+encodeURIComponent(srcScript)+'}())"':"";self.iframe=K('<iframe class="ke-edit-iframe" hidefocus="true" frameborder="0"'+iframeSrc+"></iframe>").css("width","100%");self.textarea=K('<textarea class="ke-edit-textarea" hidefocus="true"></textarea>').css("width","100%");self.tabIndex=isNaN(parseInt(options.tabIndex,10))?self.srcElement.attr("tabindex"):parseInt(options.tabIndex,10);self.iframe.attr("tabindex",self.tabIndex);self.textarea.attr("tabindex",self.tabIndex);if(self.width){self.setWidth(self.width)}if(self.height){self.setHeight(self.height)}if(self.designMode){self.textarea.hide()}else{self.iframe.hide()}function ready(){var doc=_iframeDoc(self.iframe);doc.open();if(isDocumentDomain){doc.domain=document.domain}doc.write(_getInitHtml(themesPath,bodyClass,cssPath,cssData));doc.close();self.win=self.iframe[0].contentWindow;self.doc=doc;var cmd=_cmd(doc);self.afterChange(function(e){cmd.selection()});if(_WEBKIT){K(doc).click(function(e){if(K(e.target).name==="img"){cmd.selection(true);cmd.range.selectNode(e.target);cmd.select()}})}if(_IE){self._mousedownHandler=function(){var newRange=cmd.range.cloneRange();newRange.shrink();if(newRange.isControl()){self.blur()}};K(document).mousedown(self._mousedownHandler);K(doc).keydown(function(e){if(e.which==8){cmd.selection();var rng=cmd.range;if(rng.isControl()){rng.collapse(true);K(rng.startContainer.childNodes[rng.startOffset]).remove();e.preventDefault()}}})}self.cmd=cmd;self.html(_elementVal(self.srcElement));if(_IE){doc.body.disabled=true;doc.body.contentEditable=true;doc.body.removeAttribute("disabled")}else{doc.designMode="on"}if(options.afterCreate){options.afterCreate.call(self)}}if(isDocumentDomain){self.iframe.bind("load",function(e){self.iframe.unbind("load");if(_IE){ready()}else{setTimeout(ready,0)}})}self.div.append(self.iframe);self.div.append(self.textarea);self.srcElement.hide();!isDocumentDomain&&ready()},setWidth:function(val){var self=this;val=_addUnit(val);self.width=val;self.div.css("width",val);return self},setHeight:function(val){var self=this;val=_addUnit(val);self.height=val;self.div.css("height",val);self.iframe.css("height",val);if((_IE&&_V<8)||_QUIRKS){val=_addUnit(_removeUnit(val)-2)}self.textarea.css("height",val);return self},remove:function(){var self=this,doc=self.doc;K(doc.body).unbind();K(doc).unbind();K(self.win).unbind();if(self._mousedownHandler){K(document).unbind("mousedown",self._mousedownHandler)}_elementVal(self.srcElement,self.html());self.srcElement.show();self.iframe.unbind();self.textarea.unbind();KEdit.parent.remove.call(self)},html:function(val,isFull){var self=this,doc=self.doc;if(self.designMode){var body=doc.body;if(val===undefined){if(isFull){val="<!doctype html><html>"+body.parentNode.innerHTML+"</html>"}else{val=body.innerHTML}if(self.beforeGetHtml){val=self.beforeGetHtml(val)}if(_GECKO&&val=="<br />"){val=""}return val}if(self.beforeSetHtml){val=self.beforeSetHtml(val)}if(_IE&&_V>=9){val=val.replace(/(<.*?checked=")checked(".*>)/ig,"$1$2")}K(body).html(val);if(self.afterSetHtml){self.afterSetHtml()}return self}if(val===undefined){return self.textarea.val()}self.textarea.val(val);return self},design:function(bool){var self=this,val;if(bool===undefined?!self.designMode:bool){if(!self.designMode){val=self.html();self.designMode=true;self.textarea.hide();self.html(val);var iframe=self.iframe;var height=_removeUnit(self.height);iframe.height(height-2);iframe.show();setTimeout(function(){iframe.height(height)},0)}}else{if(self.designMode){val=self.html();self.designMode=false;self.html(val);self.iframe.hide();self.textarea.show()}}return self.focus()},focus:function(){var self=this;self.designMode?self.win.focus():self.textarea[0].focus();return self},blur:function(){var self=this;if(_IE){var input=K('<input type="text" style="float:left;width:0;height:0;padding:0;margin:0;border:0;" value="" />',self.div);self.div.append(input);input[0].focus();input.remove()}else{self.designMode?self.win.blur():self.textarea[0].blur()}return self},afterChange:function(fn){var self=this,doc=self.doc,body=doc.body;K(doc).keyup(function(e){if(!e.ctrlKey&&!e.altKey&&_CHANGE_KEY_MAP[e.which]){fn(e)}});K(doc).mouseup(fn).contextmenu(fn);K(self.win).blur(fn);function timeoutHandler(e){setTimeout(function(){fn(e)},1)}K(body).bind("paste",timeoutHandler);K(body).bind("cut",timeoutHandler);return self}});function _edit(options){return new KEdit(options)}K.EditClass=KEdit;K.edit=_edit;K.iframeDoc=_iframeDoc;function _selectToolbar(name,fn){var self=this,knode=self.get(name);if(knode){if(knode.hasClass("ke-disabled")){return}fn(knode)}}function KToolbar(options){this.init(options)}_extend(KToolbar,KWidget,{init:function(options){var self=this;KToolbar.parent.init.call(self,options);self.disableMode=_undef(options.disableMode,false);self.noDisableItemMap=_toMap(_undef(options.noDisableItems,[]));self._itemMap={};self.div.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",function(e){e.preventDefault()}).attr("unselectable","on");function find(target){var knode=K(target);if(knode.hasClass("ke-outline")){return knode}if(knode.hasClass("ke-toolbar-icon")){return knode.parent()}}function hover(e,method){var knode=find(e.target);if(knode){if(knode.hasClass("ke-disabled")){return}if(knode.hasClass("ke-selected")){return}knode[method]("ke-on")}}self.div.mouseover(function(e){hover(e,"addClass")}).mouseout(function(e){hover(e,"removeClass")}).click(function(e){var knode=find(e.target);if(knode){if(knode.hasClass("ke-disabled")){return}self.options.click.call(this,e,knode.attr("data-name"))}})},get:function(name){if(this._itemMap[name]){return this._itemMap[name]}return(this._itemMap[name]=K("span.ke-icon-"+name,this.div).parent())},select:function(name){_selectToolbar.call(this,name,function(knode){knode.addClass("ke-selected")});return self},unselect:function(name){_selectToolbar.call(this,name,function(knode){knode.removeClass("ke-selected").removeClass("ke-on")});return self},enable:function(name){var self=this,knode=name.get?name:self.get(name);if(knode){knode.removeClass("ke-disabled");knode.opacity(1)}return self},disable:function(name){var self=this,knode=name.get?name:self.get(name);if(knode){knode.removeClass("ke-selected").addClass("ke-disabled");knode.opacity(0.5)}return self},disableAll:function(bool,noDisableItems){var self=this,map=self.noDisableItemMap,item;if(noDisableItems){map=_toMap(noDisableItems)}if(bool===undefined?!self.disableMode:bool){K("span.ke-outline",self.div).each(function(){var knode=K(this),name=knode[0].getAttribute("data-name",2);if(!map[name]){self.disable(knode)}});self.disableMode=true}else{K("span.ke-outline",self.div).each(function(){var knode=K(this),name=knode[0].getAttribute("data-name",2);if(!map[name]){self.enable(knode)}});self.disableMode=false}return self}});function _toolbar(options){return new KToolbar(options)}K.ToolbarClass=KToolbar;K.toolbar=_toolbar;function KMenu(options){this.init(options)}_extend(KMenu,KWidget,{init:function(options){var self=this;options.z=options.z||811213;KMenu.parent.init.call(self,options);self.centerLineMode=_undef(options.centerLineMode,true);self.div.addClass("ke-menu").bind("click,mousedown",function(e){e.stopPropagation()}).attr("unselectable","on")},addItem:function(item){var self=this;if(item.title==="-"){self.div.append(K('<div class="ke-menu-separator"></div>'));return}var itemDiv=K('<div class="ke-menu-item" unselectable="on"></div>'),leftDiv=K('<div class="ke-inline-block ke-menu-item-left"></div>'),rightDiv=K('<div class="ke-inline-block ke-menu-item-right"></div>'),height=_addUnit(item.height),iconClass=_undef(item.iconClass,"");self.div.append(itemDiv);if(height){itemDiv.css("height",height);rightDiv.css("line-height",height)}var centerDiv;if(self.centerLineMode){centerDiv=K('<div class="ke-inline-block ke-menu-item-center"></div>');if(height){centerDiv.css("height",height)}}itemDiv.mouseover(function(e){K(this).addClass("ke-menu-item-on");if(centerDiv){centerDiv.addClass("ke-menu-item-center-on")}}).mouseout(function(e){K(this).removeClass("ke-menu-item-on");if(centerDiv){centerDiv.removeClass("ke-menu-item-center-on")}}).click(function(e){item.click.call(K(this));e.stopPropagation()}).append(leftDiv);if(centerDiv){itemDiv.append(centerDiv)}itemDiv.append(rightDiv);if(item.checked){iconClass="ke-icon-checked"}if(iconClass!==""){leftDiv.html('<span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url '+iconClass+'"></span>')}rightDiv.html(item.title);return self},remove:function(){var self=this;if(self.options.beforeRemove){self.options.beforeRemove.call(self)}K(".ke-menu-item",self.div[0]).unbind();KMenu.parent.remove.call(self);return self}});function _menu(options){return new KMenu(options)}K.MenuClass=KMenu;K.menu=_menu;function KColorPicker(options){this.init(options)}_extend(KColorPicker,KWidget,{init:function(options){var self=this;options.z=options.z||811213;KColorPicker.parent.init.call(self,options);var colors=options.colors||[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]];self.selectedColor=(options.selectedColor||"").toLowerCase();self._cells=[];self.div.addClass("ke-colorpicker").bind("click,mousedown",function(e){e.stopPropagation()}).attr("unselectable","on");var table=self.doc.createElement("table");self.div.append(table);table.className="ke-colorpicker-table";table.cellPadding=0;table.cellSpacing=0;table.border=0;var row=table.insertRow(0),cell=row.insertCell(0);cell.colSpan=colors[0].length;self._addAttr(cell,"","ke-colorpicker-cell-top");for(var i=0;i<colors.length;i++){row=table.insertRow(i+1);for(var j=0;j<colors[i].length;j++){cell=row.insertCell(j);self._addAttr(cell,colors[i][j],"ke-colorpicker-cell")}}},_addAttr:function(cell,color,cls){var self=this;cell=K(cell).addClass(cls);if(self.selectedColor===color.toLowerCase()){cell.addClass("ke-colorpicker-cell-selected")}cell.attr("title",color||self.options.noColor);cell.mouseover(function(e){K(this).addClass("ke-colorpicker-cell-on")});cell.mouseout(function(e){K(this).removeClass("ke-colorpicker-cell-on")});cell.click(function(e){e.stop();self.options.click.call(K(this),color)});if(color){cell.append(K('<div class="ke-colorpicker-cell-color" unselectable="on"></div>').css("background-color",color))}else{cell.html(self.options.noColor)}K(cell).attr("unselectable","on");self._cells.push(cell)},remove:function(){var self=this;_each(self._cells,function(){this.unbind()});KColorPicker.parent.remove.call(self);return self}});function _colorpicker(options){return new KColorPicker(options)}K.ColorPickerClass=KColorPicker;K.colorpicker=_colorpicker;function KUploadButton(options){this.init(options)}_extend(KUploadButton,{init:function(options){var self=this,button=K(options.button),fieldName=options.fieldName||"file",url=options.url||"",title=button.val(),extraParams=options.extraParams||{},cls=button[0].className||"",target=options.target||"kindeditor_upload_iframe_"+new Date().getTime();options.afterError=options.afterError||function(str){alert(str)};var hiddenElements=[];for(var k in extraParams){hiddenElements.push('<input type="hidden" name="'+k+'" value="'+extraParams[k]+'" />')}var html=['<div class="ke-inline-block '+cls+'">',(options.target?"":'<iframe name="'+target+'" style="display:none;"></iframe>'),(options.form?'<div class="ke-upload-area">':'<form class="ke-upload-area ke-form" method="post" enctype="multipart/form-data" target="'+target+'" action="'+url+'">'),'<span class="ke-button-common">',hiddenElements.join(""),'<input type="button" class="ke-button-common ke-button" value="'+title+'" />',"</span>",'<input type="file" class="ke-upload-file" name="'+fieldName+'" tabindex="-1" />',(options.form?"</div>":"</form>"),"</div>"].join("");var div=K(html,button.doc);button.hide();button.before(div);self.div=div;self.button=button;self.iframe=options.target?K('iframe[name="'+target+'"]'):K("iframe",div);self.form=options.form?K(options.form):K("form",div);self.fileBox=K(".ke-upload-file",div);var width=options.width||K(".ke-button-common",div).width();K(".ke-upload-area",div).width(width);self.options=options},submit:function(){var self=this,iframe=self.iframe;iframe.bind("load",function(){iframe.unbind();var tempForm=document.createElement("form");self.fileBox.before(tempForm);K(tempForm).append(self.fileBox);tempForm.reset();K(tempForm).remove(true);var doc=K.iframeDoc(iframe),pre=doc.getElementsByTagName("pre")[0],str="",data;if(pre){str=pre.innerHTML}else{str=doc.body.innerHTML}str=_unescape(str);iframe[0].src="javascript:false";try{data=K.json(str)}catch(e){self.options.afterError.call(self,"<!doctype html><html>"+doc.body.parentNode.innerHTML+"</html>")}if(data){self.options.afterUpload.call(self,data)}});self.form[0].submit();return self},remove:function(){var self=this;if(self.fileBox){self.fileBox.unbind()}self.iframe.remove();self.div.remove();self.button.show();return self}});function _uploadbutton(options){return new KUploadButton(options)}K.UploadButtonClass=KUploadButton;K.uploadbutton=_uploadbutton;function _createButton(arg){arg=arg||{};var name=arg.name||"",span=K('<span class="ke-button-common ke-button-outer" title="'+name+'"></span>'),btn=K('<input class="ke-button-common ke-button" type="button" value="'+name+'" />');if(arg.click){btn.click(arg.click)}span.append(btn);return span}function KDialog(options){this.init(options)}_extend(KDialog,KWidget,{init:function(options){var self=this;var shadowMode=_undef(options.shadowMode,true);options.z=options.z||811213;options.shadowMode=false;options.autoScroll=_undef(options.autoScroll,true);KDialog.parent.init.call(self,options);var title=options.title,body=K(options.body,self.doc),previewBtn=options.previewBtn,yesBtn=options.yesBtn,noBtn=options.noBtn,closeBtn=options.closeBtn,showMask=_undef(options.showMask,true);self.div.addClass("ke-dialog").bind("click,mousedown",function(e){e.stopPropagation()});var contentDiv=K('<div class="ke-dialog-content"></div>').appendTo(self.div);if(_IE&&_V<7){self.iframeMask=K('<iframe src="about:blank" class="ke-dialog-shadow"></iframe>').appendTo(self.div)}else{if(shadowMode){K('<div class="ke-dialog-shadow"></div>').appendTo(self.div)}}var headerDiv=K('<div class="ke-dialog-header"></div>');contentDiv.append(headerDiv);headerDiv.html(title);self.closeIcon=K('<span class="ke-dialog-icon-close" title="'+closeBtn.name+'"></span>').click(closeBtn.click);headerDiv.append(self.closeIcon);self.draggable({clickEl:headerDiv,beforeDrag:options.beforeDrag});var bodyDiv=K('<div class="ke-dialog-body"></div>');contentDiv.append(bodyDiv);bodyDiv.append(body);var footerDiv=K('<div class="ke-dialog-footer"></div>');if(previewBtn||yesBtn||noBtn){contentDiv.append(footerDiv)}_each([{btn:previewBtn,name:"preview"},{btn:yesBtn,name:"yes"},{btn:noBtn,name:"no"}],function(){if(this.btn){var button=_createButton(this.btn);button.addClass("ke-dialog-"+this.name);footerDiv.append(button)}});if(self.height){bodyDiv.height(_removeUnit(self.height)-headerDiv.height()-footerDiv.height())}self.div.width(self.div.width());self.div.height(self.div.height());self.mask=null;if(showMask){var docEl=_docElement(self.doc),docWidth=Math.max(docEl.scrollWidth,docEl.clientWidth),docHeight=Math.max(docEl.scrollHeight,docEl.clientHeight);self.mask=_widget({x:0,y:0,z:self.z-1,cls:"ke-dialog-mask",width:docWidth,height:docHeight})}self.autoPos(self.div.width(),self.div.height());self.footerDiv=footerDiv;self.bodyDiv=bodyDiv;self.headerDiv=headerDiv;self.isLoading=false},setMaskIndex:function(z){var self=this;self.mask.div.css("z-index",z)},showLoading:function(msg){msg=_undef(msg,"");var self=this,body=self.bodyDiv;self.loading=K('<div class="ke-dialog-loading"><div class="ke-inline-block ke-dialog-loading-content" style="margin-top:'+Math.round(body.height()/3)+'px;">'+msg+"</div></div>").width(body.width()).height(body.height()).css("top",self.headerDiv.height()+"px");body.css("visibility","hidden").after(self.loading);self.isLoading=true;return self},hideLoading:function(){this.loading&&this.loading.remove();this.bodyDiv.css("visibility","visible");this.isLoading=false;return this},remove:function(){var self=this;if(self.options.beforeRemove){self.options.beforeRemove.call(self)}self.mask&&self.mask.remove();self.iframeMask&&self.iframeMask.remove();self.closeIcon.unbind();K("input",self.div).unbind();K("button",self.div).unbind();self.footerDiv.unbind();self.bodyDiv.unbind();self.headerDiv.unbind();K("iframe",self.div).each(function(){K(this).remove()});KDialog.parent.remove.call(self);return self}});function _dialog(options){return new KDialog(options)}K.DialogClass=KDialog;K.dialog=_dialog;function _tabs(options){var self=_widget(options),remove=self.remove,afterSelect=options.afterSelect,div=self.div,liList=[];div.addClass("ke-tabs").bind("contextmenu,mousedown,mousemove",function(e){e.preventDefault()});var ul=K('<ul class="ke-tabs-ul ke-clearfix"></ul>');div.append(ul);self.add=function(tab){var li=K('<li class="ke-tabs-li">'+tab.title+"</li>");li.data("tab",tab);liList.push(li);ul.append(li)};self.selectedIndex=0;self.select=function(index){self.selectedIndex=index;_each(liList,function(i,li){li.unbind();if(i===index){li.addClass("ke-tabs-li-selected");K(li.data("tab").panel).show("")}else{li.removeClass("ke-tabs-li-selected").removeClass("ke-tabs-li-on").mouseover(function(){K(this).addClass("ke-tabs-li-on")}).mouseout(function(){K(this).removeClass("ke-tabs-li-on")}).click(function(){self.select(i)});K(li.data("tab").panel).hide()}});if(afterSelect){afterSelect.call(self,index)}};self.remove=function(){_each(liList,function(){this.remove()});ul.remove();remove.call(self)};return self}K.tabs=_tabs;function _loadScript(url,fn){var head=document.getElementsByTagName("head")[0]||(_QUIRKS?document.body:document.documentElement),script=document.createElement("script");head.appendChild(script);script.src=url;script.charset="utf-8";script.onload=script.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"){if(fn){fn()}script.onload=script.onreadystatechange=null;head.removeChild(script)}}}function _chopQuery(url){var index=url.indexOf("?");return index>0?url.substr(0,index):url}function _loadStyle(url){var head=document.getElementsByTagName("head")[0]||(_QUIRKS?document.body:document.documentElement),link=document.createElement("link"),absoluteUrl=_chopQuery(_formatUrl(url,"absolute"));var links=K('link[rel="stylesheet"]',head);for(var i=0,len=links.length;i<len;i++){if(_chopQuery(_formatUrl(links[i].href,"absolute"))===absoluteUrl){return}}head.appendChild(link);link.href=url;link.rel="stylesheet"}function _ajax(url,fn,method,param,dataType){method=method||"GET";dataType=dataType||"json";var xhr=window.XMLHttpRequest?new window.XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");xhr.open(method,url,true);xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){if(fn){var data=_trim(xhr.responseText);if(dataType=="json"){data=_json(data)}fn(data)}}};if(method=="POST"){var params=[];_each(param,function(key,val){params.push(encodeURIComponent(key)+"="+encodeURIComponent(val))});try{xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(e){}xhr.send(params.join("&"))}else{xhr.send(null)}}K.loadScript=_loadScript;K.loadStyle=_loadStyle;K.ajax=_ajax;var _plugins={};function _plugin(name,fn){if(name===undefined){return _plugins}if(!fn){return _plugins[name]}_plugins[name]=fn}var _language={};function _parseLangKey(key){var match,ns="core";if((match=/^(\w+)\.(\w+)$/.exec(key))){ns=match[1];key=match[2]}return{ns:ns,key:key}}function _lang(mixed,langType){langType=langType===undefined?K.options.langType:langType;if(typeof mixed==="string"){if(!_language[langType]){return"no language"}var pos=mixed.length-1;if(mixed.substr(pos)==="."){return _language[langType][mixed.substr(0,pos)]}var obj=_parseLangKey(mixed);return _language[langType][obj.ns][obj.key]}_each(mixed,function(key,val){var obj=_parseLangKey(key);if(!_language[langType]){_language[langType]={}}if(!_language[langType][obj.ns]){_language[langType][obj.ns]={}}_language[langType][obj.ns][obj.key]=val})}function _getImageFromRange(range,fn){if(range.collapsed){return}range=range.cloneRange().up();var sc=range.startContainer,so=range.startOffset;if(!_WEBKIT&&!range.isControl()){return}var img=K(sc.childNodes[so]);if(!img||img.name!="img"){return}if(fn(img)){return img}}function _bindContextmenuEvent(){var self=this,doc=self.edit.doc;K(doc).contextmenu(function(e){if(self.menu){self.hideMenu()}if(!self.useContextmenu){e.preventDefault();return}if(self._contextmenus.length===0){return}var maxWidth=0,items=[];_each(self._contextmenus,function(){if(this.title=="-"){items.push(this);return}if(this.cond&&this.cond()){items.push(this);if(this.width&&this.width>maxWidth){maxWidth=this.width}}});while(items.length>0&&items[0].title=="-"){items.shift()}while(items.length>0&&items[items.length-1].title=="-"){items.pop()}var prevItem=null;_each(items,function(i){if(this.title=="-"&&prevItem.title=="-"){delete items[i]}prevItem=this});if(items.length>0){e.preventDefault();var pos=K(self.edit.iframe).pos(),menu=_menu({x:pos.x+e.clientX,y:pos.y+e.clientY,width:maxWidth,css:{visibility:"hidden"},shadowMode:self.shadowMode});_each(items,function(){if(this.title){menu.addItem(this)}});var docEl=_docElement(menu.doc),menuHeight=menu.div.height();if(e.clientY+menuHeight>=docEl.clientHeight-100){menu.pos(menu.x,_removeUnit(menu.y)-menuHeight)}menu.div.css("visibility","visible");self.menu=menu}})}function _bindNewlineEvent(){var self=this,doc=self.edit.doc,newlineTag=self.newlineTag;if(_IE&&newlineTag!=="br"){return}if(_GECKO&&_V<3&&newlineTag!=="p"){return}if(_OPERA&&_V<9){return}var brSkipTagMap=_toMap("h1,h2,h3,h4,h5,h6,pre,li"),pSkipTagMap=_toMap("p,h1,h2,h3,h4,h5,h6,pre,li,blockquote");function getAncestorTagName(range){var ancestor=K(range.commonAncestor());while(ancestor){if(ancestor.type==1&&!ancestor.isStyle()){break}ancestor=ancestor.parent()}return ancestor.name}K(doc).keydown(function(e){if(e.which!=13||e.shiftKey||e.ctrlKey||e.altKey){return}self.cmd.selection();var tagName=getAncestorTagName(self.cmd.range);if(tagName=="marquee"||tagName=="select"){return}if(newlineTag==="br"&&!brSkipTagMap[tagName]){e.preventDefault();self.insertHtml("<br />"+(_IE&&_V<9?"":"\u200B"));return}if(!pSkipTagMap[tagName]){_nativeCommand(doc,"formatblock","<p>")}});K(doc).keyup(function(e){if(e.which!=13||e.shiftKey||e.ctrlKey||e.altKey){return}if(newlineTag=="br"){return}if(_GECKO){var root=self.cmd.commonAncestor("p");var a=self.cmd.commonAncestor("a");if(a&&a.text()==""){a.remove(true);self.cmd.range.selectNodeContents(root[0]).collapse(true);self.cmd.select()}return}self.cmd.selection();var tagName=getAncestorTagName(self.cmd.range);if(tagName=="marquee"||tagName=="select"){return}if(!pSkipTagMap[tagName]){_nativeCommand(doc,"formatblock","<p>")}})}function _bindTabEvent(){var self=this,doc=self.edit.doc;K(doc).keydown(function(e){if(e.which==9){e.preventDefault();if(self.afterTab){self.afterTab.call(self,e);return}var cmd=self.cmd,range=cmd.range;range.shrink();if(range.collapsed&&range.startContainer.nodeType==1){range.insertNode(K("@&nbsp;",doc)[0]);cmd.select()}self.insertHtml("&nbsp;&nbsp;&nbsp;&nbsp;")}})}function _bindFocusEvent(){var self=this;K(self.edit.textarea[0],self.edit.win).focus(function(e){if(self.afterFocus){self.afterFocus.call(self,e)}}).blur(function(e){if(self.afterBlur){self.afterBlur.call(self,e)}})}function _removeBookmarkTag(html){return _trim(html.replace(/<span [^>]*id="?__kindeditor_bookmark_\w+_\d+__"?[^>]*><\/span>/ig,""))}function _removeTempTag(html){return html.replace(/<div[^>]+class="?__kindeditor_paste__"?[^>]*>[\s\S]*?<\/div>/ig,"")}function _addBookmarkToStack(stack,bookmark){if(stack.length===0){stack.push(bookmark);return}var prev=stack[stack.length-1];if(_removeBookmarkTag(bookmark.html)!==_removeBookmarkTag(prev.html)){stack.push(bookmark)}}function _undoToRedo(fromStack,toStack){var self=this,edit=self.edit,body=edit.doc.body,range,bookmark;if(fromStack.length===0){return self}if(edit.designMode){range=self.cmd.range;bookmark=range.createBookmark(true);bookmark.html=body.innerHTML}else{bookmark={html:body.innerHTML}}_addBookmarkToStack(toStack,bookmark);var prev=fromStack.pop();if(_removeBookmarkTag(bookmark.html)===_removeBookmarkTag(prev.html)&&fromStack.length>0){prev=fromStack.pop()}if(edit.designMode){edit.html(prev.html);if(prev.start){range.moveToBookmark(prev);self.select()}}else{K(body).html(_removeBookmarkTag(prev.html))}return self}function KEditor(options){var self=this;self.options={};function setOption(key,val){if(KEditor.prototype[key]===undefined){self[key]=val}self.options[key]=val}_each(options,function(key,val){setOption(key,options[key])});_each(K.options,function(key,val){if(self[key]===undefined){setOption(key,val)}});var se=K(self.srcElement||"<textarea/>");if(!self.width){self.width=se[0].style.width||se.width()}if(!self.height){self.height=se[0].style.height||se.height()}setOption("width",_undef(self.width,self.minWidth));setOption("height",_undef(self.height,self.minHeight));setOption("width",_addUnit(self.width));setOption("height",_addUnit(self.height));if(_MOBILE&&(!_IOS||_V<534)){self.designMode=false}self.srcElement=se;self.initContent="";self.plugin={};self.isCreated=false;self._handlers={};self._contextmenus=[];self._undoStack=[];self._redoStack=[];self._firstAddBookmark=true;self.menu=self.contextmenu=null;self.dialogs=[]}KEditor.prototype={lang:function(mixed){return _lang(mixed,this.langType)},loadPlugin:function(name,fn){var self=this;var _pluginStatus=this._pluginStatus;if(!_pluginStatus){_pluginStatus=this._pluginStatus={}}if(_plugins[name]){if(!_isFunction(_plugins[name])){setTimeout(function(){self.loadPlugin(name,fn)},100);return self}if(!_pluginStatus[name]){_plugins[name].call(self,KindEditor);_pluginStatus[name]="inited"}if(fn){fn.call(self)}return self}_plugins[name]="loading";_loadScript(self.pluginsPath+name+"/"+name+".js?ver="+encodeURIComponent(K.DEBUG?_TIME:_VERSION),function(){setTimeout(function(){if(_plugins[name]){self.loadPlugin(name,fn)}},0)});return self},handler:function(key,fn){var self=this;if(!self._handlers[key]){self._handlers[key]=[]}if(_isFunction(fn)){self._handlers[key].push(fn);return self}_each(self._handlers[key],function(){fn=this.call(self,fn)});return fn},clickToolbar:function(name,fn){var self=this,key="clickToolbar"+name;if(fn===undefined){if(self._handlers[key]){return self.handler(key)}self.loadPlugin(name,function(){self.handler(key)});return self}return self.handler(key,fn)},updateState:function(){var self=this;_each(("justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,subscript,superscript,bold,italic,underline,strikethrough").split(","),function(i,name){self.cmd.state(name)?self.toolbar.select(name):self.toolbar.unselect(name)});return self},addContextmenu:function(item){this._contextmenus.push(item);return this},afterCreate:function(fn){return this.handler("afterCreate",fn)},beforeRemove:function(fn){return this.handler("beforeRemove",fn)},beforeGetHtml:function(fn){return this.handler("beforeGetHtml",fn)},beforeSetHtml:function(fn){return this.handler("beforeSetHtml",fn)},afterSetHtml:function(fn){return this.handler("afterSetHtml",fn)},create:function(){var self=this,fullscreenMode=self.fullscreenMode;if(self.isCreated){return self}if(self.srcElement.data("kindeditor")){return self}self.srcElement.data("kindeditor","true");if(fullscreenMode){_docElement().style.overflow="hidden"}else{_docElement().style.overflow=""}var width=fullscreenMode?_docElement().clientWidth+"px":self.width,height=fullscreenMode?_docElement().clientHeight+"px":self.height;if((_IE&&_V<8)||_QUIRKS){height=_addUnit(_removeUnit(height)+2)}var container=self.container=K(self.layout);if(fullscreenMode){K(document.body).append(container)}else{self.srcElement.before(container)}var toolbarDiv=K(".toolbar",container),editDiv=K(".edit",container),statusbar=self.statusbar=K(".statusbar",container);container.removeClass("container").addClass("ke-container ke-container-"+self.themeType).css("width",width);if(fullscreenMode){container.css({position:"absolute",left:0,top:0,"z-index":811211});if(!_GECKO){self._scrollPos=_getScrollPos()}window.scrollTo(0,0);K(document.body).css({height:"1px",overflow:"hidden"});K(document.body.parentNode).css("overflow","hidden");self._fullscreenExecuted=true}else{if(self._fullscreenExecuted){K(document.body).css({height:"",overflow:""});K(document.body.parentNode).css("overflow","")}if(self._scrollPos){window.scrollTo(self._scrollPos.x,self._scrollPos.y)}}var htmlList=[];K.each(self.items,function(i,name){if(name=="|"){htmlList.push('<span class="ke-inline-block ke-separator"></span>')}else{if(name=="/"){htmlList.push('<div class="ke-hr"></div>')}else{htmlList.push('<span class="ke-outline" data-name="'+name+'" title="'+self.lang(name)+'" unselectable="on">');htmlList.push('<span class="ke-toolbar-icon ke-toolbar-icon-url ke-icon-'+name+'" unselectable="on"></span></span>')}}});var toolbar=self.toolbar=_toolbar({src:toolbarDiv,html:htmlList.join(""),noDisableItems:self.noDisableItems,click:function(e,name){e.stop();if(self.menu){var menuName=self.menu.name;self.hideMenu();if(menuName===name){return}}self.clickToolbar(name)}});var editHeight=_removeUnit(height)-toolbar.div.height();var edit=self.edit=_edit({height:editHeight>0&&_removeUnit(height)>self.minHeight?editHeight:self.minHeight,src:editDiv,srcElement:self.srcElement,designMode:self.designMode,themesPath:self.themesPath,bodyClass:self.bodyClass,cssPath:self.cssPath,cssData:self.cssData,beforeGetHtml:function(html){html=self.beforeGetHtml(html);html=_removeBookmarkTag(_removeTempTag(html));return _formatHtml(html,self.filterMode?self.htmlTags:null,self.urlType,self.wellFormatMode,self.indentChar)},beforeSetHtml:function(html){html=_formatHtml(html,self.filterMode?self.htmlTags:null,"",false);return self.beforeSetHtml(html)},afterSetHtml:function(){self.edit=edit=this;self.afterSetHtml()},afterCreate:function(){self.edit=edit=this;self.cmd=edit.cmd;self._docMousedownFn=function(e){if(self.menu){self.hideMenu()}};K(edit.doc,document).mousedown(self._docMousedownFn);_bindContextmenuEvent.call(self);_bindNewlineEvent.call(self);_bindTabEvent.call(self);_bindFocusEvent.call(self);edit.afterChange(function(e){if(!edit.designMode){return}self.updateState();self.addBookmark();if(self.options.afterChange){self.options.afterChange.call(self)}});edit.textarea.keyup(function(e){if(!e.ctrlKey&&!e.altKey&&_INPUT_KEY_MAP[e.which]){if(self.options.afterChange){self.options.afterChange.call(self)}}});if(self.readonlyMode){self.readonly()}self.isCreated=true;if(self.initContent===""){self.initContent=self.html()}if(self._undoStack.length>0){var prev=self._undoStack.pop();if(prev.start){self.html(prev.html);edit.cmd.range.moveToBookmark(prev);self.select()}}self.afterCreate();if(self.options.afterCreate){self.options.afterCreate.call(self)}}});statusbar.removeClass("statusbar").addClass("ke-statusbar").append('<span class="ke-inline-block ke-statusbar-center-icon"></span>').append('<span class="ke-inline-block ke-statusbar-right-icon"></span>');if(self._fullscreenResizeHandler){K(window).unbind("resize",self._fullscreenResizeHandler);self._fullscreenResizeHandler=null}function initResize(){if(statusbar.height()===0){setTimeout(initResize,100);return}self.resize(width,height,false)}initResize();if(fullscreenMode){self._fullscreenResizeHandler=function(e){if(self.isCreated){self.resize(_docElement().clientWidth,_docElement().clientHeight,false)}};K(window).bind("resize",self._fullscreenResizeHandler);toolbar.select("fullscreen");statusbar.first().css("visibility","hidden");statusbar.last().css("visibility","hidden")}else{if(_GECKO){K(window).bind("scroll",function(e){self._scrollPos=_getScrollPos()})}if(self.resizeType>0){_drag({moveEl:container,clickEl:statusbar,moveFn:function(x,y,width,height,diffX,diffY){height+=diffY;self.resize(null,height)}})}else{statusbar.first().css("visibility","hidden")}if(self.resizeType===2){_drag({moveEl:container,clickEl:statusbar.last(),moveFn:function(x,y,width,height,diffX,diffY){width+=diffX;height+=diffY;self.resize(width,height)}})}else{statusbar.last().css("visibility","hidden")}}return self},remove:function(){var self=this;if(!self.isCreated){return self}self.beforeRemove();self.srcElement.data("kindeditor","");if(self.menu){self.hideMenu()}_each(self.dialogs,function(){self.hideDialog()});K(document).unbind("mousedown",self._docMousedownFn);self.toolbar.remove();self.edit.remove();self.statusbar.last().unbind();self.statusbar.unbind();self.container.remove();self.container=self.toolbar=self.edit=self.menu=null;self.dialogs=[];self.isCreated=false;return self},resize:function(width,height,updateProp){var self=this;updateProp=_undef(updateProp,true);if(width){if(!/%/.test(width)){width=_removeUnit(width);width=width<self.minWidth?self.minWidth:width}self.container.css("width",_addUnit(width));if(updateProp){self.width=_addUnit(width)}}if(height){height=_removeUnit(height);var editHeight=_removeUnit(height)-self.toolbar.div.height()-self.statusbar.height();editHeight=editHeight<self.minHeight?self.minHeight:editHeight;self.edit.setHeight(editHeight);if(updateProp){self.height=_addUnit(height)}}return self},select:function(){this.isCreated&&this.cmd.select();return this},html:function(val){var self=this;if(val===undefined){return self.isCreated?self.edit.html():_elementVal(self.srcElement)}self.isCreated?self.edit.html(val):_elementVal(self.srcElement,val);if(self.isCreated){self.cmd.selection()}return self},fullHtml:function(){return this.isCreated?this.edit.html(undefined,true):""},text:function(val){var self=this;if(val===undefined){return _trim(self.html().replace(/<(?!img|embed).*?>/ig,"").replace(/&nbsp;/ig," "))}else{return self.html(_escape(val))}},isEmpty:function(){return _trim(this.text().replace(/\r\n|\n|\r/,""))===""},isDirty:function(){return _trim(this.initContent.replace(/\r\n|\n|\r|t/g,""))!==_trim(this.html().replace(/\r\n|\n|\r|t/g,""))},selectedHtml:function(){var val=this.isCreated?this.cmd.range.html():"";val=_removeBookmarkTag(_removeTempTag(val));return val},count:function(mode){var self=this;mode=(mode||"html").toLowerCase();if(mode==="html"){return self.html().length}if(mode==="text"){return self.text().replace(/<(?:img|embed).*?>/ig,"K").replace(/\r\n|\n|\r/g,"").length}return 0},exec:function(key){key=key.toLowerCase();var self=this,cmd=self.cmd,changeFlag=_inArray(key,"selectall,copy,paste,print".split(","))<0;if(changeFlag){self.addBookmark(false)}cmd[key].apply(cmd,_toArray(arguments,1));if(changeFlag){self.updateState();self.addBookmark(false);if(self.options.afterChange){self.options.afterChange.call(self)}}return self},insertHtml:function(val,quickMode){if(!this.isCreated){return this}val=this.beforeSetHtml(val);this.exec("inserthtml",val,quickMode);return this},appendHtml:function(val){this.html(this.html()+val);if(this.isCreated){var cmd=this.cmd;cmd.range.selectNodeContents(cmd.doc.body).collapse(false);cmd.select()}return this},sync:function(){_elementVal(this.srcElement,this.html());return this},focus:function(){this.isCreated?this.edit.focus():this.srcElement[0].focus();return this},blur:function(){this.isCreated?this.edit.blur():this.srcElement[0].blur();return this},addBookmark:function(checkSize){checkSize=_undef(checkSize,true);var self=this,edit=self.edit,body=edit.doc.body,html=_removeTempTag(body.innerHTML),bookmark;if(checkSize&&self._undoStack.length>0){var prev=self._undoStack[self._undoStack.length-1];if(Math.abs(html.length-_removeBookmarkTag(prev.html).length)<self.minChangeSize){return self}}if(edit.designMode&&!self._firstAddBookmark){var range=self.cmd.range;bookmark=range.createBookmark(true);bookmark.html=_removeTempTag(body.innerHTML);range.moveToBookmark(bookmark)}else{bookmark={html:html}}self._firstAddBookmark=false;_addBookmarkToStack(self._undoStack,bookmark);return self},undo:function(){return _undoToRedo.call(this,this._undoStack,this._redoStack)},redo:function(){return _undoToRedo.call(this,this._redoStack,this._undoStack)},fullscreen:function(bool){this.fullscreenMode=(bool===undefined?!this.fullscreenMode:bool);this.addBookmark(false);return this.remove().create()},readonly:function(isReadonly){isReadonly=_undef(isReadonly,true);var self=this,edit=self.edit,doc=edit.doc;if(self.designMode){self.toolbar.disableAll(isReadonly,[])}else{_each(self.noDisableItems,function(){self.toolbar[isReadonly?"disable":"enable"](this)})}if(_IE){doc.body.contentEditable=!isReadonly}else{doc.designMode=isReadonly?"off":"on"}edit.textarea[0].disabled=isReadonly},createMenu:function(options){var self=this,name=options.name,knode=self.toolbar.get(name),pos=knode.pos();options.x=pos.x;options.y=pos.y+knode.height();options.z=self.options.zIndex;options.shadowMode=_undef(options.shadowMode,self.shadowMode);if(options.selectedColor!==undefined){options.cls="ke-colorpicker-"+self.themeType;options.noColor=self.lang("noColor");self.menu=_colorpicker(options)}else{options.cls="ke-menu-"+self.themeType;options.centerLineMode=false;self.menu=_menu(options)}return self.menu},hideMenu:function(){this.menu.remove();this.menu=null;return this},hideContextmenu:function(){this.contextmenu.remove();this.contextmenu=null;return this},createDialog:function(options){var self=this,name=options.name;options.z=self.options.zIndex;options.shadowMode=_undef(options.shadowMode,self.shadowMode);options.closeBtn=_undef(options.closeBtn,{name:self.lang("close"),click:function(e){self.hideDialog();if(_IE&&self.cmd){self.cmd.select()}}});options.noBtn=_undef(options.noBtn,{name:self.lang(options.yesBtn?"no":"close"),click:function(e){self.hideDialog();if(_IE&&self.cmd){self.cmd.select()}}});if(self.dialogAlignType!="page"){options.alignEl=self.container}options.cls="ke-dialog-"+self.themeType;if(self.dialogs.length>0){var firstDialog=self.dialogs[0],parentDialog=self.dialogs[self.dialogs.length-1];firstDialog.setMaskIndex(parentDialog.z+2);options.z=parentDialog.z+3;options.showMask=false}var dialog=_dialog(options);self.dialogs.push(dialog);return dialog},hideDialog:function(){var self=this;if(self.dialogs.length>0){self.dialogs.pop().remove()}if(self.dialogs.length>0){var firstDialog=self.dialogs[0],parentDialog=self.dialogs[self.dialogs.length-1];firstDialog.setMaskIndex(parentDialog.z-1)}return self},errorDialog:function(html){var self=this;var dialog=self.createDialog({width:750,title:self.lang("uploadError"),body:'<div style="padding:10px 20px;"><iframe frameborder="0" style="width:708px;height:400px;"></iframe></div>'});var iframe=K("iframe",dialog.div),doc=K.iframeDoc(iframe);doc.open();doc.write(html);doc.close();K(doc.body).css("background-color","#FFF");iframe[0].contentWindow.focus();return self}};function _editor(options){return new KEditor(options)}var _instances=[];function _create(expr,options){options=options||{};options.basePath=_undef(options.basePath,K.basePath);options.themesPath=_undef(options.themesPath,options.basePath+"themes/");options.langPath=_undef(options.langPath,options.basePath+"lang/");options.pluginsPath=_undef(options.pluginsPath,options.basePath+"plugins/");if(_undef(options.loadStyleMode,K.options.loadStyleMode)){var themeType=_undef(options.themeType,K.options.themeType);_loadStyle(options.themesPath+"default/default.css");_loadStyle(options.themesPath+themeType+"/"+themeType+".css")}function create(editor){_each(_plugins,function(name,fn){if(_isFunction(fn)){fn.call(editor,KindEditor);if(!editor._pluginStatus){editor._pluginStatus={}}editor._pluginStatus[name]="inited"}});return editor.create()}var knode=K(expr);if(!knode||knode.length===0){return}if(knode.length>1){knode.each(function(){_create(this,options)});return _instances[0]}options.srcElement=knode[0];var editor=new KEditor(options);_instances.push(editor);if(_language[editor.langType]){return create(editor)}_loadScript(editor.langPath+editor.langType+".js?ver="+encodeURIComponent(K.DEBUG?_TIME:_VERSION),function(){create(editor)});return editor}function _eachEditor(expr,fn){K(expr).each(function(i,el){K.each(_instances,function(j,editor){if(editor&&editor.srcElement[0]==el){fn.call(editor,j);return false}})})}K.remove=function(expr){_eachEditor(expr,function(i){this.remove();_instances.splice(i,1)})};K.sync=function(expr){_eachEditor(expr,function(){this.sync()})};K.html=function(expr,val){_eachEditor(expr,function(){this.html(val)})};K.insertHtml=function(expr,val){_eachEditor(expr,function(){this.insertHtml(val)})};K.appendHtml=function(expr,val){_eachEditor(expr,function(){this.appendHtml(val)})};if(_IE&&_V<7){_nativeCommand(document,"BackgroundImageCache",true)}K.EditorClass=KEditor;K.editor=_editor;K.create=_create;K.instances=_instances;K.plugin=_plugin;K.lang=_lang;_plugin("core",function(K){var self=this,shortcutKeys={undo:"Z",redo:"Y",bold:"B",italic:"I",underline:"U",print:"P",selectall:"A"};self.afterSetHtml(function(){if(self.options.afterChange){self.options.afterChange.call(self)}});self.afterCreate(function(){if(self.syncType!="form"){return}var el=K(self.srcElement),hasForm=false;while((el=el.parent())){if(el.name=="form"){hasForm=true;break}}if(hasForm){el.bind("submit",function(e){self.sync();K(window).bind("unload",function(){self.edit.textarea.remove()})});var resetBtn=K('[type="reset"]',el);resetBtn.click(function(){self.html(self.initContent);self.cmd.selection()});self.beforeRemove(function(){el.unbind();resetBtn.unbind()})}});self.clickToolbar("source",function(){if(self.edit.designMode){self.toolbar.disableAll(true);self.edit.design(false);self.toolbar.select("source")}else{self.toolbar.disableAll(false);self.edit.design(true);self.toolbar.unselect("source");if(_GECKO){setTimeout(function(){self.cmd.selection()},0)}else{self.cmd.selection()}}self.designMode=self.edit.designMode});self.afterCreate(function(){if(!self.designMode){self.toolbar.disableAll(true).select("source")}});self.clickToolbar("fullscreen",function(){self.fullscreen()});if(self.fullscreenShortcut){var loaded=false;self.afterCreate(function(){K(self.edit.doc,self.edit.textarea).keyup(function(e){if(e.which==27){setTimeout(function(){self.fullscreen()},0)}});if(loaded){if(_IE&&!self.designMode){return}self.focus()}if(!loaded){loaded=true}})}_each("undo,redo".split(","),function(i,name){if(shortcutKeys[name]){self.afterCreate(function(){_ctrl(this.edit.doc,shortcutKeys[name],function(){self.clickToolbar(name)})})}self.clickToolbar(name,function(){self[name]()})});self.clickToolbar("formatblock",function(){var blocks=self.lang("formatblock.formatBlock"),heights={h1:28,h2:24,h3:18,H4:14,p:12},curVal=self.cmd.val("formatblock"),menu=self.createMenu({name:"formatblock",width:self.langType=="en"?200:150});_each(blocks,function(key,val){var style="font-size:"+heights[key]+"px;";if(key.charAt(0)==="h"){style+="font-weight:bold;"}menu.addItem({title:'<span style="'+style+'" unselectable="on">'+val+"</span>",height:heights[key]+12,checked:(curVal===key||curVal===val),click:function(){self.select().exec("formatblock","<"+key+">").hideMenu()}})})});self.clickToolbar("fontname",function(){var curVal=self.cmd.val("fontname"),menu=self.createMenu({name:"fontname",width:150});_each(self.lang("fontname.fontName"),function(key,val){menu.addItem({title:'<span style="font-family: '+key+';" unselectable="on">'+val+"</span>",checked:(curVal===key.toLowerCase()||curVal===val.toLowerCase()),click:function(){self.exec("fontname",key).hideMenu()}})})});self.clickToolbar("fontsize",function(){var curVal=self.cmd.val("fontsize"),menu=self.createMenu({name:"fontsize",width:150});_each(self.fontSizeTable,function(i,val){menu.addItem({title:'<span style="font-size:'+val+';" unselectable="on">'+val+"</span>",height:_removeUnit(val)+12,checked:curVal===val,click:function(){self.exec("fontsize",val).hideMenu()}})})});_each("forecolor,hilitecolor".split(","),function(i,name){self.clickToolbar(name,function(){self.createMenu({name:name,selectedColor:self.cmd.val(name)||"default",colors:self.colorTable,click:function(color){self.exec(name,color).hideMenu()}})})});_each(("cut,copy,paste").split(","),function(i,name){self.clickToolbar(name,function(){self.focus();try{self.exec(name,null)}catch(e){alert(self.lang(name+"Error"))}})});self.clickToolbar("about",function(){var html='<div style="margin:20px;"><div>KindEditor '+_VERSION+'</div><div>Copyright &copy; <a href="http://www.kindsoft.net/" target="_blank">kindsoft.net</a> All rights reserved.</div></div>';self.createDialog({name:"about",width:350,title:self.lang("about"),body:html})});self.plugin.getSelectedLink=function(){return self.cmd.commonAncestor("a")};self.plugin.getSelectedImage=function(){return _getImageFromRange(self.edit.cmd.range,function(img){return !/^ke-\w+$/i.test(img[0].className)})};self.plugin.getSelectedFlash=function(){return _getImageFromRange(self.edit.cmd.range,function(img){return img[0].className=="ke-flash"})};self.plugin.getSelectedMedia=function(){return _getImageFromRange(self.edit.cmd.range,function(img){return img[0].className=="ke-media"||img[0].className=="ke-rm"})};self.plugin.getSelectedAnchor=function(){return _getImageFromRange(self.edit.cmd.range,function(img){return img[0].className=="ke-anchor"})};_each("link,image,flash,media,anchor".split(","),function(i,name){var uName=name.charAt(0).toUpperCase()+name.substr(1);_each("edit,delete".split(","),function(j,val){self.addContextmenu({title:self.lang(val+uName),click:function(){self.loadPlugin(name,function(){self.plugin[name][val]();self.hideMenu()})},cond:self.plugin["getSelected"+uName],width:150,iconClass:val=="edit"?"ke-icon-"+name:undefined})});self.addContextmenu({title:"-"})});self.plugin.getSelectedTable=function(){return self.cmd.commonAncestor("table")};self.plugin.getSelectedRow=function(){return self.cmd.commonAncestor("tr")};self.plugin.getSelectedCell=function(){return self.cmd.commonAncestor("td")};_each(("prop,cellprop,colinsertleft,colinsertright,rowinsertabove,rowinsertbelow,rowmerge,colmerge,rowsplit,colsplit,coldelete,rowdelete,insert,delete").split(","),function(i,val){var cond=_inArray(val,["prop","delete"])<0?self.plugin.getSelectedCell:self.plugin.getSelectedTable;self.addContextmenu({title:self.lang("table"+val),click:function(){self.loadPlugin("table",function(){self.plugin.table[val]();self.hideMenu()})},cond:cond,width:170,iconClass:"ke-icon-table"+val})});self.addContextmenu({title:"-"});_each(("selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript,hr,print,bold,italic,underline,strikethrough,removeformat,unlink").split(","),function(i,name){if(shortcutKeys[name]){self.afterCreate(function(){_ctrl(this.edit.doc,shortcutKeys[name],function(){self.cmd.selection();self.clickToolbar(name)})})}self.clickToolbar(name,function(){self.focus().exec(name,null)})});self.afterCreate(function(){var doc=self.edit.doc,cmd,bookmark,div,cls="__kindeditor_paste__",pasting=false;function movePastedData(){cmd.range.moveToBookmark(bookmark);cmd.select();if(_WEBKIT){K("div."+cls,div).each(function(){K(this).after("<br />").remove(true)});K("span.Apple-style-span",div).remove(true);K("span.Apple-tab-span",div).remove(true);K("span[style]",div).each(function(){if(K(this).css("white-space")=="nowrap"){K(this).remove(true)}});K("meta",div).remove()}var html=div[0].innerHTML;div.remove();if(html===""){return}if(_WEBKIT){html=html.replace(/(<br>)\1/ig,"$1")}if(self.pasteType===2){html=html.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/ig,"");if(/schemas-microsoft-com|worddocument|mso-\w+/i.test(html)){html=_clearMsWord(html,self.filterMode?self.htmlTags:K.options.htmlTags)}else{html=_formatHtml(html,self.filterMode?self.htmlTags:null);html=self.beforeSetHtml(html)}}if(self.pasteType===1){html=html.replace(/&nbsp;/ig," ");html=html.replace(/\n\s*\n/g,"\n");html=html.replace(/<br[^>]*>/ig,"\n");html=html.replace(/<\/p><p[^>]*>/ig,"\n");html=html.replace(/<[^>]+>/g,"");html=html.replace(/ {2}/g," &nbsp;");if(self.newlineTag=="p"){if(/\n/.test(html)){html=html.replace(/^/,"<p>").replace(/$/,"<br /></p>").replace(/\n/g,"<br /></p><p>")}}else{html=html.replace(/\n/g,"<br />$&")}}self.insertHtml(html,true)}K(doc.body).bind("paste",function(e){if(self.pasteType===0){e.stop();return}if(pasting){return}pasting=true;K("div."+cls,doc).remove();cmd=self.cmd.selection();bookmark=cmd.range.createBookmark();div=K('<div class="'+cls+'"></div>',doc).css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",left:"-1981px",top:K(bookmark.start).pos().y+"px","white-space":"nowrap"});K(doc.body).append(div);if(_IE){var rng=cmd.range.get(true);rng.moveToElementText(div[0]);rng.select();rng.execCommand("paste");e.preventDefault()}else{cmd.range.selectNodeContents(div[0]);cmd.select();div[0].tabIndex=-1;div[0].focus()}setTimeout(function(){movePastedData();pasting=false},0)})});self.beforeGetHtml(function(html){if(_IE&&_V<=8){html=html.replace(/<div\s+[^>]*data-ke-input-tag="([^"]*)"[^>]*>([\s\S]*?)<\/div>/ig,function(full,tag){return unescape(tag)});html=html.replace(/(<input)((?:\s+[^>]*)?>)/ig,function($0,$1,$2){if(!/\s+type="[^"]+"/i.test($0)){return $1+' type="text"'+$2}return $0})}return html.replace(/(<(?:noscript|noscript\s[^>]*)>)([\s\S]*?)(<\/noscript>)/ig,function($0,$1,$2,$3){return $1+_unescape($2).replace(/\s+/g," ")+$3}).replace(/<img[^>]*class="?ke-(flash|rm|media)"?[^>]*>/ig,function(full){var imgAttrs=_getAttrList(full);var styles=_getCssList(imgAttrs.style||"");var attrs=_mediaAttrs(imgAttrs["data-ke-tag"]);var width=_undef(styles.width,"");var height=_undef(styles.height,"");if(/px/i.test(width)){width=_removeUnit(width)}if(/px/i.test(height)){height=_removeUnit(height)}attrs.width=_undef(imgAttrs.width,width);attrs.height=_undef(imgAttrs.height,height);return _mediaEmbed(attrs)}).replace(/<img[^>]*class="?ke-anchor"?[^>]*>/ig,function(full){var imgAttrs=_getAttrList(full);return'<a name="'+unescape(imgAttrs["data-ke-name"])+'"></a>'}).replace(/<div\s+[^>]*data-ke-script-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/ig,function(full,attr,code){return"<script"+unescape(attr)+">"+unescape(code)+"<\/script>"}).replace(/<div\s+[^>]*data-ke-noscript-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/ig,function(full,attr,code){return"<noscript"+unescape(attr)+">"+unescape(code)+"</noscript>"}).replace(/(<[^>]*)data-ke-src="([^"]*)"([^>]*>)/ig,function(full,start,src,end){full=full.replace(/(\s+(?:href|src)=")[^"]*(")/i,function($0,$1,$2){return $1+_unescape(src)+$2});full=full.replace(/\s+data-ke-src="[^"]*"/i,"");return full}).replace(/(<[^>]+\s)data-ke-(on\w+="[^"]*"[^>]*>)/ig,function(full,start,end){return start+end})});self.beforeSetHtml(function(html){if(_IE&&_V<=8){html=html.replace(/<input[^>]*>|<(select|button)[^>]*>[\s\S]*?<\/\1>/ig,function(full){var attrs=_getAttrList(full);var styles=_getCssList(attrs.style||"");if(styles.display=="none"){return'<div class="ke-display-none" data-ke-input-tag="'+escape(full)+'"></div>'}return full})}return html.replace(/<embed[^>]*type="([^"]+)"[^>]*>(?:<\/embed>)?/ig,function(full){var attrs=_getAttrList(full);attrs.src=_undef(attrs.src,"");attrs.width=_undef(attrs.width,0);attrs.height=_undef(attrs.height,0);return _mediaImg(self.themesPath+"common/blank.gif",attrs)}).replace(/<a[^>]*name="([^"]+)"[^>]*>(?:<\/a>)?/ig,function(full){var attrs=_getAttrList(full);if(attrs.href!==undefined){return full}return'<img class="ke-anchor" src="'+self.themesPath+'common/anchor.gif" data-ke-name="'+escape(attrs.name)+'" />'}).replace(/<script([^>]*)>([\s\S]*?)<\/script>/ig,function(full,attr,code){return'<div class="ke-script" data-ke-script-attr="'+escape(attr)+'">'+escape(code)+"</div>"}).replace(/<noscript([^>]*)>([\s\S]*?)<\/noscript>/ig,function(full,attr,code){return'<div class="ke-noscript" data-ke-noscript-attr="'+escape(attr)+'">'+escape(code)+"</div>"}).replace(/(<[^>]*)(href|src)="([^"]*)"([^>]*>)/ig,function(full,start,key,src,end){if(full.match(/\sdata-ke-src="[^"]*"/i)){return full}full=start+key+'="'+src+'" data-ke-src="'+_escape(src)+'"'+end;return full}).replace(/(<[^>]+\s)(on\w+="[^"]*"[^>]*>)/ig,function(full,start,end){return start+"data-ke-"+end}).replace(/<table[^>]*\s+border="0"[^>]*>/ig,function(full){if(full.indexOf("ke-zeroborder")>=0){return full}return _addClassToTag(full,"ke-zeroborder")})})})})(window);KindEditor.lang({source:"HTML",preview:"",undo:"(Ctrl+Z)",redo:"(Ctrl+Y)",cut:"(Ctrl+X)",copy:"(Ctrl+C)",paste:"(Ctrl+V)",plainpaste:"",wordpaste:"Word",selectall:"(Ctrl+A)",justifyleft:"",justifycenter:"",justifyright:"",justifyfull:"",insertorderedlist:"",insertunorderedlist:"",indent:"",outdent:"",subscript:"",superscript:"",formatblock:"",fontname:"",fontsize:"",forecolor:"",hilitecolor:"",bold:"(Ctrl+B)",italic:"(Ctrl+I)",underline:"(Ctrl+U)",strikethrough:"",removeformat:"",image:"",multiimage:"",flash:"Flash",media:"",table:"",tablecell:"",hr:"",emoticons:"",link:"",unlink:"",fullscreen:"",about:"",print:"(Ctrl+P)",filemanager:"",code:"",map:"Google",baidumap:"",lineheight:"",clearhtml:"HTML",pagebreak:"",quickformat:"",insertfile:"",template:"",anchor:"",yes:"",no:"",close:"",editImage:"",deleteImage:"",editFlash:"Flash",deleteFlash:"Flash",editMedia:"",deleteMedia:"",editLink:"",deleteLink:"",editAnchor:"",deleteAnchor:"",tableprop:"",tablecellprop:"",tableinsert:"",tabledelete:"",tablecolinsertleft:"",tablecolinsertright:"",tablerowinsertabove:"",tablerowinsertbelow:"",tablerowmerge:"",tablecolmerge:"",tablerowsplit:"",tablecolsplit:"",tablecoldelete:"",tablerowdelete:"",noColor:"",pleaseSelectFile:"",invalidImg:"URL\njpg,gif,bmp,png",invalidMedia:"URL\nswf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb",invalidWidth:"",invalidHeight:"",invalidBorder:"",invalidUrl:"URL",invalidRows:"0",invalidCols:"0",invalidPadding:"",invalidSpacing:"",invalidJson:"",uploadSuccess:"",cutError:"(Ctrl+X)",copyError:"(Ctrl+C)",pasteError:"(Ctrl+V)",ajaxLoading:" ...",uploadLoading:" ...",uploadError:"","plainpaste.comment":"(Ctrl+V)","wordpaste.comment":"(Ctrl+V)","code.pleaseInput":"","link.url":"URL","link.linkType":"","link.newWindow":"","link.selfWindow":"","flash.url":"URL","flash.width":"","flash.height":"","flash.upload":"","flash.viewServer":"","media.url":"URL","media.width":"","media.height":"","media.autostart":"","media.upload":"","media.viewServer":"","image.remoteImage":"","image.localImage":"","image.remoteUrl":"","image.localUrl":"","image.size":"","image.width":"","image.height":"","image.resetSize":"","image.align":"","image.defaultAlign":"","image.leftAlign":"","image.rightAlign":"","image.imgTitle":"","image.upload":"...","image.viewServer":"","multiimage.uploadDesc":"<%=uploadLimit%><%=sizeLimit%>","multiimage.startUpload":"","multiimage.clearAll":"","multiimage.insertAll":"","multiimage.queueLimitExceeded":"","multiimage.fileExceedsSizeLimit":"","multiimage.zeroByteFile":"","multiimage.invalidFiletype":"","multiimage.unknownError":"","multiimage.pending":"","multiimage.uploadError":"","filemanager.emptyFolder":"","filemanager.moveup":"","filemanager.viewType":"","filemanager.viewImage":"","filemanager.listImage":"","filemanager.orderType":"","filemanager.fileName":"","filemanager.fileSize":"","filemanager.fileType":"","insertfile.url":"URL","insertfile.title":"","insertfile.upload":"","insertfile.viewServer":"","table.cells":"","table.rows":"","table.cols":"","table.size":"","table.width":"","table.height":"","table.percent":"%","table.px":"px","table.space":"","table.padding":"","table.spacing":"","table.align":"","table.textAlign":"","table.verticalAlign":"","table.alignDefault":"","table.alignLeft":"","table.alignCenter":"","table.alignRight":"","table.alignTop":"","table.alignMiddle":"","table.alignBottom":"","table.alignBaseline":"","table.border":"","table.borderWidth":"","table.borderColor":"","table.backgroundColor":"","map.address":": ","map.search":"","baidumap.address":": ","baidumap.search":"","baidumap.insertDynamicMap":"","anchor.name":"","formatblock.formatBlock":{h1:" 1",h2:" 2",h3:" 3",h4:" 4",p:" "},"fontname.fontName":{SimSun:"",NSimSun:"",FangSong_GB2312:"_GB2312",KaiTi_GB2312:"_GB2312",SimHei:"","Microsoft YaHei":"",Arial:"Arial","Arial Black":"Arial Black","Times New Roman":"Times New Roman","Courier New":"Courier New",Tahoma:"Tahoma",Verdana:"Verdana"},"lineheight.lineHeight":[{"1":""},{"1.5":"1.5"},{"2":"2"},{"2.5":"2.5"},{"3":"3"}],"template.selectTemplate":"","template.replaceContent":"","template.fileList":{"1.html":"","2.html":"","3.html":""}},"zh-CN");KindEditor.options.langType="zh-CN";KindEditor.plugin("anchor",function(b){var c=this,d="anchor",e=c.lang(d+".");c.plugin.anchor={edit:function(){var h=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keName">'+e.name+"</label>",'<input class="ke-input-text" type="text" id="keName" name="name" value="" style="width:100px;" />',"</div>","</div>"].join("");var g=c.createDialog({name:d,width:300,title:c.lang(d),body:h,yesBtn:{name:c.lang("yes"),click:function(k){c.insertHtml('<a name="'+i.val()+'">').hideDialog().focus()}}});var j=g.div,i=b('input[name="name"]',j);var f=c.plugin.getSelectedAnchor();if(f){i.val(unescape(f.attr("data-ke-name")))}i[0].focus();i[0].select()},"delete":function(){c.plugin.getSelectedAnchor().remove()}};c.clickToolbar(d,c.plugin.anchor.edit)});KindEditor.plugin("autoheight",function(c){var d=this;if(!d.autoHeightMode){return}var f;function e(){var i=d.edit;var h=i.doc.body;i.iframe[0].scroll="no";h.style.overflowY="hidden"}function b(){if(d.fullscreenMode){return}var i=d.edit;var h=i.doc.body;i.iframe.height(f);d.resize(null,Math.max((c.IE?h.scrollHeight:h.offsetHeight)+76,f))}function g(){f=c.removeUnit(d.height);d.edit.afterChange(b);if(!d.fullscreenMode){e()}b()}if(d.isCreated){g()}else{d.afterCreate(g)}});KindEditor.plugin("baidumap",function(b){var c=this,e="baidumap",g=c.lang(e+".");var d=b.undef(c.mapWidth,558);var f=b.undef(c.mapHeight,360);c.clickToolbar(e,function(){var j=['<div style="padding:10px 20px;">','<div class="ke-header">','<div class="ke-left">',g.address+' <input id="kindeditor_plugin_map_address" name="address" class="ke-input-text" value="" style="width:200px;" /> ','<span class="ke-button-common ke-button-outer">','<input type="button" name="searchBtn" class="ke-button-common ke-button" value="'+g.search+'" />',"</span>","</div>",'<div class="ke-right">','<input type="checkbox" id="keInsertDynamicMap" name="insertDynamicMap" value="1" /> <label for="keInsertDynamicMap">'+g.insertDynamicMap+"</label>","</div>",'<div class="ke-clearfix"></div>',"</div>",'<div class="ke-map" style="width:'+d+"px;height:"+f+'px;"></div>',"</div>"].join("");var o=c.createDialog({name:e,width:d+42,title:c.lang(e),body:j,yesBtn:{name:c.lang("yes"),click:function(w){var v=m.map;var u=v.getCenter();var r=u.lng+","+u.lat;var t=v.getZoom();var s=[l[0].checked?c.pluginsPath+"baidumap/index.html":"http://api.map.baidu.com/staticimage","?center="+encodeURIComponent(r),"&zoom="+encodeURIComponent(t),"&width="+d,"&height="+f,"&markers="+encodeURIComponent(r),"&markerStyles="+encodeURIComponent("l,A")].join("");if(l[0].checked){c.insertHtml('<iframe src="'+s+'" frameborder="0" style="width:'+(d+2)+"px;height:"+(f+2)+'px;"></iframe>')}else{c.exec("insertimage",s)}c.hideDialog().focus()}},beforeRemove:function(){n.remove();if(q){q.write("")}i.remove()}});var h=o.div,k=b('[name="address"]',h),n=b('[name="searchBtn"]',h),l=b('[name="insertDynamicMap"]',o.div),m,q;var i=b('<iframe class="ke-textarea" frameborder="0" src="'+c.pluginsPath+'baidumap/map.html" style="width:'+d+"px;height:"+f+'px;"></iframe>');function p(){m=i[0].contentWindow;q=b.iframeDoc(i)}i.bind("load",function(){i.unbind("load");if(b.IE){p()}else{setTimeout(p,0)}});b(".ke-map",h).replaceWith(i);n.click(function(){m.search(k.val())})})});KindEditor.plugin("map",function(b){var c=this,d="map",e=c.lang(d+".");c.clickToolbar(d,function(){var h=['<div style="padding:10px 20px;">','<div class="ke-dialog-row">',e.address+' <input id="kindeditor_plugin_map_address" name="address" class="ke-input-text" value="" style="width:200px;" /> ','<span class="ke-button-common ke-button-outer">','<input type="button" name="searchBtn" class="ke-button-common ke-button" value="'+e.search+'" />',"</span>","</div>",'<div class="ke-map" style="width:558px;height:360px;"></div>',"</div>"].join("");var l=c.createDialog({name:d,width:600,title:c.lang(d),body:h,yesBtn:{name:c.lang("yes"),click:function(u){var t=j.geocoder,s=j.map,p=s.getCenter().lat()+","+s.getCenter().lng(),r=s.getZoom(),v=s.getMapTypeId(),q="http://maps.googleapis.com/maps/api/staticmap";q+="?center="+encodeURIComponent(p);q+="&zoom="+encodeURIComponent(r);q+="&size=558x360";q+="&maptype="+encodeURIComponent(v);q+="&markers="+encodeURIComponent(p);q+="&language="+c.langType;q+="&sensor=false";c.exec("insertimage",q).hideDialog().focus()}},beforeRemove:function(){k.remove();if(n){n.write("")}g.remove()}});var f=l.div,i=b('[name="address"]',f),k=b('[name="searchBtn"]',f),j,n;var o=["<!doctype html><html><head>",'<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />',"<style>","	html { height: 100% }","	body { height: 100%; margin: 0; padding: 0; background-color: #FFF }","	#map_canvas { height: 100% }","</style>",'<script src="http://maps.googleapis.com/maps/api/js?sensor=false&language='+c.langType+'"><\/script>',"<script>","var map, geocoder;","function initialize() {","	var latlng = new google.maps.LatLng(31.230393, 121.473704);","	var options = {","		zoom: 11,","		center: latlng,","		disableDefaultUI: true,","		panControl: true,","		zoomControl: true,","		mapTypeControl: true,","		scaleControl: true,","		streetViewControl: false,","		overviewMapControl: true,","		mapTypeId: google.maps.MapTypeId.ROADMAP","	};",'	map = new google.maps.Map(document.getElementById("map_canvas"), options);',"	geocoder = new google.maps.Geocoder();","	geocoder.geocode({latLng: latlng}, function(results, status) {","		if (status == google.maps.GeocoderStatus.OK) {","			if (results[3]) {",'				parent.document.getElementById("kindeditor_plugin_map_address").value = results[3].formatted_address;',"			}","		}","	});","}","function search(address) {","	if (!map) return;","	geocoder.geocode({address : address}, function(results, status) {","		if (status == google.maps.GeocoderStatus.OK) {","			map.setZoom(11);","			map.setCenter(results[0].geometry.location);","			var marker = new google.maps.Marker({","				map: map,","				position: results[0].geometry.location","			});","		} else {",'			alert("Invalid address: " + address);',"		}","	});","}","<\/script>","</head>",'<body onload="initialize();">','<div id="map_canvas" style="width:100%; height:100%"></div>',"</body></html>"].join("\n");var g=b('<iframe class="ke-textarea" frameborder="0" src="'+c.pluginsPath+'map/map.html" style="width:558px;height:360px;"></iframe>');function m(){j=g[0].contentWindow;n=b.iframeDoc(g)}g.bind("load",function(){g.unbind("load");if(b.IE){m()}else{setTimeout(m,0)}});b(".ke-map",f).replaceWith(g);k.click(function(){j.search(i.val())})})});KindEditor.plugin("clearhtml",function(b){var c=this,d="clearhtml";c.clickToolbar(d,function(){c.focus();var e=c.html();e=e.replace(/(<script[^>]*>)([\s\S]*?)(<\/script>)/ig,"");e=e.replace(/(<style[^>]*>)([\s\S]*?)(<\/style>)/ig,"");e=b.formatHtml(e,{a:["href","target"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["src","width","height","border","alt","title",".width",".height"],table:["border"],"td,th":["rowspan","colspan"],"div,hr,br,tbody,tr,p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":[]});c.html(e);c.cmd.selection(true);c.addBookmark()})});KindEditor.plugin("code",function(b){var c=this,d="code";c.clickToolbar(d,function(){var h=c.lang(d+"."),g=['<div style="padding:10px 20px;">','<div class="ke-dialog-row">','<select class="ke-code-type">','<option value="js">JavaScript</option>','<option value="html">HTML</option>','<option value="css">CSS</option>','<option value="php">PHP</option>','<option value="pl">Perl</option>','<option value="py">Python</option>','<option value="rb">Ruby</option>','<option value="java">Java</option>','<option value="vb">ASP/VB</option>','<option value="cpp">C/C++</option>','<option value="cs">C#</option>','<option value="xml">XML</option>','<option value="bsh">Shell</option>','<option value="">Other</option>',"</select>","</div>",'<textarea class="ke-textarea" style="width:408px;height:260px;"></textarea>',"</div>"].join(""),f=c.createDialog({name:d,width:450,title:c.lang(d),body:g,yesBtn:{name:c.lang("yes"),click:function(m){var k=b(".ke-code-type",f.div).val(),l=e.val(),i=k===""?"":" lang-"+k,j='<pre class="prettyprint'+i+'">\n'+b.escape(l)+"</pre> ";if(b.trim(l)===""){alert(h.pleaseInput);e[0].focus();return}c.insertHtml(j).hideDialog().focus()}}}),e=b("textarea",f.div);e[0].focus()})});KindEditor.plugin("emoticons",function(b){var c=this,d="emoticons",g=(c.emoticonsPath||c.pluginsPath+"emoticons/images/"),f=c.allowPreviewEmoticons===undefined?true:c.allowPreviewEmoticons,e=1;c.clickToolbar(d,function(){var q=5,r=9,z=135,i=0,m=q*r,s=Math.ceil(z/m),y=Math.floor(r/2),l=b('<div class="ke-plugin-emoticons"></div>'),t=[],k=c.createMenu({name:d,beforeRemove:function(){v()}});k.div.append(l);var u,n;if(f){u=b('<div class="ke-preview"></div>').css("right",0);n=b('<img class="ke-preview-img" src="'+g+i+'.gif" />');l.append(u);u.append(n)}function x(A,C,B){if(u){A.mouseover(function(){if(C>y){u.css("left",0);u.css("right","")}else{u.css("left","");u.css("right",0)}n.attr("src",g+B+".gif");b(this).addClass("ke-on")})}else{A.mouseover(function(){b(this).addClass("ke-on")})}A.mouseout(function(){b(this).removeClass("ke-on")});A.click(function(D){c.insertHtml('<img src="'+g+B+'.gif" border="0" alt="" />').hideMenu().focus();D.stop()})}function o(E,A){var H=document.createElement("table");A.append(H);if(u){b(H).mouseover(function(){u.show("block")});b(H).mouseout(function(){u.hide()});t.push(b(H))}H.className="ke-table";H.cellPadding=0;H.cellSpacing=0;H.border=0;var D=(E-1)*m+i;for(var C=0;C<q;C++){var I=H.insertRow(C);for(var B=0;B<r;B++){var G=b(I.insertCell(B));G.addClass("ke-cell");x(G,B,D);var F=b('<span class="ke-img"></span>').css("background-position","-"+(24*D)+"px 0px").css("background-image","url("+g+"static.gif)");G.append(F);t.push(G);D++}}return H}var w=o(e,l);function v(){b.each(t,function(){this.unbind()})}var j;function h(A,B){A.click(function(C){v();w.parentNode.removeChild(w);j.remove();w=o(B,l);p(B);e=B;C.stop()})}function p(B){j=b('<div class="ke-page"></div>');l.append(j);for(var C=1;C<=s;C++){if(B!==C){var A=b('<a href="javascript:;">['+C+"]</a>");h(A,C);j.append(A);t.push(A)}else{j.append(b("@["+C+"]"))}j.append(b("@&nbsp;"))}}p(e)})});KindEditor.plugin("filemanager",function(e){var f=this,g="filemanager",d=e.undef(f.fileManagerJson,f.basePath+"php/file_manager_json.php"),i=f.pluginsPath+g+"/images/",h=f.lang(g+".");function c(j,k,l){return j+" ("+Math.ceil(k/1024)+"KB, "+l+")"}function b(j,k){if(k.is_dir){j.attr("title",k.filename)}else{j.attr("title",c(k.filename,k.filesize,k.datetime))}}f.plugin.filemanagerDialog=function(n){var y=e.undef(n.width,650),w=e.undef(n.height,510),s=e.undef(n.dirName,""),B=e.undef(n.viewType,"VIEW").toUpperCase(),v=n.clickFn;var r=['<div style="padding:10px 20px;">','<div class="ke-plugin-filemanager-header">','<div class="ke-left">','<img class="ke-inline-block" name="moveupImg" src="'+i+'go-up.gif" width="16" height="16" border="0" alt="" /> ','<a class="ke-inline-block" name="moveupLink" href="javascript:;">'+h.moveup+"</a>","</div>",'<div class="ke-right">',h.viewType+' <select class="ke-inline-block" name="viewType">','<option value="VIEW">'+h.viewImage+"</option>",'<option value="LIST">'+h.listImage+"</option>","</select> ",h.orderType+' <select class="ke-inline-block" name="orderType">','<option value="NAME">'+h.fileName+"</option>",'<option value="SIZE">'+h.fileSize+"</option>",'<option value="TYPE">'+h.fileType+"</option>","</select>","</div>",'<div class="ke-clearfix"></div>',"</div>",'<div class="ke-plugin-filemanager-body"></div>',"</div>"].join("");var z=f.createDialog({name:g,width:y,height:w,title:f.lang(g),body:r}),u=z.div,q=e(".ke-plugin-filemanager-body",u),p=e('[name="moveupImg"]',u),D=e('[name="moveupLink"]',u),x=e('[name="viewServer"]',u),C=e('[name="viewType"]',u),k=e('[name="orderType"]',u);function t(G,E,F){var H="path="+G+"&order="+E+"&dir="+s;z.showLoading(f.lang("ajaxLoading"));e.ajax(e.addParam(d,H+"&"+new Date().getTime()),function(I){z.hideLoading();F(I)})}var j=[];function m(G,E,H,I){var F=e.formatUrl(E.current_url+H.filename,"absolute"),J=encodeURIComponent(E.current_dir_path+H.filename+"/");if(H.is_dir){G.click(function(K){t(J,k.val(),I)})}else{if(H.is_photo){G.click(function(K){v.call(this,F,H.filename)})}else{G.click(function(K){v.call(this,F,H.filename)})}}j.push(G)}function o(E,G){e.each(j,function(){this.unbind()});D.unbind();C.unbind();k.unbind();if(E.current_dir_path){D.click(function(H){t(E.moveup_dir_path,k.val(),G)})}function F(){if(C.val()=="VIEW"){t(E.current_dir_path,k.val(),A)}else{t(E.current_dir_path,k.val(),l)}}C.change(F);k.change(F);q.html("")}function l(N){o(N,l);var L=document.createElement("table");L.className="ke-table";L.cellPadding=0;L.cellSpacing=0;L.border=0;q.append(L);var K=N.file_list;for(var H=0,I=K.length;H<I;H++){var G=K[H],M=e(L.insertRow(H));M.mouseover(function(O){e(this).addClass("ke-on")}).mouseout(function(O){e(this).removeClass("ke-on")});var E=i+(G.is_dir?"folder-16.gif":"file-16.gif"),F=e('<img src="'+E+'" width="16" height="16" alt="'+G.filename+'" align="absmiddle" />'),J=e(M[0].insertCell(0)).addClass("ke-cell ke-name").append(F).append(document.createTextNode(" "+G.filename));if(!G.is_dir||G.has_file){M.css("cursor","pointer");J.attr("title",G.filename);m(J,N,G,l)}else{J.attr("title",h.emptyFolder)}e(M[0].insertCell(1)).addClass("ke-cell ke-size").html(G.is_dir?"-":Math.ceil(G.filesize/1024)+"KB");e(M[0].insertCell(2)).addClass("ke-cell ke-datetime").html(G.datetime)}}function A(N){o(N,A);var L=N.file_list;for(var I=0,K=L.length;I<K;I++){var H=L[I],F=e('<div class="ke-inline-block ke-item"></div>');q.append(F);var J=e('<div class="ke-inline-block ke-photo"></div>').mouseover(function(O){e(this).addClass("ke-on")}).mouseout(function(O){e(this).removeClass("ke-on")});F.append(J);var M=N.current_url+H.filename,E=H.is_dir?i+"folder-64.gif":(H.is_photo?M:i+"file-64.gif");var G=e('<img src="'+E+'" width="80" height="80" alt="'+H.filename+'" />');if(!H.is_dir||H.has_file){J.css("cursor","pointer");b(J,H);m(J,N,H,A)}else{J.attr("title",h.emptyFolder)}J.append(G);F.append('<div class="ke-name" title="'+H.filename+'">'+H.filename+"</div>")}}C.val(B);t("",k.val(),B=="VIEW"?A:l);return z}});KindEditor.plugin("flash",function(i){var k=this,b="flash",c=k.lang(b+"."),e=i.undef(k.allowFlashUpload,true),j=i.undef(k.allowFileManager,false),h=i.undef(k.formatUploadUrl,true),g=i.undef(k.extraFileUploadParams,{}),d=i.undef(k.filePostName,"imgFile"),f=i.undef(k.uploadJson,k.basePath+"php/upload_json.php");k.plugin.flash={edit:function(){var p=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+c.url+"</label>",'<input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:160px;" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+c.upload+'" /> &nbsp;','<span class="ke-button-common ke-button-outer">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+c.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="keWidth" style="width:60px;">'+c.width+"</label>",'<input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="550" maxlength="4" /> ',"</div>",'<div class="ke-dialog-row">','<label for="keHeight" style="width:60px;">'+c.height+"</label>",'<input type="text" id="keHeight" class="ke-input-text ke-input-number" name="height" value="400" maxlength="4" /> ',"</div>","</div>"].join("");var r=k.createDialog({name:b,width:450,title:k.lang(b),body:p,yesBtn:{name:k.lang("yes"),click:function(z){var w=i.trim(n.val()),y=q.val(),v=s.val();if(w=="http://"||i.invalidUrl(w)){alert(k.lang("invalidUrl"));n[0].focus();return}if(!/^\d*$/.test(y)){alert(k.lang("invalidWidth"));q[0].focus();return}if(!/^\d*$/.test(v)){alert(k.lang("invalidHeight"));s[0].focus();return}var x=i.mediaImg(k.themesPath+"common/blank.gif",{src:w,type:i.mediaType(".swf"),width:y,height:v,quality:"high"});k.insertHtml(x).hideDialog().focus()}}}),l=r.div,n=i('[name="url"]',l),m=i('[name="viewServer"]',l),q=i('[name="width"]',l),s=i('[name="height"]',l);n.val("http://");if(e){var u=i.uploadbutton({button:i(".ke-upload-button",l)[0],fieldName:d,extraParams:g,url:i.addParam(f,"dir=flash"),afterUpload:function(w){r.hideLoading();if(w.error===0){var v=w.url;if(h){v=i.formatUrl(v,"absolute")}n.val(v);if(k.afterUpload){k.afterUpload.call(k,v,w,b)}alert(k.lang("uploadSuccess"))}else{alert(w.message)}},afterError:function(v){r.hideLoading();k.errorDialog(v)}});u.fileBox.change(function(v){r.showLoading(k.lang("uploadLoading"));u.submit()})}else{i(".ke-upload-button",l).hide()}if(j){m.click(function(v){k.loadPlugin("filemanager",function(){k.plugin.filemanagerDialog({viewType:"LIST",dirName:"flash",clickFn:function(w,x){if(k.dialogs.length>1){i('[name="url"]',l).val(w);if(k.afterSelectFile){k.afterSelectFile.call(k,w)}k.hideDialog()}}})})})}else{m.hide()}var o=k.plugin.getSelectedFlash();if(o){var t=i.mediaAttrs(o.attr("data-ke-tag"));n.val(t.src);q.val(i.removeUnit(o.css("width"))||t.width||0);s.val(i.removeUnit(o.css("height"))||t.height||0)}n[0].focus();n[0].select()},"delete":function(){k.plugin.getSelectedFlash().remove();k.addBookmark()}};k.clickToolbar(b,k.plugin.flash.edit)});KindEditor.plugin("image",function(j){var n=this,b="image",k=j.undef(n.allowImageUpload,true),l=j.undef(n.allowImageRemote,true),i=j.undef(n.formatUploadUrl,true),m=j.undef(n.allowFileManager,false),f=j.undef(n.uploadJson,n.basePath+"php/upload_json.php"),e=j.undef(n.imageTabIndex,0),h=n.pluginsPath+"image/images/",g=j.undef(n.extraFileUploadParams,{}),d=j.undef(n.filePostName,"imgFile"),o=j.undef(n.fillDescAfterUploadImage,false),c=n.lang(b+".");n.plugin.imageDialog=function(u){var P=u.imageUrl,y=j.undef(u.imageWidth,""),R=j.undef(u.imageHeight,""),K=j.undef(u.imageTitle,""),A=j.undef(u.imageAlign,""),q=j.undef(u.showRemote,true),r=j.undef(u.showLocal,true),v=j.undef(u.tabIndex,0),D=u.clickFn;var T="kindeditor_upload_iframe_"+new Date().getTime();var E=[];for(var I in g){E.push('<input type="hidden" name="'+I+'" value="'+g[I]+'" />')}var z=['<div style="padding:20px;">','<div class="tabs"></div>','<div class="tab1" style="display:none;">','<div class="ke-dialog-row">','<label for="remoteUrl" style="width:60px;">'+c.remoteUrl+"</label>",'<input type="text" id="remoteUrl" class="ke-input-text" name="url" value="" style="width:200px;" /> &nbsp;','<span class="ke-button-common ke-button-outer">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+c.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="remoteWidth" style="width:60px;">'+c.size+"</label>",c.width+' <input type="text" id="remoteWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> ',c.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> ','<img class="ke-refresh-btn" src="'+h+'refresh.png" width="16" height="16" alt="" style="cursor:pointer;" title="'+c.resetSize+'" />',"</div>",'<div class="ke-dialog-row">','<label style="width:60px;">'+c.align+"</label>",'<input type="radio" name="align" class="ke-inline-block" value="" checked="checked" /> <img name="defaultImg" src="'+h+'align_top.gif" width="23" height="25" alt="" />',' <input type="radio" name="align" class="ke-inline-block" value="left" /> <img name="leftImg" src="'+h+'align_left.gif" width="23" height="25" alt="" />',' <input type="radio" name="align" class="ke-inline-block" value="right" /> <img name="rightImg" src="'+h+'align_right.gif" width="23" height="25" alt="" />',"</div>",'<div class="ke-dialog-row">','<label for="remoteTitle" style="width:60px;">'+c.imgTitle+"</label>",'<input type="text" id="remoteTitle" class="ke-input-text" name="title" value="" style="width:200px;" />',"</div>","</div>",'<div class="tab2" style="display:none;">','<iframe name="'+T+'" style="display:none;"></iframe>','<form class="ke-upload-area ke-form" method="post" enctype="multipart/form-data" target="'+T+'" action="'+j.addParam(f,"dir=image")+'">','<div class="ke-dialog-row">',E.join(""),'<label style="width:60px;">'+c.localUrl+"</label>",'<input type="text" name="localUrl" class="ke-input-text" tabindex="-1" style="width:200px;" readonly="true" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+c.upload+'" />',"</div>","</form>","</div>","</div>"].join("");var s=r||m?450:400,x=r&&q?300:250;var L=n.createDialog({name:b,width:s,height:x,title:n.lang(b),body:z,yesBtn:{name:n.lang("yes"),click:function(X){if(L.isLoading){return}if(r&&q&&O&&O.selectedIndex===1||!q){if(G.fileBox.val()==""){alert(n.lang("pleaseSelectFile"));return}L.showLoading(n.lang("uploadLoading"));G.submit();w.val("");return}var V=j.trim(B.val()),W=t.val(),U=S.val(),Y=M.val(),Z="";p.each(function(){if(this.checked){Z=this.value;return false}});if(V=="http://"||j.invalidUrl(V)){alert(n.lang("invalidUrl"));B[0].focus();return}if(!/^\d*$/.test(W)){alert(n.lang("invalidWidth"));t[0].focus();return}if(!/^\d*$/.test(U)){alert(n.lang("invalidHeight"));S[0].focus();return}D.call(n,V,Y,W,U,0,Z)}},beforeRemove:function(){F.unbind();t.unbind();S.unbind();J.unbind()}}),C=L.div;var B=j('[name="url"]',C),w=j('[name="localUrl"]',C),F=j('[name="viewServer"]',C),t=j('.tab1 [name="width"]',C),S=j('.tab1 [name="height"]',C),J=j(".ke-refresh-btn",C),M=j('.tab1 [name="title"]',C),p=j('.tab1 [name="align"]',C);var O;if(q&&r){O=j.tabs({src:j(".tabs",C),afterSelect:function(U){}});O.add({title:c.remoteImage,panel:j(".tab1",C)});O.add({title:c.localImage,panel:j(".tab2",C)});O.select(v)}else{if(q){j(".tab1",C).show()}else{if(r){j(".tab2",C).show()}}}var G=j.uploadbutton({button:j(".ke-upload-button",C)[0],fieldName:d,form:j(".ke-form",C),target:T,width:60,afterUpload:function(V){L.hideLoading();if(V.error===0){var U=V.url;if(i){U=j.formatUrl(U,"absolute")}if(n.afterUpload){n.afterUpload.call(n,U,V,b)}if(!o){D.call(n,U,V.title,V.width,V.height,V.border,V.align)}else{j(".ke-dialog-row #remoteUrl",C).val(U);j(".ke-tabs-li",C)[0].click();j(".ke-refresh-btn",C).click()}}else{alert(V.message)}},afterError:function(U){L.hideLoading();n.errorDialog(U)}});G.fileBox.change(function(U){w.val(G.fileBox.val())});if(m){F.click(function(U){n.loadPlugin("filemanager",function(){n.plugin.filemanagerDialog({viewType:"VIEW",dirName:"image",clickFn:function(V,W){if(n.dialogs.length>1){j('[name="url"]',C).val(V);if(n.afterSelectFile){n.afterSelectFile.call(n,V)}n.hideDialog()}}})})})}else{F.hide()}var Q=0,H=0;function N(V,U){t.val(V);S.val(U);Q=V;H=U}J.click(function(V){var U=j('<img src="'+B.val()+'" />',document).css({position:"absolute",visibility:"hidden",top:0,left:"-1000px"});U.bind("load",function(){N(U.width(),U.height());U.remove()});j(document.body).append(U)});t.change(function(U){if(Q>0){S.val(Math.round(H/Q*parseInt(this.value,10)))}});S.change(function(U){if(H>0){t.val(Math.round(Q/H*parseInt(this.value,10)))}});B.val(u.imageUrl);N(u.imageWidth,u.imageHeight);M.val(u.imageTitle);p.each(function(){if(this.value===u.imageAlign){this.checked=true;return false}});if(q&&v===0){B[0].focus();B[0].select()}return L};n.plugin.image={edit:function(){var p=n.plugin.getSelectedImage();n.plugin.imageDialog({imageUrl:p?p.attr("data-ke-src"):"http://",imageWidth:p?p.width():"",imageHeight:p?p.height():"",imageTitle:p?p.attr("title"):"",imageAlign:p?p.attr("align"):"",showRemote:l,showLocal:k,tabIndex:p?0:e,clickFn:function(s,u,t,q,r,v){if(p){p.attr("src",s);p.attr("data-ke-src",s);p.attr("width",t);p.attr("height",q);p.attr("title",u);p.attr("align",v);p.attr("alt",u)}else{n.exec("insertimage",s,u,t,q,r,v)}setTimeout(function(){n.hideDialog().focus()},0)}})},"delete":function(){var p=n.plugin.getSelectedImage();if(p.parent().name=="a"){p=p.parent()}p.remove();n.addBookmark()}};n.clickToolbar(b,n.plugin.image.edit)});KindEditor.plugin("insertfile",function(i){var k=this,b="insertfile",c=i.undef(k.allowFileUpload,true),j=i.undef(k.allowFileManager,false),h=i.undef(k.formatUploadUrl,true),f=i.undef(k.uploadJson,k.basePath+"php/upload_json.php"),g=i.undef(k.extraFileUploadParams,{}),e=i.undef(k.filePostName,"imgFile"),d=k.lang(b+".");k.plugin.fileDialog=function(v){var t=i.undef(v.fileUrl,"http://"),p=i.undef(v.fileTitle,""),l=v.clickFn;var q=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+d.url+"</label>",'<input type="text" id="keUrl" name="url" class="ke-input-text" style="width:160px;" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+d.upload+'" /> &nbsp;','<span class="ke-button-common ke-button-outer">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+d.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="keTitle" style="width:60px;">'+d.title+"</label>",'<input type="text" id="keTitle" class="ke-input-text" name="title" value="" style="width:160px;" /></div>',"</div>","</form>","</div>"].join("");var s=k.createDialog({name:b,width:450,title:k.lang(b),body:q,yesBtn:{name:k.lang("yes"),click:function(x){var w=i.trim(o.val()),y=r.val();if(w=="http://"||i.invalidUrl(w)){alert(k.lang("invalidUrl"));o[0].focus();return}if(i.trim(y)===""){y=w}l.call(k,w,y)}}}),m=s.div;var o=i('[name="url"]',m),n=i('[name="viewServer"]',m),r=i('[name="title"]',m);if(c){var u=i.uploadbutton({button:i(".ke-upload-button",m)[0],fieldName:e,url:i.addParam(f,"dir=file"),extraParams:g,afterUpload:function(x){s.hideLoading();if(x.error===0){var w=x.url;if(h){w=i.formatUrl(w,"absolute")}o.val(w);if(k.afterUpload){k.afterUpload.call(k,w,x,b)}alert(k.lang("uploadSuccess"))}else{alert(x.message)}},afterError:function(w){s.hideLoading();k.errorDialog(w)}});u.fileBox.change(function(w){s.showLoading(k.lang("uploadLoading"));u.submit()})}else{i(".ke-upload-button",m).hide()}if(j){n.click(function(w){k.loadPlugin("filemanager",function(){k.plugin.filemanagerDialog({viewType:"LIST",dirName:"file",clickFn:function(x,y){if(k.dialogs.length>1){i('[name="url"]',m).val(x);if(k.afterSelectFile){k.afterSelectFile.call(k,x)}k.hideDialog()}}})})})}else{n.hide()}o.val(t);r.val(p);o[0].focus();o[0].select()};k.clickToolbar(b,function(){k.plugin.fileDialog({clickFn:function(l,n){var m='<a class="ke-insertfile" href="'+l+'" data-ke-src="'+l+'" target="_blank">'+n+"</a>";k.insertHtml(m).hideDialog().focus()}})})});KindEditor.plugin("lineheight",function(b){var c=this,d="lineheight",e=c.lang(d+".");c.clickToolbar(d,function(){var g="",f=c.cmd.commonNode({"*":".line-height"});if(f){g=f.css("line-height")}var h=c.createMenu({name:d,width:150});b.each(e.lineHeight,function(j,k){b.each(k,function(i,l){h.addItem({title:l,checked:g===i,click:function(){c.cmd.toggle('<span style="line-height:'+i+';"></span>',{span:".line-height="+i});c.updateState();c.addBookmark();c.hideMenu()}})})})})});KindEditor.plugin("link",function(b){var c=this,d="link";c.plugin.link={edit:function(){var j=c.lang(d+"."),g='<div style="padding:20px;"><div class="ke-dialog-row"><label for="keUrl" style="width:60px;">'+j.url+'</label><input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:260px;" /></div><div class="ke-dialog-row""><label for="keType" style="width:60px;">'+j.linkType+'</label><select id="keType" name="type"></select></div></div>',f=c.createDialog({name:d,width:450,title:c.lang(d),body:g,yesBtn:{name:c.lang("yes"),click:function(m){var l=b.trim(h.val());if(l=="http://"||b.invalidUrl(l)){alert(c.lang("invalidUrl"));h[0].focus();return}c.exec("createlink",l,i.val()).hideDialog().focus()}}}),k=f.div,h=b('input[name="url"]',k),i=b('select[name="type"]',k);h.val("http://");i[0].options[0]=new Option(j.newWindow,"_blank");i[0].options[1]=new Option(j.selfWindow,"");c.cmd.selection();var e=c.plugin.getSelectedLink();if(e){c.cmd.range.selectNode(e[0]);c.cmd.select();h.val(e.attr("data-ke-src"));i.val(e.attr("target"))}h[0].focus();h[0].select()},"delete":function(){c.exec("unlink",null)}};c.clickToolbar(d,c.plugin.link.edit)});KindEditor.plugin("media",function(h){var j=this,b="media",c=j.lang(b+"."),k=h.undef(j.allowMediaUpload,true),i=h.undef(j.allowFileManager,false),g=h.undef(j.formatUploadUrl,true),f=h.undef(j.extraFileUploadParams,{}),d=h.undef(j.filePostName,"imgFile"),e=h.undef(j.uploadJson,j.basePath+"php/upload_json.php");j.plugin.media={edit:function(){var q=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+c.url+"</label>",'<input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:160px;" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+c.upload+'" /> &nbsp;','<span class="ke-button-common ke-button-outer">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+c.viewServer+'" />',"</span>","</div>",'<div class="ke-dialog-row">','<label for="keWidth" style="width:60px;">'+c.width+"</label>",'<input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="550" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keHeight" style="width:60px;">'+c.height+"</label>",'<input type="text" id="keHeight" class="ke-input-text ke-input-number" name="height" value="400" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keAutostart">'+c.autostart+"</label>",'<input type="checkbox" id="keAutostart" name="autostart" value="" /> ',"</div>","</div>"].join("");var s=j.createDialog({name:b,width:450,height:230,title:j.lang(b),body:q,yesBtn:{name:j.lang("yes"),click:function(A){var x=h.trim(n.val()),z=r.val(),w=t.val();if(x=="http://"||h.invalidUrl(x)){alert(j.lang("invalidUrl"));n[0].focus();return}if(!/^\d*$/.test(z)){alert(j.lang("invalidWidth"));r[0].focus();return}if(!/^\d*$/.test(w)){alert(j.lang("invalidHeight"));t[0].focus();return}var y=h.mediaImg(j.themesPath+"common/blank.gif",{src:x,type:h.mediaType(x),width:z,height:w,autostart:o[0].checked?"true":"false",loop:"true"});j.insertHtml(y).hideDialog().focus()}}}),l=s.div,n=h('[name="url"]',l),m=h('[name="viewServer"]',l),r=h('[name="width"]',l),t=h('[name="height"]',l),o=h('[name="autostart"]',l);n.val("http://");if(k){var v=h.uploadbutton({button:h(".ke-upload-button",l)[0],fieldName:d,extraParams:f,url:h.addParam(e,"dir=media"),afterUpload:function(x){s.hideLoading();if(x.error===0){var w=x.url;if(g){w=h.formatUrl(w,"absolute")}n.val(w);if(j.afterUpload){j.afterUpload.call(j,w,x,b)}alert(j.lang("uploadSuccess"))}else{alert(x.message)}},afterError:function(w){s.hideLoading();j.errorDialog(w)}});v.fileBox.change(function(w){s.showLoading(j.lang("uploadLoading"));v.submit()})}else{h(".ke-upload-button",l).hide()}if(i){m.click(function(w){j.loadPlugin("filemanager",function(){j.plugin.filemanagerDialog({viewType:"LIST",dirName:"media",clickFn:function(x,y){if(j.dialogs.length>1){h('[name="url"]',l).val(x);if(j.afterSelectFile){j.afterSelectFile.call(j,x)}j.hideDialog()}}})})})}else{m.hide()}var p=j.plugin.getSelectedMedia();if(p){var u=h.mediaAttrs(p.attr("data-ke-tag"));n.val(u.src);r.val(h.removeUnit(p.css("width"))||u.width||0);t.val(h.removeUnit(p.css("height"))||u.height||0);o[0].checked=(u.autostart==="true")}n[0].focus();n[0].select()},"delete":function(){j.plugin.getSelectedMedia().remove();j.addBookmark()}};j.clickToolbar(b,j.plugin.media.edit)});(function(b){function c(d){this.init(d)}b.extend(c,{init:function(f){var e=this;f.afterError=f.afterError||function(h){alert(h)};e.options=f;e.progressbars={};e.div=b(f.container).html(['<div class="ke-swfupload">','<div class="ke-swfupload-top">','<div class="ke-inline-block ke-swfupload-button">','<input type="button" value="Browse" />',"</div>",'<div class="ke-inline-block ke-swfupload-desc">'+f.uploadDesc+"</div>",'<span class="ke-button-common ke-button-outer ke-swfupload-startupload">','<input type="button" class="ke-button-common ke-button" value="'+f.startButtonValue+'" />',"</span>","</div>",'<div class="ke-swfupload-body"></div>',"</div>"].join(""));e.bodyDiv=b(".ke-swfupload-body",e.div);function d(h,i){b(".ke-status > div",h).hide();b(".ke-message",h).addClass("ke-error").show().html(b.escape(i))}var g={debug:false,upload_url:f.uploadUrl,flash_url:f.flashUrl,file_post_name:f.filePostName,button_placeholder:b(".ke-swfupload-button > input",e.div)[0],button_image_url:f.buttonImageUrl,button_width:f.buttonWidth,button_height:f.buttonHeight,button_cursor:SWFUpload.CURSOR.HAND,file_types:f.fileTypes,file_types_description:f.fileTypesDesc,file_upload_limit:f.fileUploadLimit,file_size_limit:f.fileSizeLimit,post_params:f.postParams,file_queued_handler:function(h){h.url=e.options.fileIconUrl;e.appendFile(h)},file_queue_error_handler:function(h,k,j){var i="";switch(k){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:i=f.queueLimitExceeded;break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:i=f.fileExceedsSizeLimit;break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:i=f.zeroByteFile;break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:i=f.invalidFiletype;break;default:i=f.unknownError;break}b.DEBUG&&alert(i)},upload_start_handler:function(i){var h=this;var j=b('div[data-id="'+i.id+'"]',h.bodyDiv);b(".ke-status > div",j).hide();b(".ke-progressbar",j).show()},upload_progress_handler:function(i,l,k){var j=Math.round(l*100/k);var h=e.progressbars[i.id];h.bar.css("width",Math.round(j*80/100)+"px");h.percent.html(j+"%")},upload_error_handler:function(h,k,j){if(h&&h.filestatus==SWFUpload.FILE_STATUS.ERROR){var i=b('div[data-id="'+h.id+'"]',e.bodyDiv).eq(0);d(i,e.options.errorMessage)}},upload_success_handler:function(i,h){var j=b('div[data-id="'+i.id+'"]',e.bodyDiv).eq(0);var k={};try{k=b.json(h)}catch(l){e.options.afterError.call(this,"<!doctype html><html>"+h+"</html>")}if(k.error!==0){d(j,b.DEBUG?k.message:e.options.errorMessage);return}i.url=k.url;b(".ke-img",j).attr("src",i.url).attr("data-status",i.filestatus).data("data",k);b(".ke-status > div",j).hide()}};e.swfu=new SWFUpload(g);b(".ke-swfupload-startupload input",e.div).click(function(){e.swfu.startUpload()})},getUrlList:function(){var d=[];b(".ke-img",self.bodyDiv).each(function(){var f=b(this);var e=f.attr("data-status");if(e==SWFUpload.FILE_STATUS.COMPLETE){d.push(f.data("data"))}});return d},removeFile:function(d){var e=this;e.swfu.cancelUpload(d);var f=b('div[data-id="'+d+'"]',e.bodyDiv);b(".ke-photo",f).unbind();b(".ke-delete",f).unbind();f.remove()},removeFiles:function(){var d=this;b(".ke-item",d.bodyDiv).each(function(){d.removeFile(b(this).attr("data-id"))})},appendFile:function(f){var e=this;var g=b('<div class="ke-inline-block ke-item" data-id="'+f.id+'"></div>');e.bodyDiv.append(g);var i=b('<div class="ke-inline-block ke-photo"></div>').mouseover(function(j){b(this).addClass("ke-on")}).mouseout(function(j){b(this).removeClass("ke-on")});g.append(i);var d=b('<img src="'+f.url+'" class="ke-img" data-status="'+f.filestatus+'" width="80" height="80" alt="'+f.name+'" />');i.append(d);b('<span class="ke-delete"></span>').appendTo(i).click(function(){e.removeFile(f.id)});var h=b('<div class="ke-status"></div>').appendTo(i);b(['<div class="ke-progressbar">','<div class="ke-progressbar-bar"><div class="ke-progressbar-bar-inner"></div></div>','<div class="ke-progressbar-percent">0%</div></div>'].join("")).hide().appendTo(h);b('<div class="ke-message">'+e.options.pendingMessage+"</div>").appendTo(h);g.append('<div class="ke-name">'+f.name+"</div>");e.progressbars[f.id]={bar:b(".ke-progressbar-bar-inner",i),percent:b(".ke-progressbar-percent",i)}},remove:function(){this.removeFiles();this.swfu.destroy();this.div.html("")}});b.swfupload=function(e,d){return new c(e,d)}})(KindEditor);KindEditor.plugin("multiimage",function(i){var l=this,b="multiimage",h=i.undef(l.formatUploadUrl,true),e=i.undef(l.uploadJson,l.basePath+"php/upload_json.php"),g=l.pluginsPath+"multiimage/images/",f=i.undef(l.imageSizeLimit,"1MB"),j=i.undef(l.imageFileTypes,"*.jpg;*.gif;*.png"),k=i.undef(l.imageUploadLimit,20),d=i.undef(l.filePostName,"imgFile"),c=l.lang(b+".");l.plugin.multiImageDialog=function(n){var q=n.clickFn,s=i.tmpl(c.uploadDesc,{uploadLimit:k,sizeLimit:f});var p=['<div style="padding:20px;">','<div class="swfupload">',"</div>","</div>"].join("");var o=l.createDialog({name:b,width:650,height:510,title:l.lang(b),body:p,previewBtn:{name:c.insertAll,click:function(t){q.call(l,m.getUrlList())}},yesBtn:{name:c.clearAll,click:function(t){m.removeFiles()}},beforeRemove:function(){if(!i.IE||i.V<=8){m.remove()}}}),r=o.div;var m=i.swfupload({container:i(".swfupload",r),buttonImageUrl:g+(l.langType=="zh-CN"?"select-files-zh-CN.png":"select-files-en.png"),buttonWidth:l.langType=="zh-CN"?72:88,buttonHeight:23,fileIconUrl:g+"image.png",uploadDesc:s,startButtonValue:c.startUpload,uploadUrl:i.addParam(e,"dir=image"),flashUrl:g+"swfupload.swf",filePostName:d,fileTypes:"*.jpg;*.jpeg;*.gif;*.png;*.bmp",fileTypesDesc:"Image Files",fileUploadLimit:k,fileSizeLimit:f,postParams:i.undef(l.extraFileUploadParams,{}),queueLimitExceeded:c.queueLimitExceeded,fileExceedsSizeLimit:c.fileExceedsSizeLimit,zeroByteFile:c.zeroByteFile,invalidFiletype:c.invalidFiletype,unknownError:c.unknownError,pendingMessage:c.pending,errorMessage:c.uploadError,afterError:function(t){l.errorDialog(t)}});return o};l.clickToolbar(b,function(){l.plugin.multiImageDialog({clickFn:function(m){if(m.length===0){return}i.each(m,function(n,o){if(l.afterUpload){l.afterUpload.call(l,o.url,o,"multiimage")}l.exec("insertimage",o.url,o.title,o.width,o.height,o.border,o.align)});setTimeout(function(){l.hideDialog().focus()},0)}})})});(function(){window.SWFUpload=function(settings){this.initSWFUpload(settings)};SWFUpload.prototype.initSWFUpload=function(settings){try{this.customSettings={};this.settings=settings;this.eventQueue=[];this.movieName="KindEditor_SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(ex){delete SWFUpload.instances[this.movieName];throw ex}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(url){if(typeof(url)!=="string"||url.match(/^https?:\/\//i)||url.match(/^\//)){return url}var currentURL=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var indexSlash=window.location.pathname.lastIndexOf("/");var path;if(indexSlash<=0){path="/"}else{path=window.location.pathname.substr(0,indexSlash)+"/"}return path+url};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(settingName,defaultValue){this.settings[settingName]=(this.settings[settingName]==undefined)?defaultValue:this.settings[settingName]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var targetElement,tempParent;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}targetElement=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(targetElement==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}tempParent=document.createElement("div");tempParent.innerHTML=this.getFlashHTML();targetElement.parentNode.replaceChild(tempParent.firstChild,targetElement);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){var classid="";if(KindEditor.IE&&KindEditor.V>8){classid=' classid = "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"'}return['<object id="',this.movieName,'"'+classid+' type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var paramString=this.buildParamString();var httpSuccessString=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(httpSuccessString),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(paramString),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var postParams=this.settings.post_params;var paramStringPairs=[];if(typeof(postParams)==="object"){for(var name in postParams){if(postParams.hasOwnProperty(name)){paramStringPairs.push(encodeURIComponent(name.toString())+"="+encodeURIComponent(postParams[name].toString()))}}}return paramStringPairs.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var movieElement=null;movieElement=this.getMovieElement();if(movieElement&&typeof(movieElement.CallFunction)==="unknown"){for(var i in movieElement){try{if(typeof(movieElement[i])==="function"){movieElement[i]=null}}catch(ex1){}}try{movieElement.parentNode.removeChild(movieElement)}catch(ex){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(ex2){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(name,value,default_value){if(value==undefined){return(this.settings[name]=default_value)}else{return(this.settings[name]=value)}};SWFUpload.prototype.getSetting=function(name){if(this.settings[name]!=undefined){return this.settings[name]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(fileID){this.callFlash("StartUpload",[fileID])};SWFUpload.prototype.cancelUpload=function(fileID,triggerErrorEvent){if(triggerErrorEvent!==false){triggerErrorEvent=true}this.callFlash("CancelUpload",[fileID,triggerErrorEvent])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(statsObject){this.callFlash("SetStats",[statsObject])};SWFUpload.prototype.getFile=function(fileID){if(typeof(fileID)==="number"){return this.callFlash("GetFileByIndex",[fileID])}else{return this.callFlash("GetFile",[fileID])}};SWFUpload.prototype.addFileParam=function(fileID,name,value){return this.callFlash("AddFileParam",[fileID,name,value])};SWFUpload.prototype.removeFileParam=function(fileID,name){this.callFlash("RemoveFileParam",[fileID,name])};SWFUpload.prototype.setUploadURL=function(url){this.settings.upload_url=url.toString();this.callFlash("SetUploadURL",[url])};SWFUpload.prototype.setPostParams=function(paramsObject){this.settings.post_params=paramsObject;this.callFlash("SetPostParams",[paramsObject])};SWFUpload.prototype.addPostParam=function(name,value){this.settings.post_params[name]=value;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(name){delete this.settings.post_params[name];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(types,description){this.settings.file_types=types;this.settings.file_types_description=description;this.callFlash("SetFileTypes",[types,description])};SWFUpload.prototype.setFileSizeLimit=function(fileSizeLimit){this.settings.file_size_limit=fileSizeLimit;this.callFlash("SetFileSizeLimit",[fileSizeLimit])};SWFUpload.prototype.setFileUploadLimit=function(fileUploadLimit){this.settings.file_upload_limit=fileUploadLimit;this.callFlash("SetFileUploadLimit",[fileUploadLimit])};SWFUpload.prototype.setFileQueueLimit=function(fileQueueLimit){this.settings.file_queue_limit=fileQueueLimit;this.callFlash("SetFileQueueLimit",[fileQueueLimit])};SWFUpload.prototype.setFilePostName=function(filePostName){this.settings.file_post_name=filePostName;this.callFlash("SetFilePostName",[filePostName])};SWFUpload.prototype.setUseQueryString=function(useQueryString){this.settings.use_query_string=useQueryString;this.callFlash("SetUseQueryString",[useQueryString])};SWFUpload.prototype.setRequeueOnError=function(requeueOnError){this.settings.requeue_on_error=requeueOnError;this.callFlash("SetRequeueOnError",[requeueOnError])};SWFUpload.prototype.setHTTPSuccess=function(http_status_codes){if(typeof http_status_codes==="string"){http_status_codes=http_status_codes.replace(" ","").split(",")}this.settings.http_success=http_status_codes;this.callFlash("SetHTTPSuccess",[http_status_codes])};SWFUpload.prototype.setAssumeSuccessTimeout=function(timeout_seconds){this.settings.assume_success_timeout=timeout_seconds;this.callFlash("SetAssumeSuccessTimeout",[timeout_seconds])};SWFUpload.prototype.setDebugEnabled=function(debugEnabled){this.settings.debug_enabled=debugEnabled;this.callFlash("SetDebugEnabled",[debugEnabled])};SWFUpload.prototype.setButtonImageURL=function(buttonImageURL){if(buttonImageURL==undefined){buttonImageURL=""}this.settings.button_image_url=buttonImageURL;this.callFlash("SetButtonImageURL",[buttonImageURL])};SWFUpload.prototype.setButtonDimensions=function(width,height){this.settings.button_width=width;this.settings.button_height=height;var movie=this.getMovieElement();if(movie!=undefined){movie.style.width=width+"px";movie.style.height=height+"px"}this.callFlash("SetButtonDimensions",[width,height])};SWFUpload.prototype.setButtonText=function(html){this.settings.button_text=html;this.callFlash("SetButtonText",[html])};SWFUpload.prototype.setButtonTextPadding=function(left,top){this.settings.button_text_top_padding=top;this.settings.button_text_left_padding=left;this.callFlash("SetButtonTextPadding",[left,top])};SWFUpload.prototype.setButtonTextStyle=function(css){this.settings.button_text_style=css;this.callFlash("SetButtonTextStyle",[css])};SWFUpload.prototype.setButtonDisabled=function(isDisabled){this.settings.button_disabled=isDisabled;this.callFlash("SetButtonDisabled",[isDisabled])};SWFUpload.prototype.setButtonAction=function(buttonAction){this.settings.button_action=buttonAction;this.callFlash("SetButtonAction",[buttonAction])};SWFUpload.prototype.setButtonCursor=function(cursor){this.settings.button_cursor=cursor;this.callFlash("SetButtonCursor",[cursor])};SWFUpload.prototype.queueEvent=function(handlerName,argumentArray){if(argumentArray==undefined){argumentArray=[]}else{if(!(argumentArray instanceof Array)){argumentArray=[argumentArray]}}var self=this;if(typeof this.settings[handlerName]==="function"){this.eventQueue.push(function(){this.settings[handlerName].apply(this,argumentArray)});setTimeout(function(){self.executeNextEvent()},0)}else{if(this.settings[handlerName]!==null){throw"Event handler "+handlerName+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var f=this.eventQueue?this.eventQueue.shift():null;if(typeof(f)==="function"){f.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(file){var reg=/[$]([0-9a-f]{4})/i;var unescapedPost={};var uk;if(file!=undefined){for(var k in file.post){if(file.post.hasOwnProperty(k)){uk=k;var match;while((match=reg.exec(uk))!==null){uk=uk.replace(match[0],String.fromCharCode(parseInt("0x"+match[1],16)))}unescapedPost[uk]=file.post[k]}}file.post=unescapedPost}return file};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(ex){return false}};SWFUpload.prototype.flashReady=function(){var movieElement=this.getMovieElement();if(!movieElement){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(movieElement);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(movieElement){try{if(this.movieElement&&typeof(movieElement.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var key in movieElement){try{if(typeof(movieElement[key])==="function"){movieElement[key]=null}}catch(ex){}}}}catch(ex1){}window.__flash__removeCallback=function(instance,name){try{if(instance){instance[name]=null}}catch(flashEx){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(file){file=this.unescapeFilePostParams(file);this.queueEvent("file_queued_handler",file)};SWFUpload.prototype.fileQueueError=function(file,errorCode,message){file=this.unescapeFilePostParams(file);this.queueEvent("file_queue_error_handler",[file,errorCode,message])};SWFUpload.prototype.fileDialogComplete=function(numFilesSelected,numFilesQueued,numFilesInQueue){this.queueEvent("file_dialog_complete_handler",[numFilesSelected,numFilesQueued,numFilesInQueue])};SWFUpload.prototype.uploadStart=function(file){file=this.unescapeFilePostParams(file);this.queueEvent("return_upload_start_handler",file)};SWFUpload.prototype.returnUploadStart=function(file){var returnValue;if(typeof this.settings.upload_start_handler==="function"){file=this.unescapeFilePostParams(file);returnValue=this.settings.upload_start_handler.call(this,file)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(returnValue===undefined){returnValue=true}returnValue=!!returnValue;this.callFlash("ReturnUploadStart",[returnValue])};SWFUpload.prototype.uploadProgress=function(file,bytesComplete,bytesTotal){file=this.unescapeFilePostParams(file);this.queueEvent("upload_progress_handler",[file,bytesComplete,bytesTotal])};SWFUpload.prototype.uploadError=function(file,errorCode,message){file=this.unescapeFilePostParams(file);this.queueEvent("upload_error_handler",[file,errorCode,message])};SWFUpload.prototype.uploadSuccess=function(file,serverData,responseReceived){file=this.unescapeFilePostParams(file);this.queueEvent("upload_success_handler",[file,serverData,responseReceived])};SWFUpload.prototype.uploadComplete=function(file){file=this.unescapeFilePostParams(file);this.queueEvent("upload_complete_handler",file)};SWFUpload.prototype.debug=function(message){this.queueEvent("debug_handler",message)};SWFUpload.prototype.debugMessage=function(message){if(this.settings.debug){var exceptionMessage,exceptionValues=[];if(typeof message==="object"&&typeof message.name==="string"&&typeof message.message==="string"){for(var key in message){if(message.hasOwnProperty(key)){exceptionValues.push(key+": "+message[key])}}exceptionMessage=exceptionValues.join("\n")||"";exceptionValues=exceptionMessage.split("\n");exceptionMessage="EXCEPTION: "+exceptionValues.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(exceptionMessage)}else{SWFUpload.Console.writeLine(message)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(message){var console,documentForm;try{console=document.getElementById("SWFUpload_Console");if(!console){documentForm=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(documentForm);console=document.createElement("textarea");console.id="SWFUpload_Console";console.style.fontFamily="monospace";console.setAttribute("wrap","off");console.wrap="off";console.style.overflow="auto";console.style.width="700px";console.style.height="350px";console.style.margin="5px";documentForm.appendChild(console)}console.value+=message+"\n";console.scrollTop=console.scrollHeight-console.clientHeight}catch(ex){alert("Exception: "+ex.name+" Message: "+ex.message)}}})();(function(){if(typeof(SWFUpload)==="function"){SWFUpload.queue={};SWFUpload.prototype.initSettings=(function(b){return function(){if(typeof(b)==="function"){b.call(this)}this.queueSettings={};this.queueSettings.queue_cancelled_flag=false;this.queueSettings.queue_upload_count=0;this.queueSettings.user_upload_complete_handler=this.settings.upload_complete_handler;this.queueSettings.user_upload_start_handler=this.settings.upload_start_handler;this.settings.upload_complete_handler=SWFUpload.queue.uploadCompleteHandler;this.settings.upload_start_handler=SWFUpload.queue.uploadStartHandler;this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}})(SWFUpload.prototype.initSettings);SWFUpload.prototype.startUpload=function(b){this.queueSettings.queue_cancelled_flag=false;this.callFlash("StartUpload",[b])};SWFUpload.prototype.cancelQueue=function(){this.queueSettings.queue_cancelled_flag=true;this.stopUpload();var b=this.getStats();while(b.files_queued>0){this.cancelUpload();b=this.getStats()}};SWFUpload.queue.uploadStartHandler=function(b){var c;if(typeof(this.queueSettings.user_upload_start_handler)==="function"){c=this.queueSettings.user_upload_start_handler.call(this,b)}c=(c===false)?false:true;this.queueSettings.queue_cancelled_flag=!c;return c};SWFUpload.queue.uploadCompleteHandler=function(c){var d=this.queueSettings.user_upload_complete_handler;var e;if(c.filestatus===SWFUpload.FILE_STATUS.COMPLETE){this.queueSettings.queue_upload_count++}if(typeof(d)==="function"){e=(d.call(this,c)===false)?false:true}else{if(c.filestatus===SWFUpload.FILE_STATUS.QUEUED){e=false}else{e=true}}if(e){var b=this.getStats();if(b.files_queued>0&&this.queueSettings.queue_cancelled_flag===false){this.startUpload()}else{if(this.queueSettings.queue_cancelled_flag===false){this.queueEvent("queue_complete_handler",[this.queueSettings.queue_upload_count]);this.queueSettings.queue_upload_count=0}else{this.queueSettings.queue_cancelled_flag=false;this.queueSettings.queue_upload_count=0}}}}}})();KindEditor.plugin("pagebreak",function(b){var c=this;var e="pagebreak";var d=b.undef(c.pagebreakHtml,'<hr style="page-break-after: always;" class="ke-pagebreak" />');c.clickToolbar(e,function(){var h=c.cmd,f=h.range;c.focus();var g=c.newlineTag=="br"||b.WEBKIT?"":'<span id="__kindeditor_tail_tag__"></span>';c.insertHtml(d+g);if(g!==""){var i=b("#__kindeditor_tail_tag__",c.edit.doc);f.selectNodeContents(i[0]);i.removeAttr("id");h.select()}})});KindEditor.plugin("plainpaste",function(b){var c=this,d="plainpaste";c.clickToolbar(d,function(){var h=c.lang(d+"."),g='<div style="padding:10px 20px;"><div style="margin-bottom:10px;">'+h.comment+'</div><textarea class="ke-textarea" style="width:408px;height:260px;"></textarea></div>',f=c.createDialog({name:d,width:450,title:c.lang(d),body:g,yesBtn:{name:c.lang("yes"),click:function(j){var i=e.val();i=b.escape(i);i=i.replace(/ {2}/g," &nbsp;");if(c.newlineTag=="p"){i=i.replace(/^/,"<p>").replace(/$/,"</p>").replace(/\n/g,"</p><p>")}else{i=i.replace(/\n/g,"<br />$&")}c.insertHtml(i).hideDialog().focus()}}}),e=b("textarea",f.div);e[0].focus()})});KindEditor.plugin("preview",function(b){var c=this,d="preview",e;c.clickToolbar(d,function(){var j=c.lang(d+"."),g='<div style="padding:10px 20px;"><iframe class="ke-textarea" frameborder="0" style="width:708px;height:400px;"></iframe></div>',f=c.createDialog({name:d,width:750,title:c.lang(d),body:g}),h=b("iframe",f.div),i=b.iframeDoc(h);i.open();i.write(c.fullHtml());i.close();b(i.body).css("background-color","#FFF");h[0].contentWindow.focus()})});KindEditor.plugin("quickformat",function(b){var c=this,e="quickformat",f=b.toMap("blockquote,center,div,h1,h2,h3,h4,h5,h6,p");function d(h){var g=h.first();while(g&&g.first()){g=g.first()}return g}c.clickToolbar(e,function(){c.focus();var m=c.edit.doc,h=c.cmd.range,n=b(m.body).first(),k,i=[],g=[],j=h.createBookmark(true);while(n){k=n.next();var l=d(n);if(!l||l.name!="img"){if(f[n.name]){n.html(n.html().replace(/^(\s|&nbsp;|)+/ig,""));n.css("text-indent","2em")}else{g.push(n)}if(!k||(f[k.name]||f[n.name]&&!f[k.name])){if(g.length>0){i.push(g)}g=[]}}n=k}b.each(i,function(p,o){var q=b('<p style="text-indent:2em;"></p>',m);o[0].before(q);b.each(o,function(r,s){q.append(s)})});h.moveToBookmark(j);c.addBookmark()})});KindEditor.plugin("table",function(f){var j=this,c="table",d=j.lang(c+"."),h="ke-zeroborder";function i(l,k){k=k.toUpperCase();l.css("background-color",k);l.css("color",k==="#000000"?"#FFFFFF":"#000000");l.html(k)}var g=[];function b(m,k){k.bind("click,mousedown",function(n){n.stopPropagation()});function l(){f.each(g,function(){this.remove()});g=[];f(document).unbind("click,mousedown",l);m.unbind("click,mousedown",l)}k.click(function(p){l();var o=f(this),q=o.pos();var n=f.colorpicker({x:q.x,y:q.y+o.height(),z:811214,selectedColor:f(this).html(),colors:j.colorTable,noColor:j.lang("noColor"),shadowMode:j.shadowMode,click:function(r){i(o,r);l()}});g.push(n);f(document).bind("click,mousedown",l);m.bind("click,mousedown",l)})}function e(o,p,l){var m=0;for(var n=0,k=p.cells.length;n<k;n++){if(p.cells[n]==l){break}m+=p.cells[n].rowSpan-1}return l.cellIndex-m}j.plugin.table={prop:function(u){var t=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keRows" style="width:90px;">'+d.cells+"</label>",d.rows+' <input type="text" id="keRows" class="ke-input-text ke-input-number" name="rows" value="" maxlength="4" /> &nbsp; ',d.cols+' <input type="text" class="ke-input-text ke-input-number" name="cols" value="" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keWidth" style="width:90px;">'+d.size+"</label>",d.width+' <input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> &nbsp; ','<select name="widthType">','<option value="%">'+d.percent+"</option>",'<option value="px">'+d.px+"</option>","</select> &nbsp; ",d.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> &nbsp; ','<select name="heightType">','<option value="%">'+d.percent+"</option>",'<option value="px">'+d.px+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="kePadding" style="width:90px;">'+d.space+"</label>",d.padding+' <input type="text" id="kePadding" class="ke-input-text ke-input-number" name="padding" value="" maxlength="4" /> &nbsp; ',d.spacing+' <input type="text" class="ke-input-text ke-input-number" name="spacing" value="" maxlength="4" />',"</div>",'<div class="ke-dialog-row">','<label for="keAlign" style="width:90px;">'+d.align+"</label>",'<select id="keAlign" name="align">','<option value="">'+d.alignDefault+"</option>",'<option value="left">'+d.alignLeft+"</option>",'<option value="center">'+d.alignCenter+"</option>",'<option value="right">'+d.alignRight+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keBorder" style="width:90px;">'+d.border+"</label>",d.borderWidth+' <input type="text" id="keBorder" class="ke-input-text ke-input-number" name="border" value="" maxlength="4" /> &nbsp; ',d.borderColor+' <span class="ke-inline-block ke-input-color"></span>',"</div>",'<div class="ke-dialog-row">','<label for="keBgColor" style="width:90px;">'+d.backgroundColor+"</label>",'<span class="ke-inline-block ke-input-color"></span>',"</div>","</div>"].join("");var q=j.cmd.range.createBookmark();var z=j.createDialog({name:c,width:500,title:j.lang(c),body:t,beforeRemove:function(){o.unbind()},yesBtn:{name:j.lang("yes"),click:function(O){var U=l.val(),Q=n.val(),F=m.val(),T=C.val(),J=v.val(),H=s.val(),S=x.val(),P=y.val(),N=k.val(),I=r.val(),G=f(o[0]).html()||"",R=f(o[1]).html()||"";if(U==0||!/^\d+$/.test(U)){alert(j.lang("invalidRows"));l[0].focus();return}if(Q==0||!/^\d+$/.test(Q)){alert(j.lang("invalidRows"));n[0].focus();return}if(!/^\d*$/.test(F)){alert(j.lang("invalidWidth"));m[0].focus();return}if(!/^\d*$/.test(T)){alert(j.lang("invalidHeight"));C[0].focus();return}if(!/^\d*$/.test(S)){alert(j.lang("invalidPadding"));x[0].focus();return}if(!/^\d*$/.test(P)){alert(j.lang("invalidSpacing"));y[0].focus();return}if(!/^\d*$/.test(I)){alert(j.lang("invalidBorder"));r[0].focus();return}if(B){if(F!==""){B.width(F+J)}else{B.css("width","")}if(B[0].width!==undefined){B.removeAttr("width")}if(T!==""){B.height(T+H)}else{B.css("height","")}if(B[0].height!==undefined){B.removeAttr("height")}B.css("background-color",R);if(B[0].bgColor!==undefined){B.removeAttr("bgColor")}if(S!==""){B[0].cellPadding=S}else{B.removeAttr("cellPadding")}if(P!==""){B[0].cellSpacing=P}else{B.removeAttr("cellSpacing")}if(N!==""){B[0].align=N}else{B.removeAttr("align")}if(I!==""){B.attr("border",I)}else{B.removeAttr("border")}if(I===""||I==="0"){B.addClass(h)}else{B.removeClass(h)}if(G!==""){B.attr("borderColor",G)}else{B.removeAttr("borderColor")}j.hideDialog().focus();j.cmd.range.moveToBookmark(q);j.cmd.select();j.addBookmark();return}var E="";if(F!==""){E+="width:"+F+J+";"}if(T!==""){E+="height:"+T+H+";"}if(R!==""){E+="background-color:"+R+";"}var M="<table";if(E!==""){M+=' style="'+E+'"'}if(S!==""){M+=' cellpadding="'+S+'"'}if(P!==""){M+=' cellspacing="'+P+'"'}if(N!==""){M+=' align="'+N+'"'}if(I!==""){M+=' border="'+I+'"'}if(I===""||I==="0"){M+=' class="'+h+'"'}if(G!==""){M+=' bordercolor="'+G+'"'}M+=">";for(var L=0;L<U;L++){M+="<tr>";for(var K=0;K<Q;K++){M+="<td>"+(f.IE?"&nbsp;":"<br />")+"</td>"}M+="</tr>"}M+="</table>";if(!f.IE){M+="<br />"}j.insertHtml(M);j.select().hideDialog().focus();j.addBookmark()}}}),w=z.div,l=f('[name="rows"]',w).val(3),n=f('[name="cols"]',w).val(2),m=f('[name="width"]',w).val(100),C=f('[name="height"]',w),v=f('[name="widthType"]',w),s=f('[name="heightType"]',w),x=f('[name="padding"]',w).val(2),y=f('[name="spacing"]',w).val(0),k=f('[name="align"]',w),r=f('[name="border"]',w).val(1),o=f(".ke-input-color",w);b(w,o.eq(0));b(w,o.eq(1));i(o.eq(0),"#000000");i(o.eq(1),"");l[0].focus();l[0].select();var B;if(u){return}B=j.plugin.getSelectedTable();if(B){l.val(B[0].rows.length);n.val(B[0].rows.length>0?B[0].rows[0].cells.length:0);l.attr("disabled",true);n.attr("disabled",true);var p,A=B[0].style.width||B[0].width,D=B[0].style.height||B[0].height;if(A!==undefined&&(p=/^(\d+)((?:px|%)*)$/.exec(A))){m.val(p[1]);v.val(p[2])}else{m.val("")}if(D!==undefined&&(p=/^(\d+)((?:px|%)*)$/.exec(D))){C.val(p[1]);s.val(p[2])}x.val(B[0].cellPadding||"");y.val(B[0].cellSpacing||"");k.val(B[0].align||"");r.val(B[0].border===undefined?"":B[0].border);i(o.eq(0),f.toHex(B.attr("borderColor")||""));i(o.eq(1),f.toHex(B[0].style.backgroundColor||B[0].bgColor||""));m[0].focus();m[0].select()}},cellprop:function(){var t=['<div style="padding:20px;">','<div class="ke-dialog-row">','<label for="keWidth" style="width:90px;">'+d.size+"</label>",d.width+' <input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> &nbsp; ','<select name="widthType">','<option value="%">'+d.percent+"</option>",'<option value="px">'+d.px+"</option>","</select> &nbsp; ",d.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> &nbsp; ','<select name="heightType">','<option value="%">'+d.percent+"</option>",'<option value="px">'+d.px+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keAlign" style="width:90px;">'+d.align+"</label>",d.textAlign+' <select id="keAlign" name="textAlign">','<option value="">'+d.alignDefault+"</option>",'<option value="left">'+d.alignLeft+"</option>",'<option value="center">'+d.alignCenter+"</option>",'<option value="right">'+d.alignRight+"</option>","</select> ",d.verticalAlign+' <select name="verticalAlign">','<option value="">'+d.alignDefault+"</option>",'<option value="top">'+d.alignTop+"</option>",'<option value="middle">'+d.alignMiddle+"</option>",'<option value="bottom">'+d.alignBottom+"</option>",'<option value="baseline">'+d.alignBaseline+"</option>","</select>","</div>",'<div class="ke-dialog-row">','<label for="keBorder" style="width:90px;">'+d.border+"</label>",d.borderWidth+' <input type="text" id="keBorder" class="ke-input-text ke-input-number" name="border" value="" maxlength="4" /> &nbsp; ',d.borderColor+' <span class="ke-inline-block ke-input-color"></span>',"</div>",'<div class="ke-dialog-row">','<label for="keBgColor" style="width:90px;">'+d.backgroundColor+"</label>",'<span class="ke-inline-block ke-input-color"></span>',"</div>","</div>"].join("");var p=j.cmd.range.createBookmark();var B=j.createDialog({name:c,width:500,title:j.lang("tablecell"),body:t,beforeRemove:function(){n.unbind()},yesBtn:{name:j.lang("yes"),click:function(K){var D=m.val(),O=C.val(),J=u.val(),H=s.val(),N=y.val(),L=A.val(),E=o.val(),G=w.val(),I=r.val(),F=f(n[0]).html()||"",M=f(n[1]).html()||"";if(!/^\d*$/.test(D)){alert(j.lang("invalidWidth"));m[0].focus();return}if(!/^\d*$/.test(O)){alert(j.lang("invalidHeight"));C[0].focus();return}if(!/^\d*$/.test(I)){alert(j.lang("invalidBorder"));r[0].focus();return}l.css({width:D!==""?(D+J):"",height:O!==""?(O+H):"","background-color":M,"text-align":E,"vertical-align":G,"border-width":I,"border-style":I!==""?"solid":"","border-color":F});j.hideDialog().focus();j.cmd.range.moveToBookmark(p);j.cmd.select();j.addBookmark()}}}),v=B.div,m=f('[name="width"]',v).val(100),C=f('[name="height"]',v),u=f('[name="widthType"]',v),s=f('[name="heightType"]',v),y=f('[name="padding"]',v).val(2),A=f('[name="spacing"]',v).val(0),o=f('[name="textAlign"]',v),w=f('[name="verticalAlign"]',v),r=f('[name="border"]',v).val(1),n=f(".ke-input-color",v);b(v,n.eq(0));b(v,n.eq(1));i(n.eq(0),"#000000");i(n.eq(1),"");m[0].focus();m[0].select();var l=j.plugin.getSelectedCell();var q,z=l[0].style.width||l[0].width||"",k=l[0].style.height||l[0].height||"";if((q=/^(\d+)((?:px|%)*)$/.exec(z))){m.val(q[1]);u.val(q[2])}else{m.val("")}if((q=/^(\d+)((?:px|%)*)$/.exec(k))){C.val(q[1]);s.val(q[2])}o.val(l[0].style.textAlign||"");w.val(l[0].style.verticalAlign||"");var x=l[0].style.borderWidth||"";if(x){x=parseInt(x)}r.val(x);i(n.eq(0),f.toHex(l[0].style.borderColor||""));i(n.eq(1),f.toHex(l[0].style.backgroundColor||""));m[0].focus();m[0].select()},insert:function(){this.prop(true)},"delete":function(){var k=j.plugin.getSelectedTable();j.cmd.range.setStartBefore(k[0]).collapse(true);j.cmd.select();k.remove();j.addBookmark()},colinsert:function(k){var q=j.plugin.getSelectedTable()[0],s=j.plugin.getSelectedRow()[0],p=j.plugin.getSelectedCell()[0],n=p.cellIndex+k;n+=q.rows[0].cells.length-s.cells.length;for(var m=0,o=q.rows.length;m<o;m++){var r=q.rows[m],l=r.insertCell(n);l.innerHTML=f.IE?"":"<br />";n=e(q,r,l)}j.cmd.range.selectNodeContents(p).collapse(true);j.cmd.select();j.addBookmark()},colinsertleft:function(){this.colinsert(0)},colinsertright:function(){this.colinsert(1)},rowinsert:function(n){var u=j.plugin.getSelectedTable()[0],w=j.plugin.getSelectedRow()[0],s=j.plugin.getSelectedCell()[0];var r=w.rowIndex;if(n===1){r=w.rowIndex+(s.rowSpan-1)+n}var v=u.insertRow(r);for(var p=0,q=w.cells.length;p<q;p++){if(w.cells[p].rowSpan>1){q-=w.cells[p].rowSpan-1}var o=v.insertCell(p);if(n===1&&w.cells[p].colSpan>1){o.colSpan=w.cells[p].colSpan}o.innerHTML=f.IE?"":"<br />"}for(var m=r;m>=0;m--){var t=u.rows[m].cells;if(t.length>p){for(var l=s.cellIndex;l>=0;l--){if(t[l].rowSpan>1){t[l].rowSpan+=1}}break}}j.cmd.range.selectNodeContents(s).collapse(true);j.cmd.select();j.addBookmark()},rowinsertabove:function(){this.rowinsert(0)},rowinsertbelow:function(){this.rowinsert(1)},rowmerge:function(){var p=j.plugin.getSelectedTable()[0],q=j.plugin.getSelectedRow()[0],k=j.plugin.getSelectedCell()[0],r=q.rowIndex,m=r+k.rowSpan,o=p.rows[m];if(p.rows.length<=m){return}var l=k.cellIndex;if(o.cells.length<=l){return}var n=o.cells[l];if(k.colSpan!==n.colSpan){return}k.rowSpan+=n.rowSpan;o.deleteCell(l);j.cmd.range.selectNodeContents(k).collapse(true);j.cmd.select();j.addBookmark()},colmerge:function(){var o=j.plugin.getSelectedTable()[0],p=j.plugin.getSelectedRow()[0],k=j.plugin.getSelectedCell()[0],q=p.rowIndex,m=k.cellIndex,l=m+1;if(p.cells.length<=l){return}var n=p.cells[l];if(k.rowSpan!==n.rowSpan){return}k.colSpan+=n.colSpan;p.deleteCell(l);j.cmd.range.selectNodeContents(k).collapse(true);j.cmd.select();j.addBookmark()},rowsplit:function(){var q=j.plugin.getSelectedTable()[0],s=j.plugin.getSelectedRow()[0],p=j.plugin.getSelectedCell()[0],o=s.rowIndex;if(p.rowSpan===1){return}var n=e(q,s,p);for(var l=1,m=p.rowSpan;l<m;l++){var r=q.rows[o+l],k=r.insertCell(n);if(p.colSpan>1){k.colSpan=p.colSpan}k.innerHTML=f.IE?"":"<br />";n=e(q,r,k)}f(p).removeAttr("rowSpan");j.cmd.range.selectNodeContents(p).collapse(true);j.cmd.select();j.addBookmark()},colsplit:function(){var o=j.plugin.getSelectedTable()[0],q=j.plugin.getSelectedRow()[0],l=j.plugin.getSelectedCell()[0],m=l.cellIndex;if(l.colSpan===1){return}for(var n=1,k=l.colSpan;n<k;n++){var p=q.insertCell(m+n);if(l.rowSpan>1){p.rowSpan=l.rowSpan}p.innerHTML=f.IE?"":"<br />"}f(l).removeAttr("colSpan");j.cmd.range.selectNodeContents(l).collapse(true);j.cmd.select();j.addBookmark()},coldelete:function(){var p=j.plugin.getSelectedTable()[0],r=j.plugin.getSelectedRow()[0],l=j.plugin.getSelectedCell()[0],n=l.cellIndex;for(var o=0,k=p.rows.length;o<k;o++){var m=p.rows[o],q=m.cells[n];if(q.colSpan>1){q.colSpan-=1;if(q.colSpan===1){f(q).removeAttr("colSpan")}}else{m.deleteCell(n)}if(q.rowSpan>1){o+=q.rowSpan-1}}if(r.cells.length===0){j.cmd.range.setStartBefore(p).collapse(true);j.cmd.select();f(p).remove()}else{j.cmd.selection(true)}j.addBookmark()},rowdelete:function(){var m=j.plugin.getSelectedTable()[0],n=j.plugin.getSelectedRow()[0],k=j.plugin.getSelectedCell()[0],o=n.rowIndex;for(var l=k.rowSpan-1;l>=0;l--){m.deleteRow(o+l)}if(m.rows.length===0){j.cmd.range.setStartBefore(m).collapse(true);j.cmd.select();f(m).remove()}else{j.cmd.selection(true)}j.addBookmark()}};j.clickToolbar(c,j.plugin.table.prop)});KindEditor.plugin("template",function(b){var c=this,d="template",f=c.lang(d+"."),e=c.pluginsPath+d+"/html/";function g(h){return e+h+"?ver="+encodeURIComponent(b.DEBUG?b.TIME:b.VERSION)}c.clickToolbar(d,function(){var m=c.lang(d+"."),h=['<div style="padding:10px 20px;">','<div class="ke-header">','<div class="ke-left">',m.selectTemplate+" <select>"];b.each(m.fileList,function(n,o){h.push('<option value="'+n+'">'+o+"</option>")});html=[h.join(""),"</select></div>",'<div class="ke-right">','<input type="checkbox" id="keReplaceFlag" name="replaceFlag" value="1" /> <label for="keReplaceFlag">'+m.replaceContent+"</label>","</div>",'<div class="ke-clearfix"></div>',"</div>",'<iframe class="ke-textarea" frameborder="0" style="width:458px;height:260px;background-color:#FFF;"></iframe>',"</div>"].join("");var i=c.createDialog({name:d,width:500,title:c.lang(d),body:html,yesBtn:{name:c.lang("yes"),click:function(o){var n=b.iframeDoc(j);c[k[0].checked?"html":"insertHtml"](n.body.innerHTML).hideDialog().focus()}}});var l=b("select",i.div),k=b('[name="replaceFlag"]',i.div),j=b("iframe",i.div);k[0].checked=true;j.attr("src",g(l.val()));l.change(function(){j.attr("src",g(this.value))})})});KindEditor.plugin("wordpaste",function(b){var c=this,d="wordpaste";c.clickToolbar(d,function(){var i=c.lang(d+"."),f='<div style="padding:10px 20px;"><div style="margin-bottom:10px;">'+i.comment+'</div><iframe class="ke-textarea" frameborder="0" style="width:408px;height:260px;"></iframe></div>',e=c.createDialog({name:d,width:450,title:c.lang(d),body:f,yesBtn:{name:c.lang("yes"),click:function(k){var l=h.body.innerHTML;l=b.clearMsWord(l,c.filterMode?c.htmlTags:b.options.htmlTags);c.insertHtml(l).hideDialog().focus()}}}),j=e.div,g=b("iframe",j),h=b.iframeDoc(g);if(!b.IE){h.designMode="on"}h.open();h.write("<!doctype html><html><head><title>WordPaste</title></head>");h.write('<body style="background-color:#FFF;font-size:12px;margin:2px;">');if(!b.IE){h.write("<br />")}h.write("</body></html>");h.close();if(b.IE){h.body.contentEditable="true"}g[0].contentWindow.focus()})});KindEditor.plugin("fixtoolbar",function(b){var c=this;if(!c.fixToolBar){return}function d(){var f=b(".ke-toolbar");var e=f.pos().y;b(window).bind("scroll",function(){if(f.css("position")=="fixed"){if(document.body.scrollTop-e<0){f.css("position","static");f.css("top","auto")}}else{if(f.pos().y-document.body.scrollTop<0){f.css("position","fixed");f.css("top",0)}}})}if(c.isCreated){d()}else{c.afterCreate(d)}});